var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,l,g){a instanceof String&&(a=String(a));for(var k=a.length,d=0;d<k;d++){var b=a[d];if(l.call(g,b,d,a))return{i:d,v:b}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,l,g){if(a==Array.prototype||a==Object.prototype)return a;a[l]=g.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var l=0;l<a.length;++l){var g=a[l];if(g&&g.Math==Math)return g}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,l){var g=$jscomp.propertyToPolyfillSymbol[l];if(null==g)return a[l];g=a[g];return void 0!==g?g:a[l]};
$jscomp.polyfill=function(a,l,g,k){l&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,l,g,k):$jscomp.polyfillUnisolated(a,l,g,k))};$jscomp.polyfillUnisolated=function(a,l,g,k){g=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var d=a[k];d in g||(g[d]={});g=g[d]}a=a[a.length-1];k=g[a];l=l(k);l!=k&&null!=l&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:l})};
$jscomp.polyfillIsolated=function(a,l,g,k){var d=a.split(".");a=1===d.length;k=d[0];k=!a&&k in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var b=0;b<d.length-1;b++){var h=d[b];h in k||(k[h]={});k=k[h]}d=d[d.length-1];g=$jscomp.IS_SYMBOL_NATIVE&&"es6"===g?k[d]:null;l=l(g);null!=l&&(a?$jscomp.defineProperty($jscomp.polyfills,d,{configurable:!0,writable:!0,value:l}):l!==g&&($jscomp.propertyToPolyfillSymbol[d]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(d):$jscomp.POLYFILL_PREFIX+d,d=$jscomp.propertyToPolyfillSymbol[d],
$jscomp.defineProperty(k,d,{configurable:!0,writable:!0,value:l})))};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,g){return $jscomp.findInternal(this,a,g).v}},"es6","es3");$jscomp.polyfill("Number.parseFloat",function(a){return a||parseFloat},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var l=0;return function(){return l<a.length?{done:!1,value:a[l++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var l=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};l.prototype.toString=function(){return this.$jscomp$symbol$id_};var g=0,k=function(a){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new l("jscomp_symbol_"+(a||"")+"_"+g++,a)};return k},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var l="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),g=0;g<l.length;g++){var k=$jscomp.global[l[g]];"function"===typeof k&&"function"!=typeof k.prototype[a]&&$jscomp.defineProperty(k.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,l){a instanceof String&&(a+="");var g=0,k={next:function(){if(g<a.length){var d=g++;return{value:l(d,a[d]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.owns=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(a,l){for(var g=1;g<arguments.length;g++){var k=arguments[g];if(k)for(var d in k)$jscomp.owns(k,d)&&(a[d]=k[d])}return a};
$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.makeIterator=function(a){var l="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return l?l.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function l(){this.batch_=null}function g(a){return a instanceof d?a:new d(function(b,h){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;l.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var k=$jscomp.global.setTimeout;l.prototype.asyncExecuteFunction=function(a){k(a,0)};l.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var d=a[b];a[b]=null;try{d()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};l.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var d=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(p){b.reject(p)}};d.prototype.createResolveAndReject_=function(){function a(a){return function(h){d||(d=!0,a.call(b,h))}}var b=this,d=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};d.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof d)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};d.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(p){this.reject_(p);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};d.prototype.reject_=function(a){this.settle_(2,a)};d.prototype.fulfill_=function(a){this.settle_(1,a)};d.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)b.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var b=new l;d.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};d.prototype.settleSameAsThenable_=function(a,b){var h=this.createResolveAndReject_();try{a.call(b,h.resolve,h.reject)}catch(m){h.reject(m)}};d.prototype.then=function(a,b){function h(a,b){return"function"==typeof a?function(b){try{g(a(b))}catch(G){f(G)}}:b}var g,f,q=new d(function(a,b){g=a;f=b});this.callWhenSettled_(h(a,g),h(b,f));return q};
d.prototype.catch=function(a){return this.then(void 0,a)};d.prototype.callWhenSettled_=function(a,d){function h(){switch(g.state_){case 1:a(g.result_);break;case 2:d(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?b.asyncExecute(h):this.onSettledCallbacks_.push(h)};d.resolve=g;d.reject=function(a){return new d(function(b,h){h(a)})};d.race=function(a){return new d(function(b,h){for(var d=$jscomp.makeIterator(a),f=d.next();!f.done;f=d.next())g(f.value).callWhenSettled_(b,
h)})};d.all=function(a){var b=$jscomp.makeIterator(a),h=b.next();return h.done?g([]):new d(function(a,d){function f(b){return function(h){m[b]=h;p--;0==p&&a(m)}}var m=[],p=0;do m.push(void 0),p++,g(h.value).callWhenSettled_(f(m.length-1),d),h=b.next();while(!h.done)})};return d},"es6","es3");$jscomp.polyfill("Number.isFinite",function(a){return a?a:function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a}},"es6","es3");
$jscomp.polyfill("Number.isInteger",function(a){return a?a:function(a){return Number.isFinite(a)?a===Math.floor(a):!1}},"es6","es3");
(function(a){var l=[],g=[],k=[],d=[];l[0]="January";l[1]="February";l[2]="March";l[3]="April";l[4]="May";l[5]="June";l[6]="July";l[7]="August";l[8]="September";l[9]="October";l[10]="November";l[11]="December";k[0]="Jan";k[1]="Feb";k[2]="Mar";k[3]="Apr";k[4]="May";k[5]="Jun";k[6]="Jul";k[7]="Aug";k[8]="Sept";k[9]="Oct";k[10]="Nov";k[11]="Dec";g[1]="Monday";g[2]="Tuesday";g[3]="Wednesday";g[4]="Thursday";g[5]="Friday";g[6]="Saturday";g[0]="Sunday";d[1]="Mon";d[2]="Tue";d[3]="Wed";d[4]="Thu";d[5]="Fri";
d[6]="Sat";d[0]="Sun";var b={init:function(h){void 0==b.data?(b.data={},a.extend(b.data,h)):a.error("[CRIT] Cannot make multiple instances of jQuery.Validation");return this},ChangeInputFormatType:function(a,b){if(-1!=a.inputFormatType.indexOf("@@")&&-1!=a.inputFormatType.indexOf("REGEXP_LIKE")){a=a.inputFormatType.replace(/@@/g,"").replace("["+a.name+"]",b);var h=eval("$.EXEC_"+a);null==h&&(h=eval("$."+a));h[0]!=b&&(b=h[0]);return b}h=a.inputFormatType.replace(/[Zz9^#]/g,"_").split("");if(b.length<
h.length)for(;b.length!=h.length&&"_"!=h[b.length];)b=b.concat(h[b.length]);h=a.inputFormatType.split("");for(var d=b.split(""),f=d.length,g=0;g<d.length;g++)if("Z"==h[g])d[g]>=String.fromCharCode(65)&&d[g]<=String.fromCharCode(90)||d.splice(g,f);else if("z"==h[g])d[g]>=String.fromCharCode(97)&&d[g]<=String.fromCharCode(122)||d.splice(g,f);else if("9"==h[g])d[g]>=String.fromCharCode(48)&&d[g]<=String.fromCharCode(57)?d.join(""):d.splice(g,f);else if("^"==h[g])d[g]>=String.fromCharCode(65)&&d[g]<=
String.fromCharCode(90)||d[g]>=String.fromCharCode(97)&&d[g]<=String.fromCharCode(122)?d.join(""):d.splice(g,f);else if("#"==h[g])d[g]>=String.fromCharCode(48)&&d[g]<=String.fromCharCode(57)||d[g]>=String.fromCharCode(65)&&d[g]<=String.fromCharCode(97)||d[g]>=String.fromCharCode(97)&&d[g]<=String.fromCharCode(122)?d.join(""):d.splice(g,f);else{if(void 0==h[g])return d.splice(0,g).join("");if(b.charCodeAt(g)!=a.inputFormatType.charCodeAt(g)){if("Z"==h[g+1]&&d[g]>=String.fromCharCode(65)&&d[g]<=String.fromCharCode(90))d[g+
1]=d[g];else if("z"==h[g+1]&&d[g]>=String.fromCharCode(97)&&d[g]<=String.fromCharCode(122))d[g+1]=d[g];else if("9"==h[g+1]&&d[g]>=String.fromCharCode(48)&&d[g]<=String.fromCharCode(57))d[g+1]=d[g];else if("^"==h[g+1]&&d[g]>=String.fromCharCode(65)&&d[g]<=String.fromCharCode(90)||d[g]>=String.fromCharCode(97)&&d[g]<=String.fromCharCode(122))d[g+1]=d[g];else if("#"==h[g+1]&&d[g]>=String.fromCharCode(48)&&d[g]<=String.fromCharCode(57)||d[g]>=String.fromCharCode(65)&&d[g]<=String.fromCharCode(97)||d[g]>=
String.fromCharCode(97)&&d[g]<=String.fromCharCode(122))d[g+1]=d[g];d[g]=a.inputFormatType.charAt(g);g+=1}}return d.join("")},ChangeDateInputFormatType:function(a,b){var h="";if(3<b.length){if("yyyy"==a.inputFormatType.toString().toLowerCase())return!isNaN(b)&&1900<=b&&2080>=b?b:"";var d="-";if("yyyy-mm-dd hh:mm:ss"==a.inputFormatType.toString().toLowerCase()||"yyyy-mm-dd"==a.inputFormatType.toString().toLowerCase())d="-";else if("yyyy/mm/dd hh:mm:ss"==a.inputFormatType.toString().toLowerCase()||
"yyyy/mm/dd"==a.inputFormatType.toString().toLowerCase())d="/";b=b.split(d);for(var f in b)if(0==f)if(!isNaN(b[f])&&1900<=b[f]&&2080>=b[f])h=h+b[f]+d;else return"";else if(1==f){var g=b[f].toString();if(""===g.charAt(1))if(!isNaN(b[f])&&0<=parseInt(g.charAt(0))&&1>=parseInt(g.charAt(0)))h+=b[f];else break;else 0==parseInt(g.charAt(0))?!isNaN(g.charAt(1))&&1<=parseInt(g.charAt(1))&&9>=parseInt(g.charAt(1))&&(h=h+b[f]+d):1==parseInt(g.charAt(0))&&!isNaN(g.charAt(1))&&1<=parseInt(g.charAt(1))&&2>=parseInt(g.charAt(1))&&
(h=h+b[f]+d)}else if(2==f){g=b[f].split(" ");""==g[1]&&g.splice(1,1);for(var k in g)if(0==k){var q=g[k].toString();if(("yyyy/mm/dd"==a.inputFormatType.toString().toLowerCase()||"yyyy-mm-dd"==a.inputFormatType.toString().toLowerCase())&&2<q.length)return h;if(""===q.charAt(1))if(!isNaN(g[k])&&0<=parseInt(q.charAt(0))&&3>=parseInt(q.charAt(0)))h+=g[k];else return h;else 0==parseInt(q.charAt(0))?!isNaN(q.charAt(1))&&1<=parseInt(q.charAt(1))&&9>=parseInt(q.charAt(1))&&(h="yyyy/mm/dd"==a.inputFormatType.toString().toLowerCase()||
"yyyy-mm-dd"==a.inputFormatType.toString().toLowerCase()?h+g[k]:h+g[k]+" "):1<=parseInt(q.charAt(0))&&2>=parseInt(q.charAt(0))?!isNaN(q.charAt(1))&&0<=parseInt(q.charAt(1))&&9>=parseInt(q.charAt(1))&&(h="yyyy/mm/dd"==a.inputFormatType.toString().toLowerCase()||"yyyy-mm-dd"==a.inputFormatType.toString().toLowerCase()?h+g[k]:h+g[k]+" "):3==parseInt(q.charAt(0))&&!isNaN(q.charAt(1))&&0<=parseInt(q.charAt(1))&&1>=parseInt(q.charAt(1))&&(h="yyyy/mm/dd"==a.inputFormatType.toString().toLowerCase()||"yyyy-mm-dd"==
a.inputFormatType.toString().toLowerCase()?h+g[k]:h+g[k]+" ")}else if(1==k){q=g[k].split(":");for(var l in q)if(0==l)if(""===q[l].charAt(1))if(!isNaN(q[l])&&0<=parseInt(q[l].charAt(0))&&2>=parseInt(q[l].charAt(0)))h+=q[l];else return h;else 0==parseInt(q[l].charAt(0))?!isNaN(q[l].charAt(1))&&0<=parseInt(q[l].charAt(1))&&9>=parseInt(q[l].charAt(1))&&(h=h+q[l]+":"):1==parseInt(q[l].charAt(0))?!isNaN(q[l].charAt(1))&&0<=parseInt(q[l].charAt(1))&&9>=parseInt(q[l].charAt(1))&&(h=h+q[l]+":"):2==parseInt(q[l].charAt(0))&&
!isNaN(q[l].charAt(1))&&0<=parseInt(q[l].charAt(1))&&3>=parseInt(q[l].charAt(1))&&(h=h+q[l]+":");else if(1==l)if(""===q[l].charAt(1))if(!isNaN(q[l])&&0<=parseInt(q[l].charAt(0))&&5>=parseInt(q[l].charAt(0)))h+=q[l];else return h;else 0==parseInt(q[l].charAt(0))?!isNaN(q[l].charAt(1))&&0<=parseInt(q[l].charAt(1))&&9>=parseInt(q[l].charAt(1))&&(h=h+q[l]+":"):1<=parseInt(q[l].charAt(0))&&5>=parseInt(q[l].charAt(0))&&!isNaN(q[l].charAt(1))&&0<=parseInt(q[l].charAt(1))&&9>=parseInt(q[l].charAt(1))&&(h=
h+q[l]+":");else if(2==l)if(""===q[l].charAt(1))if(!isNaN(q[l])&&0<=parseInt(q[l].charAt(0))&&5>=parseInt(q[l].charAt(0)))h+=q[l];else return h;else 0==parseInt(q[l].charAt(0))?!isNaN(q[l].charAt(1))&&0<=parseInt(q[l].charAt(1))&&9>=parseInt(q[l].charAt(1))&&(h=h+q[l].charAt(0)+""+q[l].charAt(1)):1<=parseInt(q[l].charAt(0))&&5>=parseInt(q[l].charAt(0))&&!isNaN(q[l].charAt(1))&&0<=parseInt(q[l].charAt(1))&&9>=parseInt(q[l].charAt(1))&&(h=h+q[l].charAt(0)+""+q[l].charAt(1))}}return h}return isNaN(b)?
"":b},validateRegexInput:function(a){a=a.replace(/@@/g,"");var b=eval("$.EXEC_"+a);return null==b?b=eval("$."+a):b[0]},validateCharacterInput:function(a,b){var h=/[9*]/gi,d=/(YYYY|MM|DD|HH|MM|SS)/gi,f="";null!=a.match(d)?f=a.replace(d,""):null!=a.match(h)?f=a.replace(h,""):console.log("------ not-supported pattern occured --------",a);a=-1<f.split("").indexOf(b)?!0:!1;h=b.charCodeAt(0);if(48<=h&&57>=h||a)return!0;console.log("Invalid character : ",b);return!1},SetValueasInputFormat:function(b,d){var h=
/(HH|hh|mm|ss)/g,g=/[9*]/g;null!=b.match(h)?(h=b.replace(h,""),d=a.setTimeFormat(d,b,h)):null!=b.match(g)&&(h=b.replace(g,""),d=a.setNumberFormat(d,b,h));return d},validateDateInput:function(b,d){var h={index:0,specifier:""};a.validateDateFormat(b,d,h);return b.toString().substr(0,h.index)+h.specifier},changeFormat:function(b,d){if(0==d.length)return d;switch(b.formatType){case "Number":return a.validate("ChangeNumberFormat",b,d);case "DateTime":return a.validate("ChangeDateFormat",b,d);default:return d}},
ChangeNumberFormat:function(b,d){switch(b.formatSubtype.toLowerCase()){case "double":return a.validate("ChangeDoubleFormat",b,d);case "integer":return a.validate("ChangeIntegerFormat",b,d);case "boolean":return a.validate("ChangeBooleanFormat",b,d);default:return d}},ChangeDateFormat:function(b,d){void 0!=d&&(d=d.toString());var h=navigator.userAgent.toLowerCase();-1==h.indexOf("safari")||-1<h.indexOf("chrome")||(d=d.replace(/-/g,"/"));switch(b.formatSubtype.toLowerCase()){case "fulldaytime":return a.validate("convertToFullDayTime",
d);case "longdaytime":return a.validate("convertToLongDayTime",d);case "middledaytime":return a.validate("convertToMiddleDayTime",d);case "shortdaytime":return a.validate("convertToShortDayTime",d);case "fullday":return a.validate("convertToFullDay",d);case "longday":return a.validate("convertToLongDay",d);case "middleday":return a.validate("convertToMiddleDay",d);case "shortday":return a.validate("convertToShortDay",d);case "fulltime":return a.validate("convertToFullTime",d);case "longtime":return a.validate("convertToLongTime",
d);case "middletime":return a.validate("convertToMiddleTime",d);case "shorttime":return a.validate("convertToShortTime",d);case "custom":case "datetime":return a.validate("convertToCustomDateTime",b,d);case "":return d;default:return b.specifierType=b.formatSubtype,a.validate("convertToCustomDateTime",b,d)}},ChangeBooleanFormat:function(a,b){a=a.specifierType;var d=!1;b=b.toString();if("yes"==b.toLowerCase()||"1"==b.toLowerCase()||"true"==b.toLowerCase())d=!0;else if("no"==b.toLowerCase()||"0"==b.toLowerCase()||
"false"==b.toLowerCase())d=!1;if("y"===a)return d?bool="yes":bool="no";if("d"===a)return d?bool="1":bool="0";if("t"===a)return d?bool=!0:bool=!1},ChangeDoubleFormat:function(b,d){switch(b.specifierType){case "f":return""!=b.formatSpecifier?a.validate("ConvertToCustomNumber",b.formatSpecifier,d):-1!=d.toString().indexOf(".")?parseFloat(Number(d)):parseFloat(Number(d)).toFixed(2);case "e":return a.validate("convertToExponential",d);default:return d}},ChangeIntegerFormat:function(b,d){switch(b.specifierType){case "d":if(isNaN(Number(d.toString().replace(/,/gi,
"")).toFixed(0)))return"";d=Number(d.toString().replace(/,/gi,"")).toFixed(0);return""!=b.formatSpecifier?a.validate("ConvertToCustomNumber",b.formatSpecifier,d):d;case "b":return a.validate("convertToBinary",d);case "o":return a.validate("convertToOctet",d);case "x":return a.validate("convertToHexadecimal",d);default:return d}},ConvertToCustomNumber:function(a,b){if(""===b)return"";var d=a.split("");if("f"==d[d.length-1]){d.splice(d.length-1,1);a=d.join("");var h=a.split(".")[0];d=b.split(".")[0].split("");
var f=a.split(".")[1],g=b.split(".")[1].split("");b=d.slice();b[b.length]=".";if(void 0!=g)if(g.length>f)g=g.splice(0,f);else{if(g.length<f){a=g.length;for(var k=0;k<f-a;k++)g[a+k]="0"}}else for(k=0;k<f;k++)g[k]="0";if(d.length+g.length>h)b=b.concat(g);else if(d.length+g.length<h)for(b=b.concat(g),k=0;k<h-(d.length+g.length);k++)b.unshift("0");return b.join("")}if(-1!==a.indexOf("0")){if(void 0==b.toString()||-1!==a.indexOf("."))return b;g="";-1!==b.indexOf(".")&&(b=b.split(".")[0]);h=b.split("");
k=h.length;f=a.toString().length;var l=f-k;if(-1!==a.indexOf(",")){if(0<l){var q=0;b=a.toString().substring(l,f).split("");for(k=0;k<b.length;k++)g=g.concat(h[k]),","===b[k]&&(g=g.concat(","),q++);return a.toString().substring(0,l-q).concat(g)}a=a.split(",").join("").length;a=k-a;for(k=q=0;k<f;k++)","===d[k]?(g=g.concat(","),q++):g=g.concat(h[a+k-q]);return b.substring(0,a).concat(g)}return 0<l?(a=a.toString().substring(0,l),a+b.toString()):b}f=a.split(".")[1];g=b.split(".")[1];if(void 0!=f)if(void 0!=
g){if(f.length!==g.length)if(f.length<g.length)g=g.substring(0,f.length);else if(f.length>g.length)for(k=g.length;k<f.length;k++)g+="0"}else{if(void 0==g)for(g="",k=0;k<f.length;k++)g+="0"}else void 0==f&&(g="");h=a.split(".")[0].split("");k=b.split(".")[0];k=k.replace(/,/gi,"");d=k.split("");l=f=0;b=h.slice();for(k=0;k<h.length;k++)if(","!==h[k])if(void 0!=d[f])b[k]=d[f],l=k,f++;else break;if(d.length>h.length)for(;f<h.length;f++)b.push(d[f]);else d.length<h.length&&(b=b.splice(0,l+1));k=b.join("");
-1!==a.indexOf(",")&&-1!==k.indexOf(",")&&(k=k.replace(/,/g,""));return isNaN(k)?"":0<g.length?b.join("")+"."+g:b.join("")},convertToBinary:function(a){if(isNaN(Number(a).toString()))return a;a=Number(a).toFixed(0);return Number(a).toString(2)},convertToOctet:function(a){if(isNaN(Number(a).toString()))return a;a=Number(a).toFixed(0);return Number(a).toString(8)},convertToHexadecimal:function(a){if(isNaN(Number(a).toString()))return a;a=Number(a).toFixed(0);return Number(a).toString(16)},convertToExponential:function(a){a=
Number(a).toExponential();return a=a.replace("+","")},convertToFullDayTime:function(b){if(-1==b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=a.validate("convertDateTo12HourFormat",b);b=new Date(b);return"Invalid Date"!=b?b=g[b.getDay()]+","+l[b.getMonth()]+" "+(1==b.getDate().toString().length?"0"+b.getDate():b.getDate())+","+b.getFullYear()+" "+(12<b.getHours()?b.getHours()-12:b.getHours())+":"+(1==b.getMinutes().toString().length?"0"+b.getMinutes():b.getMinutes())+":"+(1==b.getSeconds().toString().length?
"0"+b.getSeconds():b.getSeconds())+" "+(12<=b.getHours()?"PM":"AM")+" "+b.toString().substring(b.toString().indexOf("(")+1,b.toString().indexOf(")")):"Error"},convertToLongDayTime:function(b){var d;if(-1==b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=a.validate("convertDateTo12HourFormat",b);try{return b=new Date(b),isNaN(b.getDate())?"Error":d=l[b.getMonth()]+" "+(1==b.getDate().toString().length?"0"+b.getDate():b.getDate())+","+b.getFullYear()+" "+(12<b.getHours()?b.getHours()-
12:b.getHours())+":"+(1==b.getMinutes().toString().length?"0"+b.getMinutes():b.getMinutes())+":"+(1==b.getSeconds().toString().length?"0"+b.getSeconds():b.getSeconds())+" "+(12<=b.getHours()?"PM":"AM")+" GMT"+b.toString().substring(b.toString().indexOf("GMT")+3,b.toString().indexOf("(")-1)}catch(p){return"Error"}},convertToMiddleDayTime:function(b){var d;if(-1==b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=a.validate("convertDateTo12HourFormat",b);try{return b=new Date(b),isNaN(b.getDate())?
"Error":d=l[b.getMonth()].substring(0,3)+" "+(1==b.getDate().toString().length?"0"+b.getDate():b.getDate())+","+b.getFullYear()+" "+(12<b.getHours()?b.getHours()-12:b.getHours())+":"+(1==b.getMinutes().toString().length?"0"+b.getMinutes():b.getMinutes())+":"+(1==b.getSeconds().toString().length?"0"+b.getSeconds():b.getSeconds())+" "+(12<=b.getHours()?"PM":"AM")}catch(p){return"Error"}},convertToShortDayTime:function(b){var d;if(-1==b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=
a.validate("convertDateTo12HourFormat",b);try{return b=new Date(b),isNaN(b.getDate())?"Error":d=b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear().toString().substring(2,b.getFullYear().toString().length)+" "+(12<b.getHours()?10>b.getHours()-12?"0"+(b.getHours()-12):b.getHours():10>b.getHours()?"0"+b.getHours():b.getHours())+":"+(1==b.getMinutes().toString().length?"0"+b.getMinutes():b.getMinutes())+" "+(12<=b.getHours()?"PM":"AM")}catch(p){return"Error"}},convertToFullDay:function(b){var d;try{if(-1==
b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=a.validate("convertDateTo12HourFormat",b);b=new Date(b);return isNaN(b.getDate())?"Error":d=g[b.getDay()]+","+l[b.getMonth()]+" "+(1==b.getDate().toString().length?"0"+b.getDate():b.getDate())+","+b.getFullYear()}catch(p){return"Error"}},convertToLongDay:function(b){var d;if(-1==b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=a.validate("convertDateTo12HourFormat",b);try{return b=new Date(b),isNaN(b.getDate())?"Error":
d=l[b.getMonth()]+" "+(1==b.getDate().toString().length?"0"+b.getDate():b.getDate())+","+b.getFullYear()+" "}catch(p){return"Error"}},convertToMiddleDay:function(b){var d;if(-1==b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=a.validate("convertDateTo12HourFormat",b);try{return b=new Date(b),isNaN(b.getDate())?"Error":d=l[b.getMonth()].substring(0,3)+" "+(1==b.getDate().toString().length?"0"+b.getDate():b.getDate())+","+b.getFullYear()}catch(p){return"Error"}},convertToShortDay:function(b){var d;
if(-1==b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=a.validate("convertDateTo12HourFormat",b);try{return b=new Date(b),isNaN(b.getDate())?"Error":d=b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear().toString().substring(2,b.getFullYear().toString().length)}catch(p){return"Error"}},convertToFullTime:function(b){var d;try{if("Invalid Date"!=new Date(b)){if(-1==b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=a.validate("convertDateTo12HourFormat",b);b=new Date(b);
return isNaN(b.getDate())?"Error":d=(12<b.getHours()?b.getHours()-12:b.getHours())+":"+(1==b.getMinutes().toString().length?"0"+b.getMinutes():b.getMinutes())+":"+(1==b.getSeconds().toString().length?"0"+b.getSeconds():b.getSeconds())+" "+(12<=b.getHours()?"PM":"AM")+" "+b.toString().substring(b.toString().indexOf("(")+1,b.toString().indexOf(")"))}b=a.validateTime(b);return"Invalid Time"!=b?d=(1==b.hh.toString().length?"0"+b.hh:b.hh)+":"+(1==b.mm.toString().length?"0"+b.mm:b.mm)+":"+(1==b.ss.toString().length?
"0"+b.ss:b.ss)+" "+(12>=b.hh&&""!=b["am/pm"]?b["am/pm"]:""):"Error"}catch(p){}},convertToLongTime:function(b){var d;try{if("Invalid Date"!=new Date(b)){if(-1==b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=a.validate("convertDateTo12HourFormat",b);b=new Date(b);if(isNaN(b.getDate()))return"Error";b.toString().substring(b.toString().indexOf("(")+1,b.toString().indexOf(")"));return d=(12<b.getHours()?b.getHours()-12:b.getHours())+":"+(1==b.getMinutes().toString().length?"0"+b.getMinutes():
b.getMinutes())+":"+(1==b.getSeconds().toString().length?"0"+b.getSeconds():b.getSeconds())+" "+(12<=b.getHours()?"PM":"AM")+" GMT"+b.toString().substring(b.toString().indexOf("GMT")+3,b.toString().indexOf("(")-1)}b=a.validateTime(b);if("Invalid Time"!=b){var h=new Date;var g=h.toString().substring(h.toString().indexOf("(")+1,h.toString().indexOf(")"));return d=(1==b.hh.toString().length?"0"+b.hh:b.hh)+":"+(1==b.mm.toString().length?"0"+b.mm:b.mm)+":"+(1==b.ss.toString().length?"0"+b.ss:b.ss)+" "+
(12>=b.hh&&""!=b["am/pm"]?b["am/pm"]:"")+" "+g}return"Error"}catch(f){return"Error"}},convertToMiddleTime:function(b){var d;try{if("Invalid Date"!=new Date(b)){if(-1==b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=a.validate("convertDateTo12HourFormat",b);b=new Date(b);return isNaN(b.getDate())?"Error":d=(12<b.getHours()?b.getHours()-12:b.getHours())+":"+(1==b.getMinutes().toString().length?"0"+b.getMinutes():b.getMinutes())+":"+(1==b.getSeconds().toString().length?"0"+b.getSeconds():
b.getSeconds())+" "+(12<=b.getHours()?"PM":"AM")}b=a.validateTime(b);return"Invalid Time"!=b?d=(1==b.hh.toString().length?"0"+b.hh:b.hh)+":"+(1==b.mm.toString().length?"0"+b.mm:b.mm)+":"+(1==b.ss.toString().length?"0"+b.ss:b.ss)+" "+(12>=b.hh&&""!=b["am/pm"]?b["am/pm"]:""):"Error"}catch(p){return"Error"}},convertToShortTime:function(b){var d;try{if("Invalid Date"!=new Date(b)){if(-1==b.toLowerCase().indexOf("am")||-1==b.toLowerCase().indexOf("pm"))b=a.validate("convertDateTo12HourFormat",b);b=new Date(b);
return isNaN(b.getDate())?"Error":d=(12<b.getHours()?b.getHours()-12:b.getHours())+":"+(1==b.getMinutes().toString().length?"0"+b.getMinutes():b.getMinutes())+" "+(12<=b.hh?"PM":"AM")}b=a.validateTime(b);return"Invalid Time"!=b?d=(1==b.hh.toString().length?"0"+b.hh:b.hh)+":"+(1==b.mm.toString().length?"0"+b.mm:b.mm)+" "+(12>=b.hh&&""!=b["am/pm"]?b["am/pm"]:""):"Error"}catch(p){return"Error"}},convertDateTo12HourFormat:function(a){var b=new Date(a);if("Invalid Date"!=b){var d=b.getHours();var h=b.getMinutes();
var f=b.getSeconds()}else-1!=b.toString().indexOf(":")&&(f=b.toString().split(":"),d=f[0],h=f[1],f=f[2]);b="AM";var g=d;12<=g&&(g=d-12,b="PM");0==g&&(g=12);h=void 0!=h&&10>h?"0"+h:h;f=void 0!=f&&10>f?"0"+f:f;f=void 0!=f?"00":f;return a.replace(new RegExp("0?"+d+":"+h+":"+f),g+":"+h+":"+f+(" "+b))},convertToCustomDateTime:function(b,q){try{var h=navigator.userAgent.toLowerCase();-1==h.indexOf("safari")||-1<h.indexOf("chrome")||(q=q.replace(/-/g,"/"));var m=new Date(q),f=b.formatSpecifier;if("Invalid Date"==
m)return q;if(-1<f.indexOf("MMMMM")||1==(f.match(/y/g)||[]).length||3==(f.match(/y/g)||[]).length||4<(f.match(/y/g)||[]).length)return"Invalid Format";b={};-1<f.indexOf("a")||-1<f.indexOf("p")||-1<f.indexOf("A")||-1<f.indexOf("P")?b.hh=b.HH=0<=m.getHours()&&9>=m.getHours()?"0"+m.getHours().toString():12<m.getHours()?m.getHours()-12:m.getHours():b.hh=b.HH=0<=m.getHours()&&9>=m.getHours()?"0"+m.getHours().toString():m.getHours();b.h=b.H=m.getHours();b.mm=0<=m.getMinutes()&&9>=m.getMinutes()?"0"+m.getMinutes().toString():
m.getMinutes();b.m=m.getMinutes();b.ss=0<=m.getSeconds()&&9>=m.getSeconds()?"0"+m.getSeconds().toString():m.getSeconds();b.s=m.getSeconds();b.a=b.p=b.A=b.P=b.am=b.pm=b.AM=b.PM=12<=m.getHours()?"pm":"am";var u=new Date(m.getFullYear(),0,1),w=Math.ceil(((m-u)/864E5+u.getDay()+1)/7);b.ww=0<=w&&9>=w?"0"+w.toString():w.toString();b.w=w;b.yyyy=m.getFullYear();b.yy=m.getFullYear().toString().substring(2,4);b.MMMM=l[m.getMonth()];b.MMM=k[m.getMonth()];b.MM=0<=m.getMonth()&&9>m.getMonth()?"0"+parseInt(m.getMonth()+
1).toString():m.getMonth()+1;b.M=m.getMonth()+1;b.dd=0<=m.getDate()&&9>=m.getDate()?"0"+m.getDate().toString():m.getDate();b.d=m.getDate();b.ZZ=b.zz=m.toString().substring(m.toString().indexOf("GMT")+3,m.toString().indexOf("(")-1);b.Z=b.z=m.toString().substring(m.toString().indexOf("(")+1,m.toString().indexOf(")")).replace(/[a-z ]/g,"");b.EEEE=g[m.getDay()];b.EEE=d[m.getDay()];b.EE=d[m.getDay()];b.E=d[m.getDay()];a.each(b,function(a,b){f=f.toString().replace(a,b)})}catch(y){return q}return f}};a.validateTime=
function(a){a=a.toString().toLowerCase();var b=a.split(":");if(isNaN(b[0]))return"Invalid Time";a=-1!=a.indexOf("am")||-1!=a.indexOf("pm")?0<=b[0]&&12>=b[0]?1==b[0].toString().length?"0"+b[0].toString():b[0]:"Invalid Time":0<=b[0]&&23>=b[0]?1==b[0].toString().length?"0"+b[0].toString():b[0]:"Invalid Time";if("Invalid Time"==a)return a;if(2==b.length){var d=b[1].split(" ");if(isNaN(d[0]))return"Invalid Time";b=0<=d[0]&&59>=d[0]?1==d[0].toString().length?"0"+d[0].toString():d[0]:"Invalid Time";if("Invalid Time"==
b)return b}else if(3==b.length){d=b[2].split(" ");if(isNaN(b[1]))return"Invalid Time";b=0<=b[1]&&59>=b[1]?1==b[1].toString().length?"0"+b[1].toString():b[1]:"Invalid Time";if("Invalid Time"==b)return b;if(isNaN(d[0]))return"Invalid Time";var g=0<=d[0]&&59>=d[0]?1==d[0].toString().length?"0"+d[0].toString():d[0]:"Invalid Time";if("Invalid Time"==g)return g}else return inputDateTime;timeJSON={};timeJSON.hh=void 0==a?"0":a;timeJSON.mm=void 0==b?"0":b;timeJSON.ss=void 0==g?"0":g;timeJSON["am/pm"]=void 0==
d[1]?"":d[1].toUpperCase();return timeJSON};a.validateDateFormat=function(b,d,g){if("yyyy"===d.substr(0,4).toLowerCase())if(4<b.length)!isNaN(b.substr(0,4))&&1E3<=parseInt(b)?(g.index+=4,a.validateDateFormat(b.substr(4,b.length),d.substr(4,d.length),g)):isNaN(b.substr(0,4))&&b.substr(3,1)==d.substr(4,1)&&(g.index=parseInt(b).toString().length,g.specifier="");else{if(1!=b.length||0!=parseInt(b))4==b.length?isNaN(b.substr(0,4))||(g.index+=4,a.isSpecifier(d.substr(4,1))&&(g.specifier=d.substr(4,1))):
isNaN(b)||(g.index+=b.length)}else if("MM"===d.substr(0,2))if(2<b.length)if(isNaN(b)){var h=b.substr(0,2);!isNaN(b.substr(0,2))&&0<parseInt(h)&&12>=parseInt(h)&&(g.index+=2,a.validateDateFormat(b.substr(2,b.length),d.substr(2,d.length),g))}else a.validateDateFormat(b.substr(0,2),d.substr(0,2),g);else 2==b.length?!isNaN(b.substr(0,2))&&0<parseInt(b)&&12>=parseInt(b)?(g.index+=2,a.isSpecifier(d.substr(2,1))&&(g.specifier=d.substr(2,1))):1==b.length&&(g.index+=1):isNaN(b)||0>parseInt(b)||1<parseInt(b)||
(g.index+=b.length);else"dd"===d.substr(0,2).toLowerCase()?2<b.length?isNaN(b.substr(0,2))||(g.index+=2,a.validateDateFormat(b.substr(2,b.length),d.substr(2,d.length),g)):2==b.length?!isNaN(b.substr(0,2))&&0<parseInt(b)&&31>=parseInt(b)?(g.index+=2,a.isSpecifier(d.substr(2,1))&&(g.specifier=d.substr(2,1))):1==b.length&&(g.index+=1):isNaN(b)||0>parseInt(b)||3<parseInt(b)||(g.index+=b.length):"HH"===d.substr(0,2)||"hh"===d.substr(0,2)?2<b.length?isNaN(b.substr(0,2))||(g.index+=2,a.validateDateFormat(b.substr(2,
b.length),d.substr(2,d.length),g)):2==b.length?!isNaN(b.substr(0,2))&&0<parseInt(b)&&23>=parseInt(b)?(g.index+=2,a.isSpecifier(d.substr(2,1))&&(g.specifier=d.substr(2,1))):1==b.length&&(g.index+=1):isNaN(b)||0>parseInt(b)||2<parseInt(b)||(g.index+=b.length):"mm"===d.substr(0,2)||"ss"===d.substr(0,2)?2<b.length?isNaN(b.substr(0,2))||(g.index+=2,a.validateDateFormat(b.substr(2,b.length),d.substr(2,d.length),g)):2==b.length?!isNaN(b.substr(0,2))&&0<parseInt(b)&&59>=parseInt(b)?(g.index+=2,a.isSpecifier(d.substr(2,
1))&&(g.specifier=d.substr(2,1))):1==b.length&&(g.index+=1):isNaN(b)||0>parseInt(b)||5<parseInt(b)||(g.index+=b.length):"-"===d.substr(0,1)||" "===d.substr(0,1)||":"===d.substr(0,1)||"/"===d.substr(0,1)||"."===d.substr(0,1)?1<=b.length&&b.substr(0,1)===d.substr(0,1)&&(g.index+=1,a.validateDateFormat(b.substr(1,b.length),d.substr(1,d.length),g)):b.length<=d.length&&(g.index+=1,0!=b.length&&0!=d.length&&a.validateDateFormat(b.substr(1,b.length),d.substr(1,d.length),g))};a.isSpecifier=function(a){return"/"===
a||"-"===a||":"===a||"."===a||" "===a?!0:!1};a.validateInputFormat=function(a,b){for(var d="",g=0,f=0;f<a.length;f++)if(void 0!=b[g])"z"==b[g]&&a[f]>=String.fromCharCode(97)&&a[f]<=String.fromCharCode(122)?(d+=a[f],g++):"9"==b[g]&&a[f]>=String.fromCharCode(48)&&a[f]<=String.fromCharCode(57)?(d+=a[f],g++):"Z"==b[g]&&a[f]>=String.fromCharCode(65)&&a[f]<=String.fromCharCode(90)&&(d+=a[f],g++);else break;return d};a.setTimeFormat=function(a,b,d){var g="";if(0==a.length)return g;d=d.split("");var f="";
for(g=0;g<d.length;g++)f+=d[g]+"|";0<f.length&&(f=f.substr(0,f.length-1),f="["+f+"]");var h=[];0<d.length?h=b.split(new RegExp(f,"g")):h.push(b);var k="",l="";d="";for(b=0;b<h.length;b++)-1<h[b].indexOf("h")||-1<h[b].indexOf("H")?k=h[b]:-1<h[b].indexOf("m")?l=h[b]:-1<h[b].indexOf("s")&&(d=h[b]);var p="";b=g="";h=h.length;a=a.split(new RegExp(f,"g"),h);a.length==h?(p=a[0].substr(0,k.length),0<l.length&&(g=a[1].substr(0,l.length)),0<d.length&&(b=a[2].substr(0,d.length))):1==a.length?(p=a[0].substr(0,
k.length),g=a[0].substr(k.length,l.length),b=a[0].substr(k.length+l.length,d.length)):2==a.length&&(p=a[0].substr(0,k.length),0<l.length&&(g=a[1].substr(0,l.length)),b="");a=parseInt(p);isNaN(a)&&(a="0");f="";if(0==g.length)f="00";else if(g.length>=l.length)f=g;else{l=l.length-g.length;for(h=0;h<l;h++)f=0==h?"0":f+"0";f+=g}g=a+":"+f;if(0<d.length){a="";if(0==b.length)a="00";else if(b.length>=d.length)a=b;else{d=d.length-b.length;for(f=0;f<d;f++)a=0==f?"0":a+"0";a+=b}g=g+"."+a}return g};a.setNumberFormat=
function(a,b,d){var g="";if(0==a.length)return g;var f=0<d.length?b.split(d)[0]:b,h=0<d.length?b.split(d)[1]:"";0==d.length?(g=parseInt(a),g=isNaN(g)?"":(f=g.toString())?f.length<=b.length?g+parseFloat(a).toString().substr(f.length):f.substr(0,b.length):""):(b=a.split(d,2),a=b[0],b=b[1],0<f.length?(isNaN(parseInt(a))&&(a=0),parseInt(a).toString().length>f.length?g=parseInt(a).toString().substr(0,f.length):(g=parseInt(a),b&&(g=b.length>h.length?g+("."+b.substr(0,h.length)):g+("."+b)))):b&&(g=b.length>
h.length?g+("."+b.substr(0,h.length)):g+("."+b)));return g};a.validate=function(d){if(b[d])return void 0==b.data&&b.init(),b[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)a.error("Method "+d+" does not exist on jQuery.Validation");else return b.init.apply(this,arguments)}})(jQuery);(function(a){var l={init:function(g){void 0==l.data?(l.data={},a.extend(l.data,g)):a.error("[CRIT] Cannot make multiple instances of jQuery.GoogleService");return this},getOAuth_URL:function(g,k,d,b,h){var l=a.GoogleService("getGServiceBaseURL"),p="";p="getURL?clientId="+a.mobileweb.clientId+"&redirectURI="+a.mobileweb.redirectURI;a.GoogleService("sendAJAXRequest",l+p,function(m){var f=m.url;console.log(m.url);var l=window.open(f,"googleLoginWindow");null!=l&&"undefined"!=typeof l||alert("Turn off your pop-up blocker! and Refresh the page. \n\nWe try to open the following url:\n"+
f);var p=window.setInterval(function(){l.closed&&window.clearInterval(p);null!=l.location&&null!=l.location.href&&void 0!=l.location.href&&0<l.location.href.indexOf("#")&&(a.GoogleService("setAccessTokenCookies",l.location.href),window.clearInterval(p),l.close(),a.GoogleService(g,k,d,b,h))},1E3)})},sendAJAXRequest:function(g,k){a.getJSON(g,function(a){k(a)})},getGServiceBaseURL:function(){return"preview"==a.mobileweb.state?[a.mobileweb.baseurl,":8080/mobileweb/mobile/"].join(""):[a.mobileweb.baseurl,
"/mobileweb/mobile/"].join("")},setAccessTokenCookies:function(g){var k=g.substr(g.indexOf("#")+1).split("&"),d=g="";for(h in k){var b=k[h].split("=");"access_token"==b[0]&&(g=b[0],d=b[1])}var h=new Date;h.setTime(h.getTime()+12E5);a.cookie(g,d,{expires:h})},getCookie:function(a){var g=document.cookie,d=g.indexOf(" "+a+"=");-1==d&&(d=g.indexOf(a+"="));-1==d?g=null:(d=g.indexOf("=",d)+1,a=g.indexOf(";",d),-1==a&&(a=g.length),g=unescape(g.substring(d,a)));return g},selectFromDBByEmailAndPhone:function(g,
k,d,b,h,l){a.mobileweb.localdb.instance.transaction(function(p){p.executeSql("SELECT other1 FROM appexe_tmp_contact where phonenumber='"+k+"' and email='"+g+"';",[],function(g,f){if(1<f.rows.length||0==f.rows.length)a.isEmptyObject(d)||(a.utility("showLoadingIndicator",!0),a.utility("ApplyOnSucessAndOnErrorEvents",b,h,d,!1));else if(1==f.rows.length){for(g=0;g<f.rows.length;g++)contactid=f.rows.item(g).other1;""!=contactid&&void 0!=contactid&&l(contactid)}},function(a,b){})})},selectFromDBByContactId:function(g,
k){a.mobileweb.localdb.instance.transaction(function(a){a.executeSql("SELECT other1 FROM appexe_tmp_contact where "+g,[],function(a,d){if(1<d.rows.length)alert("Can not update, more than 1 record at a time.");else if(1==d.rows.length){for(a=0;a<d.rows.length;a++)googleId=d.rows.item(a).other1;""!=googleId&&void 0!=googleId&&k(googleId)}},function(a,d){})})},truncateLocalDB:function(g,k){a.mobileweb.localdb.instance.transaction(function(d){a.utility("log",["[Query] TRUNCATE TABLE "+g]);d.executeSql(" DELETE FROM "+
g,[],function(b,d){a.utility("log","[INFO] table truncated successfully.");k()},function(a,d){k()})})},insertContact:function(g,k,d,b){a.utility("showLoadingIndicator",!0);if(null==a.GoogleService("getCookie","access_token"))a.GoogleService("getOAuth_URL","insertContact",g,k,d,b);else{var h=a.GoogleService("getCookie","access_token");g=a.GoogleService("getGServiceBaseURL")+"insertcontact?access_token="+h+'&record={"familyname":"'+g.familyname+'","firstname":"'+g.firstname+'","nickname":"'+g.nickname+
'","phonenumber":"'+g.phonenumber+'","address":"'+g.address+'","email":"'+g.email+'","company":"'+g.company+'"}';a.getJSON(g,function(g){void 0!=g.errorMessage?a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!1):"done"==g.insert&&(a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!0));a.utility("showLoadingIndicator",!1)})}},insertIntoLocalDB:function(g,k){try{var d=[],b=[],h=[],l;for(l in g){var p=g[l];d.push("?");b.push(l);h.push(p)}a.mobileweb.localdb.instance.transaction(function(g){a.utility("log",
["[Query] INSERT INTO ",k,"(",b.join(),") VALUES (",d.join(),")"].join(""));g.executeSql(["INSERT INTO ",k,"(",b.join(),") VALUES (",d.join(),")"].join(""),h)})}catch(m){}},updateContact:function(g,k,d,b){a.utility("showLoadingIndicator",!0);if(null==a.GoogleService("getCookie","access_token"))a.GoogleService("getOAuth_URL","updateContact",g,k,d,b);else{var h=a.GoogleService("getCookie","access_token");h=a.GoogleService("getGServiceBaseURL")+"updatecontact?access_token="+h+'&record={"contactid":"'+
g.other1+'","familyname":"'+g.familyname+'","firstname":"'+g.firstname+'","nickname":"'+g.nickname+'","phonenumber":"'+g.phonenumber+'","address":"'+g.address+'","email":"'+g.email+'","company":"'+g.company+'"}';a.getJSON(h,function(h){void 0!=h.errorMessage?a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!1):"done"==h.update&&(h=g.where,delete g.where,delete g.contactid,a.GoogleService("updateIntoLocalDB",g,"appexe_tmp_contact",h),a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",
d,b,k,!0))});a.utility("showLoadingIndicator",!1)}},updateIntoLocalDB:function(g,k,d){var b=[],h;for(h in g){var l=g[h];"where"!=h&&b.push([h,"='",l,"'"].join(""))}a.mobileweb.localdb.instance.transaction(function(g){a.utility("log",["[Query] UPDATE ",k," SET ",b.join()," WHERE ",d].join(""));g.executeSql(["UPDATE  ",k," SET ",b.join()," WHERE ",d].join(""),[],function(b,d){a.utility("log","[INFO] Record updated successfully")},function(g,f){a.utility("log","[ERROR] Problems in updating a record.");
a.utility("log",["[ERROR] UPDATE ",k," SET ",b.join()," WHERE ",d].join(""))})})},deleteContact:function(g,k,d,b){a.utility("showLoadingIndicator",!0);if(null==a.GoogleService("getCookie","access_token"))a.GoogleService("getOAuth_URL","deleteContact",g,k,d,b);else{var h=a.GoogleService("getCookie","access_token"),l=g.email,p=g.phonenumber;a.GoogleService("selectFromDBByEmailAndPhone",l,p,k,d,b,function(g){g=a.GoogleService("getGServiceBaseURL")+"deletecontact?access_token="+h+"&contactid="+g;a.getJSON(g,
function(f){void 0!=f.errorMessage?a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!1):"done"==f.deletestatus&&(a.mobileweb.localdb.instance.transaction(function(b){b.executeSql('DELETE FROM appexe_tmp_contact where email="'+l+'" and phonenumber="'+p+'"',[],function(b,d){a.utility("log","[INFO] record deleted successfully.")},function(b,d){a.utility("log","[ERROR] Problems in deleting a record.")})}),a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!0))});a.utility("showLoadingIndicator",
!1)})}},searchContact:function(g,k,d,b){a.utility("showLoadingIndicator",!0);null==a.GoogleService("getCookie","access_token")?a.GoogleService("getOAuth_URL","searchContact",g,k,d,b):a.GoogleService("truncateLocalDB","appexe_tmp_contact",function(){var h=a.GoogleService("getCookie","access_token");h=a.GoogleService("getGServiceBaseURL")+"searchcontact?access_token="+h+"&searchstring="+g;a.getJSON(h,function(g){if(void 0!=g.errorMessage)a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",
d,b,k,!1);else{for(var h=0;h<g.contactList.length;h++){var m=g.contactList[h];void 0==m.firstname&&(m.firstname="");void 0==m.familyname&&(m.familyname="");void 0==m.email&&(m.email="");void 0==m.id&&(m.id="");void 0==m.phonenumber&&(m.phonenumber="");void 0==m.nickname&&(m.nickname="");void 0==m.address&&(m.address="");void 0==m.company&&(m.company="");var f=m.id;m.other1=f.substr(f.lastIndexOf("/")+1,f.length);delete m.id;a.GoogleService("insertIntoLocalDB",m,"appexe_tmp_contact")}a.isEmptyObject(k)||
a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!0)}a.utility("showLoadingIndicator",!1)})})},findCalendar:function(g,k,d,b){a.utility("showLoadingIndicator",!0);null==a.GoogleService("getCookie","access_token")?a.GoogleService("getOAuth_URL","findCalendar",g,k,d,b):a.GoogleService("truncateLocalDB","appexe_tmp_events",function(){var h=a.GoogleService("getCookie","access_token");h=a.GoogleService("getGServiceBaseURL")+"findcalendar?access_token="+h+'&findParam={"start_date":"'+g.startdate+'","end_date":"'+
g.enddate+'","ownerEmail":"'+g.ownerEmail+'"}';a.getJSON(h,function(h){if(void 0!=h.errorMessage)a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!1);else if(0<h.eventList.length){for(var l=0,m=0;m<h.eventList.length;m++){var f=h.eventList[m];void 0==f.eventid?f.eventid="":(f.eventid=f.eventid+"/"+f.etag,delete f.etag);void 0==f.title&&(f.title="");void 0==f.description&&(f.description="");void 0==f.place&&(f.place="");void 0==f.fromdate&&(f.fromdate="");void 0==f.todate&&(f.todate=
"");var u=f.todate,q=g.startdate,y=g.enddate,A=a.utility("splitAndReturnDate",f.fromdate);u=a.utility("splitAndReturnDate",u);q=a.utility("splitAndReturnDate",q);y=a.utility("splitAndReturnDate",y);A>=q&&u<=y&&(a.GoogleService("insertIntoLocalDB",f,"appexe_tmp_events"),l++)}0<l?a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!0):a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!1)}else a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!1);a.utility("showLoadingIndicator",!1)})})},
createEvent:function(g,k,d,b){a.utility("showLoadingIndicator",!0);if(null==a.GoogleService("getCookie","access_token"))a.GoogleService("getOAuth_URL","createEvent",g,k,d,b);else{var h=a.GoogleService("getCookie","access_token");g=a.GoogleService("getGServiceBaseURL")+"createevent?access_token="+h+'&record={"start_date":"'+g.startdate+'","end_date":"'+g.enddate+'","title":"'+g.title+'","description":"'+g.description+'","place":"'+g.place+'","ownerEmail":"'+g.ownerEmail+'"}';a.getJSON(g,function(g){"confirmed"==
g.status?a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!0):a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!1);a.utility("showLoadingIndicator",!1)})}},UpdateEvent:function(g,k,d,b){a.utility("showLoadingIndicator",!0);if(null==a.GoogleService("getCookie","access_token"))a.GoogleService("getOAuth_URL","UpdateEvent",g,k,d,b);else{var h=a.GoogleService("getCookie","access_token"),l=g.eventid,p=l.substr(l.lastIndexOf("/")+1,l.length);l=l.replace("/"+p,"");p=
p.replace('"',"");p=p.replace('"',"");h=a.GoogleService("getGServiceBaseURL")+"updateevent?access_token="+h+'&record={"etag":"'+p+'","eventid":"'+l+'","start_date":"'+g.startdate+'","end_date":"'+g.enddate+'","title":"'+g.title+'","description":"'+g.description+'","place":"'+g.place+'"}';a.getJSON(h,function(h){"updated"==h.status?(g.fromdate=g.startdate,delete g.startdate,g.todate=g.enddate,delete g.enddate,delete g.ownerEmail,delete g.filtertodate,delete g.filterfromdate,delete g.matchField,delete g.matchValue,
g.eventid=h.eventid+"/"+h.etag,h=" id="+g.id,delete g.id,a.GoogleService("updateIntoLocalDB",g,"appexe_tmp_events",h),a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!0)):a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!1);a.utility("showLoadingIndicator",!1)})}},DeleteEvent:function(g,k,d,b){a.utility("showLoadingIndicator",!0);if(null==a.GoogleService("getCookie","access_token"))a.GoogleService("getOAuth_URL","DeleteEvent",g,k,d,b);else{var h=a.GoogleService("getCookie",
"access_token"),l=g.eventid,p=l.substr(l.lastIndexOf("/")+1,l.length);l=l.replace("/"+p,"");p=p.replace('"',"");p=p.replace('"',"");h=a.GoogleService("getGServiceBaseURL")+"deleteevent?access_token="+h+'&record={"etag":"'+p+'","eventid":"'+l+'"}';a.getJSON(h,function(h){"deleted"==h.status?(a.mobileweb.localdb.instance.transaction(function(b){a.utility("log","[INFO] DELETE FROM appexe_tmp_events where eventid='"+g.eventid+"'");b.executeSql("DELETE FROM appexe_tmp_events where eventid='"+g.eventid+
"'",[],function(b,d){a.utility("log","[INFO] record deleted successfully.")},function(b,d){a.utility("log","[ERROR] Problems in deleting a record.")})}),a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!0)):a.isEmptyObject(k)||a.utility("ApplyOnSucessAndOnErrorEvents",d,b,k,!1);a.utility("showLoadingIndicator",!1)})}}};a.GoogleService=function(g){if(l[g])return void 0==l.data&&l.init(),l[g].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof g&&g)a.error("Method "+
g+" does not exist on jQuery.GoogleService");else return l.init.apply(this,arguments)}})(jQuery);(function(a){var l={init:function(g){void 0==l.data?(l.data={},a.extend(l.data,g)):a.error("[CRIT] Cannot make multiple instances of jQuery.ErrorHandlerMethods");return this},checkPageTransition:function(g){if("popToRootViewController"==g.method||"Back"==g.method){var k=g="",d=a.mobileweb.getCurrentPage().getName(),b=0;do g=a.utility("getObject",a.mobileweb.pages,"name",d),void 0!=g&&(d=g.parent,k=g),b++;while(void 0!=g);return 2!=b||void 0==k||void 0!==k.parentType&&"SplitView"==k.parentType?2==
b?!1:!0:!0}var h=g.params;if(void 0!=h.tab){if(""===h.tab)return k="Some missing parameter on action: Select Tab , Page: "+a.mobileweb.getCurrentPage().getTitle()+".",d="\u30da\u30fc\u30b8: "+a.mobileweb.getCurrentPage().getTitle()+" \u306e\u30a2\u30af\u30b7\u30e7\u30f3: Select Tab  \u306b\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u8db3\u308a\u307e\u305b\u3093\u3002",void 0!=g.events&&void 0!=g.events.Error&&0!=g.events.Error.length||a.errorhandler("alertBox",k,d),!1;var l=!1;a.each(a.mobileweb.tabs,
function(b,d){b=d.id.split("-")[1];"tab-more"!=d.id?(b--,h.tab==b&&a.mobileweb.getCurrentPage().getName()!=d.page&&(l=!0)):a.each(d.tabs,function(b,d){b=d.id.split("-")[1];b--;h.tab==b&&(a.mobileweb.getCurrentPage().getName(),l=!0)})});l||(k="UI Parts problem. Page: "+a.mobileweb.getCurrentPage().getTitle()+" , Description: Invalid Tab Index passed while applying Select Tab action.",d="\u8868\u793a\u90e8\u54c1\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u30da\u30fc\u30b8\u540d: "+a.mobileweb.getCurrentPage().getTitle()+
"  , \u660e\u7d30\uff1a Select Tab \u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3001\u7121\u52b9\u306a\u30bf\u30d6\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002",void 0!=g.events&&void 0!=g.events.Error&&0!=g.events.Error.length||a.errorhandler("alertBox",k,d));return l}if(void 0!=h.name)return""==h.name&&(k="Some missing parameters on action: Go to Child Page , Page: "+a.mobileweb.getCurrentPage().getTitle()+".",d="\u30da\u30fc\u30b8: "+a.mobileweb.getCurrentPage().getTitle()+
" \u306e\u30a2\u30af\u30b7\u30e7\u30f3: Go to Child Page \u306b\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u8db3\u308a\u307e\u305b\u3093\u3002",void 0!=g.events&&void 0!=g.events.Error&&0!=g.events.Error.length||a.errorhandler("alertBox",k,d)),k=a.utility("getObject",a.mobileweb.pages,"name",h.name),a.isEmptyObject(k)?(""!=h.name&&(k="UI Parts problem. Page: "+a.mobileweb.getCurrentPage().getTitle()+" , Description: Invalid Page Name passed while applying Go To Child Page action.",d="\u8868\u793a\u90e8\u54c1\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u30da\u30fc\u30b8\u540d: "+
a.mobileweb.getCurrentPage().getTitle()+"  , \u660e\u7d30\uff1a Go To Child Page \u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3001\u7121\u52b9\u306a\u30da\u30fc\u30b8\u540d\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002",void 0!=g.events&&void 0!=g.events.Error&&0!=g.events.Error.length||a.errorhandler("alertBox",k,d)),!1):!0},checkWarningController:function(a){if("StartWaitIndicator"==a.method)return""==a.params.timeout||void 0==a.params.timeout||isNaN(a.params.timeout)?!1:!0},checkTargetUIObject:function(g,
k,d){if("ResetViewData"!==d.method&&"PlaySE"!==d.method&&"combineToCsv"!==d.method){if(a.isEmptyObject(g)||""===g||void 0===g||null===g){var b="UI Parts problem. Page: "+a.mobileweb.getCurrentPage().getTitle()+", Action: "+d.method+" , Description: Target UI "+d.name+" is missing.";g="\u8868\u793a\u90e8\u54c1\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u30da\u30fc\u30b8\u540d: "+a.mobileweb.getCurrentPage().getTitle()+"  ,UI\u30d1\u30fc\u30c4  "+d.name+" \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093 "+
d.method+" \u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3002";"preview"===a.mobileweb.state?a.errorhandler("alertBox",b,g):(void 0==d.events||void 0==d.events.Error||0==d.events.Error.length)&&a.errorhandler("alertBox",b,g);return!1}if(""===g.getId()||void 0===g.getId())return!1}if(void 0!==k.targetpage&&""!=k.targetpage){var h=a.utility("getUiFromObject",k.targetpage,g.getName());if(a.isEmptyObject(h))return b="UI Parts problem. Page: "+a.mobileweb.getCurrentPage().getTitle()+" , Description: Invalid Page Name passed while applying "+
d.method+" action.",g="\u8868\u793a\u90e8\u54c1\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u30da\u30fc\u30b8\u540d: "+a.mobileweb.getCurrentPage().getTitle()+"  , \u660e\u7d30\uff1a "+d.method+" \u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3001\u7121\u52b9\u306a\u30da\u30fc\u30b8\u540d\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002",void 0!=d.events&&void 0!=d.events.Error&&0!=d.events.Error.length||a.errorhandler("alertBox",b,g),!1}if(void 0!==k.value){if(""===k.value||-1==k.value.indexOf("[")&&
-1!=k.value.indexOf("]")||-1!=k.value.indexOf("[")&&-1==k.value.indexOf("]"))return b="UI Parts problem. Page: "+a.mobileweb.getCurrentPage().getTitle()+" , Description: Invalid Page Name or Target UI passed while applying"+d.method+"action.",g="\u8868\u793a\u90e8\u54c1\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u30da\u30fc\u30b8\u540d: "+a.mobileweb.getCurrentPage().getTitle()+" , \u660e\u7d30\uff1a "+d.method+" \u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3001\u7121\u52b9\u306a\u30da\u30fc\u30b8\u540d \u307e\u305f\u306f UI\u30d1\u30fc\u30c4\u540d\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002",
void 0!=d.events&&void 0!=d.events.Error&&0!=d.events.Error.length||a.errorhandler("alertBox",b,g),!1;if("Calculate"==d.method)for(b in g=k.value.split("["),g){if(-1!=g[b].indexOf("]")){k=g[b].indexOf("]");g[b].substring(0,k);k=a.utility("CheckAndGetUIElementValue",a("[name='"+g[b].substring(0,k)+"']"));if(""==k||isNaN(k))return void 0==k?(b="UI Parts problem. Page: "+a.mobileweb.getCurrentPage().getTitle()+" , Description: Invalid Page Name or Target UI passed while applying "+d.method+" action.",
g="\u8868\u793a\u90e8\u54c1\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u30da\u30fc\u30b8\u540d: "+a.mobileweb.getCurrentPage().getTitle()+" , \u660e\u7d30\uff1a "+d.method+" \u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3001\u7121\u52b9\u306a\u30da\u30fc\u30b8\u540d \u307e\u305f\u306f UI\u30d1\u30fc\u30c4\u540d\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002"):(b="UI Parts problem. Page: "+a.mobileweb.getCurrentPage().getTitle()+" , Description: Invalid Value passed while applying "+
d.method+" action.",g="\u8868\u793a\u90e8\u54c1\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u30da\u30fc\u30b8\u540d: "+a.mobileweb.getCurrentPage().getTitle()+" , \u660e\u7d30\uff1a  "+d.method+" >\u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3001\u7121\u52b9\u306a\u5024\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002"),void 0!=d.events&&void 0!=d.events.Error&&0!=d.events.Error.length||a.errorhandler("alertBox",b,g),!1;if(b==g.length-1)return!0}}else return-1!=k.value.indexOf("[")&&
-1!=k.value.indexOf("]")&&g.getViewType(),!0}else return!0},checkFrameParams:function(g,k,d){k=d.params;return l.checkTargetUIObject(g,k,d)?"moveObject"!=d.method&&(void 0!==k.x&&0>k.x||void 0!==k.y&&0>k.y)||void 0!==k.width&&0>=k.width||void 0!==k.height&&0>=k.height||void 0!==k.degree&&0==k.degree?!1:void 0!==k.image&&""==k.image?(g="UI Parts problem. Page: "+a.mobileweb.getCurrentPage().getTitle()+" , Description: Invalid Image Name passed while applying "+d.method+" action.",k="\u8868\u793a\u90e8\u54c1\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u30da\u30fc\u30b8\u540d: "+
a.mobileweb.getCurrentPage().getTitle()+" , \u660e\u7d30\uff1a"+d.method+" \u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3001\u7121\u52b9\u306a\u30a4\u30e1\u30fc\u30b8\u540d\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002",void 0!=d.events&&void 0!=d.events.Error&&0!=d.events.Error.length||a.errorhandler("alertBox",g,k),!1):!0:!1},checkErrorForMaps:function(a,k,d){return l.checkTargetUIObject(a,k,d)?void 0===k.fromlocation||""!==k.fromlocation&&l.checkSquareBracketValue(k.fromlocation)?void 0===
k.tolocation||""!==k.tolocation&&l.checkSquareBracketValue(k.tolocation)?void 0===k.latitude||""!==k.latitude&&l.checkSquareBracketValue(k.latitude)?void 0===k.longitude||""!==k.longitude&&l.checkSquareBracketValue(k.longitude)?!0:!1:!1:!1:!1:!1},checkErrorForDB:function(a,k){return void 0!==k.tablename&&""===k.tablename?!1:!0},checkforTextSupportedUI:function(a){return-1!==jQuery.inArray(a,"Image WebView ImageButtton ComboBox DatePicker TileList RoundButton Camera VideoBox SoundBox ProgressBar Indicator Slider SwitchBar SystemButton ToggleButton GoogleMap".split(" "))?
!1:!0},checkSquareBracketValue:function(a){return!0},alertBox:function(g,k,d){"changeDefaultScreen"===d?(k=(document.documentElement.clientWidth-320)/2,a.blockUI({message:'<section><article style=""class="message clearfix"><h1>There is a problem!</h1><p>The following issues have been found:</p><ul><li>'+g+'</li><br></ul><button id="cancelAlert" style="cursor:pointer;">OK</button> </article</section>',css:{position:"relative",border:"none",backgroundColor:"",left:k+"px",height:"376px",width:"320px",
padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px","text-align":"left",color:"#fff",top:"45px",opacity:"0.9",cursor:""}}),a(".message errorMessage>ul>li").css({"word-wrap":"break-word"}),a("#cancelAlert").bind("click touchstart tap",function(){a.unblockUI();window.location.href="./index_1.html";return!1})):(d="",d=void 0===k||""===k?'<section><article style=""class="message clearfix"><h1>There is a problem!</h1><p>The following issues have been found:</p><ul><li>'+g+'</li></ul><button id="cancelAlert" style="cursor:pointer;">OK</button> </article</section>':
'<section><article style=""class="message clearfix"><h1>There is a problem!</h1><p>The following issues have been found:</p><ul><li>'+g+"</li><br><li>"+k+'</li></ul><button id="cancelAlert" style="cursor:pointer;">OK</button> </article</section>',k=parseInt(a(".scroller").css("left"),10)+(parseInt(a(".scroller").css("width"),10)-320)/2,a.blockUI({message:d,css:{position:"absolute",border:"none",backgroundColor:"",left:k+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px",
"-moz-border-radius":"10px","text-align":"left",color:"#fff",top:"45px",opacity:"0.9",cursor:""}}),a(".message errorMessage>ul>li").css({"word-wrap":"break-word"}),a("#cancelAlert").bind("click touchstart tap",function(){a.unblockUI();return!1}))},previewAlertBox:function(g,k){var d="";d=void 0!=k?'<section><article style=""class="message clearfix"><h1>There is a problem!</h1><p>The following issues have been found:</p><ul><li>'+g+"</li><br><li>"+k+'</li></ul><button id="cancelAlert" style="cursor:pointer;">OK</button> </article</section>':
'<section><article style=""class="message clearfix"><h1>There is a problem!</h1><p>The following issues have been found:</p><ul><li>'+g+'</li></ul><button id="cancelAlert" style="cursor:pointer;">OK</button> </article</section>';g=parseInt(a(".scroller").css("left"),10)+(parseInt(a(".scroller").css("width"),10)-320)/2;a.blockUI({message:d,css:{position:"absolute",border:"none",backgroundColor:"",left:g+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px",
"text-align":"left",color:"#fff",top:"45px",opacity:"0.9",cursor:""}});a(".message errorMessage>ul>li").css({"word-wrap":"break-word"});a("#cancelAlert").bind("tap",function(){a.unblockUI();return!1})},messageBox:function(g,k,d){if(void 0===d||""===d)d="Message";var b="";b=void 0===k||""===k?'<section><article style=""class="message clearfix"><h1>'+d+"</h1><p>The following issues have been found:</p><ul><li>"+g+'</li></ul><button id="cancelMessage" style="cursor:pointer;">OK</button> </article</section>':
'<section><article style=""class="message clearfix"><h1>'+d+"</h1><p>The following issues have been found:</p><ul><li>"+g+"</li><br><li>"+k+'</li></ul><button id="cancelMessage" style="cursor:pointer;">OK</button> </article</section>';g=parseInt(a(".scroller").css("left"),10)+(parseInt(a(".scroller").css("width"),10)-320)/2;a.blockUI({message:b,css:{position:"absolute",border:"none",backgroundColor:"",left:g+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px",
"text-align":"left",color:"#fff",top:"45px",opacity:"0.9",cursor:""}});a(".message errorMessage>ul>li").css({"word-wrap":"break-word"});a("#cancelMessage").bind("click touchstart tap",function(){a.unblockUI();return!1})}};a.errorhandler=function(g){if(l[g])return void 0==l.data&&l.init(),l[g].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof g&&g)a.error("Method "+g+" does not exist on jQuery.ErrorHandler");else return l.init.apply(this,arguments)}})(jQuery);(function(a){function l(d,b,h){b.group=[];for(var k=[],l=[],m=d.data.groupby.replace("[","").replace("]",""),f=0;f<d.data.contents.length;f++)void 0!=d.data.contents[f][m]&&k.push(d.data.contents[f][m]);if(0==k.length)for(f=0;f<d.data.contents[0].length;f++)void 0!=d.data.contents[0][f][m]&&k.push(d.data.contents[0][f][m]);a.each(k,function(a,b){-1===l.indexOf(b)&&l.push(b)});l.sort();k=[];var u=[],w=[];for(m=0;m<l.length;m++)k.push(h.group[0]);a.each(k,function(b,d){u=[];a.each(d.row,function(d,
f){a.each(f.data.contents[0],function(a,d){d==l[b]&&u.push(f)})});0<u.length&&w.push(u)});a.each(k,function(a,f){f.row=[];jQuery.extend(f.row,w[a]);b.group.push(new g(d,h.id,f,a))});b.getHTML=function(){var f=[],g="Grouped"==h.tablestyle?"style='left:0px;'":"";a.each(b.group,function(a,b){f=f.concat(b.getHTML())});var k="",l="";l="ja"!=a.utility("detectBrowserLanguage")?"Show More":"\u7d9a\u304d\u3092\u898b\u308b";if("RemoteTableViewList"==d.type&&25==d.data.contents.totalRecords||"DBTableViewList"==
d.type&&25==d.data.contents.length)k="<fieldset id='showmore'> <input id='showmore'  type='button' value='"+l+"' class=ui-btn-hidden aria-disabled=false /></fieldset>";return["<div id='",h.id,"' "+g+" class='ui-table-position' style='visibility:hidden'>",f.join(""),k,"</div>"].join("")};b.applyOverrides=function(){"TableView"!==d.type&&"DBTableViewList"!==d.type&&"RemoteTableViewList"!=d.type||!d.children[0].accordion||a(".ui-table-position").css({top:"0px"});"Grouped"==h.tablestyle&&a("#"+h.id).css({left:"0px"});
a.each(b.group,function(a,b){b.applyOverrides()})};b.applyEvents=function(){a.each(b.group,function(a,b){b.applyEvents()});"RemoteTableViewList"==d.type||"DBTableViewList"==d.type?a("#showmore").bind("click",function(){var b=a("#"+d.children[0].id+" ul").attr("id");a.utility("showLoadingIndicator",!0);d.data.contents.loaded=!1;var f=d.data.contents.length,g=a(".scroller").offset(),h=g.top,k=g.left;"RemoteTableViewList"==d.type?(new a.actions(d,null,[{method:"Select",category:"ComAction",callback:"loadMoreRecords",
params:{servicename:d.data.servicename,table:d.data.tablename,where:d.data.wherecond,order:d.data.order,offset:parseInt(d.data.contents.offset)+25,limit:25,fields:""}}])).execute():"DBTableViewList"==d.type&&(new a.actions(d,null,[{method:"Select",category:"DBAction",callback:"loadMoreRecords",params:{tablename:d.data.tablename,where:d.data.wherecond,order:d.data.order,columns:""}}])).execute();var l=setInterval(function(){void 0!=d.data.contents.loaded&&d.data.contents.loaded?(clearInterval(l),a.createRemoteDBListViewPageRows(d,
function(){var g=[];g=d.data.contents[0].constructor==Object?d.data.contents:d.data.contents[0];if(f<g.length){g=g.length-f;for(var l=0,m=0;m<g;m++){var p=f+m;a.createRow(d,b,d.children[0].group[0].row[p],f+m,function(b){l+=b.getCellHeight();l+=2;d.children[0].group[0].row[p]=b;d.children[0].group[0].row.push(d.children[0].group[0].row[p]);a(".scroller").find("ul").append(d.children[0].group[0].row[p].getHTML().join(""));d.children[0].group[0].row[p].applyOverrides();d.children[0].group[0].row[p].applyEvents()})}a.utility("showLoadingIndicator",
!1);a(".scroller").find("ul").unblock();a(".ui-loader").css({display:"none"});a(".bglayout").css({height:parseFloat(a(".bglayout").css("height").replace("px",""))+l+"px"});a(".scroller").css({height:parseFloat(a(".scroller").css("height").replace("px",""))+l+"px"});a(".scroller").css({height:parseFloat(a("#"+d.children[0].id).css("height").replace("px",""))+20+"px"});a(".scroller").offset();var u=setInterval(function(){clearInterval(u);a(".scroller").offset({top:h,left:k});a(".scroller").offset()},
400)}d.iscroll={};a("#iscroll_"+d.name+"> div:nth-child(2)").remove();d.iscroll=new iScroll(a("#iscroll_"+d.name).get(0),{useTransform:!1,bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}),d.data.contents.allRecordsLoaded&&a("#showmore").remove()):(clearInterval(l),a.createRemoteDBListViewPageRows(d,function(){for(var f=0,g=0;25>g;g++){var l=a(".scroller").find("ul").children("li").length;
a.createRow(d,b,d.children[0].group[0].row[l],25+g,function(b){f+=b.getCellHeight();f+=2;d.children[0].group[0].row[l]=b;d.children[0].group[0].row.push(d.children[0].group[0].row[l]);a(".scroller").find("ul").append(d.children[0].group[0].row[l].getHTML().join(""));d.children[0].group[0].row[l].applyOverrides();d.children[0].group[0].row[l].applyEvents()})}a.utility("showLoadingIndicator",!1);a(".scroller").find("ul").unblock();a(".ui-loader").css({display:"none"});a(".bglayout").css({height:parseFloat(a(".bglayout").css("height").replace("px",
""))+f+"px"});a(".scroller").css({height:parseFloat(a(".scroller").css("height").replace("px",""))+f+"px"});a(".scroller").css({height:parseFloat(a("#"+d.children[0].id).css("height").replace("px",""))+50+"px"});a(".bglayout").css({height:parseFloat(a("#"+d.children[0].id).css("height").replace("px",""))+50+"px"});a(".scroller").offset();var m=setInterval(function(){clearInterval(m);a(".scroller").offset({top:h,left:k});a(".scroller").offset()},400);d.iscroll={};a("#iscroll_"+d.name+"> div:nth-child(2)").remove();
d.iscroll=new iScroll(a("#iscroll_"+d.name).get(0),{useTransform:!1,bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}))},300)}):a(".ui-collapsible-heading").click(function(b){b=a(this).attr("class");console.log(a(this).attr("id")," --\x3e",b);var f=d.children[0].accordionheader;if(f){var g=a.utility("getImage",a.utility("tokenizeString",f.closeicon,d));f=a.utility("getImage",
a.utility("tokenizeString",f.openicon,d));-1<b.indexOf("ui-collapsible-heading-collapsed")?""!=g?(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class","ui-icon"),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":"url("+g+")"}),a("#"+a(this).attr("id")+"  > a > span > span.ui-icon").css({"background-size":"18px 18px"})):a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":""}):""!=f?(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class",
"ui-icon"),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":"url("+f+")"}),a("#"+a(this).attr("id")+"  > a > span > span.ui-icon").css({"background-size":"18px 18px"})):a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":""})}})};b.getValue=function(){return""}}function g(d,b,g,l){var h={id:b+"-group-"+l,row:[]};a.each(g.row,function(a,b){h.row.push(new k(d,h.id,b,a,g.flexibleHeight))});h.getHTML=function(){for(var b=[],f=[],k=d.data.groupby.replace("[",
"").replace("]",""),p=0;p<d.data.contents.length;p++)void 0!=d.data.contents[p][k]&&b.push(d.data.contents[p][k]);if(0==b.length)for(p=0;p<d.data.contents[0].length;p++)void 0!=d.data.contents[0][p][k]&&b.push(d.data.contents[0][p][k]);a.each(b,function(a,b){-1===f.indexOf(b)&&f.push(b)});f.sort();g.header=0!=f.length?f[l]+" ("+h.row.length+") ":"";b="Grouped"==d.children[0].tablestyle?"style='padding:3px;'":"";k="Grouped"==d.children[0].tablestyle?"true":"false";var q="";q=["<div data-role='collapsible' data-collapsed='false'>"];
""!=g.header&&(q=q.concat(["<h2 id='",h.id,"'>",g.header,"</h2>"]));q=q.concat(["<ul id='",h.id,"' data-role='listview' data-split-theme='d' data-inset='",k,"' "+b+">"]);a.each(h.row,function(a,b){q=q.concat(b.getHTML())});q=q.concat(["</ul>"]);q=""==g.footer?q.concat(["<div id='",h.id,"-footer'>","</div>"]):q.concat(["<div id='",h.id,"-footer'>","<p class='ui-table-footer-text'>",g.footer,"&nbsp</p>","</div>"]);return q=q.concat(["</div>"])};h.applyOverrides=function(){"RemoteTableViewList"!==d.type&&
"TableViewList"!==d.type&&"DBTableViewList"!==d.type||a.utility("showLoadingIndicator",!0);a("#"+h.id+"-header .ui-table-header-text").css({"font-size":16*a.mobileweb.device.aspectratio,"margin-left":10*a.mobileweb.device.aspectWratio});a("#"+h.id+"-footer .ui-table-footer-text").css({"font-size":16*a.mobileweb.device.aspectratio,"margin-left":10*a.mobileweb.device.aspectWratio,"margin-top":1*a.mobileweb.device.aspectHratio});"TableViewList"!==d.type&&"DBTableViewList"!==d.type&&"RemoteTableViewList"!==
d.type||a("#"+h.id+" .ui-icon").css({"z-index":99});-1!=navigator.appVersion.indexOf("Mac")&&a("#"+d.name+"_toolbarBottom").css({"z-index":1});var b="RemoteTableViewList"===d.type||"TableViewList"===d.type||"DBTableViewList"===d.type?1250:100;if("DBTableView"==d.type||"RemoteTableView"==d.type){var f=a.utility("getObject",a.mobileweb.pages,"name",d.parent);if(a.isEmptyObject(f)||void 0==f||"DBTableViewList"!=f.type&&"RemoteTableViewList"!=f.type)b=700}setTimeout(function(){a.each(h.row,function(a,
b){b.applyOverrides()});"RemoteTableViewList"!==d.type&&"TableViewList"!==d.type&&"DBTableViewList"!==d.type||a.utility("showLoadingIndicator",!1);"TableViewList"!==d.type&&"DBTableView"!==d.type&&"DBTableViewList"!==d.type&&"RemoteTableViewList"!==d.type||"Grouped"!=d.children[0].tablestyle||a("#"+h.id).css({width:(d.width-40)*a.mobileweb.device.aspectWratio,"margin-right":20*a.mobileweb.device.aspectWratio,"margin-left":20*a.mobileweb.device.aspectWratio});if("TableView"===d.type||"DBTableViewList"===
d.type||"RemoteTableViewList"==d.type){var b=0;a("#"+h.id).css("padding")&&(b=2*a("#"+h.id).css("padding").replace("px",""));if(d.children[0].accordion){a("div[data-role='collapsible']").css({width:d.width*a.mobileweb.device.aspectWratio,"margin-top":"0px","margin-bottom":4*a.mobileweb.device.aspectHratio});a(".ui-collapsible-content").css({padding:"0px 0px 0px"});a(".ui-collapsible-content > .ui-listview").css({margin:"0px 0px 0px"});a(".ui-collapsible-heading-toggle").css({"border-radius":"1px"});
var f=d.children[0].accordionheader;f&&(a(".ui-collapsible-heading-toggle").css({background:a.attributes("color",f.bgcolor).getColorCode(),color:a.attributes("color",f.textcolor).getColorCode()}),a(".ui-collapsible-heading-toggle").css({height:f.height*a.mobileweb.device.aspectHratio,padding:"0px 0px 0px"}),a(".ui-collapsible-heading-toggle > span").css({height:f.height*a.mobileweb.device.aspectHratio,padding:"0px 0px 0px"}),a(".ui-collapsible-heading-toggle > span > span.ui-btn-text").css({"font-size":16*
a.mobileweb.device.aspectratio,top:(f.height-16)*a.mobileweb.device.aspectHratio/2}),"right"==f.iconposition?(a(".ui-collapsible-heading-toggle > span").css({"padding-left":"12px"}),a(".ui-collapsible-heading-toggle > span > span.ui-icon").css({right:"10px",left:"auto"})):a(".ui-collapsible-heading-toggle > span").css({"padding-left":"40px"}),f.openicon&&(a(".ui-collapsible-heading > a > span > span.ui-icon").attr("class","ui-icon"),f=a.utility("getImage",a.utility("tokenizeString",f.openicon,d)),
a(".ui-collapsible-heading > a > span > span.ui-icon").css({"background-image":"url("+f+")"}),a(".ui-collapsible-heading > a > span > span.ui-icon").css({"background-size":"18px 18px"})));"Grouped"!=d.children[0].tablestyle&&(b=0);a("#"+h.id).css({width:d.width*a.mobileweb.device.aspectWratio-b,margin:"0px"})}else"Grouped"!=d.children[0].tablestyle&&(b=0),a("#"+h.id).css({width:d.width*a.mobileweb.device.aspectWratio-b+"px","margin-left":"0px"})}void 0!=a("#iscroll_"+d.name)[0]&&(b=a("#iscroll_"+
d.name)[0].clientHeight,0<b&&b<a(".scroller")[0].scrollHeight&&a(".bglayout").css({height:a("#iscroll_"+d.name)[0].clientHeight+"px"}));a(".ui-table-position").css({visibility:"visible"})},b)};h.applyEvents=function(){a.utility("getreSettingDataStatus")||a.each(h.row,function(a,b){b.applyEvents()});a(".ui-collapsible-heading").click(function(b){b=a(this).attr("class");var f=d.children[0].accordionheader;if(f){var g=a.utility("getImage",a.utility("tokenizeString",f.closeicon,d));f=a.utility("getImage",
a.utility("tokenizeString",f.openicon,d));-1<b.indexOf("ui-collapsible-heading-collapsed")?""!=g?(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class","ui-icon"),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":"url("+g+")"}),a("#"+a(this).attr("id")+"  > a > span > span.ui-icon").css({"background-size":"18px 18px"})):a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":""}):""!=f?(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class",
"ui-icon"),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":"url("+f+")"}),a("#"+a(this).attr("id")+"  > a > span > span.ui-icon").css({"background-size":"18px 18px"})):a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":""})}})};return h}function k(d,b,g,k,l){var h={id:b+"-row-"+k,rownum:g.rownum,children:new a.uichildren(d,g.children,g.data.contents[0]),backgroundColor:g.backgroundColor,repeatImage:g.repeatImage,isFlexible:l};if(a.utility("isReverseTransition")){var f;
"SplitView"==a.mobileweb.getCurrentPage().getViewType()?a.each(a.mobileweb.getCurrentPage().children,function(a,b){b.getId()===d.name&&(f=b)}):f=a.mobileweb.getCurrentPage();void 0==f&&(h.children=[])}else h.children=new a.uichildren(d,g.children,g.data.contents[0]);0===h.rownum%2?(h.cellBackgroundColor=g.oddRowBackgroundColor,h.cellBackgroundImage=g.oddRowBackgroundImage):(h.cellBackgroundColor=g.evenRowBackgroundColor,h.cellBackgroundImage=g.evenRowBackgroundImage);h.getHTML=function(){if(0<h.children.length)return["<li data-icon='",
g.icon.style,"'>","<a href='#' id='",h.id,"' class='ui-table-padding'>","<div class='ui-table-row-size' style='visibility:hidden'>",h.children.getHTML(),"</div>","</a>",g.icon.events?["<div id='",h.id,"-icon'></div>"].join(""):"","</li>"]};h.getViewType=function(){return"Row"};h.applyOverrides=function(){h.setCellHeight(g.rowsize);a("#"+h.id+" .ui-table-row-size").css({visibility:"visible",position:"relative"});0<h.children.length&&(h.children.applyOverrides(),h.children.applyEvents());void 0!=h.backgroundColor&&
(a("#"+h.id).css({"background-color":a.attributes("color",h.backgroundColor).getColorCode()}),a(".ui-li>.ui-btn-inner").css({"background-color":a.attributes("color",h.backgroundColor).getColorCode()}));"button"==g.icon.style?a("#"+h.id).parent().siblings().css({"z-index":199,"background-image":"url("+a.utility("getSystemImage","button.png",h.getViewType())+")","background-color":"white","background-position":" 50% 50%","background-repeat":"no-repeat no-repeat"}):"false"!=g.icon.style&&a("#"+h.id).parent().siblings().css({"z-index":199});
if(void 0!=h.cellBackgroundImage&&""!=h.cellBackgroundImage)if(h.repeatImage)a("#"+h.id).css({"z-index":99,"background-image":"url("+a.utility("getImage",h.cellBackgroundImage)+")","background-color":"white","background-position":"100% 100%","background-repeat":"repeat"});else{a("#"+h.id).css({"z-index":99});var b=a("<img/>");b.css({height:g.rowsize*a.mobileweb.device.aspectHratio+"px",width:d.width*a.mobileweb.device.aspectWratio+"px","margin-left":a("#"+h.id+" div > p").css("left")});b.attr("src",
a.utility("getImage",h.cellBackgroundImage));a("#"+h.id+" div").append(b)}g.icon.events&&a("#"+h.id+"-icon").css({position:"absolute",top:0,left:d.width*a.mobileweb.device.aspectWratio-40,height:g.rowsize*a.mobileweb.device.aspectHratio,width:40});void 0!=h.cellBackgroundColor&&a("#"+h.id).css({"background-color":a.attributes("color",h.cellBackgroundColor).getColorCode()});a(".ui-li").css({"border-top-width":"0px","border-bottom-width":"0px"});a.each(h.children,function(a,b){h.isFlexible&&"TextArea"===
b.getViewType()&&h.setFlexibleHeight(b)})};h.setFlexibleHeight=function(b){a("#"+b.getId()).addClass("autoExpand");a("#"+b.getId()).css({height:"initial","max-height":"",overflow:"hidden"});var d=h.getCellHeight()-(parseInt(b.frame.getFrame().y)+parseInt(b.frame.getFrame().height));a("#"+b.getId()).css({bottom:d+"px"});d=document.getElementById(b.getId());var f=parseInt(window.getComputedStyle(d).height,10)-d.clientHeight;d=Math.max(d.scrollHeight,d.scrollHeight+f);b=h.getCellHeight()-parseInt(b.frame.getFrame().height)+
d;b>h.getCellHeight()?a("#"+h.id).css({height:b+"px"}):a("#"+h.id).css({height:h.getCellHeight()+"px"})};h.setCellHeight=function(b){h.isFlexible||(g.rowsize=b,a("#"+h.id+" .ui-table-row-size").css({height:b*a.mobileweb.device.aspectHratio}))};h.getCellHeight=function(){return g.rowsize*a.mobileweb.device.aspectHratio};h.getId=function(){return h.id};h.getName=function(){return h.name};h.applyEvents=function(){var b=!1,f=!1;g.icon.events&&g.icon.events.Tap&&a("#"+h.id+"-icon").click(function(){a.each(g.icon.events.Tap,
function(b,d){"PageAction"===d.category&&a("#"+h.id).addClass("ui-btn-active")});(new a.actions(d,h,g.icon.events.Tap.slice())).execute()});if(g.events){g.events.Tap&&a("#"+h.id).click(function(f){b?(b=!1,clearTimeout(alreadyclickedTimeout)):(b=!0,alreadyclickedTimeout=setTimeout(function(){b=!1},300),"INPUT"!==f.target.tagName&&("LABEL"===f.target.tagName?0<f.target.htmlFor.length||(a.each(g.events.Tap,function(b,d){"PageAction"===d.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,
h,JSON.parse(JSON.stringify(g.events.Tap).slice()))).execute()):(a.each(g.events.Tap,function(b,d){"PageAction"===d.category&&a("#"+h.id).addClass("ui-btn-active")}),"TEXTAREA"!==f.target.tagName&&"IMG"!==f.target.tagName&&"draggable"!==f.target.className&&(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.Tap).slice()))).execute())))});if(g.events.flickRL)a("#"+h.id).on("swipeleft",function(b){f?(f=!1,clearTimeout(alreadySwipedTimeout)):(f=!0,alreadySwipedTimeout=setTimeout(function(){f=!1},300),
"INPUT"!==b.target.tagName&&("LABEL"===b.target.tagName?0<b.target.htmlFor.length||(a.each(g.events.flickRL,function(b,d){"PageAction"===d.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.flickRL).slice()))).execute()):(a.each(g.events.flickRL,function(b,d){"PageAction"===d.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.flickRL).slice()))).execute())))});if(g.events.flickLR)a("#"+h.id).on("swiperight",
function(b){f?(f=!1,clearTimeout(alreadySwipedTimeout)):(f=!0,alreadySwipedTimeout=setTimeout(function(){f=!1},300),"INPUT"!==b.target.tagName&&("LABEL"===b.target.tagName?0<b.target.htmlFor.length||(a.each(g.events.flickLR,function(b,d){"PageAction"===d.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.flickLR).slice()))).execute()):(a.each(g.events.flickLR,function(b,d){"PageAction"===d.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,
h,JSON.parse(JSON.stringify(g.events.flickLR).slice()))).execute())))})}};return h}a.accordiontable=function(a,b){var d={};new l(a,d,b);return d}})(jQuery);(function(a){a.mobilewebscreen=function(l){var g=0;a.mobilewebscreen={screen:{screenId:"",height:"",width:""}};a.mobilewebscreen.redirectToScreen=function(){var k=window.devicePixelRatio,d=a.mobilewebscreen.fetchBestFitScreen(l.screens,screen.height*k,screen.width*k);a.isEmptyObject(d)?window.location.href="./index_1.html":a.ajax({url:"./index_"+d.id+".html",success:function(b){a.mobilewebscreen.screen.screenId=d.id;a.mobilewebscreen.screen.height=d.height;a.mobilewebscreen.screen.width=d.width;window.location.href=
"./index_"+d.id+".html"},error:function(b){a.blockUI({message:'<section id="warningScreen_'+g+'"><article style=""class="message clearfix"><h1>There is a problem!</h1><p>The following issues have been found:</p><ul><li>The Best Screen-Size for this application could not be displayed due to some technical problem. <br> Press \'OK\' to switch to another screen.</li><br></ul><button id="cancelAlert" style="cursor:pointer;">OK</button> </article</section>',css:{position:"relative",border:"none",backgroundColor:"",
left:(document.documentElement.clientWidth-320)/2+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px","text-align":"left",color:"#fff",top:"45px",opacity:"0.9",cursor:""}});a(".message errorMessage>ul>li").css({"word-wrap":"break-word"});a("#cancelAlert").bind("click touchstart tap",function(){a("#warningScreen_"+g).remove();l.screens.splice(--d.id,1);g++;a.mobilewebscreen.redirectToScreen();return!1})}})};a.mobilewebscreen.getAllScreens=function(){return l.screens};
a.mobilewebscreen.getCurrentScreen=function(){return a.mobilewebscreen.screen.height+"x"+a.mobilewebscreen.screen.width};a.mobilewebscreen.fetchBestFitScreen=function(g,d,b){var h=[],k=0;a.each(g,function(a,f){f.height<=d&&f.width<=b&&(f.area=f.height*f.width,h[k]=f);k++});g=-Infinity;for(var l=h.length,m={},f=0;f!=l;++f)void 0!=h[f]&&h[f].area>g&&(m=h[f],g=h[f].area);return m};return a.mobilewebscreen}})(jQuery);(function(a){function l(d,b,h){b.group=[];a.each(h.group,function(a,k){b.group.push(new g(d,h.id,k,a))});var k=[];b.getHTML=function(){a.each(b.group,function(a,b){k=k.concat(b.getHTML())});console.log(h);return["<table id='",h.id,"'>",k.join(""),"</table>"].join("")};b.applyOverrides=function(){a.each(b.group,function(a,b){b.applyOverrides()});a("#"+h.id).css({"border-spacing":"0px"})};b.applyEvents=function(){};b.getValue=function(){return""}}function g(d,b,g,l){var h={id:b+"-group-"+l,row:[]},
m="";a.each(g.row,function(a,b){h.row.push(new k(d,h.id,b,a))});h.getHTML=function(){a.each(h.row,function(a,b){m=m.concat(b.getHTML())});return m};h.applyOverrides=function(){a.each(h.row,function(a,b){b.applyOverrides()})};h.applyEvents=function(){a.each(h.row,function(a,b){b.applyEvents()})};return h}function k(d,b,g,k){var h={id:b+"-row-"+k,rownum:g.rownum,children:new a.uichildren(d,g.children,g.data.contents[0]),backgroundColor:g.backgroundColor,getHTML:function(){var b="",f=0,k=!1;a.each(d.children[0].group["0"].template.gridFields,
function(l,m){var p=a.utility("extractDataFromRecord",g.data.contents[0],m.template);f=void 0!=d.children[0].group["0"].template.gridFields[l+1]?d.children[0].group["0"].template.gridFields[l+1].column:-1;f===m.column?(b=k?b+'<tr><td id="'+m.id+"_"+h.id+'_td"><p id="'+m.id+"_"+h.id+'_p" tabindex="" > <label class="ui-label" id="'+m.id+"_"+h.id+'" name="'+m.name+'">'+p+"</label></p></td></tr>":b+'<td id="'+m.id+"_"+h.id+'_td_table"><table id="'+m.id+"_"+h.id+'_table"><tr><td id="'+m.id+"_"+h.id+'_td"><p id="'+
m.id+"_"+h.id+'_p" tabindex="" > <label class="ui-label" id="'+m.id+"_"+h.id+'" name="'+m.name+'">'+p+"</label></p></td></tr>",k=!0):(b=k?b+'<tr><td id="'+m.id+"_"+h.id+'_td"><p id="'+m.id+"_"+h.id+'_p" tabindex="" > <label class="ui-label" id="'+m.id+"_"+h.id+'" name="'+m.name+'">'+p+"</label></p></td></tr></table></td>":b+'<td id="'+m.id+"_"+h.id+'_td"><p id="'+m.id+"_"+h.id+'_p" tabindex="" > <label class="ui-label" id="'+m.id+"_"+h.id+'" name="'+m.name+'">'+p+"</label></p></td>",k=!1)});return['<tr id="'+
h.id+'_tr">'+b+"</tr>"]},getViewType:function(){return"Row"},applyOverrides:function(){var b=0,f=!1;a.each(d.children[0].group["0"].template.gridFields,function(g,k){b=void 0!=d.children[0].group["0"].template.gridFields[g+1]?d.children[0].group["0"].template.gridFields[g+1].column:-1;b===k.column?(console.log(k.id),f||(a("#"+k.id+"_"+h.id+"_td_table").css({border:"1px solid"}),a("#"+k.id+"_"+h.id+"_table").css({"border-spacing":"0px"})),a("#"+k.id+"_"+h.id+"_td").css({"border-bottom":"1px solid"}),
f=!0):(f?a("#"+k.id+"_"+h.id+"_td").css({"border-top":"1px solid"}):a("#"+k.id+"_"+h.id+"_td").css({border:"1px solid"}),f=!1);a("#"+k.id+"_"+h.id+"_td").css({width:(k.frame.width-4)*a.mobileweb.device.aspectratio+"px"});a("#"+k.id+"_"+h.id+"_p").css({margin:"auto"});a("#"+k.id+"_"+h.id).css({"text-shadow":"0px 0px 0px #FFFFFF"});a("#"+k.id+"_"+h.id).css({position:""});a("#"+k.id+"_"+h.id+"_p").css({"text-align":"center"});a("#"+k.id+"_"+h.id+"_p").css({position:""});a("#"+k.id+"_"+h.id+"_p").css({overflow:"hidden"});
a("#"+k.id+"_"+h.id+"_p").css({width:(k.frame.width-4)*a.mobileweb.device.aspectratio+"px"})});h.setCellHeight()},setCellHeight:function(){a.each(d.children[0].group["0"].template.gridFields,function(b,d){a("#"+h.id+"_tr").css({height:(d.frame.height-4)*a.mobileweb.device.aspectratio+"px"})})},getCellHeight:function(){return g.rowsize*a.mobileweb.device.aspectratio},applyEvents:function(){}};return h}a.uiTabularGrid=function(a,b){var d={};new l(a,d,b);return d}})(jQuery);(function(a){function l(g){return{frame:a.attributes("frame",g),font:a.attributes("font",g),border:a.attributes("border",g),padding:a.attributes("padding",g),background:a.attributes("background",g),getName:function(){return g.name},getId:function(){return g.name},getViewType:function(){return g.type}}}a.splitviewChildScaleRatio=function(g){var k=0;g.statusbarhidden||(k+=20);void 0==g.header||g.header.hidden||(k=""!=g.header.prompt?k+77:k+44);void 0==g.footer||g.footer.hidden||(k+=49);a.mobileweb.device.aspectHratio=
(document.documentElement.clientHeight-k)/(g.height-k)};a.uiPageScrollViewContainer=function(g,k){var d=[];g.data.innerPagesCount=0;a.each(k,function(b,h){switch(h.type){case "BaseView":h.pagedef=g;d.push(a.uiBaseViewForPSV(g,h,b));g.data.isSaved=!1;g.data.innerPagesCount+=1;g.pageCreated=!0;break;case "ScrollView":h.pagedef=g;d.push(a.uiScrollViewForPSV(g,h,b));g.data.isSaved=!1;g.data.innerPagesCount+=1;g.pageCreated=!0;break;default:g.data.isSaved=!0}});d.getHTML=function(){"preview"!==a.mobileweb.state&&
a.splitviewChildScaleRatio(g);var b=[];a.each(this,function(a,d){b.push(this.getHTML())});return b.join("")};d.applyOverrides=function(){a.each(this,function(a,d){d.applyOverrides()})};d.applyEvents=function(){a.each(this,function(a,d){d.applyEvents()})};return d};a.uiBaseViewForPSV=function(g,k,d){var b=new l(k),h={};void 0!=g.data.contents&&(a.extend(h,g.data.contents[0]),a.extend(h,k.data.contents[0]));k.childrenUI=new a.uichildren(k,k.children,h);k.childrenId=d;b.getHTML=function(){return['<div id="'+
k.name+'_div" style="height:',k.height*a.mobileweb.device.aspectHratio,"px;width:",k.width*a.mobileweb.device.aspectWratio,"px;top:",parseFloat(k.y)*a.mobileweb.device.aspectHratio,"px;left:",k.x*a.mobileweb.device.aspectWratio,'px;">',k.childrenUI.getHTML(),"</div>"].join("")};b.applyOverrides=function(){a("#"+k.name+"_div").css({background:a.attributes("color",k.backgroundColor).getColorCode()});a("#"+k.name+"_div").css({position:"absolute"});a("#"+k.name+"_div").css({height:"100%"});a("#"+k.name+
"_div").css({left:k.childrenId*k.width*a.mobileweb.device.aspectWratio});void 0!=k.childrenUI&&k.childrenUI.applyOverrides();if(-1==k.parent.lastIndexOf(g.name)||""!=k.parent.split(g.name)[1])k.transitType="transitInView",a("#"+k.name+"_div").css("display","none")};b.applyEvents=function(){void 0!=k.childrenUI&&k.childrenUI.applyEvents();var b=setInterval(function(){if(!a.utility("getActionRunningStatus")){clearInterval(b);var d=a.utility("getObject",a.mobileweb.pages,"name",k.name);void 0!=d.events&&
void 0!=d.events.AfterViewPage&&0<d.events.AfterViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(d,null,d.events.AfterViewPage.slice())).execute())}},500);a("#"+k.name+"_div").off("swipeleft").on("swipeleft",function(b){k.pagedef.children.length>d+1&&(g.events.flickLR&&(new a.actions(g,null,JSON.parse(JSON.stringify(g.events.flickLR).slice()))).execute(),a("#"+k.pagedef.children[d+1].name+"_div")[0].scrollIntoView())});a("#"+k.name+"_div").off("swiperight").on("swiperight",
function(b){0<d&&(g.events.flickRL&&(new a.actions(g,null,JSON.parse(JSON.stringify(g.events.flickRL).slice()))).execute(),a("#"+k.pagedef.children[d-1].name+"_div")[0].scrollIntoView())})};b.getValue=function(){};b.setValue=function(a){};b.children=k.childrenUI;0<a("#"+k.name+"_div").length&&void 0!=k.isgrandChild&&k.isgrandChild&&a("#"+k.name+"_div").css("display","none");return b};a.uiScrollViewForPSV=function(g,k,d){var b=new l(k),h={};void 0!=g.data.contents&&(a.extend(h,g.data.contents[0]),
a.extend(h,k.data.contents[0]));k.childrenUI=new a.uichildren(k,k.children,h);k.childrenId=d;b.getHTML=function(){return['<div id="'+k.name+'_div">','<div id="'+k.name+'" style="height:',k.height*a.mobileweb.device.aspectHratio,"px;width:",k.width*a.mobileweb.device.aspectWratio,"px;top:",parseFloat(k.y)*a.mobileweb.device.aspectHratio,"px;left:",k.x*a.mobileweb.device.aspectWratio,'px;">',k.childrenUI.getHTML(),"</div></div>"].join("")};b.applyOverrides=function(){a("#"+k.name+"_div").css({background:"#FFFFFF"});
a("#"+k.name+"_div").css({position:"absolute"});a("#"+k.name+"_div").css({height:"100%"});a("#"+k.name+"_div").css({width:"100%"});a("#"+k.name+"_div").css({left:k.childrenId*g.width*a.mobileweb.device.aspectWratio});a("#"+k.name).css({background:a.attributes("color",k.backgroundColor).getColorCode()});a("#"+k.name).css({position:"relative"});a("#"+k.name).css({height:(parseInt(k.height)+k.y)*a.mobileweb.device.aspectHratio});a("#"+k.name).css({width:(parseInt(k.width)+k.x)*a.mobileweb.device.aspectWratio});
a("#"+k.name).css({left:k.x*a.mobileweb.device.aspectWratio});a("#"+k.name).css({top:k.y*a.mobileweb.device.aspectWratio});void 0!=k.childrenUI&&k.childrenUI.applyOverrides();if(-1==k.parent.lastIndexOf(g.name)||""!=k.parent.split(g.name)[1])k.transitType="transitInView",a("#"+k.name+"_div").css("display","none")};b.applyEvents=function(){void 0!=k.childrenUI&&k.childrenUI.applyEvents();var h=setInterval(function(){if(!a.utility("getActionRunningStatus")){clearInterval(h);var b=a.utility("getObject",
a.mobileweb.pages,"name",k.name);void 0!=b.events&&void 0!=b.events.AfterViewPage&&0<b.events.AfterViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(b,null,b.events.AfterViewPage.slice())).execute())}},500);a("#"+k.name+"_div").off("swipeleft").on("swipeleft",function(b){k.pagedef.children.length>d+1&&(g.events.flickLR&&(new a.actions(g,null,JSON.parse(JSON.stringify(g.events.flickLR).slice()))).execute(),a("#"+k.pagedef.children[d+1].name+"_div")[0].scrollIntoView())});a("#"+
k.name+"_div").off("swiperight").on("swiperight",function(b){0<d&&(g.events.flickRL&&(new a.actions(g,null,JSON.parse(JSON.stringify(g.events.flickRL).slice()))).execute(),a("#"+k.pagedef.children[d-1].name+"_div")[0].scrollIntoView())});b.applyScrollEvents(k.name+"_div")};b.applyScrollEvents=function(b){var d;a("#"+b).on("vmouseover",a("#"+b),function(){if(void 0===d){var g=a("#"+b).get(0);d=new iScroll(g,{bounceLock:!0,hScrollbar:!1,vScrollbar:!1,onBeforeScrollStart:function(a){for(var b=a.target;1!=
b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}})};b.getValue=function(){};b.setValue=function(a){};b.children=k.childrenUI;0<a("#"+k.name+"_div").length&&void 0!=k.isgrandChild&&k.isgrandChild&&a("#"+k.name+"_div").css("display","none");return b}})(jQuery);(function(a){a.fn.numeric=function(l,g){"boolean"===typeof l&&(l={decimal:l});l=l||{};"undefined"==typeof l.negative&&(l.negative=!0);var k=!1===l.decimal?"":l.decimal||".";l=!0===l.negative?!0:!1;g="function"==typeof g?g:function(){};return this.data("numeric.decimal",k).data("numeric.negative",l).data("numeric.callback",g).keypress(a.fn.numeric.keypress).keyup(a.fn.numeric.keyup).blur(a.fn.numeric.blur)};a.fn.numeric.keypress=function(l){var g=a.data(this,"numeric.decimal"),k=a.data(this,"numeric.negative"),
d=l.charCode?l.charCode:l.keyCode?l.keyCode:0;if(13==d&&"input"==this.nodeName.toLowerCase())return!0;if(13==d)return!1;var b=!1;if(l.ctrlKey&&97==d||l.ctrlKey&&65==d||l.ctrlKey&&120==d||l.ctrlKey&&88==d||l.ctrlKey&&99==d||l.ctrlKey&&67==d||l.ctrlKey&&122==d||l.ctrlKey&&90==d||l.ctrlKey&&118==d||l.ctrlKey&&86==d||l.shiftKey&&45==d)return!0;if(48>d||57<d){if(0!=this.value.indexOf("-")&&k&&45==d&&(0==this.value.length||0==a.fn.getSelectionStart(this)))return!0;g&&d==g.charCodeAt(0)&&-1!=this.value.indexOf(g)&&
(b=!1);8!=d&&9!=d&&13!=d&&35!=d&&36!=d&&37!=d&&39!=d&&46!=d?b=!1:"undefined"!=typeof l.charCode&&(l.keyCode==l.which&&0!=l.which?(b=!0,46==l.which&&(b=!1)):0!=l.keyCode&&0==l.charCode&&0==l.which&&(b=!0));g&&d==g.charCodeAt(0)&&(b=-1==this.value.indexOf(g)?!0:!1)}else b=!0;return b};a.fn.numeric.keyup=function(l){var g=this.value;if(0<g.length){l=a.fn.getSelectionStart(l);var k=a.data(this,"numeric.decimal"),d=a.data(this,"numeric.negative");if(""!=k){var b=g.indexOf(k);0==b&&(this.value="0"+g);1==
b&&"-"==g.charAt(0)&&(this.value="-0"+g.substring(1));g=this.value}var h=[0,1,2,3,4,5,6,7,8,9,"-",k];b=g.length;for(var q=b-1;0<=q;q--){var p=g.charAt(q);0!=q&&"-"==p?g=g.substring(0,q)+g.substring(q+1):0!=q||d||"-"!=p||(g=g.substring(1));for(var m=!1,f=0;f<h.length;f++)if(p==h[f]){m=!0;break}m&&" "!=p||(g=g.substring(0,q)+g.substring(q+1))}d=g.indexOf(k);if(0<d)for(q=b-1;q>d;q--)p=g.charAt(q),p==k&&(g=g.substring(0,q)+g.substring(q+1));this.value=g;a.fn.setSelection(this,l)}};a.fn.numeric.blur=function(){var l=
a.data(this,"numeric.decimal"),g=a.data(this,"numeric.callback"),k=this.value;""!=k&&((new RegExp("^\\d+$|\\d*"+l+"\\d+")).exec(k)||g.apply(this))};a.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",a.fn.numeric.keypress).unbind("blur",a.fn.numeric.blur)};a.fn.getSelectionStart=function(a){if(a.createTextRange){var g=document.selection.createRange().duplicate();g.moveEnd("character",a.value.length);return""==
g.text?a.value.length:a.value.lastIndexOf(g.text)}return a.selectionStart};a.fn.setSelection=function(a,g){"number"==typeof g&&(g=[g,g]);g&&g.constructor==Array&&2==g.length&&(a.createTextRange?(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",g[0]),a.moveEnd("character",g[1]),a.select()):a.setSelectionRange&&(a.focus(),a.setSelectionRange(g[0],g[1])))}})(jQuery);var mapp;
(function(a){var l={init:function(g){void 0==l.data?(l.data={initSettings:null,showLoading:!1,routePoints:null,checkPoint:0,infowindow:new google.maps.InfoWindow({maxWidth:150,content:""}),directionsService:new google.maps.DirectionsService,directionsDisplay:new google.maps.DirectionsRenderer,markers:[],waypoints:[],watchProcess:null,currentPositionMarker:null,mapName:null},a.extend(l.data,g)):a.error("[CRIT] Cannot make multiple instances of jQuery.GoogleMapServices");return this},setMapName:function(a){l.data.mapName=a},
getMapName:function(){return l.data.mapName},getMap:function(){return mapp},setMapErrorMessage:function(g,k,d){k=[];var b=!1,h={ZERO_RESULTS:"Request was successful but returned no results. This may occur if a non-existent address passed.",OVER_QUERY_LIMIT:"Request limit exceeded.",REQUEST_DENIED:"Request was denied.",INVALID_REQUEST:"Invalid request.",UNKNOWN_ERROR:"The request could not be processed due to a server error. The request may succeed if you try again.",ERROR:"The request timed out or there was a problem contacting the Google servers. The request may succeed if you try again."},
l={NOT_FOUND:"One of the locations specified in the request's origin, destination, or waypoints could not be geocoded.",ZERO_RESULTS:"No route could be found between the origin and destination.",MAX_WAYPOINTS_EXCEEDED:"Too many DirectionsWaypoint fields were provided in the DirectionsRequest.",INVALID_REQUEST:"Invalid DirectionsRequest.",OVER_QUERY_LIMIT:"The request timed out or there was a problem contacting the Google servers. The request may succeed if you try again.",REQUEST_DENIED:"Not allowed to use the directions service.",
UNKNOWN_ERROR:" Server error."},p={OVER_QUERY_LIMIT:"Request limit exceeded.",REQUEST_DENIED:"Request was denied.",INVALID_REQUEST:"Invalid request.",UNKNOWN_ERROR:"Unknown error."};"Direction"==d?k=l:"Elevation"==d?k=p:"Geocode"==d&&(k=h);a.each(k,function(h,f){h==g&&(b=!0,a.mobileweb.__ERR_MSG__="Google Map "+d+" Error : "+f)});b||(a.mobileweb.__ERR_MSG__="Google Map Error : ")},setMarkerForCurrentPost:function(a){l.data.currentPositionMarker=a},getMarkerForCurrentPost:function(){return l.data.currentPositionMarker},
storeMarkers:function(g,k,d,b,h){l.data.markers.push({page:g,map:k,markerID:d,spotdetail:h,markerObject:b});d=a.GMapService("getMap");null!=a.utility("getSessionData","MarkerObj",k)&&(b=a.utility("getSessionData","MarkerObj",k),b=a.parseJSON(b),l.data.markerCount==l.data.markers.length-1&&(d.setCenter({lat:b.latitude,lng:b.longitude}),b={page_name:g,u_id:k,longitude:b.latitude,latitude:b.longitude},a.utility("setSessionData",b,"MarkerObj")));null!=a.utility("getSessionData","dragObj",k)&&(g=a.utility("getSessionData",
"dragObj",k),g=a.parseJSON(g),a.mobileweb.getCurrentPage().getName()==g.page_name&&d.setCenter({lat:g.latitude,lng:g.longitude}))},getLatLngByPlace:function(g,k,d){var b={latitude:"",longitude:"",latXlng:"",location:"",district:"",state:""};(new google.maps.Geocoder).geocode({address:g},function(d,g){try{switch(g){case "OK":b.latitude=d[0].geometry.location.lat();b.longitude=d[0].geometry.location.lng();b.latXlng=new google.maps.LatLng(b.latitude,b.longitude);b.location=d[0].address_components[0].long_name;
b.district=1<d[0].address_components.length?d[0].address_components[1].long_name:" ";b.state=2<d[0].address_components.length?d[0].address_components[2].long_name:" ";k(b);break;case "ZERO_RESULTS":b.latXlng="Not Found";k(b);break;case "OVER_DAILY_LIMIT":case "OVER_QUERY_LIMIT":case "REQUEST_DENIED":case "INVALID_REQUEST":case "UNKNOWN_ERROR":a.mobileweb.__ERR_CODE__=g;a.GMapService("setMapErrorMessage",g,"getLatLngByPlace","Geocode");k(!1);break;default:k(!1)}}catch(p){a.mobileweb.__ERR_CODE__=g,
a.GMapService("setMapErrorMessage",g,"getLatLngByPlace","Geocode"),k(!1)}})},createGoogleMap:function(g,k,d){var b=k.initiallocation;-1!=k.initiallocation.indexOf("[")&&-1!=k.initiallocation.indexOf("]")&&(b=a.utility("extractDataFromRecord",d,k.initiallocation));for(var h in k.events)"onMapLoadStart"==h&&a.GMapService("Event_onMapLoadStart",g,k);a.GMapService("getLatLngByPlace",b,function(b){var d=b.latXlng;if("Not Found"==d)a.GMapService("Event_onMapLoadFail",g,k);else{if(!b){d=new google.maps.LatLng(35.6895,
139.6917);null!=a.utility("getSessionData","MarkerObj",k.name)&&(b=a.utility("getSessionData","MarkerObj",k.name),b=a.parseJSON(b),a.mobileweb.getCurrentPage().getName()==b.page_name&&(d=new google.maps.LatLng(b.latitude,b.longitude)));for(var h in k.events)"onLocationError"==h&&a.GMapService("Event_"+h,g,k)}try{k.gmapCreated=!0;var f=a.utility("getUiFromObject",g.name,k.name)[0];if(null!=a.utility("getSessionData","zoomObj",k.name)){var q=a.utility("getSessionData","zoomObj",k.name);q=a.parseJSON(q);
k.zoomlevel=q.zoom}mapp=new google.maps.Map(f,{zoom:k.zoomlevel,center:d,panControl:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,rotateControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP});a.mobileweb.__MAPZOOM__=mapp.zoom;google.maps.event.addListener(mapp,"idle",function(){google.maps.event.trigger(mapp,"resize")});window.gm_authFailure=function(){console.log("google map _ authFailure")};mapp.addListener("zoom_changed",function(){l.data.infowindow.setContent("Zoom: "+
mapp.getZoom());var b={page_name:g.name,u_id:k.name,zoom:mapp.getZoom()};a.utility("setSessionData",b,"zoomObj",g.name)});mapp.addListener("dragend",function(){var b={page_name:g.name,u_id:k.name,longitude:mapp.center.lng(),latitude:mapp.center.lat()};a.utility("setSessionData",b,"dragObj")});a.GMapService("setMapName",k.name)}catch(w){a.GMapService("Event_onMapLoadFail",g,k)}google.maps.event.addListenerOnce(mapp,"tilesloaded",function(){for(var b in k.events)"onMapLoadEnd"!=b&&"onMapScrollEnd"!=
b&&"onMapScrollStart"!=b&&"onNewLocation"!=b||a.GMapService("Event_"+b,g,k,mapp);void 0!=a.mobileweb[k.name]&&"ON"==a.mobileweb[k.name].Scope&&a.GMapService("OpenTargetScope",{targetpage:g.name},a.mobileweb[k.name].target)});google.maps.event.addListener(mapp,"tilesloaded",function(){(new google.maps.Geocoder).geocode({latLng:mapp.getCenter()},function(b,d){"OK"==d?(null!=b&&void 0!=b[0]&&(k.value=b[0].formatted_address,a.mobileweb.__ADDRESS__=b[0].formatted_address,a("#__ADDRESS__").val(a.mobileweb.__ADDRESS__)),
null!=a.utility("getSessionData","showRouteObj",k.name)&&(b=a.utility("getSessionData","showRouteObj",k.name),b=a.parseJSON(b),a.mobileweb.getCurrentPage().getName()==b.pagedef.name&&a.GMapService("ShowRoute",b.params,b.target,b.action,b.pagedef,b.ui))):(a.mobileweb.__ERR_CODE__=d,a.GMapService("setMapErrorMessage",d,"createGoogleMap","Geocode"),a.GMapService("Event_onMapLoadFail",g,k))});0==a("body").find("#__LAT__").length&&a("body").append("<input id='__LAT__' type='text' hidden='true'>"+a.mobileweb.__LAT__+
"</input>");0==a("body").find("#__LONG__").length&&a("body").append("<input id='__LONG__' type='text' hidden='true'>"+a.mobileweb.__LONG__+"</input>");0==a("body").find("#__MAPZOOM__").length&&a("body").append("<input id='__MAPZOOM__' type='text' hidden='true'>"+a.mobileweb.__MAPZOOM__+"</input>");a.mobileweb.__MAPZOOM__=mapp.zoom;if(void 0==a.mobileweb[k.name])a.mobileweb.__LAT__=mapp.center.lat(),a.mobileweb.__LONG__=mapp.center.lng();else if(null!=a.utility("getSessionData","mapObj")){var b=a.utility("getSessionData",
"mapObj",k.name);mapObj=a.parseJSON(b);a.mobileweb.__LAT__=mapObj.latitude;a.mobileweb.__LONG__=mapObj.longitude;mapp.setCenter({lat:mapObj.latitude,lng:mapObj.longitude})}a("#__LAT__").val(a.mobileweb.__LAT__);a("#__LONG__").val(a.mobileweb.__LONG__);a("#__MAPZOOM__").val(a.mobileweb.__MAPZOOM__);a("#__MAPZOOM__").trigger("onchange");for(var d in l.data.markers)b=l.data.markers[d],void 0!=b.spotdetail&&b.spotdetail&&(b.markerObject.setMap(null),l.data.markers.splice(d,1));g.spotdetails[k.id].data=
[];g.spotdetails[k.id].isLoaded=!1;(new a.actions(g,null,[{method:"Select",category:"DBAction",spotdetails:!0,childdef:"{'uiobject':{'ui':'GoogleMap','id':'"+k.id+"'}}",params:{tablename:"spotdetail",where:"",order:"",columns:""}}])).execute();var f=setInterval(function(){if(void 0!=g.spotdetails[k.id]&&void 0!=g.spotdetails[k.id].isLoaded&&g.spotdetails[k.id].isLoaded&&(clearInterval(f),0!=g.spotdetails[k.id].data.length)){var b=g.spotdetails[k.id].data,d=[];mapp.getZoom();for(var h in b)d.push(void 0!=
b[h].markertype&&"Custom"===b[h].markertype?{method:"AddCustomMarker",category:"GoogleMapAction",spotdetails:!0,name:k.name,data:b[h],params:{targetpage:g.name,markerid:b[h].markerid,title:b[h].title,subtitle:b[h].subtitle,leftviewimage:b[h].leftviewimage,markertype:b[h].markertype,markerimage:b[h].markerfile,anchorx:b[h].anchorx,anchory:b[h].anchory,rightviewimage:b[h].rightviewimage,showcallout:b[h].callout,latitude:b[h].latitude,longitude:b[h].longitude},condition:{},events:{Error:[],RightButtonClicked:[b[h].rightaction],
Success:[],LeftButtonClicked:[b[h].leftaction]}}:{method:"AddPinMarker",category:"GoogleMapAction",spotdetails:!0,name:k.name,data:b[h],params:{targetpage:g.name,markerid:b[h].markerid,title:b[h].title,subtitle:b[h].subtitle,leftview:b[h].leftview,rightview:b[h].rightview,showcallout:b[h].callout,latitude:b[h].latitude,longitude:b[h].longitude},condition:{},events:{Error:[],RightButtonClicked:[b[h].rightaction],Success:[],LeftButtonClicked:[b[h].leftaction]}});(new a.actions(g,k.name,d)).execute()}},
100)})}})},Event_onLoadError:function(a,k){return!1},Event_onMapLoadStart:function(g,k){void 0!=k.events.onMapLoadStart&&(new a.actions(g,k.name,k.events.onMapLoadStart.slice())).execute()},Event_onMapLoadEnd:function(g,k,d){void 0!=k.events.onMapLoadEnd&&(new a.actions(g,k.name,k.events.onMapLoadEnd.slice())).execute()},Event_onMapLoadFail:function(g,k){void 0!=k.events.onMapLoadFail&&(new a.actions(g,k.name,k.events.onMapLoadFail.slice())).execute()},Event_onNewLocation:function(g,k,d){google.maps.event.addListener(d,
"center_changed",function(){(new a.actions(g,k.name,k.events.onNewLocation.slice())).execute()})},Event_onLocationError:function(g,k){(new a.actions(g,k.name,k.events.onLocationError.slice())).execute()},Event_onMapScrollStart:function(g,k,d){google.maps.event.addListener(d,"dragstart",function(){(new a.actions(g,k.name,k.events.onMapScrollStart.slice())).execute()})},Event_onMapScrollEnd:function(g,k,d){google.maps.event.addListener(d,"dragend",function(){(new a.actions(g,k.name,k.events.onMapScrollEnd.slice())).execute()})},
setMarkerToMap:function(a,k){},setMapLocation:function(g,k,d,b,h,l){var p=a.GMapService("getMap");return a.GMapService("getLatLngByPlace",k,function(b){"Not Found"==b.latXlng?a.GMapService("Event_onMapLoadFail",h,childdef):0==b?(b=a.utility("getUiID_Object_From_Page",h.name,d.getId()),a.GMapService("Event_onLocationError",h,b)):p.setCenter(b.latXlng)})},setValueForMap:function(g,k,d,b){g=a.mobileweb.getCurrentPage().getName();a.utility("getObject",a.mobileweb.pages,"name",g);var h=a.GMapService("getMap");
g=k.split(",")[0];k=k.split(",")[1];g=a.utility("tokenizeString",g);k=a.utility("tokenizeString",k);var l=new google.maps.LatLng(g,k);(new google.maps.Geocoder).geocode({latLng:l},function(b,d){if("OK"==d)return h.setCenter(l),!0;a.mobileweb.__ERR_CODE__=d;a.GMapService("setMapErrorMessage",d,"setValueForMap","Geocode");return!1})},showLocationInfo:function(g,k,d,b,h){k=g.params;k.location=a.utility("tokenizeString",k.location,d);var q=a.GMapService("getMap");a.GMapService("getLatLngByPlace",k.location,
function(k){"Not Found"==k.latXlng?a.GMapService("Event_onMapLoadFail",d,childdef):k?(marker=new google.maps.Marker({position:k.latXlng,map:q}),l.data.infowindow.setContent("<font style='font-size=12px;'><u>Address</u> :<br><label id='locationaddress'>"+k.location+"</label><br><span style='font-size:10px;'>Latitude : <label id='targetLatitude_"+a.GMapService("getMapName")+"'  style='font-size:10px'>"+k.latitude+"</label><br>Latitude : <label id='targetLongitude_"+a.GMapService("getMapName")+"'  style='font-size:10px'>"+
k.longitude+"</label></span></font>"),l.data.infowindow.open(q,marker),h(d,b,g,void 0,!0)):h(d,b,g,void 0,!1)})},showRegionInfo:function(g,k){var d=a.GMapService("getMap");return a.GMapService("getLatLngByPlace",g.location,function(b){"Not Found"==b.latXlng?a.GMapService("Event_onMapLoadFail",pagedef,childdef):(marker=new google.maps.Marker({position:b.latXlng,map:d}),l.data.infowindow.setContent("<font style='font-size=12px;'><u>Address</u> :<br>"+b.district+"<br><span style='font-size:10px;'>Latitude : "+
b.latitude+"<br>Latitude : "+b.longitude+"</span></font>"),l.data.infowindow.open(d,marker))})},showAreaInfo:function(g,k){var d=a.GMapService("getMap");return a.GMapService("getLatLngByPlace",g.location,function(b){"Not Found"==b.latXlng?a.GMapService("Event_onMapLoadFail",pagedef,childdef):(marker=new google.maps.Marker({position:b.latXlng,map:d}),l.data.infowindow.setContent("<font style='font-size=12px;'><u>Address</u> :<br>"+b.state+"<br><span style='font-size:10px;'>Latitude : "+b.latitude+
"<br>Latitude : "+b.longitude+"</span></font>"),l.data.infowindow.open(d,marker))})},OpenTargetScope:function(g,k){setTimeout(function(){a.mobileweb[k.getName()]={Scope:"ON",target:k};var d=a.GMapService("getMap");if(!document.getElementById("targetimg_"+k.getName())&&void 0!=d){var b=a("[name='"+k.getName()+"']"),g=b.height()-20,l=b.width()-5,p=new google.maps.ElevationService,m=new google.maps.LatLng(d.center.lat(),d.center.lng()),f=8*l/30+l/30,u=22*g/30+12,w=58*l/90-3,y=22*g/30+12,A=8*l/30+l/30,
G=8*g/30-10,E=58*l/90-3,C=8*g/30-10;a(document.createElement("img")).css("position","absolute").css("background","rgba(255,255,255,0.0)").css("z-index",1).css("left","3px").css("top","10px").attr("id","targetimg_"+k.getName()).attr("src",a.utility("getSystemImage","map_marker.png","GoogleMap")).css("float","center").css("height",g+"px").css("width",l+"px").css("pointer-events","none").appendTo(b);a(document.createElement("label")).css("position","relative").css("z-index",2).css("background","rgba(0,0,0,0)").css("left",
f+"px").css("top",u+"px").attr("id","targetLongitude_"+k.getName()).css("font-size","15px").css("font-weight","bold").css("color","red").css("pointer-events","none").css("visibility","true").appendTo(b);null!=a.utility("getSessionData","mapObj",k.getName())?(g=a.utility("getSessionData","mapObj",k.getName()),mapObj=a.parseJSON(g),a("#targetLongitude_"+k.getName())[0].innerHTML=mapObj.longitude.toFixed(5)):a("#targetLongitude_"+k.getName())[0].innerHTML=d.center.lng().toFixed(5);a(document.createElement("label")).css("position",
"absolute").css("z-index",2).css("background","rgba(0,0,0,0)").css("left",w+"px").css("top",y+"px").attr("id","targetLatitude_"+k.getName()).css("font-size","15px").css("font-weight","bold").css("color","red").css("pointer-events","none").css("visibility","true").appendTo(b);null!=a.utility("getSessionData","mapObj",k.getName())?(g=a.utility("getSessionData","mapObj".targetMap.getName()),mapObj=a.parseJSON(g),a("#targetLatitude_"+k.getName())[0].innerHTML=mapObj.latitude.toFixed(5)):a("#targetLatitude_"+
k.getName())[0].innerHTML=d.center.lat().toFixed(5);a(document.createElement("label")).css("position","absolute").css("z-index",2).css("background","rgba(0,0,0,0)").css("left",A+"px").css("top",G+"px").attr("id","targetGPSStatus_"+k.getName()).css("font-size","15px").css("font-weight","bold").css("color","red").css("pointer-events","none").css("visibility","true").appendTo(b);navigator.geolocation.getCurrentPosition(function(b){a("#targetGPSStatus_"+k.getName())[0].innerHTML="GPS ON"},function(b){a("#targetGPSStatus_"+
k.getName())[0].innerHTML="GPS OFF"});0==a("body").find("#__LAT__").length&&a("body").append("<input id='__LAT__' type='text' hidden='true'>"+a.mobileweb.__LAT__+"</input>");0==a("body").find("#__LONG__").length&&a("body").append("<input id='__LONG__' type='text' hidden='true'>"+a.mobileweb.__LONG__+"</input>");0==a("body").find("#__MAPZOOM__").length&&a("body").append("<input id='__MAPZOOM__' type='text' hidden='true'>"+a.mobileweb.__MAPZOOM__+"</input>");a.mobileweb.__LAT__=d.center.lat();a("#__LAT__").val(a.mobileweb.__LAT__);
a.mobileweb.__LONG__=d.center.lng();a("#__LONG__").val(a.mobileweb.__LONG__);a("#__LAT__").trigger("onchange");a("#__LONG__").trigger("onchange");a.mobileweb.__LONG__=d.zoom;a("#__MAPZOOM__").val(a.mobileweb.__MAPZOOM__);a("#__MAPZOOM__").trigger("onchange");a(document.createElement("label")).css("position","absolute").css("z-index",2).css("background","rgba(0,0,0,0)").css("left",E+"px").css("top",C+"px").attr("id","targetXXXm_"+k.getName()).css("font-size","15px").css("font-weight","bold").css("color",
"red").css("pointer-events","none").css("visibility","true").appendTo(b);b=[];b.push(m);p.getElevationForLocations({locations:b},function(b,d){d==google.maps.ElevationStatus.OK?(action.OpenTargetScopeStatus=!0,a("#targetXXXm_"+k.getName())[0].innerHTML=b[0].elevation.toFixed(5)+" m"):(a.mobileweb.__ERR_CODE__=d,a.GMapService("setMapErrorMessage",d,"OpenTargetScope","Elevation"))});google.maps.event.addListener(d,"dragend",function(){var b=[];b.push(new google.maps.LatLng(d.center.lat(),d.center.lng()));
a.mobileweb.__LAT__=d.center.lat();a("#__LAT__").val(a.mobileweb.__LAT__);a.mobileweb.__LONG__=d.center.lng();a("#__LONG__").val(a.mobileweb.__LONG__);a("#__LAT__").trigger("onchange");a("#__LONG__").trigger("onchange");a("#targetLongitude_"+k.getName()).text(d.center.lng().toFixed(5));a("#targetLatitude_"+k.getName()).text(d.center.lat().toFixed(5));p.getElevationForLocations({locations:b},function(b,d){d==google.maps.ElevationStatus.OK?a("#targetXXXm_"+k.getName())[0].innerHTML=b[0].elevation.toFixed(5)+
" m":(a.mobileweb.__ERR_CODE__=d,a.GMapService("setMapErrorMessage",d,"OpenTargetScope","Elevation"))});void 0!=pagedef&&a.utility("setSessionData",{page_name:pagedef.name,u_id:childdef.name,longitude:a.mobileweb.__LONG__,latitude:a.mobileweb.__LAT__},"mapObj")});google.maps.event.addListener(d,"zoom_changed",function(){var b=[];b.push(new google.maps.LatLng(d.center.lat(),d.center.lng()));a.mobileweb.__LAT__=d.center.lat();a("#__LAT__").val(a.mobileweb.__LAT__);a.mobileweb.__LONG__=d.center.lng();
a("#__LONG__").val(a.mobileweb.__LONG__);a("#__LAT__").trigger("onchange");a("#__LONG__").trigger("onchange");a("#targetLongitude_"+k.getName()).text(d.center.lng().toFixed(5));a("#targetLatitude_"+k.getName()).text(d.center.lat().toFixed(5));p.getElevationForLocations({locations:b},function(b,d){d==google.maps.ElevationStatus.OK?a("#targetXXXm_"+k.getName())[0].innerHTML=b[0].elevation.toFixed(5)+" m":(a.mobileweb.__ERR_CODE__=d,a.GMapService("setMapErrorMessage","OpenTargetScope","Elevation"))});
a.utility("setSessionData",{page_name:pagedef.name,u_id:childdef.name,longitude:a.mobileweb.__LONG__,latitude:a.mobileweb.__LAT__},"mapObj")})}},1E3)},CloseTargetScope:function(g,k){return null!=document.getElementById("targetimg_"+k.getName())?(void 0!=a.mobileweb[k.getName()]&&"ON"==a.mobileweb[k.getName()].Scope&&(a.mobileweb[k.getName()].Scope="OFF"),a("#targetimg_"+k.getName()).remove(),a("#targetLongitude_"+k.getName()).remove(),a("#targetLatitude_"+k.getName()).remove(),a("#targetGPSStatus_"+
k.getName()).remove(),a("#targetXXXm_"+k.getName()).remove(),a.utility("resetMapGlobalVariable"),a("#__LAT__").trigger("onchange"),a("#__LAT__").remove(),a("#__LONG__").trigger("onchange"),a("#__LONG__").remove(),!0):!1},OpenCurrentPosition:function(g,k,d){setTimeout(function(){var b=a.GMapService("getMap");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(g){g=new google.maps.LatLng(g.coords.latitude,g.coords.longitude);var h=new google.maps.Marker({position:g,draggable:!1,
map:b,title:"Current Position"});a.GMapService("setMarkerForCurrentPost",h);b.setCenter(g);b.setZoom(18);b.setMapTypeId(google.maps.MapTypeId.ROADMAP);d.OpenCurrentPositionStatus=!0},function(a){console.log("Error: "+a)}):alert("Navigation Not Supported with your Browser")},500)},CloseCurrentPosition:function(g,k){return null!=a.GMapService("getMarkerForCurrentPost")?(a.GMapService("getMarkerForCurrentPost").setMap(null),!0):!1},ShowRoute:function(g,k,d,b,h,q){var p=a.utility("tokenizeString",g.fromlocation,
b),m=a.utility("tokenizeString",g.tolocation,b),f=a.GMapService("getMap");void 0!=k&&(k={page_name:b.name,u_id:k.getName(),params:g,targetMap:k,action:d,pagedef:b,ui:h},a.utility("setSessionData",k,"showRouteObj"));try{return a.GMapService("getLatLngByPlace",p,function(k){if("Not Found"==k.latXlng)a.GMapService("Event_onMapLoadFail",b,childdef);else{var p="",u="";return k?(p=k.latXlng,a.GMapService("getLatLngByPlace",m,function(k){var m=k.latXlng;if("Not Found"==m)a.GMapService("Event_onMapLoadFail",
b,childdef);else if(m=k.latXlng,"Not Found"==m)a.GMapService("Event_onMapLoadFail",b,childdef);else if(k)u=k.latXlng,l.data.directionsService.route({origin:p,destination:u,avoidHighways:"true"==g.highway?!1:!0,waypoints:l.data.waypoints,optimizeWaypoints:!0,travelMode:"car"==g.traffic?google.maps.DirectionsTravelMode.DRIVING:google.maps.DirectionsTravelMode.WALKING},function(g,k){if(k==google.maps.DirectionsStatus.OK)return l.data.directionsDisplay.setMap(f),l.data.directionsDisplay.setDirections(g),
l.data.routePoints={origin:p,destination:u},d.showRouteStatus=!0,a.mobileweb.__COURSE__=google.maps.geometry.spherical.computeHeading(p,u),g=g.routes[0].legs[0],null!=g&&(a.mobileweb.__ROUTETIME__=g.duration.text,a("#__ROUTETIME__").val(a.mobileweb.__ROUTETIME__),a.mobileweb.__ROUTEDISTANCE__=g.distance.text,a("#__ROUTEDISTANCE__").val(a.mobileweb.__ROUTEDISTANCE__)),0==a("body").find("#__ROUTETIME__").length&&a("body").append("<input id='__ROUTETIME__' type='text' hidden='true'>"+a.mobileweb.__ROUTETIME__+
"</input>"),0==a("body").find("#__ROUTEDISTANCE__").length&&a("body").append("<input id='__ROUTEDISTANCE__' type='text' hidden='true'>"+a.mobileweb.__ROUTEDISTANCE__+"</input>"),0==a("body").find("#__COURSE__").length&&a("body").append("<input id='__COURSE__' type='text' hidden='true'>"+a.mobileweb.__COURSE__+"</input>"),!0;a.mobileweb.__ERR_CODE__=k;a.GMapService("setMapErrorMessage",k,"ShowRoute","Direction");q(b,h,d,void 0,!1)});else return!1})):!1}},d)}catch(u){return q(b,h,d,void 0,!1),!1}},
ClearRoute:function(a,k){l.data.directionsDisplay.setMap(null)},ShowRouteList:function(g,k){a.GMapService("getMap");var d="routeListScreen_"+k.getName();if(null!==l.data.routePoints)a(document.createElement("div")).css("position","absolute").css("background","rgba(255,255,255,1.0)").css("opacity","1.0").css("height","96%").css("width","96%").css("float","center").css("top","2%").css("left","2%").css("overflow","auto").attr("id",d).appendTo(a("[name='"+k.getName()+"']")),l.data.directionsService.route({origin:l.data.routePoints.origin,
destination:l.data.routePoints.destination,travelMode:google.maps.TravelMode.DRIVING},function(b,g){g==google.maps.DirectionsStatus.OK?(l.data.directionsDisplay.setPanel(a("#"+d).get(0)),l.data.directionsDisplay.setDirections(b),a("#"+d).click(function(b){a("#"+d).remove()})):(a.mobileweb.__ERR_CODE__=g,a.GMapService("setMapErrorMessage",g,"ShowRouteList","Direction"))});else return!1},GoToStartCheckPoint:function(g,k){var d=a.GMapService("getMap");l.data.checkPoint=0;if(null!==l.data.routePoints)l.data.directionsService.route({origin:l.data.routePoints.origin,
destination:l.data.routePoints.destination,travelMode:google.maps.TravelMode.DRIVING},function(b,g){g==google.maps.DirectionsStatus.OK?(l.data.infowindow.setContent(b.routes[0].legs[0].steps[l.data.checkPoint].instructions),l.data.infowindow.setPosition(b.routes[0].legs[0].steps[l.data.checkPoint].start_location),l.data.infowindow.open(d)):(a.mobileweb.__ERR_CODE__=g,a.GMapService("setMapErrorMessage",g,"StartCheckPoint","Direction"))});else return!1},GoToNextCheckPoint:function(g,k){var d=a.GMapService("getMap");
if(null!=l.data.routePoints)l.data.directionsService.route({origin:l.data.routePoints.origin,destination:l.data.routePoints.destination,travelMode:google.maps.TravelMode.DRIVING},function(b,g){g==google.maps.DirectionsStatus.OK?(l.data.checkPoint+=1,l.data.infowindow.setContent(b.routes[0].legs[0].steps[l.data.checkPoint].instructions),l.data.infowindow.setPosition(b.routes[0].legs[0].steps[l.data.checkPoint].start_location),l.data.infowindow.open(d)):(a.mobileweb.__ERR_CODE__=g,a.GMapService("setMapErrorMessage",
g,"NextCheckPoint","Direction"))});else return!1},GoToPrevCheckPoint:function(g,k){var d=a.GMapService("getMap");if(null!=l.data.routePoints)l.data.directionsService.route({origin:l.data.routePoints.origin,destination:l.data.routePoints.destination,travelMode:google.maps.TravelMode.DRIVING},function(b,g){g==google.maps.DirectionsStatus.OK?(--l.data.checkPoint,l.data.infowindow.setContent(b.routes[0].legs[0].steps[l.data.checkPoint].instructions),l.data.infowindow.setPosition(b.routes[0].legs[0].steps[l.data.checkPoint].start_location),
l.data.infowindow.open(d)):(a.mobileweb.__ERR_CODE__=g,a.GMapService("setMapErrorMessage",g,"PrevCheckPoint","Direction"))});else return!1},AddMarker:function(g,k,d,b){var h=0,q=d.params,p=a.GMapService("getMap"),m=g.eventinitpagedef,f=void 0!=m?a.utility("findUI",m,k,d.params.title.toString()):a.utility("tokenizeString",d.params.title.toString(),g,d),u=void 0!=m?a.utility("findUI",m,k,d.params.subtitle.toString()):a.utility("tokenizeString",d.params.subtitle.toString(),g,d),w=parseFloat(void 0!=
m?a.utility("findUI",m,k,d.params.latitude.toString()):a.utility("tokenizeString",d.params.latitude.toString(),g,d)),y=parseFloat(void 0!=m?a.utility("findUI",m,k,d.params.longitude.toString()):a.utility("tokenizeString",d.params.longitude.toString(),g,d)),A=void 0!=m?a.utility("findUI",m,k,d.params.markerid.toString()):a.utility("tokenizeString",d.params.markerid.toString(),g,d);a.utility("setSessionData",{page_name:g.name,u_id:k,longitude:y,latitude:w},"MarkerObj");for(var G in l.data.markers)if(void 0!=
l.data.markers[G].markerID&&l.data.markers[G].markerID===A){l.data.markers[G].markerObject.setMap(null);l.data.markers.splice(G,1);h++;break}l.data.markerCount=h;if(void 0==d.spotdetails||1!=d.spotdetails){(new a.actions(g,null,[{method:"Select",category:"DBAction",addMarker:!0,params:{tablename:"spotdetail",where:"markerid='"+A+"'",order:"",columns:""}}])).execute();var E=setInterval(function(){void 0!=g.markerExistFlag&&(clearInterval(E),g.markerExistFlag?(new a.actions(g,null,[{method:"Update",
category:"DBAction",params:{tablename:"spotdetail",where:'markerid = "'+A+'"',record:{title:f,subtitle:u,leftview:d.params.leftview,rightview:d.params.rightview,callout:d.params.showcallout,latitude:w,longitude:y,markerfile:"",markertype:""}}}].slice())).execute():(new a.actions(g,null,[{method:"Insert",addMarker:!0,category:"DBAction",params:{tablename:"spotdetail",record:{markerid:A,title:f,subtitle:u,leftview:d.params.leftview,rightview:d.params.rightview,callout:d.params.showcallout,latitude:w,
longitude:y,markerfile:"",markertype:""}}}].slice())).execute())},100)}G=new google.maps.Marker({map:p,position:new google.maps.LatLng(w,y),title:f,subtitle:u,leftview:q.leftview,rightview:q.rightview});"None"==q.leftview||""==q.leftview?srcLeft="":"DetailDiscloser"==q.leftview?srcLeft=a.utility("getSystemImage","detail.png","GoogleMap"):"InfoLight"==q.leftview?srcLeft=a.utility("getSystemImage","infolight.png","GoogleMap"):"InfoDark"==q.leftview?srcLeft=a.utility("getSystemImage","infodark-44px.png",
"GoogleMap"):"ContactAdd"==q.leftview?srcLeft=a.utility("getSystemImage","add.png","GoogleMap"):"Custom"==q.leftview&&(srcLeft=a.utility("getSystemImage","custom-44px.png","GoogleMap"));h="";"None"==q.rightview||""==q.rightview?h="":"DetailDiscloser"==q.rightview?h=a.utility("getSystemImage","detail.png","GoogleMap"):"InfoLight"==q.rightview?h=a.utility("getSystemImage","infolight.png","GoogleMap"):"InfoDark"==q.rightview?h=a.utility("getSystemImage","infodark-44px.png","GoogleMap"):"ContactAdd"==
q.rightview?h=a.utility("getSystemImage","add.png","GoogleMap"):"Custom"==q.rightview&&(h=a.utility("getSystemImage","custom-44px.png","GoogleMap"));m="";m="None"==q.leftview||""==q.leftview||void 0==q.leftview||null==q.leftview?"<table width = '50%' height ='100%'  z-index ='1' style='overflow:hidden;'><tr height='20px'><td></td><td></td><td></td></tr> <tr><td></td >":"<table width = '50%' height ='100%'  z-index ='1' style='overflow:hidden;'><tr height='20px'><td></td><td></td><td></td></tr> <tr> <td><img id = 'leftview' height='22px' width='22px' src ='"+
srcLeft+"' /></td > ";m=m+" <td >"+f+"</td>";m="None"==q.rightview||""==q.rightview||void 0==q.rightview||null==q.rightview?m+" <td ></td>":m+" <td><img  id = 'rightview' height='22px' width='22px' src ='"+h+"' /></td>";var C=new google.maps.InfoWindow({content:"<div z-index='100' class= gm-style-iw style='overflow :auto !important ; white-space :nowrap; line-height:1.35 '/>"+(m+"</tr><tr><td></td><td>"+u+"</td></tr></table>")});a.GMapService("storeMarkers",a.mobileweb.getCurrentPage().getName(),
b.getName(),A,G,d.spotdetails);google.maps.event.addListener(G,"click",function(){var b=q.showcallout;q.showcallout="TRUE"==b||"true"==b||"True"==b?!0:"FALSE"==b||"false"==b||"False"==b?!1:b;if(q.showcallout){C.close();for(var h in g.data.contents)void 0!=g.data.contents[h]?(jQuery.extend(g.data.contents[h],{markerid:A}),jQuery.extend(g.data.contents[h],{title:f}),jQuery.extend(g.data.contents[h],{subtitle:u})):g.data.contents[h]={markerid:A,title:f,subtitle:u};C.open(p,G)}google.maps.event.addListener(C,
"domready",function(){a(".gm-style-iw").css({width:a(".gm-style-iw").width()+.25*a(".gm-style-iw").width(),overflow:"visible"});a("#leftview").bind("click",function(){if(void 0!=d.spotdetails&&d.spotdetails){a.each(d.data,function(a,b){0==g.data.contents.length?g.data.contents.push({key:b}):g.data.contents[0][a]=b});var b=d.events.LeftButtonClicked[0],f=b.substring(b.indexOf("(")+1,b.indexOf(")"));b=b.substring(0,b.indexOf("("));a.utility("triggerInjectedAction",b,f,g,k)}else void 0!=d.events&&(new a.actions(g,
k,d.events.LeftButtonClicked.slice())).execute()});a("#rightview").bind("click",function(){if(void 0!=d.spotdetails&&d.spotdetails){a.each(d.data,function(a,b){0==g.data.contents.length?g.data.contents.push({key:b}):g.data.contents[0][a]=b});var b=d.events.RightButtonClicked[0],f=b.substring(b.indexOf("(")+1,b.indexOf(")"));b=b.substring(0,b.indexOf("("));a.utility("triggerInjectedAction",b,f,g,k)}else void 0!=d.events&&(new a.actions(g,k,d.events.RightButtonClicked.slice())).execute()})})});d.markerPlotingStatus=
!0},AddCustomMarker:function(g,k,d,b){var h=0,q=d.params,p=a.GMapService("getMap"),m=parseFloat(a.utility("tokenizeString",d.params.latitude,g)),f=parseFloat(a.utility("tokenizeString",d.params.longitude,g)),u=a.utility("tokenizeString",d.params.title.toString(),g),w=a.utility("tokenizeString",d.params.subtitle.toString(),g),y=a.utility("tokenizeString",d.params.markerid.toString(),g);a.utility("setSessionData",{page_name:g.name,u_id:k,longitude:f,latitude:m},"MarkerObj");for(var A in l.data.markers)if(void 0!=
l.data.markers[A].markerID&&l.data.markers[A].markerID===y){l.data.markers[A].markerObject.setMap(null);l.data.markers.splice(A,1);h++;break}l.data.markerCount=h;(new a.actions(g,null,[{method:"Select",category:"DBAction",addMarker:!0,params:{tablename:"spotdetail",where:"markerid='"+y+"'",order:"",columns:""}}])).execute();var G=setInterval(function(){void 0!=g.markerExistFlag&&(clearInterval(G),g.markerExistFlag?(new a.actions(g,null,[{method:"Update",category:"DBAction",params:{tablename:"spotdetail",
where:'markerid = "'+d.params.markerid+'"',record:{title:"title",subtitle:"subtitle",leftviewimage:d.params.leftviewimage,rightviewimage:d.params.rightviewimage,callout:d.params.showcallout,latitude:m,longitude:f,markerfile:d.params.markerimage,anchorx:d.params.anchorx,anchory:d.params.anchory,markertype:d.params.markertype,visible:d.params.visible}}}].slice())).execute():(new a.actions(g,null,[{method:"Insert",addMarker:!0,category:"DBAction",params:{tablename:"spotdetail",record:{markerid:y,title:d.params.title,
subtitle:d.params.subtitle,leftviewimage:d.params.leftviewimage,rightviewimage:d.params.rightviewimage,callout:d.params.showcallout,latitude:d.params.latitude,longitude:d.params.longitude,markerfile:d.params.markerimage,anchorx:d.params.anchorx,anchory:d.params.anchory,markertype:d.params.markertype,visible:d.params.visible}}}].slice())).execute())},100);h=isNaN(Number(d.params.anchorx))?50:Number(d.params.anchorx);var E=isNaN(Number(d.params.anchory))?50:Number(d.params.anchory);A=new google.maps.Marker({map:p,
position:new google.maps.LatLng(m,f),title:u,subtitle:w,icon:{url:a.utility("getImage",d.params.markerimage),scaledSize:new google.maps.Size(30,30),anchor:new google.maps.Point(h,E)},leftview:q.leftview,rightview:q.rightview,animation:google.maps.Animation.DROP});srcLeft=a.utility("getImage",d.params.leftviewimage);srcRight=a.utility("getImage",d.params.rightviewimage);h="";h="<table width = '50%' height ='100%'  z-index ='1' style='overflow:hidden;'><tr height='20px'><td></td><td></td><td></td></tr> <tr> <td><img id = 'leftview' height='22px' width='22px' src ='"+
srcLeft+"' /></td > ";h=h+" <td >"+u+"</td> <td><img  id = 'rightview' height='22px' width='22px' src ='"+srcRight+"' /></td>";var C=new google.maps.InfoWindow({content:"<div z-index='100' class= gm-style-iw style='overflow :auto !important ; white-space :nowrap; line-height:1.35 '/>"+(h+"</tr><tr><td></td><td>"+w+"</td></tr></table>")});a.GMapService("storeMarkers",a.mobileweb.getCurrentPage().getName(),b.getName(),y,A,d.spotdetails);google.maps.event.addListener(A,"click",function(){if(q.showcallout){C.close();
for(var b in g.data.contents)void 0!=g.data.contents[b]?(jQuery.extend(g.data.contents[b],{markerid:y}),jQuery.extend(g.data.contents[b],{title:u}),jQuery.extend(g.data.contents[b],{subtitle:w})):g.data.contents[b]={markerid:y,title:u,subtitle:w};C.open(p,A)}google.maps.event.addListener(C,"domready",function(){a("#leftview").bind("click",function(){if(void 0!=d.spotdetails&&d.spotdetails){a.each(d.data,function(a,b){0==g.data.contents.length?g.data.contents.push({key:b}):g.data.contents[0][a]=b});
var b=d.events.LeftButtonClicked[0],f=b.substring(b.indexOf("(")+1,b.indexOf(")"));b=b.substring(0,b.indexOf("("));a.utility("triggerInjectedAction",b,f,g,k)}else void 0!=d.events&&(new a.actions(g,k,d.events.LeftButtonClicked.slice())).execute()});a("#rightview").bind("click",function(){if(void 0!=d.spotdetails&&d.spotdetails){a.each(d.data,function(a,b){0==g.data.contents.length?g.data.contents.push({key:b}):g.data.contents[0][a]=b});var b=d.events.RightButtonClicked[0],f=b.substring(b.indexOf("(")+
1,b.indexOf(")"));b=b.substring(0,b.indexOf("("));a.utility("triggerInjectedAction",b,f,g,k)}else void 0!=d.events&&(new a.actions(g,k,d.events.RightButtonClicked.slice())).execute()})})});d.markerPlotingStatus=!0},AddPinMarker:function(g,k,d,b){a.GMapService("AddMarker",g,k,d,b)},RemoveMarker:function(g,k,d,b){var h=d.params;k=!1;for(var q in l.data.markers)if(b=l.data.markers[q],h.markerid===b.markerID){b.markerObject.setMap(null);l.data.markers.splice(q,1);k=!0;break}if(k&&(void 0==d.spotdetails||
1!=d.spotdetails)){(new a.actions(g,null,[{method:"Select",category:"DBAction",addMarker:!0,params:{tablename:"spotdetail",where:"markerid='"+h.markerid+"'",order:"",columns:""}}])).execute();var p=setInterval(function(){void 0!=g.markerExistFlag&&(clearInterval(p),(new a.actions(g,null,[{method:"Delete",category:"DBAction",params:{tablename:"spotdetail",where:'markerid = "'+h.markerid+'"'}}].slice())).execute())},100)}return k},AddGeoFence:function(g,k,d,b,h){if("start"==g.geofence)k={lat:h.latitude,
lng:h.longitude},b=a.GMapService("getMap"),h=parseInt(d.params.radius),"Best"===d.params.radius&&(h=100),pointCircle=new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:b,center:k,radius:h}),g.circles.push(pointCircle);else if("stop"==g.geofence){for(var l in g.circles)isNaN(parseInt(l))||g.circles[l].setMap(null);g.circles=[]}},PantoGeofenceEnter:function(g,k,d){a.GMapService("getMap").panTo({lat:g,lng:k})},SetScale:function(g,k,d){g=
a.GMapService("getMap");k=parseInt(k);g.setZoom(k)},AddWayPoint:function(g,k,d,b){b=d.params;-1!=b.location.indexOf("(")&&-1!=b.location.indexOf(")")?(b.location=b.location.replace("(","").replace(")",""),k=parseFloat(b.location.split(",")[0]),b=parseFloat(b.location.split(",")[1]),l.data.waypoints.push({location:new google.maps.LatLng(k,b),stopover:!0}),d.addWayPointStatus=!0):a.GMapService("getLatLngByPlace",b.location,function(b){"Not Found"==b.latXlng?(d.addWayPointStatus=!1,a.GMapService("Event_onMapLoadFail",
g,childdef)):b?(l.data.waypoints.push({location:new google.maps.LatLng(b.latitude,b.longitude),stopover:!0}),d.addWayPointStatus=!0):d.addWayPointStatus=!1})}};a.GMapService=function(g){if(l[g])return void 0==l.data&&l.init(),l[g].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof g&&g)a.error("Method "+g+" does not exist on jQuery.GMapService");else return l.init.apply(this,arguments)}})(jQuery);(function(a){function l(b,d,f,g,h,k){var r={execute:function(){0==R&&"transitToAnyPage"!=f.method&&(a.utility("intializeTabStackLengthAndTabs"),R++);"transitSideBar"==f.method||void 0==b.toolbarleft||b.toolbarleft.hidden||b.isSidebarFixed||(document.getElementById("leftToolBar").style.width="0px",a(".leftToolBarOverlay").css({width:"0px"}));switch(f.method){case "SelectTab":setTimeout(function(){t()},100);break;case "View":setTimeout(function(){c()},100);break;case "transitInView":setTimeout(function(){l()},
100);break;case "Back":p();break;case "popToRootViewController":x();break;case "ReturnToParentView":u();break;case "transitToAnyPage":q();break;case "TransitToSiblingView":m();break;case "transitSideBar":T();break;case "setParentData":n();break;default:k(b,d,f,g,!1)}}},t=function(){var c=f.params.tab,n=a.utility("getTabStack"),r=parseInt(c.toString());if(!isNaN(r)&&r>=n.length)"preview"===a.mobileweb.state?a.errorhandler("alertBox","Tab index is not correct"):console.log("Tab index is not correct"),
k(b,d,f,g,!1);else{n=n[c];r={};for(var t=[],h=0;h<n.length;h++)n[h]in r||(t.push(n[h]),r[n[h]]=!0);n.splice();n=t;var l=n[n.length-1];l===b.name&&(l=n[n.length-2]);if(a.mobileweb.getCurrentPage().getName()!=l||window.location.hash.substr(1)!==l)if(a.utility("setTabPage",l),a.utility("setResetEvent",f.params.resetEvent),void 0!=l){a.utility("setTabPageData",a.mobileweb.getCurrentPage().getName(),a.mobileweb.getCurrentPage());a.mobileweb.changePage(l,f.params.transition,!1);a("#tab-"+ ++c+">a").addClass("ui-btn-active ui-state-persist");
var m=setInterval(function(){a.utility("isBusy")||!a.utility("isInitChildren")||a.utility("getPageLoadingFlag")||(clearInterval(m),b=a.utility("getObject",a.mobileweb.pages,"name",l),k(b,d,f,g,!0))},1E3)}else k(b,d,f,g,!1)}},c=function(){if("noFileExsits"===f.params.name)return alert("!! Target Page Not Found !!"),r;if(a.mobileweb.getCurrentPage().getName()==f.params.name)return r;a.utility("getTabStack");a.mobileweb.getCurrentPage().getName()!=f.params.name&&a.utility("setParentPage",a.mobileweb.getCurrentPage());
a.each(a.mobileweb.getProjectCoreData().pages,function(c,b){if(b.name===f.params.name)return a.mobileweb.pages[c]=JSON.parse(JSON.stringify(b)),!1});var c=a.utility("getObject",a.mobileweb.pages,"name",f.params.name);if(void 0!=c.parent){if(-1!=c.parent.indexOf("Sibling")){var n=c.parent;c.parent="TransitToSiblingView"==f.method&&void 0!=f.params.siblingPage?n.replace(n.substring(n.lastIndexOf("page_")),f.params.siblingPage):n.replace(n.substring(n.lastIndexOf("page_")),b.name)}if("TransitToSiblingView"==
f.method){if(-1==c.parent.indexOf(b.parent))return a.errorhandler("alertBox","Sibling Page not valid.","Sibling Page not valid."),f}else if(-1==c.parent.indexOf(b.name))return a.errorhandler("alertBox","Child Page not valid.","Child Page not valid."),f}a.utility("insertTabInformation",b.name,c.name);c.parent=b.name;if(f.params.transferdata){var t=[];c.datatransfer=!0;switch(b.type){case "BaseView":case "ScrollView":b.data.contents[0]=a.utility("savePageData",b.children,b.data.contents[0],b)}if(void 0===
d||null===d||"undefined"==typeof d.getViewType&&!d.headerFlag)a.utility("setPageWhereCond",c.name,c.data.wherecond),t.push(a.utility("clone",b.data.contents[0]));else if("BaseView"==b.type||"ScrollView"==b.type)t.push(a.utility("clone",b.data.contents[0])),a.utility("setPageWhereCond",c.name,c.data.wherecond);else if("TableView"==b.type||"DBTableView"==b.type||"RemoteTableView"==b.type)void 0===b.data.contents[0]&&(b.data.contents[0]=[]),a.each(b.children[0].group,function(c,d){a.each(d.row,function(c,
d){a.each(d.children,function(a,c){try{"SwitchBar"===c.viewtype?b.data.contents[0][c.name]=c.switchValue:"ToggleButton"===c.viewtype?b.data.contents[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?b.data.contents[0][c.name]=c.valueFormat:("Radio"===c.viewtype&&(b.data.contents[0][c.groupName]=c.groupNameData),b.data.contents[0][c.name]=c.value)}catch(ja){console.log(ja)}})})}),void 0!=b.toolbartop&&a.each(b.toolbartop.children,function(a,c){"SwitchBar"===c.viewtype?b.data.contents[0][c.name]=c.switchValue:
"ToggleButton"===c.viewtype?b.data.contents[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?b.data.contents[0][c.name]=c.valueFormat:("Radio"===c.viewtype&&(b.data.contents[0][c.groupName]=c.groupNameData),b.data.contents[0][c.name]=c.value)}),void 0!=b.toolbarbottom&&a.each(b.toolbarbottom.children,function(a,c){"SwitchBar"===c.viewtype?b.data.contents[0][c.name]=c.switchValue:"ToggleButton"===c.viewtype?b.data.contents[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?b.data.contents[0][c.name]=
c.valueFormat:("Radio"===c.viewtype&&(b.data.contents[0][c.groupName]=c.groupNameData),b.data.contents[0][c.name]=c.value)}),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,c){"SwitchBar"===c.viewtype?b.data.contents[0][c.name]=c.switchValue:"ToggleButton"===c.viewtype?b.data.contents[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?b.data.contents[0][c.name]=c.valueFormat:("Radio"===c.viewtype&&(b.data.contents[0][c.groupName]=c.groupNameData),b.data.contents[0][c.name]=c.value)}),
t.push(a.utility("clone",b.data.contents[0])),a.utility("setPageWhereCond",c.name,c.data.wherecond);else if("TableViewList"==b.type)void 0===b.data.contents[0]&&(b.data.contents[0]={}),a.each(b.children[0].group,function(c,d){a.each(d.row,function(c,d){a.each(d.children,function(a,c){"SwitchBar"===c.viewtype?b.data.contents[0][c.name]=c.switchValue:"ToggleButton"===c.viewtype?b.data.contents[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?b.data.contents[0][c.name]=c.valueFormat:("Radio"===c.viewtype&&
(b.data.contents[0][c.groupName]=c.groupNameData),b.data.contents[0][c.name]=c.value)})})}),void 0!=b.toolbartop&&a.each(b.toolbartop.children,function(a,c){"SwitchBar"===c.viewtype?b.data.contents[0][c.name]=c.switchValue:"ToggleButton"===c.viewtype?b.data.contents[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?b.data.contents[0][c.name]=c.valueFormat:("Radio"===c.viewtype&&(b.data.contents[0][c.groupName]=c.groupNameData),b.data.contents[0][c.name]=c.value)}),void 0!=b.toolbarbottom&&a.each(b.toolbarbottom.children,
function(a,c){"SwitchBar"===c.viewtype?b.data.contents[0][c.name]=c.switchValue:"ToggleButton"===c.viewtype?b.data.contents[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?b.data.contents[0][c.name]=c.valueFormat:("Radio"===c.viewtype&&(b.data.contents[0][c.groupName]=c.groupNameData),b.data.contents[0][c.name]=c.value)}),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,c){"SwitchBar"===c.viewtype?b.data.contents[0][c.name]=c.switchValue:"ToggleButton"===c.viewtype?b.data.contents[0][c.name]=
c.togglevalue:"CheckBox"===c.viewtype?b.data.contents[0][c.name]=c.valueFormat:("Radio"===c.viewtype&&(b.data.contents[0][c.groupName]=c.groupNameData),b.data.contents[0][c.name]=c.value)}),void 0!=d.rownum&&(n=b.data.contents[0][d.rownum],void 0!=n&&a.each(n,function(a,c){b.data.contents[0][a]=c})),t.push(a.utility("clone",b.data.contents[0])),a.utility("setPageWhereCond",c.name,c.data.wherecond);else{if("DBTableViewList"==b.type||"RemoteTableViewList"==b.type){void 0===b.data.contents[0]&&(b.data.contents[0]=
{});var h=[];h=void 0!=b.data.contents[0]?b.data.contents[0].constructor==Object?b.data.contents:b.data.contents[0]:b.data.contents;void 0!=h&&(void 0!=d.rownum?void 0!=h[d.rownum]?t.push(a.utility("clone",h[d.rownum])):(n=h[d.rownum],void 0!=n&&a.each(n,function(a,c){h[a]=c}),t.push(a.utility("clone",h))):void 0!=d.getId&&(n=d.getId(),n=n.substr(0,n.lastIndexOf("-")),n=n.substr(n.lastIndexOf("-")+1,n.length),isNaN(parseInt(n))?t.push(a.utility("clone",h[0])):t.push(a.utility("clone",h[n]))));void 0!=
b.toolbartop&&a.each(b.toolbartop.children,function(a,c){"SwitchBar"===c.viewtype?void 0!=t[0]&&(t[0][c.name]=c.switchValue):"ToggleButton"===c.viewtype?t[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?t[0][c.name]=c.valueFormat:"Radio"===c.viewtype?(b.data.contents[0][c.groupName]=c.groupNameData,b.data.contents[0][c.name]=c.value):void 0!=t[0]&&void 0!=c.value&&(t[0][c.name]=c.value)});void 0!=b.toolbarbottom&&a.each(b.toolbarbottom.children,function(a,c){"SwitchBar"===c.viewtype?t[0][c.name]=
c.switchValue:"ToggleButton"===c.viewtype?t[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?t[0][c.name]=c.valueFormat:"Radio"===c.viewtype?(b.data.contents[0][c.groupName]=c.groupNameData,b.data.contents[0][c.name]=c.value):void 0!=t[0]&&void 0!=c.value&&(t[0][c.name]=c.value)});void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,c){"SwitchBar"===c.viewtype?t[0][c.name]=c.switchValue:"ToggleButton"===c.viewtype?t[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?t[0][c.name]=c.valueFormat:
"Radio"===c.viewtype?(b.data.contents[0][c.groupName]=c.groupNameData,b.data.contents[0][c.name]=c.value):void 0!=t[0]&&void 0!=c.value&&(t[0][c.name]=c.value)})}else"TableViewList"==b.type?t.push(a.utility("clone",b.data.contents[0])):(void 0===b.data.contents[0]&&(b.data.contents[0]={}),void 0!=d.rownum?void 0!=b.data.contents[d.rownum]?t.push(a.utility("clone",b.data.contents[d.rownum])):(n=b.data.contents[0][d.rownum],void 0!=n&&a.each(n,function(a,c){b.data.contents[0][a]=c}),t.push(a.utility("clone",
b.data.contents[0]))):void 0!=d.getId&&(n=d.getId(),n=n.substr(0,n.lastIndexOf("-")),n=n.substr(n.lastIndexOf("-")+1,n.length),isNaN(parseInt(n))?t.push(a.utility("clone",b.data.contents[0])):t.push(a.utility("clone",b.data.contents[n]))),void 0!=b.toolbartop&&a.each(b.toolbartop.children,function(a,c){"SwitchBar"===c.viewtype?void 0!=t[0]&&(t[0][c.name]=c.switchValue):"ToggleButton"===c.viewtype?t[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?t[0][c.name]=c.valueFormat:"Radio"===c.viewtype?(b.data.contents[0][c.groupName]=
c.groupNameData,b.data.contents[0][c.name]=c.value):void 0!=t[0]&&void 0!=c.value&&(t[0][c.name]=c.value)}),void 0!=b.toolbarbottom&&a.each(b.toolbarbottom.children,function(a,c){"SwitchBar"===c.viewtype?t[0][c.name]=c.switchValue:"ToggleButton"===c.viewtype?t[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?t[0][c.name]=c.valueFormat:"Radio"===c.viewtype?(b.data.contents[0][c.groupName]=c.groupNameData,b.data.contents[0][c.name]=c.value):void 0!=t[0]&&void 0!=c.value&&(t[0][c.name]=c.value)}),void 0!=
b.toolbarleft&&a.each(b.toolbarleft.children,function(a,c){"SwitchBar"===c.viewtype?t[0][c.name]=c.switchValue:"ToggleButton"===c.viewtype?t[0][c.name]=c.togglevalue:"CheckBox"===c.viewtype?t[0][c.name]=c.valueFormat:"Radio"===c.viewtype?(b.data.contents[0][c.groupName]=c.groupNameData,b.data.contents[0][c.name]=c.value):void 0!=t[0]&&void 0!=c.value&&(t[0][c.name]=c.value)}));void 0!=c.data.wherecond&&""!=c.data.wherecond&&a.utility("setPageWhereCond",c.name,c.data.wherecond)}n={};n=b.data.servicename?
a.mobileweb.comdb.schema:a.mobileweb.localdb.schema;void 0!=b.data.pagedata&&(t&&1==t.length?-1==c.type.indexOf("TableView")?a.each(b.data.pagedata,function(a,c){void 0==t[0][a]&&(t[0][a]=c)}):jQuery.extend(t[0],b.data.pagedata):jQuery.extend(t,b.data.pagedata));c.data.contents=t;""===c.data.tablename&&(c.data.tablename=b.data.tablename);if(c.data.tablename===b.data.tablename)""===c.data.wherecond&&(c.data.wherecond=a.utility("getWhereCondition",c.data.tablename,n,c.data.contents[0]));else if(""!==
c.data.wherecond)if(console.log("Test"),!("BaseView"!=b.type&&"ScrollView"!=b.type||"DBTableViewList"!=c.type&&"RemoteTableViewList"!=c.type)){""!=c.data.contents&&(c.data.contents=t);c.data.wherecond=a.utility("getPageWhereCond",c.name);var m=c.data.wherecond;n=m.split("[");for(var x=0;x<n.length;x++)if(-1!=n[x].indexOf("]")){var p=n[x].indexOf("]"),F=n[x].substring(0,p);a.each(t[0],function(a,c){a===F&&(m=m.replace("["+F+"]",c))})}c.data.wherecond=m}else if(void 0!=c.data.wherecond&&(c.data.wherecond=
a.utility("getPageWhereCond",c.name),void 0!=c.data.wherecond&&-1<c.data.wherecond.indexOf("[")&&-1<c.data.wherecond.indexOf("]")))for(m=c.data.wherecond.split("["),x=0;x<m.length;x++)if(-1!=m[x].toString().indexOf("]")){p=m[x].toString().indexOf("]");var v="["+m[x].substring(0,p)+"]";void 0!=t&&void 0!=t[0]&&a.each(t[0],function(a,b){a===m[x].substring(0,p)&&(a=c.data.wherecond.replace(v,b),c.data.wherecond=a)})}if(void 0!=c.header&&!c.header.hidden){c.header.title=c.header.title.toString();if(void 0!=
c.header.title&&""!=c.header.title)if(B=c.header.title,-1!=c.header.title.indexOf("[")&&-1!=c.header.title.indexOf("]")){var u=c.header.title.replace("[","").replace("]","");a.each(c.data.contents[0],function(a,b){a===u&&(c.header.titleValue=b)})}else""!=B?-1!=B.indexOf("[")&&-1!=B.indexOf("]")?(u=B.replace("[","").replace("]",""),a.each(c.data.contents[0],function(a,b){a===u&&(c.header.titleValue=b)})):c.header.titleValue=B:-1!=c.header.title.indexOf("[")&&-1!=c.header.title.indexOf("]")&&(u=c.header.title.replace("[",
"").replace("]",""),0<c.data.contents.length&&null!=c.data.contents[0][u]&&(c.header.titleValue=c.data.contents[0][u]));c.header.prompt=c.header.prompt.toString();if(void 0!=c.header.prompt&&""!=c.header.prompt)if(-1!=c.header.prompt.indexOf("[")&&-1!=c.header.prompt.indexOf("]")){S=c.header.prompt;var q=c.header.prompt.replace("[","").replace("]","");a.each(c.data.contents[0],function(a,b){a===q&&(c.header.promptValue=b)})}else""!=S?(q=S.replace("[","").replace("]",""),a.each(c.data.contents[0],
function(a,b){a===q&&(c.header.promptValue=b)})):(q=c.header.prompt.replace("[","").replace("]",""),null!=c.data.contents[0][q]&&(c.header.promptValue=c.data.contents[0][q]));if("text"==c.header.backBtn.type&&(void 0!=c.header.backBtn&&void 0!=c.header.backBtn.name&&(c.header.backBtn.name=c.header.backBtn.name.toString()),void 0!=c.header.backBtn&&""!=c.header.backBtn.name))if(-1!=c.header.backBtn.name.indexOf("[")&&-1!=c.header.backBtn.name.indexOf("]")){N=c.header.backBtn.name;var T=c.header.backBtn.name.replace("[",
"").replace("]","");a.each(c.data.contents[0],function(a,b){a===T&&(c.header.backBtn.name=b)})}else""!=N?(T=N.replace("[","").replace("]",""),a.each(c.data.contents[0],function(a,b){a===T&&(c.header.backBtn.name=b)})):-1!=c.header.title.indexOf("[")&&-1!=c.header.title.indexOf("]")&&(n=c.header.backBtn.name.replace("[","").replace("]",""),0<c.data.contents.length&&void 0!=c.data.contents[0]&&null!=c.data.contents[0][n]&&(c.header.backBtn.name=c.data.contents[0][n]));void 0!=c.header.forwardBtn&&void 0!=
c.header.forwardBtn.name&&(c.header.forwardBtn.name=c.header.forwardBtn.name.toString());if(void 0!=c.header.forwardBtn&&void 0!=c.header.forwardBtn.name&&""!=c.header.forwardBtn.name)if(-1!=c.header.forwardBtn.name.indexOf("[")&&-1!=c.header.forwardBtn.name.indexOf("]")){V=c.header.forwardBtn.name;var Y=c.header.forwardBtn.name.replace("[","").replace("]","");a.each(c.data.contents[0],function(a,b){a===Y&&(c.header.forwardBtn.nameValue=b)})}else""!=V?(Y=V.replace("[","").replace("]",""),a.each(c.data.contents[0],
function(a,b){a===Y&&(c.header.forwardBtn.nameValue=b)})):(n=c.header.forwardBtn.name.replace("[","").replace("]",""),0<c.data.contents.length&&void 0!=c.data.contents[0]&&null!=c.data.contents[0][n]&&(c.header.forwardBtn.nameValue=c.data.contents[0][n]))}}if("transitView"===f.params.transitType)l();else{a.utility("setParentPagedef",b);f.params.transferdata||null==document.getElementById("leftToolBar")||b.isSidebarFixed||(document.getElementById("leftToolBar").style.width="0px",a(".leftToolBarOverlay").css({width:"0px"}));
a.mobileweb.changePage(f.params.name,f.params.transition,!1);var z=setInterval(function(){!a.utility("isBusy")&&a.utility("isInitChildren")&&(clearInterval(z),b=a.utility("getObject",a.mobileweb.pages,"name",f.params.name),c.datatransfer=!1,k(b,d,f,g,!0))},"ScrollView"===c.type&&"RemoteTableViewList"===b.type?1E3:2500)}},l=function(c){if("SplitView"===b.parentType){var n=a.utility("getObject",a.mobileweb.pages,"name",f.params.name);"sibling"==c&&(-1!=n.parent.indexOf("Sibling")&&(n.parent=f.params.siblingPage),
b.name!==f.params.siblingPage&&(b=a.utility("getObject",a.mobileweb.pages,"name",f.params.siblingPage)));n.transitType="transitInView";a("#"+b.name+"_div").css("display","none");n.pagedef=a.utility("getObject",a.mobileweb.pages,"name",a.mobileweb.getCurrentPage().getName());n.sectionX=b.sectionX;n.sectionY=b.sectionY;n.sectionwidth=b.sectionwidth;n.sectionheight=b.sectionheight;var r=setInterval(function(){clearInterval(r);var c=parseFloat(n.sectionX)*a.mobileweb.device.aspectWratio,b=parseFloat(n.sectionY)*
a.mobileweb.device.aspectHratio,d=parseFloat(n.sectionwidth)*a.mobileweb.device.aspectWratio,g=parseFloat(n.sectionheight)*a.mobileweb.device.aspectHratio;if(!n.toolbartop.hidden){b=parseFloat(n.sectionX)*a.mobileweb.device.aspectWratio;var t=parseFloat(n.sectionY)*a.mobileweb.device.aspectHratio,h=parseFloat(n.sectionwidth)*a.mobileweb.device.aspectWratio,k=parseFloat(n.toolbartop.frame.height)*a.mobileweb.device.aspectHratio;a("#"+n.name+"_toolbarTop").css({top:t+"px",left:b+"px",height:k+"px",
width:h+"px"});a("#"+n.name+"_ntd_toolbarTop").css({top:t+"px",left:b+"px",height:k+"px",width:h+"px"});b=t+k;g-=k}n.toolbarbottom.hidden||(g-=parseFloat(n.toolbarbottom.frame.height)*a.mobileweb.device.aspectHratio,k=parseFloat(n.sectionX)*a.mobileweb.device.aspectWratio,t=parseFloat(n.sectionwidth)*a.mobileweb.device.aspectWratio,h=parseFloat(n.toolbarbottom.frame.height)*a.mobileweb.device.aspectHratio,a("#"+n.name+"_toolbarBottom").css({top:"",bottom:"0px",left:k+"px",height:h+"px",width:t+"px"}),
a("#"+n.name+"_ntd_toolbarBottom").css({top:"",bottom:"0px",left:k+"px",height:h+"px",width:t+"px"}));a("#"+n.name+"_section").css({top:b+"px",left:c+"px",height:g+"px",width:d+"px"});a("#"+n.name+"_ntd_section").css({top:b+"px",left:c+"px",height:g+"px",width:d+"px"});f.params.transferdata?(a("#"+n.name+"_div").css("display","block"),a("#"+n.name+"_ntd_div").css("display","none")):(a("#"+n.name+"_ntd_div").css("display","block"),a("#"+n.name+"_div").css("display","none"));void 0!=n.events&&void 0!=
n.events.BeforeViewPage&&0<n.events.BeforeViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(n,null,n.events.BeforeViewPage.slice())).execute())},1E3)}else"PageScrollView"==a.mobileweb.getCurrentPage().getViewType()&&(a("#"+f.params.siblingPage+"_div")[0].scrollIntoView(),c=a.utility("getObject",b.pagedef.children,"name",f.params.siblingPage),f.params.transferdata&&(c.data.contents[0]=a.utility("savePageData",b.children,b.data.contents[0],b)),k(c,d,f,g,!0))},m=function(){if("SplitView"!=
a.mobileweb.getCurrentPage().getViewType()&&"PageScrollView"!=a.mobileweb.getCurrentPage().getViewType())return!1;a.each(a.mobileweb.getProjectCoreData().pages,function(c,b){if(b.name===f.params.name)return a.mobileweb.pages[c]=JSON.parse(JSON.stringify(b)),!1});var d=""!=f.params.name?a.utility("getObject",a.mobileweb.pages,"name",f.params.name):a.utility("getObject",a.mobileweb.pages,"name",f.params.siblingPage);if(void 0!=d){if(void 0!=d.parent&&-1==d.parent.indexOf(b.parent)&&-1==b.parent.indexOf(d.parent))return a.errorhandler("alertBox",
"Page not valid.","\u7121\u52b9\u306a\u30da\u30fc\u30b8\u3067\u3059\u3002"),f;var n=d.parent.split("_");d.parent=0<n.length?"page_"+n[n.length-1]:b.parent;void 0!=b?void 0==g&&(g=b):b=a.utility("getObject",a.mobileweb.pages,"name",f.params.siblingPage);if("PageScrollView"==a.mobileweb.getCurrentPage().getViewType()){var r=!1,t=0;a.each(b.pagedef.children,function(a,c){c.name!=f.params.siblingPage||""!=f.params.name&&f.params.name!=f.params.siblingPage||(t=a,r=!0)});r?(a.utility("setParentPage",a.mobileweb.getCurrentPage()),
l(t)):c()}else"transitView"===f.params.transitType?(a.utility("setParentPage",a.mobileweb.getCurrentPage()),l("sibling")):c()}},p=function(){if(a.mobileweb.getCurrentPage().getName()==f.params.targetPage)return r;var c=a.utility("getTabStack");if(-1<b.parent.indexOf("tab")){var n=b.parent.split("_");b.parent=n[n.length-2]+"_"+n[n.length-1];-1==b.parent.indexOf("page_")&&(pageddef.parent="page_"+b.parent)}a.each(c,function(c,d){a.each(d,function(a,d){b.parent==d&&(H=c)})});n=[];n=c[H];n.pop();a.utility("updateTabStacks",
H,n);a.utility("updateTabPageDataArray",b.name);n=a.utility("getObject",a.mobileweb.pages,"name",b.parent);if(void 0!=n){c=!1;void 0!=n.parentType&&"SplitView"==n.parentType?(void 0!=b.transitType&&"transitInView"==b.transitType&&(c=!0),n=n.parent.split("_"),n=n[n.length-2]+"_"+n[n.length-1]):n=b.parent;void 0==f.params?a.mobileweb.changePage(n,"slide",!0):a.mobileweb.changePage(n,f.params.transition,!0);n=0<a.utility("getRegisteredActions").length?2E3:1E3;var t=setInterval(function(){!a.utility("isBusy")&&
a.utility("isInitChildren")&&(clearInterval(t),b=a.utility("getObject",a.mobileweb.pages,"name",b.parent),k(b,d,f,g,!0))},n);c&&F(b.name)}else k(b,d,f,g,!1)},F=function(c){var d=setInterval(function(){clearInterval(d);var n=a("#"+c+"_div"),f=a("#"+b.name+"_div");void 0!=n&&void 0!=f&&(n.css("display","none"),f.css("display","block"));a(".ui-loader").css("display","none");n=b.parent.split("_");n=n[n.length-2]+"_"+n[n.length-1];n=a("[data-url="+n+"]");void 0!=n&&2==n.length&&n[1].remove()},2E3)},x=
function(){if(a.mobileweb.getCurrentPage().getName()==f.params.targetPage)return r;var c="",n=b.name;do c=a.utility("getObject",a.mobileweb.pages,"name",n),void 0!=c&&(n=c.parent);while(void 0!=c);var t=1;if(-1!=n.indexOf("_")){c=n.split("_");for(var h=0;h<c.length;h++){var l=c[h];if(-1<l.indexOf("Tab")){n=l;break}}}c=n.replace("Tab","");t=isNaN(c)?n.charAt(n.length-1):c;t--;var m="";a.each(a.mobileweb.tabs,function(a,c){t==a&&(m=c.page)});if(b.name==m)k(b,d,f,g,!1);else{n=[];n=a.utility("getTabStack")[t];
n=[];n[n.length]=m;a.utility("updateTabStacks",t,n);a.mobileweb.changeTab(++t,f.params.transition);var x=setInterval(function(){!a.utility("isBusy")&&a.utility("isInitChildren")&&(clearInterval(x),b=a.utility("getObject",a.mobileweb.pages,"name",m),a.utility("ApplyOnSucessAndOnErrorEvents",b,d,f.events,!0))},1E3)}},u=function(){if(a.mobileweb.getCurrentPage().getName()==f.params.targetPage)return r;var c=a.utility("getTabStack");a.each(c,function(c,b){a.each(b,function(a,b){f.params.targetPage==b&&
(H=c)})});var n=[],t=f.params.targetPage;n=c[H];n.splice(n.indexOf(t)+1,n.length-(n.indexOf(t)+1));a.utility("updateTabStacks",H,n);a.mobileweb.changePage(f.params.targetPage,f.params.transition,"returnToParentView");var h=setInterval(function(){!a.utility("isBusy")&&a.utility("isInitChildren")&&(clearInterval(h),b=a.utility("getObject",a.mobileweb.pages,"name",f.params.targetPage),k(b,d,f,g,!0))},1E3)},q=function(){if(a.mobileweb.getCurrentPage().getName()==f.params.targetPage)return r;var c=a.utility("getTabStack"),
b=a.page(a.utility("getObject",a.mobileweb.pages,"name",f.params.name)),d=b.getParent().split("_")[0],n=0;"page"!=d.substring(0,4)?(n=d.substring(3,d.length-1),n=n+""+d.charAt(d.length-1),n--):a.each(c,function(c,b){a.each(b,function(a,b){d==b?n=c:console.log("No Tab Index")})});var g=[];g=c[n];g[g.length]=b.getName();a.utility("updateTabStacks",n,g);page1=a.mobileweb.getPage(f.params.name);c=page1.getParent().split("_");page1.setParent(c[c.length-2]+"_"+c[c.length-1]);page1.show(f.params.transition,
!1);page1.liveContainer()},T=function(){var c=a.mobileweb.device.aspectHratio;a.mobileweb.device.aspectHratio=a.mobileweb.device.leftbarHratio;a.mobileweb.device.leftbarHratio=c;void 0!=b.parentType&&"SplitView"==b.parentType?b.parentPage=a.utility("getObject",a.mobileweb.pages,"name",a.mobileweb.getCurrentPage().getName()):void 0!=b.sidebarParentPagedef&&(b=a.utility("getObject",a.mobileweb.pages,"name",a.mobileweb.getCurrentPage().getName()));if(!b.toolbarleft.hidden||void 0!=b.parentPage&&!b.parentPage.hidden){if("0px"!=
a("#leftToolBar").css("width")&&"0px"!=a(".leftToolBarOverlay").css("width"))document.getElementById("leftToolBar").style.width="0px",a(".leftToolBarOverlay").css({width:"0px"});else{var n=Math.ceil(240*a.mobileweb.device.aspectWratio);a("#leftToolBar").css({"box-shadow":"5px 5px 5px #888888"});a(".leftToolBarOverlay").css({width:b.width*a.mobileweb.device.aspectWratio});"FreeScroll"==b.toolbarleft.view?("preview"===a.mobileweb.state&&a("#iscroll_leftToolBar_"+b.name).css({height:b.toolbarleft.frame.height}),
void 0!=a(".sidenav").get(0)&&(a(".sidenav").children("#iscroll_leftToolBar_"+b.name),1==a(".sidenav").children().length&&(leftToolBar.iscroll={},leftToolBar.iscroll=new iScroll(a(".sidenav").get(0),{useTransform:!1,bounceLock:!0,onBeforeScrollStart:function(a){}}))),n+=10):"TableView"==b.toolbarleft.view&&(parseInt(a("#iscroll_leftToolBar_"+b.name).css("height"))<parseInt(a(".ui-table-position").css("height"))&&a("#iscroll_leftToolBar_"+b.name).css({height:parseInt(a(".ui-table-position").css("height"))}),
c=parseFloat(a("#iscroll_leftToolBar_"+b.name).css("height").replace("px","")),a(".sidenav").get(0).clientHeight!=c&&(n+=10),void 0!=a(".sidenav").get(0)&&1==a(".sidenav").children().length&&(leftToolBar.iscroll={},leftToolBar.iscroll=new iScroll(a(".sidenav").get(0),{useTransform:!1,bounceLock:!0})));a("#leftToolBar").css({width:n+"px"});a.isEmptyObject(leftToolBar.iscroll)||(leftToolBar.iscroll.hScroll=!1);c=parseFloat(a("#leftToolBar").css("left").replace("px",""));a(".leftToolBarOverlay").css({left:c});
var r=setInterval(function(){clearInterval(r);var c=n+parseFloat(a("#leftToolBar").css("left").replace("px",""));a(".leftToolBarOverlay").css({left:c,width:b.width*a.mobileweb.device.aspectWratio-n});-1<b.type.indexOf("Table")&&void 0!=a("a")[0]&&(c=a("a")[0].href)&&"#"==c.substr(-1,1)&&(a("a")[0].href="#"+b.name)},500)}k(b,d,f,g,!0)}else k(b,d,f,g,!1)},n=function(){var c=b.parent.split("page");f.params.targetpage="page"+c[c.length-1];c=0;var n=a.utility("getObject",a.mobileweb.pages,"name",f.params.targetpage);
if(void 0!=n&&null!=n){c++;var r=0;void 0!=n.data.contents[0]&&a.each(n.data.contents[0],function(c,b){c===f.name&&(r++,n.data.contents[0][c]=a.utility("tokenizeString",f.params.value,n,f))});0!=r&&(n.data.contents[0][f.params.value.replace("[","").replace("]","")]=a.utility("tokenizeString",f.params.value,n,f));a.mobileweb.getPage(n.name);var t={},h=!1;(h=void 0==f.condition||a.isEmptyObject(f.condition)?!0:a.utility("parseCondition",b,d,f,g,f.condition.groupcases))?(h=a.utility("clone",f),void 0==
h.condition||a.isEmptyObject(h.condition)||(h.condition.result=!0),delete h.events,void 0!=f.params.value&&(h.params.value=f.params.value),h.method="SetMainValue",h.category="MainValue",t={pagedef:a.utility("clone",b),ui:d,action:h,target:t},a.utility("setRegisteredActions",t),k(b,d,f,g,!0)):k(b,d,f,g,!1)}0==c&&k(b,d,f,g,!1)};return r}function g(b,d,f,g,h,k){var r={execute:function(){if("SplitCSV"!==f.method&&"SetMainValue"==f.method&&"where"!==f.name.toLowerCase()&&"sort"!==f.name.toLowerCase()){var v=
a.errorhandler("checkTargetUIObject",h,f.params,f);if(!v&&"ResetViewData"!==f.method&&(!v||"CheckBox"!==h.getViewType()&&"ProgressBar"!==h.getViewType()&&"SwitchBar"!==h.getViewType()&&"Slider"!==h.getViewType()))return k(b,d,f,g,v),r}"ResetViewData"!=f.method&&"SetMainValue"!=f.method&&(a.isEmptyObject(h)||a.errorhandler("checkforTextSupportedUI",h.getViewType())||k(b,d,f,g,!1));switch(f.method){case "ResetViewData":t();break;case "SetMainValue":c();break;case "Calculate":l();break;case "AppendText":m();
break;case "ClearText":a:if(a.isEmptyObject(h))k(b,d,f,g,!1);else{if("TextField"==h.getViewType()||"NumericField"==h.getViewType()||"TextArea"==h.getViewType())h.setValue(""),a("#"+h.getId()).val("");else if("TextButton"==h.getViewType())h.setValue("");else if("Indicator"===h.getViewType()||"ComboBox"==h.getViewType()||"ImageButton"==h.getViewType()){k(b,d,f,g,!1);break a}else"SearchBar"===h.getViewType()?h.setValue(""):(h.setValue(""),a("#"+h.getId()).text(""));k(b,d,f,g,!0)}break;case "DeleteLastOneCharacter":p();
break;case "combineToCsv":u();break;case "SplitCSV":x();break;case "StrToHex":q();break;case "HexToStr":F();break;default:k(b,d,f,g,!1)}}},t=function(){var c=100,n=f.params.targetpage,h=!1;if(void 0!=b){void 0!=b.sidebarParentPagedef&&(b=b.sidebarParentPagedef);var r=b;a.utility("clone",r);a.utility("setreSettingDataStatus",!0);if("PageScrollView"==b.parentType)a.each(r.childrenUI,function(c,b){void 0!=b.getTemplate()&&""!=b.getTemplate()&&(void 0!=r.data.contents[0]?b.setValue(a.utility("tokenizeString",
a.utility("extractDataFromRecord",r.data.contents[0],b.getTemplate())),r):b.setValue(a.utility("tokenizeString",b.getTemplate(),r)));b.applyOverrides()});else if(void 0==b.parentType)if("DBTableView"==r.type||"RemoteTableView"==r.type)a.utility("reloadDBRecordViewPage",b),h=!0;else if("DBTableViewList"===r.type||"RemoteTableViewList"===r.type){var t="RemoteTableViewList"===r.type?1500:400;"RemoteTableViewList"===r.type?a(".pagination").css({visibility:"hidden"}):"DBTableViewList"==b.type&&(new a.actions(b,
null,[{method:"NumRecords",category:"DBAction",params:{table:b.data.tablename,where:b.data.wherecond,order:b.data.order,fields:""}}])).execute();a.blockUI({css:{backgroundColor:"transparent",border:"none"},message:'<div class="spinner" style="font-size: 18px;font-weight: bold;color: gray;">Please wait...</div>',baseZ:1500,overlayCSS:{backgroundColor:"#D3D3D3",opacity:.5,cursor:"wait"}});(function(c){c.css("position","absolute");c.css("top",(a(window).height()-c.height())/2+a(window).scrollTop()+"px");
c.css("left",(a(window).width()-c.width())/2+a(window).scrollLeft()+"px")})(a(".blockUI.blockMsg"));a("#empty_list").css({visibility:"hidden"});a("#pagination-container").css({visibility:"hidden"});void 0!=r.iscroll&&(r.iscroll.destroy(),a("#iscroll_"+r.name+"> div:nth-child(2)").remove());var l=a("#"+r.children[0].id+" ul").attr("id");a("#"+l+" li").remove();var m=setInterval(function(){clearInterval(m);r.reloaded=!0;a.utility("setReverseTransition",!1);a.utility("reloadRemoteListViewPage",r);h=
!0},t)}else{if("BaseView"===r.type||"ScrollView"===r.type)t=a.mobileweb.getPage(r.name),a.utility("setReverseTransition",!1),a.utility("setAppBootingForFirstTime",!1),t.refreshDisplay(!0),h=!0}else void 0!=b.parentType&&"SplitView"===b.parentType&&(n!=b.name?(a.utility("reloadSplitViewPageSection",b,n),h=!0):"RemoteTableViewList"===b.type?"SamePage"===b.data.contents.pageCallback?(a.utility("reloadSplitViewPageSection",b,n),h=!0):"DifferentPage"===b.data.contents.pageCallback&&(a.utility("reloadRemoteListViewPage",
b),h=!0):(a.utility("reloadSplitViewPageSection",b,n),h=!0));void 0!=b.parentType&&"SplitView"!=b.parentType||h||(t=a.utility("getObject",a.mobileweb.pages,"name",n).parent.split("_"),t="page_"+t[t.length-1],t==b.name&&a.utility("reloadSplitViewPageSection",b,n));if("RemoteTableViewList"===b.type||"DBTableViewList"===b.type)c=2E3;var x=setInterval(function(){a.utility("isInitChildren")&&(clearInterval(x),a.utility("setreSettingDataStatus",!1),k(b,d,f,g,!0))},c)}},c=function(){var c="",n=f.params.value;
f.params.value=a.utility("checkGlobalVariable",f.params.value);if(void 0!=f.params.value){var r=f.params.value;if(-1!=r.indexOf("@@")||-1!=r.indexOf(/@@/gi))r=a.utility("tokenizeString",r,b,f)}if("where"===f.name.toLowerCase()||"sort"===f.name.toLowerCase()){var t=a.utility("getObject",a.mobileweb.pages,"name",f.params.targetpage);void 0==t||"BaseView"==t.type&&"ScrollView"==t.type?k(b,d,f,g,!1):("where"===f.name.toLowerCase()&&(t.data.wherecond=f.params.value),"sort"===f.name.toLowerCase()&&(t.data.order=
f.params.value.replace("="," ").replace("'","")),t.data.updated=!1,k(b,d,f,g,!0))}else{var l=null;if(-1!=f.params.value.indexOf("[")&&-1!=f.params.value.indexOf("]")){var m=f.params.value.replace("[","");m=m.replace("]","");if(void 0!==g){c=f.params.value;t=f.params.value.split("[");for(var x=0;x<t.length;x++)if(-1!=t[x].toString().indexOf("]")){var p=t[x].indexOf("]"),v="["+t[x].substring(0,p)+"]";m=t[x].substring(0,p);"BaseView"==g.type||"ScrollView"==g.type?(a.each(g.children,function(a,b){b.name==
m&&(l=c=c.replace(v,b.value))}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==m&&(l=c=c.replace(v,b.value))}),a.each(g.toolbarbottom.children,function(a,b){b.name==m&&(l=c=c.replace(v,b.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==m&&(l=c=c.replace(v,b.value))}),void 0!=g.data&&void 0!=g.data.contents&&(g.data.contents.constructor==Array?a.each(g.data.contents,function(b,d){void 0!=d&&a.each(d,function(a,
b){a==m&&(l=c=c.replace(v,b))})}):a.each(g.data.contents,function(a,b){a==m&&(l=c=c.replace(v,b))})),null===l&&(l=c=c.replace(v,a.utility("tokenizeString",v,b,f)))):"RemoteTableViewList"===g.type||"DBTableViewList"===g.type?(void 0!=g.data.contents.currentRow&&(d.rownum=g.data.contents.currentRow),void 0!=d&&void 0==d.rownum&&(p=0,void 0!=d.getId()&&(p=d.getId().substr(0,d.getId().lastIndexOf("-")),p=p.substr(p.lastIndexOf("-")+1,p.length)),isNaN(parseInt(p))?(void 0!=d.getName()&&(rownum=d.getName().substring(d.getName().lastIndexOf("-")+
1,d.getName().length)),isNaN(parseInt(p))?d.rownum=0:d.rownum=p):d.rownum=p),p="Row"==d.getViewType()?d.id:d.getId(),void 0!=d.rownum&&2<p.split("-").length&&a.each(void 0!=g.data.contents[0][d.rownum]?g.data.contents[0][d.rownum]:void 0!=g.data.contents[d.rownum]?g.data.contents[d.rownum]:g.data.contents[0],function(a,b){a==m&&(l=c=c.replace(v,b))}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==m&&(l=c=c.replace(v,b.value))}),a.each(g.toolbarbottom.children,
function(a,b){b.name==m&&(l=c=c.replace(v,b.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==m&&(l=c=c.replace(v,b.value))})):(a.each(g.data.contents,function(b,d){a.each(d,function(a,b){a==m&&(l=c=c.replace(v,b))})}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==m&&(l=c=c.replace(v,b.value))}),a.each(g.toolbarbottom.children,function(a,b){b.name==m&&(l=c=c.replace(v,b.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,
function(a,b){b.name==m&&(l=c=c.replace(v,b.value))}))}}else if("BaseView"==b.type||"ScrollView"==b.type)l=a.utility("tokenizeString",f.params.value,b,f);else for(c=f.params.value,t=f.params.value.split("["),x=0;x<t.length;x++){if(-1!=t[x].toString().indexOf("]"))if(p=t[x].indexOf("]"),v="["+t[x].substring(0,p)+"]",m=t[x].substring(0,p),"RemoteTableViewList"===b.type||"DBTableViewList"===b.type){void 0!=b.data.contents.currentRow&&(d.rownum=b.data.contents.currentRow);void 0!=d&&void 0==d.rownum&&
(p=0,void 0!=d.getId()&&(p=d.getId().substr(0,d.getId().lastIndexOf("-")),p=p.substr(p.lastIndexOf("-")+1,p.length)),isNaN(parseInt(p))?(void 0!=d.getName()&&(rownum=d.getName().substring(d.getName().lastIndexOf("-")+1,d.getName().length)),isNaN(parseInt(p))?d.rownum=0:d.rownum=p):d.rownum=p);p="Row"==d.getViewType()?d.id:d.getId();void 0!=d.rownum&&2<p.split("-").length&&a.each(void 0!=b.data.contents[0][d.rownum]?b.data.contents[0][d.rownum]:b.data.contents[d.rownum],function(a,b){a==m&&(l=c=c.replace(v,
b))});var u=!1;void 0!=b.toolbartop&&void 0!=b.toolbarbottom&&(a.each(b.toolbartop.children,function(a,b){b.id==h.getId()&&(u=!0);b.name==m&&(l=c=c.replace(v,b.value))}),a.each(b.toolbarbottom.children,function(a,b){b.id==h.getId()&&(u=!0);b.name==m&&(l=c=c.replace(v,b.value))}));void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,b){b.id==h.getId()&&(u=!0);b.name==m&&(l=c=c.replace(v,b.value))});!u||null!=l&&-1==l.indexOf("[")||a.each(b.data.contents[0],function(a,b){a==m&&(l=c=c.replace(v,
b))})}else"BaseView"==b.type||"ScrollView"==b.type?l=a.utility("tokenizeString",f.params.value,b,f):(a.each(b.data.contents,function(b,d){a.each(d,function(a,b){a==m&&(l=c=c.replace(v,b))})}),void 0!=b.toolbartop&&void 0!=b.toolbarbottom&&(a.each(b.toolbartop.children,function(a,b){b.name==m&&(l=c=c.replace(v,b.value))}),a.each(b.toolbarbottom.children,function(a,b){b.name==m&&(l=c=c.replace(v,b.value))})),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,b){b.name==m&&(l=c=c.replace(v,
b.value))}));if((void 0==l||""==l)&&0<a.utility("GetCSVData").length){var q=a.utility("GetCSVData");t=f.params.value.split("[");for(x=0;x<t.length;x++)if(-1!=t[x].indexOf("]")){p=t[x].indexOf("]");v="["+t[x].substring(0,p)+"]";for(var F in q)if(-1!=t[x].substring(0,p).indexOf("-")){var z=t[x].substring(0,p).split("-");if(q[F].prefix===z[0])for(var K in q[F].rowData)z[1]===K&&(l=l+""+q[F].rowData[K].replace('"',"").replace('"',""))}}}}}else l=a.utility("tokenizeString",f.params.value,b,f);if(void 0!=
l&&"string"===a.type(l)&&0==l.indexOf("@@")){if(-1!=r.indexOf("HASH")){-1!=r.indexOf("[")&&-1!=r.indexOf("]")&&(n=r.replace("@@HASH(",""),n=n.split(",")[0].replace("[","").replace("]","").replace("'","").replace("'",""),m=a.utility("CheckAndGetUIElementValue",a("[name='"+n+"']"),n,b),r=r.replace("@@","").replace("["+n+"]",m));r=r.replace("@@","");var w=eval("$."+r);setTimeout(function(){void 0!==w&&w.then(function(a){r=a;h.setValue(a,!0);k(b,d,f,g,!0)}).catch(function(a){h.setValue("");k(b,d,f,g,
!1)})},500);return}l=a.utility("tokenizeString",l,b,f)}null===l&&-1!==f.params.value.indexOf("@@")&&(l=r);a.utility("updateDataContents",h.getName(),l,b,h);"Radio"!=h.getViewType()&&a.utility("updateChildrenData",b,h.getName(),l);if("TextField"==h.getViewType()||"NumericField"==h.getViewType()||"Label"==h.getViewType()||"TextArea"==h.getViewType())void 0!==l&&"undefined"!==l?(h.setValue(l,!0),k(b,d,f,g,!0)):(h.setValue(""),k(b,d,f,g,!1));else if("Image"==h.getViewType())t=l,"url"!=h.getSource()&&
("remote"==h.getSource()||"remotedb"==h.getSource()?-1==l.indexOf("http")&&(t=a.utility("getRemoteImage",l)):t=a.utility("getImage",l)),a("#"+h.getId()).attr("src",t),h.setValue(l),k(b,d,f,g,!0);else if("WebView"==h.getViewType())h.setValue(l),k(b,d,f,g,!0);else if("CheckBox"==h.getViewType())l=l.toLowerCase(),"false"===l||"off"===l||"0"==l||"no"==l?(a("#"+h.getId()+h.getName()).attr("checked",!1),a("#"+h.getId()+h.getName()).change(),h.parseValue(l),k(b,d,f,g,!0)):"on"===l||"true"===l||"1"==l||"yes"==
l?(a("#"+h.getId()+h.getName()).attr("checked",!0),a("#"+h.getId()+h.getName()).change(),h.parseValue(l),k(b,d,f,g,!0)):k(b,d,f,g,!1);else if("ToggleButton"==h.getViewType())t=l.toLowerCase(),"on"==t||"1"==t||"true"==t||"yes"==t||"off"==t||"0"==t||"false"==t||"no"==t?(h.setValue(t,!0),k(b,d,f,g,!0)):k(b,d,f,g,!1);else if("RoundButton"==h.getViewType()||"TextButton"==h.getViewType())h.setValue(l),k(b,d,f,g,!0);else if("SwitchBar"==h.getViewType())l=l.toLowerCase(),"true"==l||"false"==l||"1"==l||"0"==
l||"on"==l||"off"==l||"yes"==l||"no"==l?(h.setActionFlag(),h.setSelected(l),k(b,d,f,g,!0)):k(b,d,f,g,!1);else if("Slider"==h.getViewType())isNaN(l)?k(b,d,f,g,!1):(t={page_name:b.name,u_id:h.getId(),value:l},a.utility("setSessionData",t,"sliderObj"),a("#"+h.getId()+">input").attr("value",l),a("#"+h.getId()+">input").slider("refresh"),k(b,d,f,g,!0),h.triggerEvent());else if("GoogleMap"==h.getViewType())""===l?k(b,d,f,g,!1):k(b,d,f,g,!0),a.GMapService("setMapLocation",f.params,l,h,f,b,d);else if("ProgressBar"==
h.getViewType())isNaN(l)?k(b,d,f,g,!1):(t={page_name:b.name,u_id:h.getId(),targetValue:l},a.utility("setSessionData",t,"progressBarObj"),h.setProgress(l),k(b,d,f,g,!0));else if("Calendar"==h.getViewType())"invalid date"!=a.utility("verifyFullDate",l)?(h.setValue(l),k(b,d,f,g,!0)):k(b,d,f,g,!1);else if("Picker"==h.getViewType()){var D=!1,O=[],T=l.split(",");if(a("#"+h.getId()).find(" .pickerTable tr"))if(a("#"+h.getId()).find("table").length===T.length)if(a("#"+h.getId()).find("table").each(function(c,
b){D=!1;var d=T[c];a(b).find("tr").each(function(c,b){a(b).removeClass("activeRow");if(void 0!=a(b).attr("val")&&a(b).attr("val")==d)return O.push(b),D=!0,!1});if(!D)return!1}),D){for(p=0;p<O.length;p++)a(O[p]).addClass("activeRow");h.setValue(l);h.triggerEvent();k(b,d,f,g,!0)}else k(b,d,f,g,!1);else k(b,d,f,g,!1)}else"Segment"==h.getViewType()?(t=h.findItemId(l),void 0!=t?(a("#"+t).trigger("tap"),k(b,d,f,g,!0)):k(b,d,f,g,!1)):"Radio"===h.getViewType()?(h.setValue(l),k(b,d,f,g,!0)):"SoundBox"===h.getViewType()?
(h.setValue(l),k(b,d,f,g,!0)):"VideoBox"===h.getViewType()?(h.setValue(l),k(b,d,f,g,!0)):"ComboBox"===h.getViewType()?(h.setValue(l),k(b,d,f,g,!0)):"LinkLabel"===h.getViewType()?(h.setValue(l),k(b,d,f,g,!0)):k(b,d,f,g,!1)}f.params.value=n},l=function(){if(a.isEmptyObject(h))k(b,d,f,g,!1);else if("Indicator"===h.getViewType()||"ImageButton"===h.getViewType())k(b,d,f,g,!1);else{f.params.value=f.params.value.toString().replace("%2B","+").replace("%2D","-");for(var c=f.params.value,n=c.split("["),r=0;r<
n.length;r++)if(-1!=n[r].indexOf("]")){var t=n[r].indexOf("]");t="["+n[r].substring(0,t)+"]";var l="";if(void 0!==g)l=t,l=l.replace("[","").replace("]","").replace(" ",""),"BaseView"==g.type||"ScrollView"==g.type?(a.each(g.children,function(a,c){c.name==l&&(l=c.value)}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,c){c.name==l&&(l=c.value)}),a.each(g.toolbarbottom.children,function(a,c){c.name==l&&(l=c.value)})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,
function(a,c){c.name==l&&(l=c.value)})):"RemoteTableViewList"===g.type||"DBTableViewList"===g.type?(void 0!=d&&void 0!=d.rownum&&a.each(g.data.contents[d.rownum],function(a,c){a==l&&(l=c)}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,c){c.name==l&&(l=c.value)}),a.each(g.toolbarbottom.children,function(a,c){c.name==l&&(l=c.value)})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,c){c.name==l&&(l=c.value)})):(a.each(g.data.contents,function(c,
b){a.each(b,function(a,c){a==l&&(l=c)})}),a.each(g.children[0].group[0].row,function(c,b){a.each(b.children,function(a,c){c.name==l&&(l=c.value)})}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,c){c.name==l&&(l=c.value)}),a.each(g.toolbarbottom.children,function(a,c){c.name==l&&(l=c.value)})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,c){c.name==l&&(l=c.value)}));else{var m=t;m=m.replace("[","").replace("]","").replace(" ","");l=a.utility("CheckAndGetUIElementValue",
a("[name='"+m+"']"),m,b)}"\u00c3\u00b7"==l?l=l.replace("\u00c3\u00b7","/"):(0==l.length&&(l=0),isNaN(l)||(l=parseFloat(l)));c=c.replace(t,l)}try{if(-1!=c.indexOf("^")){var x=c.split("^");c=Math.pow(x[0],x[1])}else c=eval(c.toString())}catch(ea){return c="0",k(b,d,f,g,!1)}c=c.toString();isNaN(c)?c="0":-1<c.indexOf(".")?(c=(Math.round(1E5*c)/1E5).toString(),c=Number.parseFloat(c).toFixed(5)):-1<c.indexOf("e-")&&(c=Number(c).toPrecision(9),c=Number.parseFloat(c).toFixed(5));h.setValue(c);a.utility("updateDataContents",
h.getName(),h.getValue(),b,h);a.utility("updateChildrenData",b,h.getName(),h.getValue());k(b,d,f,g,!0)}},m=function(){var c="";f.params.value=a.utility("checkGlobalVariable",f.params.value);var n=a.errorhandler("checkTargetUIObject",h,f.params,f);if(!n)return k(b,d,f,g,n),r;if(a.isEmptyObject(h))k(b,d,f,g,!1);else{if(-1!=f.params.value.indexOf("[")&&-1!=f.params.value.indexOf("]")){var t=f.params.value.replace("[","");t=t.replace("]","");if(void 0!==g)a.each(g.children,function(a,b){b.name==t&&(c=
b.value)}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==t&&(c=b.value)}),a.each(g.toolbarbottom.children,function(a,b){b.name==t&&(c=b.value)})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==t&&(c=b.value)});else if(c=a.utility("tokenizeString",f.params.value,b,f),(void 0==c||""==c)&&0<a.utility("GetCSVData").length){n=a.utility("GetCSVData");for(var l=f.params.value.split("["),m=0;m<l.length;m++)if(-1!=l[m].indexOf("]")){var x=
l[m].indexOf("]");l[m].substring(0,x);for(var p in n)if(-1!=l[m].substring(0,x).indexOf("-")){var v=l[m].substring(0,x).split("-");if(n[p].prefix===v[0])for(var u in n[p].rowData)v[1]===u&&(c=c+""+n[p].rowData[u].replace('"',"").replace('"',""))}}}}else c=f.params.value;a("#"+h.getId()).each(function(){if("TextField"==h.getViewType()||"NumericField"==h.getViewType()||"TextArea"==h.getViewType())h.setValue(a(this).val()+c);else if("Label"==h.getViewType())h.setValue(a(this).text()+c);else{var n=a(this).attr("text"),
r=a(this).text();void 0===n&&""===r?k(b,d,f,g,!1):h.setValue(a(this).text()+c)}});a.utility("updateDataContents",h.getName(),h.getValue(),b,h);a.utility("updateChildrenData",b,h.getName(),h.getValue());k(b,d,f,g,!0)}},p=function(){a.isEmptyObject(h)?k(b,d,f,g,!1):a("#"+h.getId()).each(function(){"TextField"==h.getViewType()||"NumericField"==h.getViewType()||"TextArea"==h.getViewType()?h.setValue(a(this).val().substring(0,a(this).val().length-1)):h.setValue(a(this).text().substring(0,a(this).text().length-
1));k(b,d,f,g,!0)})},u=function(){if(""==f.params.prefix||""==f.params.result)k(b,d,f,g,!1);else{var c=a.utility("getCombinedCSV");0!=c.length&&a.each(c,function(a,b){b.csvResultHeader==f.params.result&&c.splice(a,1)});var n=a.mobileweb.getCurrentPage().children,h="",r=[],t=[];t.csvResultHeader=f.params.result;t.prefix=f.params.prefix;var l=0,m=!1;a.each(n,function(a,c){c.getName().substr(0,c.getName().indexOf("-"))==f.params.prefix&&(r[l]={},c.getName().substring(c.getName().indexOf("-")+1,c.getName().length),
r[l].number=c.getName().substring(c.getName().indexOf("-")+1,c.getName().length),r[l].value=c.getValue(),l++)});r.sort(function(a,c){return a.number-c.number});for(var x=0;x<r.length;x++)h=0!=x?h+',"'+r[x].value+'"':h+'"'+r[x].value+'"',m=!0;t.value=h;a.utility("setCombinedCSV",t);a.each(n,function(c,b){b.getName().toString().replace("[","").replace("]","")==f.params.result&&("TextField"==b.getViewType()||"NumericField"==b.getViewType()||"TextArea"==b.getViewType()?(a("#"+b.getId()).val(h),b.setValue(h)):
a("#"+b.getId()).text(h))});m?k(b,d,f,g,!0):k(b,d,f,g,!1)}},x=function(){var c=0,n=[],h=f.params.prefix,r=f.params.csvrowdata;if(""==h||""==r)k(b,d,f,g,!1);else if(a.utility("SetCSVData",h,r,b)){var t=a.utility("GetCSVData");h=a.mobileweb.getCurrentPage().children;a.each(h,function(a,b){b.getName().substr(0,b.getName().indexOf("-"))==t[0].prefix&&(n[c]=b,c++)});if(n.length==t[0].rowData.length){for(c=0;c<n.length;c++)h=n[c].getName().substr(n[c].getName().indexOf("-")+1,n[c].getName().length),n[c].setValue(t[0].rowData[h]);
k(b,d,f,g,!0)}else k(b,d,f,g,!1)}else k(b,d,f,g,!1)},q=function(){var c="";f.params.value=a.utility("checkGlobalVariable",f.params.value);if("where"===f.name.toLowerCase()||"sort"===f.name.toLowerCase()){var n=a.utility("getObject",a.mobileweb.pages,"name",f.params.targetpage);void 0==n||"BaseView"==n.type&&"ScrollView"==n.type?k(b,d,f,g,!1):("where"===f.name.toLowerCase()&&(n.data.wherecond=f.params.value),"sort"===f.name.toLowerCase()&&(n.data.order=f.params.value.replace("="," ").replace("'","")),
n.data.updated=!1,k(b,d,f,g,!0))}else{var r=null;if(-1!=f.params.value.indexOf("[")&&-1!=f.params.value.indexOf("]")){var t=f.params.value.replace("[","");t=t.replace("]","");if(void 0!==g){c=f.params.value;var l=f.params.value.split("[");for(n=0;n<l.length;n++)if(-1!=l[n].toString().indexOf("]")){var m=l[n].indexOf("]"),x="["+l[n].substring(0,m)+"]";t=l[n].substring(0,m);"BaseView"==g.type||"ScrollView"==g.type?(a.each(g.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))}),void 0!=g.toolbartop&&
void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))}),a.each(g.toolbarbottom.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))}),void 0!=g.data&&void 0!=g.data.contents&&(g.data.contents.constructor==Array?a.each(g.data.contents,function(b,d){a.each(d,function(a,b){a==t&&(r=c=c.replace(x,b))})}):a.each(g.data.contents,function(a,
b){a==t&&(r=c=c.replace(x,b))})),null===r&&(r=c=c.replace(x,a.utility("tokenizeString",x,b,f)))):"RemoteTableViewList"===g.type||"DBTableViewList"===g.type?(void 0!=d.rownum?a.each(g.data.contents[d.rownum],function(a,b){a==t&&(r=c=c.replace(x,b))}):(m=d.getName().substring(d.getName().lastIndexOf("-")+1,d.getName().length),a.each(g.data.contents[m],function(a,b){a==t&&(r=c=c.replace(x,b))})),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==t&&(r=
c=c.replace(x,b.value))}),a.each(g.toolbarbottom.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))})):(a.each(g.data.contents,function(b,d){a.each(d,function(a,b){a==t&&(r=c=c.replace(x,b))})}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))}),a.each(g.toolbarbottom.children,function(a,b){b.name==t&&
(r=c=c.replace(x,b.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))}))}}else if("RemoteTableViewList"===b.type||"DBTableViewList"===b.type?(void 0!=d.rownum&&a.each(b.data.contents[d.rownum],function(a,c){a==t&&(r=c)}),void 0!=b.toolbartop&&void 0!=b.toolbarbottom&&(a.each(b.toolbartop.children,function(a,c){c.name==t&&(r=c.value)}),a.each(b.toolbarbottom.children,function(a,c){c.name==t&&(r=c.value)})),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,
function(a,c){c.name==t&&(r=c.value)})):"BaseView"==b.type||"ScrollView"==b.type?r=a.utility("tokenizeString",f.params.value,b,f):(a.each(b.data.contents,function(c,b){a.each(b,function(a,c){a==t&&(r=c)})}),void 0!=b.toolbartop&&void 0!=b.toolbarbottom&&(a.each(b.toolbartop.children,function(a,c){c.name==t&&(r=c.value)}),a.each(b.toolbarbottom.children,function(a,c){c.name==t&&(r=c.value)})),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,c){c.name==t&&(r=c.value)})),(void 0==r||""==
r)&&0<a.utility("GetCSVData").length){var p=a.utility("GetCSVData");l=f.params.value.split("[");for(n=0;n<l.length;n++)if(-1!=l[n].indexOf("]")){m=l[n].indexOf("]");x="["+l[n].substring(0,m)+"]";for(var v in p)if(-1!=l[n].substring(0,m).indexOf("-")){var u=l[n].substring(0,m).split("-");if(p[v].prefix===u[0])for(var q in p[v].rowData)u[1]===q&&(r=r+""+p[v].rowData[q].replace('"',"").replace('"',""))}}}}else r=a.utility("tokenizeString",f.params.value,b,f);if(-1!=r.indexOf("@@")||-1!=r.indexOf(/@@/gi))r=
a.utility("tokenizeString",f.params.value,b,f);l="";for(n=0;n<r.toString().length;n++)l+=""+r.charCodeAt(n).toString(16);r=l;a.utility("updateDataContents",h.getName(),r,b,h);if("TextField"==h.getViewType()||"NumericField"==h.getViewType()||"Label"==h.getViewType()||"TextArea"==h.getViewType())void 0!==r&&(h.setValue(r),k(b,d,f,g,!0));else if("Image"==h.getViewType())a("#"+h.getId()).attr("src",a.utility("getImage",r)),k(b,d,f,g,!0);else if("WebView"==h.getViewType())h.setValue(r),k(b,d,f,g,!0);else if("CheckBox"==
h.getViewType())r=r.toLowerCase(),"false"===r||"off"===r||"0"==r||"no"==r?(a("#"+h.getId()+h.getName()).attr("checked",!1),a("#"+h.getId()+h.getName()).change(),h.parseValue(r),k(b,d,f,g,!0)):"on"===r||"true"===r||"1"==r||"yes"==r?(a("#"+h.getId()+h.getName()).attr("checked",!0),a("#"+h.getId()+h.getName()).change(),h.parseValue(r),k(b,d,f,g,!0)):k(b,d,f,g,!1);else if("ToggleButton"==h.getViewType())n=r.toLowerCase(),"on"==n||"1"==n||"true"==n||"yes"==n||"off"==n||"0"==n||"false"==n||"no"==n?(h.setValue(n),
k(b,d,f,g,!0)):k(b,d,f,g,!1);else if("RoundButton"==h.getViewType()||"TextButton"==h.getViewType())h.setValue(r),k(b,d,f,g,!0);else if("SwitchBar"==h.getViewType())r=r.toLowerCase(),"true"==r||"false"==r||"1"==r||"0"==r||"on"==r||"off"==r||"yes"==r||"no"==r?(h.setSelected(r),k(b,d,f,g,!0)):k(b,d,f,g,!1);else if("Slider"==h.getViewType())isNaN(r)?k(b,d,f,g,!1):(a("#"+h.getId()+">input").attr("value",r),a("#"+h.getId()+">input").slider("refresh"),k(b,d,f,g,!0),h.triggerEvent());else if("GoogleMap"==
h.getViewType())""===r&&k(b,d,f,g,!1),a.GMapService("setMapLocation",f.params,r,h,f,b,d);else if("ProgressBar"==h.getViewType())isNaN(r)?k(b,d,f,g,!1):(a("#"+h.getId()+">").css({width:f.params.value}),k(b,d,f,g,!0));else if("Picker"==h.getViewType()){var F=!1,z=[],K=r.split(",");if(a("#"+h.getId()).find(" .pickerTable tr"))if(a("#"+h.getId()).find("table").length===K.length)if(a("#"+h.getId()).find("table").each(function(c,b){F=!1;var d=K[c];a(b).find("tr").each(function(c,b){a(b).removeClass("activeRow");
if(void 0!=a(b).attr("val")&&a(b).attr("val")==d)return z.push(b),F=!0,!1});if(!F)return!1}),F){for(m=0;m<z.length;m++)a(z[m]).addClass("activeRow");h.setValue(r);h.triggerEvent();k(b,d,f,g,!0)}else k(b,d,f,g,!1);else k(b,d,f,g,!1)}else"Segment"==h.getViewType()?(n=h.findItemId(r),void 0!=n?(a("#"+n).trigger("tap"),k(b,d,f,g,!0)):k(b,d,f,g,!1)):"Radio"===h.getViewType()?(h.setValue(r),k(b,d,f,g,!0)):"SoundBox"===h.getViewType()?(h.setValue(r),k(b,d,f,g,!0)):"VideoBox"===h.getViewType()?(h.setValue(r),
k(b,d,f,g,!0)):"ComboBox"===h.getViewType()?(h.setValue(r),k(b,d,f,g,!0)):k(b,d,f,g,!1)}},F=function(){var c="";f.params.value=a.utility("checkGlobalVariable",f.params.value);if("where"===f.name.toLowerCase()||"sort"===f.name.toLowerCase()){var n=a.utility("getObject",a.mobileweb.pages,"name",f.params.targetpage);void 0==n||"BaseView"==n.type&&"ScrollView"==n.type?k(b,d,f,g,!1):("where"===f.name.toLowerCase()&&(n.data.wherecond=f.params.value),"sort"===f.name.toLowerCase()&&(n.data.order=f.params.value.replace("=",
" ").replace("'","")),n.data.updated=!1,k(b,d,f,g,!0))}else{var r=null;if(-1!=f.params.value.indexOf("[")&&-1!=f.params.value.indexOf("]")){var t=f.params.value.replace("[","");t=t.replace("]","");if(void 0!==g){c=f.params.value;var l=f.params.value.split("[");for(n=0;n<l.length;n++)if(-1!=l[n].toString().indexOf("]")){var m=l[n].indexOf("]"),x="["+l[n].substring(0,m)+"]";t=l[n].substring(0,m);"BaseView"==g.type||"ScrollView"==g.type?(a.each(g.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))}),
void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))}),a.each(g.toolbarbottom.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))}),void 0!=g.data&&void 0!=g.data.contents&&(g.data.contents.constructor==Array?a.each(g.data.contents,function(b,d){a.each(d,function(a,b){a==t&&(r=c=c.replace(x,b))})}):a.each(g.data.contents,
function(a,b){a==t&&(r=c=c.replace(x,b))})),null===r&&(r=c=c.replace(x,a.utility("tokenizeString",x,b,f)))):"RemoteTableViewList"===g.type||"DBTableViewList"===g.type?(void 0!=d.rownum?a.each(g.data.contents[d.rownum],function(a,b){a==t&&(r=c=c.replace(x,b))}):(m=d.getName().substring(d.getName().lastIndexOf("-")+1,d.getName().length),a.each(g.data.contents[m],function(a,b){a==t&&(r=c=c.replace(x,b))})),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==
t&&(r=c=c.replace(x,b.value))}),a.each(g.toolbarbottom.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))})):(a.each(g.data.contents,function(b,d){a.each(d,function(a,b){a==t&&(r=c=c.replace(x,b))})}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))}),a.each(g.toolbarbottom.children,function(a,b){b.name==
t&&(r=c=c.replace(x,b.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==t&&(r=c=c.replace(x,b.value))}))}}else if("RemoteTableViewList"===b.type||"DBTableViewList"===b.type?(void 0!=d.rownum&&a.each(b.data.contents[d.rownum],function(a,c){a==t&&(r=c)}),void 0!=b.toolbartop&&void 0!=b.toolbarbottom&&(a.each(b.toolbartop.children,function(a,c){c.name==t&&(r=c.value)}),a.each(b.toolbarbottom.children,function(a,c){c.name==t&&(r=c.value)})),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,
function(a,c){c.name==t&&(r=c.value)})):"BaseView"==b.type||"ScrollView"==b.type?r=a.utility("tokenizeString",f.params.value,b,f):(a.each(b.data.contents,function(c,b){a.each(b,function(a,c){a==t&&(r=c)})}),void 0!=b.toolbartop&&void 0!=b.toolbarbottom&&(a.each(b.toolbartop.children,function(a,c){c.name==t&&(r=c.value)}),a.each(b.toolbarbottom.children,function(a,c){c.name==t&&(r=c.value)})),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,c){c.name==t&&(r=c.value)})),(void 0==r||""==
r)&&0<a.utility("GetCSVData").length){var p=a.utility("GetCSVData");l=f.params.value.split("[");for(n=0;n<l.length;n++)if(-1!=l[n].indexOf("]")){m=l[n].indexOf("]");x="["+l[n].substring(0,m)+"]";for(var v in p)if(-1!=l[n].substring(0,m).indexOf("-")){var u=l[n].substring(0,m).split("-");if(p[v].prefix===u[0])for(var q in p[v].rowData)u[1]===q&&(r=r+""+p[v].rowData[q].replace('"',"").replace('"',""))}}}}else r=a.utility("tokenizeString",f.params.value,b,f);if(-1!=r.indexOf("@@")||-1!=r.indexOf(/@@/gi))r=
a.utility("tokenizeString",f.params.value,b,f);l="";for(n=0;n<r.length;n+=2)l+=String.fromCharCode(parseInt(r.substr(n,2),16));r=l;a.utility("updateDataContents",h.getName(),r,b,h);a.utility("updateChildrenData",b,h.getName(),r);if("TextField"==h.getViewType()||"NumericField"==h.getViewType()||"Label"==h.getViewType()||"TextArea"==h.getViewType())void 0!==r&&(h.setValue(r),k(b,d,f,g,!0));else if("Image"==h.getViewType())a("#"+h.getId()).attr("src",a.utility("getImage",r)),k(b,d,f,g,!0);else if("WebView"==
h.getViewType())h.setValue(r),k(b,d,f,g,!0);else if("CheckBox"==h.getViewType())r=r.toLowerCase(),"false"===r||"off"===r||"0"==r||"no"==r?(a("#"+h.getId()+h.getName()).attr("checked",!1),a("#"+h.getId()+h.getName()).change(),h.parseValue(r),k(b,d,f,g,!0)):"on"===r||"true"===r||"1"==r||"yes"==r?(a("#"+h.getId()+h.getName()).attr("checked",!0),a("#"+h.getId()+h.getName()).change(),h.parseValue(r),k(b,d,f,g,!0)):k(b,d,f,g,!1);else if("ToggleButton"==h.getViewType())n=r.toLowerCase(),"on"==n||"1"==n||
"true"==n||"yes"==n||"off"==n||"0"==n||"false"==n||"no"==n?(h.setValue(n),k(b,d,f,g,!0)):k(b,d,f,g,!1);else if("RoundButton"==h.getViewType()||"TextButton"==h.getViewType())h.setValue(r),k(b,d,f,g,!0);else if("SwitchBar"==h.getViewType())r=r.toLowerCase(),"true"==r||"false"==r||"1"==r||"0"==r||"on"==r||"off"==r||"yes"==r||"no"==r?(h.setSelected(r),k(b,d,f,g,!0)):k(b,d,f,g,!1);else if("Slider"==h.getViewType())isNaN(r)?k(b,d,f,g,!1):(a("#"+h.getId()+">input").attr("value",r),a("#"+h.getId()+">input").slider("refresh"),
k(b,d,f,g,!0),h.triggerEvent());else if("GoogleMap"==h.getViewType())""===r&&k(b,d,f,g,!1),a.GMapService("setMapLocation",f.params,r,h,f,b,d);else if("ProgressBar"==h.getViewType())isNaN(r)?k(b,d,f,g,!1):(a("#"+h.getId()+">").css({width:f.params.value}),k(b,d,f,g,!0));else if("Picker"==h.getViewType()){var F=!1,z=[],K=r.split(",");if(a("#"+h.getId()).find(" .pickerTable tr"))if(a("#"+h.getId()).find("table").length===K.length)if(a("#"+h.getId()).find("table").each(function(c,b){F=!1;var d=K[c];a(b).find("tr").each(function(c,
b){a(b).removeClass("activeRow");if(void 0!=a(b).attr("val")&&a(b).attr("val")==d)return z.push(b),F=!0,!1});if(!F)return!1}),F){for(m=0;m<z.length;m++)a(z[m]).addClass("activeRow");h.setValue(r);h.triggerEvent();k(b,d,f,g,!0)}else k(b,d,f,g,!1);else k(b,d,f,g,!1)}else"Segment"==h.getViewType()?(n=h.findItemId(r),void 0!=n?(a("#"+n).trigger("tap"),k(b,d,f,g,!0)):k(b,d,f,g,!1)):"Radio"===h.getViewType()?(h.setValue(r),k(b,d,f,g,!0)):"SoundBox"===h.getViewType()?(h.setValue(r),k(b,d,f,g,!0)):"VideoBox"===
h.getViewType()?(h.setValue(r),k(b,d,f,g,!0)):"ComboBox"===h.getViewType()?(h.setValue(r),k(b,d,f,g,!0)):k(b,d,f,g,!1)}};return r}function k(b,d,f,g,h,l){var r={execute:function(){var v=void 0===f.params?{}:f.params,z="";if(!("stopRecord"==f.method||"record"==f.method||"stopRecord"==f.method||"QRScanner"==f.method||"DownloadMedia"==f.method||"SaveMedia"==f.method||"UploadFile"==f.method||"OpenGallery"==f.method&&f.params.multiple||(z=a.errorhandler("checkTargetUIObject",h,v,f),z)))return l(b,d,f,
g,z),r;if("stopRecord"!=f.method&&"record"!=f.method&&"TakePhoto"!=f.method&&"SwitchCamera"!=f.method&&"QRScanner"!=f.method&&"OpenGallery"!=f.method&&"UploadMedia"!=f.method&&"DownloadMedia"!=f.method&&"SaveMedia"!=f.method&&!a.isEmptyObject(h))if(void 0!=h.getViewType()||""!=h.getViewType())"SoundBox"===h.getViewType()||h.getViewType();else return l(b,d,f,g,z),r;switch(f.method){case "play":k();break;case "pause":jQuery.isEmptyObject(a("#"+h.getId()+">audio"))||"SoundBox"!==h.getViewType()?document.getElementById(h.getId()).pause():
(a("#"+h.getId()).find(".audioPlayer_play").removeClass("hidden"),a("#"+h.getId()).find(".audioPlayer_pause").addClass("hidden"),a("#"+h.getId()+">audio")[0].pause());z&&l(b,d,f,g,z);break;case "stopPlay":"SoundBox"===h.getViewType()?jQuery.isEmptyObject(a("#"+h.getId()+">audio"))||(a("#"+h.getId()).find(".audioPlayer_play").removeClass("hidden"),a("#"+h.getId()).find(".audioPlayer_pause").addClass("hidden"),a("#"+h.getId()+">audio")[0].pause(),a("#"+h.getId()+">audio")[0].currentTime=0):(document.getElementById(h.getId()).pause(),
document.getElementById(h.getId()).currentTime=0,h.stopPlay());z&&l(b,d,f,g,z);break;case "slowPlay":document.getElementById(h.getId()).playbackRate=.5;z&&l(b,d,f,g,z);break;case "slowReversePlay":k();document.getElementById(h.getId()).playbackRate=-.5;z&&l(b,d,f,g,z);break;case "fastPlay":document.getElementById(h.getId()).playbackRate=2;z&&l(b,d,f,g,z);break;case "fastReversePlay":k();document.getElementById(h.getId()).playbackRate=-2;z&&l(b,d,f,g,z);break;case "fastForward":document.getElementById(h.getId()).currentTime=
document.getElementById(h.getId()).currentTime+10;k();z&&l(b,d,f,g,z);break;case "fastBackward":document.getElementById(h.getId()).currentTime=document.getElementById(h.getId()).currentTime-10;k();z&&l(b,d,f,g,z);break;case "PlaySE":c(b);break;case "record":a.isEmptyObject(h)?l(b,d,f,g,!1):(h.initRecording(),l(b,d,f,g,!0));break;case "stopRecord":a.isEmptyObject(h)?l(b,d,f,g,!1):(h.stopRecording(),l(b,d,f,g,!0));break;case "SwitchCamera":"Camera"===h.getViewType()?(h.setSide(f.params.side),l(b,d,
f,g,!0)):l(b,d,f,g,!1);break;case "TakePhoto":v=document.createElement("script");v.src="preview"==a.mobileweb.state?"/mobileweb/resources/js/canvas2image.js":"js/canvas2image.js";v.type="text/javascript";a("head").append(v);v.onload=t();break;case "QRScanner":"Barcode"===f.params.type?p():m();break;case "QRGenerate":u();break;case "OpenGallery":f.params.multiple?q():"video"==f.params.type?w():x();break;case "UploadFile":F();break;case "UploadMedia":"sound"==f.params.type?M():"video"==f.params.type?
X():n();break;case "DownloadMedia":fa();break;case "SaveMedia":/iPhone|iPad|iPod/i.test(navigator.userAgent)?(a.errorhandler("messageBox","Images will be opened into new tab. Please save from there.","","Save Media Limitation"),a.browser.safari?U():a("#cancelMessage").bind("click touchstart tap",function(){U();return!1})):U();break;case "ShareVia":T();break;default:l(b,d,f,g,!1)}}},k=function(){if(jQuery.isEmptyObject(a("#"+h.getId()+">audio"))||"SoundBox"!==h.getViewType())if(void 0!=a("#"+h.getId()).attr("pause")){var c=
document.getElementById(h.getId()).play();void 0!==c&&c.then(function(){}).catch(function(a){l(b,d,f,g,!1)})}else void 0!=a("#"+h.getId())&&"VideoBox"==h.getViewType()?(a("#"+h.getId()+" source")[0].src=a("video source")[0].src.replace("https","http"),a("#"+h.getId())[0].src=a("video source")[0].src.replace("https","http"),c=document.getElementById(h.getId()).play(),void 0!==c&&c.then(function(){}).catch(function(a){l(b,d,f,g,!1)})):l(b,d,f,g,!1);else c=a("#"+h.getId()).get(0),a(c).attr("val",1),
a("#"+h.getId()).find(".audioPlayer_play").addClass("hidden"),a("#"+h.getId()).find(".audioPlayer_pause").removeClass("hidden"),a("#"+h.getId()+">audio")[0].addEventListener("ended",function(){l(b,d,f,g,!0)}),c=a("#"+h.getId()+">audio")[0].play(),void 0!==c&&c.then(function(){}).catch(function(a){l(b,d,f,g,!1)})},c=function(c){var b=document.createElement("audio");/iPad|iPhone|iPod/.test(navigator.userAgent)&&(b.autoplay=!0);if("bundle"==f.params.status)b.setAttribute("src",a.utility("getSoundEffect",
f.params.filename,c));else if("url"==f.params.status){var n=""===f.params.url?f.params.filename:f.params.url+"/"+f.params.filename;-1!=n.indexOf("[")&&-1!=n.indexOf("]")?b.setAttribute("src",a.utility("getSoundEffect",n,c)):b.setAttribute("src",n)}else"remoteFile"==f.params.status&&b.setAttribute("src",f.params.url+"/"+f.params.filename);b.onloadeddata=function(){var a=b.play();void 0!==a&&a.then(function(){}).catch(function(a){console.log("---- Automatic playback failed. Use the Play button instead. ----");
l(c,d,f,g,!1)})};b.onended=function(){l(c,d,f,g,!0)};b.onerror=function(){l(c,d,f,g,!1)}},t=function(){function c(a,c,b,d,n,g){var h=d,l=n;if(0==r.naturalHeight||0==r.naturalWidth){a=n;var p=d}else a=r.naturalHeight,p=r.naturalWidth;"image"==f.params.watermarkType&&(h=f.params.watermarkImageWidth/100*d,l=f.params.watermarkImageHeight/100*n);if(void 0!=f.params.watermarkPosition)switch(f.params.watermarkPosition){case "Top-Left":x="left";break;case "Top-Center":t=p/2;"image"==f.params.watermarkType&&
(t-=h/2);x="center";break;case "Top-Right":t=p-20;"image"==f.params.watermarkType&&(t-=h);x="right";break;case "Bottom-Left":m=a-20;"image"==f.params.watermarkType&&(m-=l);c.textAlign="left";break;case "Bottom-Center":m=a-20;t=p/2;"image"==f.params.watermarkType&&(m-=l,t-=h/2);x="center";break;case "Bottom-Right":m=a-20,t=p-20,"image"==f.params.watermarkType&&(m-=l,t-=h),x="right"}if("text"==f.params.watermarkType)c.textAlign=x,c.font="24px system",d=c.createLinearGradient(0,0,b.width,0),void 0!=
f.params.watermarkTextColor&&d.addColorStop("1.0","rgba("+f.params.watermarkTextColor.red+","+f.params.watermarkTextColor.green+","+f.params.watermarkTextColor.blue+",1)"),c.fillStyle=d,c.fillText(k,t,m),g();else if("image"==f.params.watermarkType){var v=new Image;v.src=k;v.onload=function(){c.drawImage(v,t,m,h,l);r.src=b.toDataURL("image/jpeg");g()}}}function n(c){if("RemoteDB"===f.params.library){a.utility("initCall");var n=setInterval(function(){if(""!=a.utility("appendDeviceInfo")||null!=a.utility("appendDeviceInfo")){clearInterval(n);
var r="mobilous_"+(new Date).getTime()+".jpg",k="";if("8080"==a.utility("getServerPort"))k=a.mobileweb.baseurl+"/mobileweb/mobile/uploadImage?baseURL="+a.mobileweb.baseurl+a.utility("appendDeviceInfo")+"&os=mw&version="+a.mobileweb.version,a.ajax({url:k+"&mediaName="+r+"&isThumbnail=false&isTargetMongo=true",type:"POST",data:c.src,processData:!1,contentType:!1,cache:!1,success:function(c){try{c=JSON.parse(c)}catch(la){console.log(la)}a.utility("showLoadingIndicator",!1);if("ACK"===c.ret)for(var n in c.file)h.setMainValue(c.file[n]),
h.applyCameraEvents(),l(b,d,f,g,!0);else l(b,d,f,g,!1)},error:function(c){a.utility("showLoadingIndicator",!1);l(b,d,f,g,!1)}});else{k=a.mobileweb.baseurl+":8181/commapi/commaction/llcommmedia/";var t=a.utility("fileSrctoBlob",c.src),m=new FormData;m.append("ak",a.utility("appendDeviceInfo").replace("&ak=",""));m.append("os","mw");m.append("version",a.mobileweb.version);m.append("istargetmongo",1);m.append("file",t,r);m&&a.ajax({url:k,type:"POST",crossDomain:!0,data:m,processData:!1,contentType:!1,
async:!0,success:function(a){try{a=JSON.parse(a)}catch(la){console.log(la)}if("ACK"===a.ret)for(var c in a.file)h.setMainValue(a.file[c]),h.applyCameraEvents(),l(b,d,f,g,!0);else l(b,d,f,g,!1)},error:function(a){l(b,d,f,g,!1)},beforeSend:function(c,b){a.utility("showLoadingIndicator",!0)},complete:function(c,b){a.utility("showLoadingIndicator",!1)}})}}},1E3)}else if("Gallery"===f.params.library||"Local"===f.params.library||"Library"===f.params.library){var r="mobilous_"+(new Date).getTime()+".jpg";
if(a(a("[id='"+h.getId()+"_canvas']")).is("img"))a(".scroller").append(a("<a/>",{href:c.src,id:d.getId()+"_imagedownloadlink",download:r}));else{var k=void 0!=h.getId()?h.getId():d.getId();k=document.getElementById(k+"_canvas").toDataURL("image/jpeg");a(".scroller").append(a("<a/>",{href:k,id:d.getId()+"_imagedownloadlink",download:r}))}h.setMainValue(c.src);a("#"+d.getId()+"_imagedownloadlink").click();a("#"+d.getId()+"_imagedownloadlink").remove();h.applyCameraEvents();l(b,d,f,g,!0)}}var r=new Image,
k,t=20,m=20,x="left";void 0!=f.params.watermarkType&&"text"==f.params.watermarkType?void 0!=f.params.watermarkText&&(k=a.utility("containsGlobalVariable",f.params.watermarkText)?a.utility("checkGlobalVariable",f.params.watermarkText):a.utility("tokenizeString",f.params.watermarkText,b)):void 0!=f.params.watermarkType&&"image"==f.params.watermarkType?void 0!=f.params.watermarkImage&&(k="remoteFile"==f.params.source?a.utility("getRemoteImage",a.utility("tokenizeString",f.params.watermarkImage,b)):"url"==
f.params.source?a.utility("tokenizeString",f.params.watermarkImage,b):a.utility("getImage",a.utility("tokenizeString",f.params.watermarkImage,b))):void 0!=f.params.watermark&&(k=a.utility("containsGlobalVariable",f.params.watermark)?a.utility("checkGlobalVariable",f.params.watermark):a.utility("tokenizeString",f.params.watermark,b));if(a(a("[name='"+h.getName()+"']")).is("img"))r.src=a("#"+h.getId()).get(0).src,n(r);else if(a(a("[id='"+h.getId()+"_canvas']")).is("img")){r.src=a("#"+h.getId()+"_canvas").get(0).src;
var p=document.createElement("Canvas");var M=p.getContext("2d");p.width=r.naturalWidth;p.height=r.naturalHeight;M.drawImage(r,0,0);if(void 0!=k&&""!=k)c(f.params,M,p,p.width,p.height,function(){void 0!=f.params.photoquality?(v=a.utility("tokenizeString",f.params.photoquality,b),r.src="low"==v?p.toDataURL({quality:.3}):"medium"==v?p.toDataURL({quality:.7}):p.toDataURL("image/jpeg")):r.src=p.toDataURL("image/jpeg");n(r)});else{if(void 0!=f.params.photoquality){var v=a.utility("tokenizeString",f.params.photoquality,
b);r.src="low"==v?p.toDataURL({quality:.3}):"medium"==v?p.toDataURL({quality:.7}):p.toDataURL("image/jpeg")}else r.src=p.toDataURL("image/jpeg");n(r)}}else{var u=void 0!=h.getId()?h.getId():d.getId();if(0==a("body").find("#"+u+"_canvas").length){var q=document.createElement("canvas");q.setAttribute("id",u+"_canvas");q.setAttribute("width",a("#"+u).attr("width"));q.setAttribute("height",a("#"+u).attr("height"));q.setAttribute("style","top:"+a("#"+u).position().top+"px;left:"+a("#"+u).position().left+
"px; position:absolute;visibility:hidden");a(".scroller").append(q)}else q=a("#"+u+"_canvas").get(0);M=q.getContext("2d");var z=document.getElementById(u);q.width=z.clientWidth;q.height=z.clientHeight;M.drawImage(z,0,0,q.width,q.height);void 0!=k&&""!=k?c(f.params,M,q,q.width,q.height,function(){void 0!=f.params.photoquality&&(v=a.utility("tokenizeString",f.params.photoquality,b),"low"==v?q.toDataURL({quality:.3}):"medium"==v&&q.toDataURL({quality:.7}));r=Canvas2Image.convertToImage(q,z.width,z.height,
"jpeg");h.pause();n(r)}):(void 0!=f.params.photoquality&&(v=a.utility("tokenizeString",f.params.photoquality,b),"low"==v?q.toDataURL({quality:.3}):"medium"==v&&q.toDataURL({quality:.7})),r=Canvas2Image.convertToImage(q,z.width,z.height,"jpeg"),h.pause(),n(r))}},m=function(){var c=document.createElement("script"),n=document.createElement("script");c.type="text/javascript";n.type="text/javascript";"preview"==a.mobileweb.state?(c.src="/mobileweb/resources/js/qrlib/html5-qrcode.js",n.src="/mobileweb/resources/js/qrlib/jsqrcode-combined.min.js"):
(c.src="js/qrlib/html5-qrcode.js",n.src="js/qrlib/jsqrcode-combined.min.js");var r=!1,k=document.getElementsByTagName("script");a.each(k,function(a,b){if(b.src==c.src||b.src==n.src)r=!0});r||(a("head").append(c),a("head").append(n));a.blockUI({css:{top:"1%",left:"0%",border:"0px solid #FFFFFF",backgroundColor:"#00FFFFFF"},message:['<div class="panel-body" ><div class="well" style="position:absolute ; display: block;"><div  style="width:100%;float:right;margin-top: 5px;margin-bottom: 5px;text-align: right;"><img id="close" src = "/mobileweb/resources/images/system/toolbar-items/default/btn_cancel.png" width="20px" height:"40px" style = "display:block;"></div>',
'<div id="qr-reader" style="width:'+document.documentElement.clientWidth+"px;height:"+a(".bglayout").css("height")+'";margin-left: 30px;margin-right: 10px;"/>','<div class="scanner-laser laser-rightBottom" style="opacity: 0.5;"></div><div class="scanner-laser laser-rightTop" style="opacity: 0.5;"></div><div class="scanner-laser laser-leftBottom" style="opacity: 0.5;"></div><div class="scanner-laser laser-leftTop" style="opacity: 0.5;"></div></div></div>'].join("")});a("#close").attr("src",a.utility("getSystemImage",
"btn_cancel.png",""));a("#close").on("tap",function(){a.unblockUI()});setTimeout(function(){var c=a("#qr-reader");a(".scanner-laser");a("#scanned-img");var n=!1;c.html5_qrcode(function(c){console.log("html5_qrcode success :- "+c);a.isEmptyObject(h)||h.setValue(c);a("#qr-reader").html5_qrcode_stop();a.unblockUI();a(".ui-loader").css("display","none");l(b,d,f,g,!0);n=!0},function(c){console.log("html5_qrcode error :- "+c);setTimeout(function(){a("#qr-reader").html5_qrcode_stop();n||(a.unblockUI(),l(b,
d,f,g,!1),n=!0)},8E3)},function(c){console.log("html5_qrcode videoError :- "+c);a.unblockUI();l(b,d,f,g,!1)})},2E3)},p=function(){a.blockUI({css:{top:"1%",left:"0%",border:"0px solid #FFFFFF",backgroundColor:"#00FFFFFF"},message:['<div class="panel-body" ><div class="well" style="position:absolute ; display: block;"><div  style="width:100%;float:right;margin-top: 5px;margin-bottom: 5px;text-align: right;"><img id="close" src = "/mobileweb/resources/images/system/toolbar-items/default/btn_cancel.png" width="20px" height:"40px" style = "display:block;"></div>',
'<div id="scanner-container" style="width:'+document.documentElement.clientWidth+"px;height:"+a(".bglayout").css("height")+'";margin-left: 30px;margin-right: 10px;"/>','<div class="scanner-laser laser-rightBottom" style="opacity: 0.5;"></div><div class="scanner-laser laser-rightTop" style="opacity: 0.5;"></div><div class="scanner-laser laser-leftBottom" style="opacity: 0.5;"></div><div class="scanner-laser laser-leftTop" style="opacity: 0.5;"></div></div></div>'].join("")});a("#close").attr("src",
a.utility("getSystemImage","btn_cancel.png",""));a("#close").on("tap",function(){_scannerIsRunning&&Quagga.stop();a.unblockUI()});Quagga.init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#scanner-container"),constraints:{width:480,height:320,facingMode:"environment"}},decoder:{readers:"code_128_reader ean_reader ean_8_reader code_39_reader code_39_vin_reader codabar_reader upc_reader upc_e_reader i2of5_reader".split(" "),debug:{showCanvas:!0,showPatches:!0,showFoundPatches:!0,
showSkeleton:!0,showLabels:!0,showPatchLabels:!0,showRemainingPatchLabels:!0,boxFromPatches:{showTransformed:!0,showTransformedBox:!0,showBB:!0}}}},function(a){a?(console.log(a),l(b,d,f,g,!1)):(console.log("Initialization finished. Ready to start"),Quagga.start(),_scannerIsRunning=!0)});Quagga.onProcessed(function(a){var c=Quagga.canvas.ctx.overlay,b=Quagga.canvas.dom.overlay;a&&(a.boxes&&(c.clearRect(0,0,parseInt(b.getAttribute("width")),parseInt(b.getAttribute("height"))),a.boxes.filter(function(c){return c!==
a.box}).forEach(function(a){Quagga.ImageDebug.drawPath(a,{x:0,y:1},c,{color:"green",lineWidth:2})})),a.box&&Quagga.ImageDebug.drawPath(a.box,{x:0,y:1},c,{color:"#00F",lineWidth:2}),a.codeResult&&a.codeResult.code&&Quagga.ImageDebug.drawPath(a.line,{x:"x",y:"y"},c,{color:"red",lineWidth:3}))});Quagga.onDetected(function(c){console.log("Barcode detected and processed : ["+c.codeResult.code+"]",c);a.isEmptyObject(h)||h.setValue(c.codeResult.code);a.unblockUI();l(b,d,f,g,!0)})},u=function(){if("Image"==
h.getViewType()&&"QRview"!=h.getSource())l(b,d,f,g,!1);else{f.params.value=a.utility("checkGlobalVariable",f.params.value);var c=null;if(-1!=f.params.value.indexOf("[")&&-1!=f.params.value.indexOf("]")){var n=f.params.value.replace("[","").replace("]","");if(-1!=n.indexOf("[")||-1!=n.indexOf("]")){l(b,d,f,g,!1);return}void 0==g?(tempTargetValue=f.params.value,c=a.utility("CheckAndGetUIElementValue",a("[name='"+n+"']"),n,b)):"BaseView"==b.type||"ScrollView"==b.type?c=a.utility("tokenizeString",f.params.value,
b,f):(a.each(b.data.contents,function(b,d){a.each(d,function(a,b){a==n&&(c=b)})}),void 0!=b.toolbartop&&a.each(b.toolbartop.children,function(a,b){b.name==n&&(c=b.value)}),void 0!=b.toolbarbottom&&a.each(b.toolbarbottom.children,function(a,b){b.name==n&&(c=b.value)}),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,b){b.name==n&&(c=b.value)}))}else c=a.utility("tokenizeString",f.params.value,b,f);a("#"+h.getId()).css({position:"absolute",overflow:"hidden",display:"flex","align-items":"center",
"justify-content":"center"});a("#"+h.getId()).css({padding:"2px"});a("#"+h.getId()).empty();if(c){var r=a("#"+h.getId()).css("width").replace("px",""),k=a("#"+h.getId()).css("height").replace("px","");r=parseInt(r)<parseInt(k)?r:k;a("#"+h.getId()).qrcode({text:c,width:r,height:r});a("#"+h.getId()+" > canvas").css({margin:"auto"});a("#"+h.getId()+" > canvas").get(0).id=h.getId()+"_canvas";l(b,d,f,g,!0)}else l(b,d,f,g,!1)}},x=function(){0==a("body").find("#openGallery_"+h.getId()).length&&("file"===
f.params.type?a("body").append("<input id='openGallery_"+h.getId()+"' type='file' accept='application/*' hidden='true'></input>"):a("body").append("<input id='openGallery_"+h.getId()+"' type='file' accept='image/*' hidden='true'></input>"));try{a("#openGallery_"+h.getId()).bind("change",function(){if(/\.(jpe?g|png|gif)$/i.test(this.files[0].name)&&void 0!=a("#"+h.getId()).attr("src")){var c=new FileReader,n=this.files[0].name;c.addEventListener("load",function(){h.setValue(c.result);h.setImageName(n);
a("#"+h.getId()).attr("src",c.result);a("#openGallery_"+h.getId()).remove();l(b,d,f,g,!0)},!1);c.readAsDataURL(this.files[0])}else a("#openGallery_"+h.getId()).remove(),l(b,d,f,g,!1)}),a("#openGallery_"+h.getId()).trigger("click")}catch(ea){a("#openGallery_"+h.getId()).remove(),l(b,d,f,g,!1)}},q=function(){a("body").append("<input id='openGallery_multiple' type='file' accept='image/*' hidden='true' style='color: transparent;width: 100px' multiple></input>");try{a("#openGallery_multiple").bind("change",
function(c){if(c.target.files.length>f.params.limit)a.errorhandler("alertBox","You can select upto "+f.params.limit+" "+f.params.type+" files.");else if(/\.(jpe?g|png)$/i.test(this.files[0].name)){var n=Array.prototype.slice.call(c.target.files),h=[],r=jQuery.parseJSON(f.params.refMediaUI.replace(/'/g,'"'));a.each(r,function(c,b){h[c]=a.getUI(b,d,f.params.targetpage)});var k=0;n.forEach(function(b){if(b.type.match("image.*")){var d=new FileReader;d.addEventListener("load",function(){k<c.target.files.length&&
(h[k].setValue(d.result),h[k].setImageName(c.target.files[k].name),a("#"+h[k].getId()).attr("src",d.result));k++},!1);d.readAsDataURL(b)}});a("#openGallery_multiple").remove();l(b,d,f,g,!0)}else a("#openGallery_multiple").remove(),l(b,d,f,g,!1)}),a("#openGallery_multiple").trigger("click")}catch(ea){a("#openGallery_multiple").remove(),l(b,d,f,g,!1)}},w=function(){0==a("body").find("#openGallery_"+h.getId()).length&&a("body").append("<input id='openGallery_"+h.getId()+"' type='file' accept='.mp4' hidden='true'></input>");
try{a("#openGallery_"+h.getId()).bind("change",function(c){if(void 0!=a("#"+h.getId()+"> source").attr("src")){var n=new FileReader,r=this.files[0].name;n.addEventListener("load",function(){var c=setInterval(function(){clearInterval(c);h.setValue(n.result);h.setVideoName(r);a("#"+h.getId()+"> source").attr("src",n.result);a("#openGallery_"+h.getId()).remove();l(b,d,f,g,!0)},500)},!1);n.readAsDataURL(this.files[0])}else a("#openGallery_"+h.getId()).remove(),l(b,d,f,g,!1)}),a("#openGallery_"+h.getId()).trigger("click")}catch(ea){a("#openGallery_"+
h.getId()).remove(),l(b,d,f,g,!1)}},F=function(){if(0==f.params.src.indexOf("device")){var c={};var n="application/*";"pdf"==f.params.type?n="application/pdf":"document"==f.params.type?n=".doc, .docx":"excel"==f.params.type?n=".xlsx,.xls":"presentation"==f.params.type?n=".ppt, .pptx":"video"==f.params.type&&(n=".mp4,.3gp,.mkv,.avi,.mpeg,.mpg");a("body").append("<input id='deviceFile_"+h.getId()+"' type='file' accept='"+n+"' hidden='true'></input>");a("#deviceFile_"+h.getId()).bind("change",function(){if(/\.(pdf|xls|xlsx|doc|docx|ppt|txt|mp4|3gp|mkv|avi|mpeg|mpg)$/i.test(this.files[0].name)){var n=
new FileReader,r=this.files[0],k=this.files[0].name;n.addEventListener("load",function(){var a=k.split(".")[k.split(".").length-1];c.value="file_"+Date.now()+"."+a;c.src=n.result;c.src&&(a=c.src.indexOf("base64"),a=c.src.slice(0,a+7),c.src=c.src.replace(a,""))},!1);n.readAsDataURL(this.files[0]);a("#deviceFile_"+h.getId()).remove();a.utility("initCall");var t=setInterval(function(){if(""!=a.utility("appendDeviceInfo")||null!=a.utility("appendDeviceInfo")){clearInterval(t);var n="";if("8080"==a.utility("getServerPort")){var k=
c.value;n=a.mobileweb.baseurl+"/mobileweb/mobile/uploadFile?baseURL="+a.mobileweb.baseurl+"&mediaName="+k+a.utility("appendDeviceInfo")+"&os=mw&version="+a.mobileweb.version;a.ajax({url:n,type:"POST",data:c.src,processData:!1,contentType:!1,success:function(c){try{c=JSON.parse(c)}catch(ia){console.log(ia)}a.utility("showLoadingIndicator",!1);"ACK"===c.ret?(h.setValue(c.file[k]),l(b,d,f,g,!0)):l(b,d,f,g,!1)},error:function(c){a.utility("showLoadingIndicator",!1);l(b,d,f,g,!1)},xhr:function(){var c=
new XMLHttpRequest;c.upload.addEventListener("progress",function(c){c.lengthComputable&&void 0!=f.params.refProgressUI&&(c=(c.loaded/c.total).toString(),a.mobileweb.getCurrentPage().getName()===b.name&&(new a.actions(b,null,[{method:"SetMainValue",category:"MainValue",name:f.params.refProgressUI,params:{value:c,targetpage:b.name},events:[]}])).execute())},!1);return c}})}else{n=a.mobileweb.baseurl+":8181/commapi/commaction/llcommmedia/";var m=new FormData;m.append("ak",a.utility("appendDeviceInfo").replace("&ak=",
""));"video"==f.params.type?(n=a.mobileweb.baseurl+":8181/commapi/comaction/uploadVideoToAzure",m.append("projectid",a.mobileweb.pid),m.append("userid",a.mobileweb.user)):(m.append("os","mw"),m.append("version",a.mobileweb.version));m.append("file",r);m&&a.ajax({url:n,type:"POST",crossDomain:!0,data:m,processData:!1,contentType:!1,async:!0,success:function(a){try{a=JSON.parse(a)}catch(ia){console.log(ia)}"ACK"===a.ret?("video"==f.params.type?h.setValue(a.retdic.url):h.setValue(a.file[k]),l(b,d,f,
g,!0)):l(b,d,f,g,!1)},error:function(a){l(b,d,f,g,!1)},beforeSend:function(c,b){a.utility("showLoadingIndicator",!0)},complete:function(c,b){a.utility("showLoadingIndicator",!1)},xhr:function(){var c=new XMLHttpRequest;c.upload.addEventListener("progress",function(c){c.lengthComputable&&void 0!=f.params.refProgressUI&&(c=(c.loaded/c.total).toString(),a.mobileweb.getCurrentPage().getName()===b.name&&(new a.actions(b,null,[{method:"SetMainValue",category:"MainValue",name:f.params.refProgressUI,params:{value:c,
targetpage:b.name},events:[]}])).execute())},!1);return c}})}}},1E3)}else a("#deviceFile_"+h.getId()).remove(),l(b,d,f,g,!1)});a("#deviceFile_"+h.getId()).trigger("click")}else if(n=0==f.params.src.indexOf("bundle")?f.params.filename:f.params.url,void 0!=g)c=a.utility("getChildAsJson",g,"name",n,d);else{c={};if(-1!=n.indexOf("[")&&-1!=n.indexOf("]")){var r=n.replace("[","").replace("]","");r=a.utility("getChildAsJson",b,"name",r,d);c.value=r.value}else-1===n.indexOf(".")?c.value=n+"."+f.params.type:
c.value=n;0==f.params.src.indexOf("bundle")?(r=a.mobileweb.fullBaseURL+"bin/mobileweb2/resources/others/"+c.value,n=n.split(".")[n.split(".").length-1]):(r=c.value,n=n.split(".")[n.split(".").length-1]);c.value="file_"+Date.now()+"."+n;(function(a,c){var b=new XMLHttpRequest;b.onabort=function(){console.log("Upload file request was aborted")};b.onload=function(){var a=new FileReader;a.readAsDataURL(b.response);a.onloadend=function(){c(a.result)}};b.open("GET",a);b.responseType="blob";b.send()})(r,
function(n){c.src=n;if(c.src){var r=c.src.indexOf("base64");r=c.src.slice(0,r+7);c.src=c.src.replace(r,"")}a.utility("initCall");var k=setInterval(function(){if(""!=a.utility("appendDeviceInfo")||null!=a.utility("appendDeviceInfo")){clearInterval(k);var r="";if("8080"==a.utility("getServerPort"))r=a.mobileweb.baseurl+"/mobileweb/mobile/uploadFile?baseURL="+a.mobileweb.baseurl+"&mediaName="+c.value+a.utility("appendDeviceInfo")+"&os=mw&version="+a.mobileweb.version,a.ajax({url:r,type:"POST",data:c.src,
processData:!1,contentType:!1,success:function(n){try{n=JSON.parse(n)}catch(ha){console.log(ha)}a.utility("showLoadingIndicator",!1);"ACK"===n.ret?(h.setValue(n.file[c.value]),l(b,d,f,g,!0)):l(b,d,f,g,!1)},error:function(c){a.utility("showLoadingIndicator",!1);l(b,d,f,g,!1)},xhr:function(){var c=new XMLHttpRequest;c.upload.addEventListener("progress",function(c){c.lengthComputable&&void 0!=f.params.refProgressUI&&(c=(c.loaded/c.total).toString(),a.mobileweb.getCurrentPage().getName()===b.name&&(new a.actions(b,
null,[{method:"SetMainValue",category:"MainValue",name:f.params.refProgressUI,params:{value:c,targetpage:b.name},events:[]}])).execute())},!1);return c}});else{r=a.mobileweb.baseurl+":8181/commapi/commaction/llcommmedia/";var t=a.utility("fileSrctoBlob",n),m=new FormData;m.append("ak",a.utility("appendDeviceInfo").replace("&ak=",""));m.append("os","mw");m.append("version",a.mobileweb.version);m.append("file",t,c.value);m&&a.ajax({url:r,type:"POST",crossDomain:!0,data:m,processData:!1,contentType:!1,
async:!0,success:function(a){try{a=JSON.parse(a)}catch(ha){console.log(ha)}"ACK"===a.ret?(h.setValue(a.file[c.value]),l(b,d,f,g,!0)):l(b,d,f,g,!1)},error:function(a){l(b,d,f,g,!1)},beforeSend:function(c,b){a.utility("showLoadingIndicator",!0)},complete:function(c,b){a.utility("showLoadingIndicator",!1)},xhr:function(){var c=new XMLHttpRequest;c.upload.addEventListener("progress",function(c){c.lengthComputable&&void 0!=f.params.refProgressUI&&(c=(c.loaded/c.total).toString(),a.mobileweb.getCurrentPage().getName()===
b.name&&(new a.actions(b,null,[{method:"SetMainValue",category:"MainValue",name:f.params.refProgressUI,params:{value:c,targetpage:b.name},events:[]}])).execute())},!1);return c}})}}},1E3)})}},n=function(){if(void 0!=g)var c=a.utility("getChildAsJson",g,"name",f.params.sourceUIPart,d);else c=a.utility("getChildAsJson",b,"name",f.params.sourceUIPart,d),null==c&&"SplitView"===b.type&&a.each(b.children,function(b,n){n.name===f.params.targetpage&&(c=a.utility("getChildAsJson",n,"name",f.params.sourceUIPart,
d))});a.utility("initCall");var n=setInterval(function(){if(""!=a.utility("appendDeviceInfo")||null!=a.utility("appendDeviceInfo")){clearInterval(n);var r=!1,k="";if("QRview"===c.source){var t=a("#"+c.id+"_canvas");if(0<t.length){c.value=c.id+"_QRview.png";if(!a("#"+c.id+"_canvas").is("img")){var m=a("#"+c.id+"_canvas").get(0),x=m.getContext("2d");x.lineWidth=4;x.strokeStyle="#DDDDDD";x.strokeRect(0,0,t[0].width,t[0].height);x.fillStyle="rgba(255,255,255,.01)";x.fillRect(0,0,t[0].width-8,t[0].height-
8);t=m.toDataURL("image/png");m=new Image;m.src=t;a("#"+c.id+"_canvas").replaceWith(m);m.id=c.id+"_canvas"}c.src=a("#"+c.id+" > img")[0].src;r=!0}else{l(b,d,f,g,!1);return}}else{var p=document.createElement("Canvas");x=p.getContext("2d");t=document.getElementById(c.id);if("ImageButton"==c.viewtype&&(t=c.src,t=void 0!=t&&""!=t?a("#"+c.id+'>[name="foregroundimage"]')[0]:a("#"+c.id+'>[name="backgroundimage"]')[0],void 0==t.src||""==t.src)){l(b,d,f,g,!1);return}if("url"===c.source){t=t.getAttribute("src");
var v=new Image;v.crossOrigin="Anonymous";v.src=t;v.onload=function(){p.width=v.naturalWidth;p.height=v.naturalHeight;x.drawImage(v,0,0);try{a.utility("createIndexedDBTable","urlImage-savedData",1);imgId=b.name+"_"+c.id;var n={};n[imgId]=p.toDataURL("image/png");a.utility("getIndexedDBFlag")&&a.utility("clearDataFromIndexedDBTable","urlImage-savedData");a.utility("addDataToIndexedDBTable","urlImage-savedData",n);if(v.complete||void 0===v.complete)var h=setInterval(function(){a.utility("getDataFromIndexedDBTable",
"urlImage-savedData",imgId);a.utility("getIndexedDBFlag")&&(clearInterval(h),c.src=a.utility("getIndexedDBResult"),r=!0)},200)}catch(ca){console.log("Error: "+ca),l(b,d,f,g,!1)}}}else p.width=t.naturalWidth,p.height=t.naturalHeight,x.drawImage(t,0,0),c.src=p.toDataURL(),r=!0}k="uploadImage";var M=setInterval(function(){if(r){clearInterval(M);var n="img_"+Date.now()+".png";if("url"===c.source||"ImageButton"==c.viewtype)n=c.id+"_url.png";if(""==n||-1!=n.indexOf("base64"))n=c.id+".png";var t="";if("8080"==
a.utility("getServerPort"))t=a.mobileweb.baseurl+"/mobileweb/mobile/"+k+"?baseURL="+a.mobileweb.baseurl+a.utility("appendDeviceInfo")+"&os=mw&version="+a.mobileweb.version,t=t+"&mediaName="+n,void 0!=f.params.thumbnail&&(t=t+"&isThumbnail="+f.params.thumbnail),t=void 0!=f.params.targetLocation&&"S3"==f.params.targetLocation?t+"&isTargetMongo=false":t+"&isTargetMongo=true",a.ajax({url:t,type:"POST",data:c.src,processData:!1,contentType:!1,success:function(r){try{r=JSON.parse(r)}catch(ka){console.log(ka)}a.utility("showLoadingIndicator",
!1);if("ACK"===r.ret){var k=n;"url"!==c.source&&"ImageButton"!=c.viewtype||a.each(r.file,function(a,c){-1!=n.indexOf(a)&&(k=a)});h.setValue(r.file[k]);f.params.thumbnail&&f.params.refThumbnailUI&&r.thumbnail&&(a.mobileweb.getCurrentPage().getName()===b.name||"SplitView"==a.mobileweb.getCurrentPage().getViewType()&&a.mobileweb.getCurrentPage().getName()===b.pagedef.name||"PageScrollView"==a.mobileweb.getCurrentPage().getViewType()&&a.mobileweb.getCurrentPage().getName()===b.pagedef.name)&&(new a.actions(b,
null,[{method:"setValue",category:"UIObjectAction",name:f.params.refThumbnailUI,params:{key:"text",value:r.thumbnail[k],targetpage:b.name},events:[]}])).execute();l(b,d,f,g,!0)}else l(b,d,f,g,!1)},error:function(c){a.utility("showLoadingIndicator",!1);l(b,d,f,g,!1)},xhr:function(){var c=new XMLHttpRequest;c.upload.addEventListener("progress",function(c){c.lengthComputable&&void 0!=f.params.refProgressUI&&(c=(c.loaded/c.total).toString(),(a.mobileweb.getCurrentPage().getName()===b.name||"SplitView"==
a.mobileweb.getCurrentPage().getViewType()&&a.mobileweb.getCurrentPage().getName()===b.pagedef.name||"PageScrollView"==a.mobileweb.getCurrentPage().getViewType()&&a.mobileweb.getCurrentPage().getName()===b.pagedef.name)&&(new a.actions(b,null,[{method:"SetMainValue",category:"MainValue",name:f.params.refProgressUI,params:{value:c,targetpage:b.name},events:[]}])).execute())},!1);return c}});else{t=a.mobileweb.baseurl+":8181/commapi/commaction/llcommmedia/";var m=a.utility("fileSrctoBlob",c.src),x=
new FormData;x.append("ak",a.utility("appendDeviceInfo").replace("&ak=",""));x.append("os","mw");x.append("version",a.mobileweb.version);void 0!=f.params.thumbnail&&(f.params.thumbnail?x.append("isthumbnail","1"):x.append("isthumbnail","0"));void 0!=f.params.targetLocation&&"S3"==f.params.targetLocation?x.append("istargetmongo",0):x.append("istargetmongo",1);x.append("file",m,n);x&&a.ajax({url:t,type:"POST",crossDomain:!0,data:x,processData:!1,contentType:!1,async:!0,success:function(r){try{r=JSON.parse(r)}catch(ka){console.log(ka)}if("ACK"===
r.ret){var k=n;"url"!==c.source&&"ImageButton"!=c.viewtype||a.each(r.file,function(a,c){-1!=n.indexOf(a)&&(k=a)});h.setValue(r.file[k]);f.params.thumbnail&&f.params.refThumbnailUI&&r.thumbnail&&!a.isEmptyObject(r.thumbnail)&&(a.mobileweb.getCurrentPage().getName()===b.name||"SplitView"==a.mobileweb.getCurrentPage().getViewType()&&a.mobileweb.getCurrentPage().getName()===b.pagedef.name||"PageScrollView"==a.mobileweb.getCurrentPage().getViewType()&&a.mobileweb.getCurrentPage().getName()===b.pagedef.name)&&
(new a.actions(b,null,[{method:"setValue",category:"UIObjectAction",name:f.params.refThumbnailUI,params:{key:"text",value:r.thumbnail[k],targetpage:b.name},events:[]}])).execute();l(b,d,f,g,!0)}else l(b,d,f,g,!1)},error:function(a){l(b,d,f,g,!1)},beforeSend:function(c,b){a.utility("showLoadingIndicator",!0)},complete:function(c,b){a.utility("showLoadingIndicator",!1)},xhr:function(){var c=new XMLHttpRequest;c.upload.addEventListener("progress",function(c){c.lengthComputable&&void 0!=f.params.refProgressUI&&
(c=(c.loaded/c.total).toString(),(a.mobileweb.getCurrentPage().getName()===b.name||"SplitView"==a.mobileweb.getCurrentPage().getViewType()&&a.mobileweb.getCurrentPage().getName()===b.pagedef.name||"PageScrollView"==a.mobileweb.getCurrentPage().getViewType()&&a.mobileweb.getCurrentPage().getName()===b.pagedef.name)&&(new a.actions(b,null,[{method:"SetMainValue",category:"MainValue",name:f.params.refProgressUI,params:{value:c,targetpage:b.name},events:[]}])).execute())},!1);return c}})}}},1E3)}},1E3)},
M=function(){if(void 0!=g)var c=a.utility("getChildAsJson",g,"name",f.params.sourceUIPart,d);else c=a.utility("getChildAsJson",b,"name",f.params.sourceUIPart,d),null==c&&"SplitView"===b.type&&a.each(b.children,function(b,n){n.name===f.params.targetpage&&(c=a.utility("getChildAsJson",n,"name",f.params.sourceUIPart,d))});if(c.recorder){a.utility("initCall");var n=setInterval(function(){if(""!=a.utility("appendDeviceInfo")||null!=a.utility("appendDeviceInfo")){clearInterval(n);var r="";if("8080"==a.utility("getServerPort")){r=
a.mobileweb.baseurl+"/mobileweb/mobile/uploadAudio?baseURL="+a.mobileweb.baseurl+a.utility("appendDeviceInfo")+"&os=mw&version="+a.mobileweb.version+"&mediaName="+c.value;var k=c.src}else{r=a.mobileweb.baseurl+":8181/commapi/commaction/llcommmedia/";k=a.utility("fileSrctoBlob",c.src);var t=new FormData;t.append("ak",a.utility("appendDeviceInfo").replace("&ak=",""));t.append("os","mw");t.append("version",a.mobileweb.version);t.append("file",k,mediaValue);k=t}a.ajax({url:r,type:"POST",data:k,crossDomain:!0,
processData:!1,contentType:!1,success:function(n){try{n=JSON.parse(n)}catch(oa){console.log(oa)}a.utility("showLoadingIndicator",!1);"ACK"===n.ret?(h.setValue(n.file[c.value]),l(b,d,f,g,!0)):l(b,d,f,g,!1)},error:function(c){a.utility("showLoadingIndicator",!1);l(b,d,f,g,!1)},xhr:function(){var c=new XMLHttpRequest;c.upload.addEventListener("progress",function(c){c.lengthComputable&&void 0!=f.params.refProgressUI&&(c=(c.loaded/c.total).toString(),a.mobileweb.getCurrentPage().getName()===b.name&&(new a.actions(b,
null,[{method:"SetMainValue",category:"MainValue",name:f.params.refProgressUI,params:{value:c,targetpage:b.name},events:[]}])).execute())},!1);return c}})}},1E3)}else{var r="Target UI "+c.name+" is not 'recorder' type. So can't upload sound";if(void 0==f.events||void 0==f.events.Error||0==f.events.Error.length)a.errorhandler("alertBox",r,""),l(b,d,f,g,!1)}},X=function(){if(void 0!=g)var c=a.utility("getChildAsJson",g,"name",f.params.sourceUIPart,d);else c=a.utility("getChildAsJson",b,"name",f.params.sourceUIPart,
d),null==c&&"SplitView"===b.type&&a.each(b.children,function(b,n){n.name===f.params.targetpage&&(c=a.utility("getChildAsJson",n,"name",f.params.sourceUIPart,d))});c.src=c.src.replace("data:video/mp4;base64,","");a.utility("initCall");var n=setInterval(function(){if(""!=a.utility("appendDeviceInfo")||null!=a.utility("appendDeviceInfo")){clearInterval(n);var r="";if("8080"==a.utility("getServerPort")){r=a.mobileweb.baseurl+"/mobileweb/mobile/uploadMedia?baseURL="+a.mobileweb.baseurl+a.utility("appendDeviceInfo")+
"&os=mw&version="+a.mobileweb.version;r=r+"&mediaName="+c.value+"&mediaType=video";void 0!=f.params.thumbnail&&(r=r+"&isThumbnail="+f.params.thumbnail);r=void 0!=f.params.targetLocation&&"S3"==f.params.targetLocation?r+"&isTargetMongo=false":r+"&isTargetMongo=true";var k=c.src}else{r=a.mobileweb.baseurl+":8181/commapi/commaction/llcommmedia/";k=a.utility("fileSrctoBlob",c.src);var t=new FormData;t.append("ak",a.utility("appendDeviceInfo").replace("&ak=",""));t.append("version",a.mobileweb.version);
t.append("os","mw");t.append("isvideo",1);void 0!=f.params.thumbnail&&(f.params.thumbnail?t.append("isthumbnail",1):t.append("isthumbnail",0));void 0!=f.params.targetLocation&&"S3"==f.params.targetLocation?t.append("istargetmongo",0):t.append("istargetmongo",1);t.append("file",k,mediaValue);k=t}a.ajax({url:r,type:"POST",data:k,crossDomain:!0,processData:!1,contentType:!1,success:function(n){try{n=JSON.parse(n)}catch(na){console.log(na)}a.utility("showLoadingIndicator",!1);"ACK"===n.ret?(h.setValue(n.file[c.value]),
f.params.thumbnail&&f.params.refThumbnailUI&&n.thumbnail&&a.mobileweb.getCurrentPage().getName()===b.name&&(new a.actions(b,null,[{method:"setValue",category:"UIObjectAction",name:f.params.refThumbnailUI,params:{key:"text",value:n.thumbnail[c.value],targetpage:b.name},events:[]}])).execute(),l(b,d,f,g,!0)):l(b,d,f,g,!1)},error:function(c){a.utility("showLoadingIndicator",!1);l(b,d,f,g,!1)},xhr:function(){var c=new XMLHttpRequest;c.upload.addEventListener("progress",function(c){c.lengthComputable&&
void 0!=f.params.refProgressUI&&(c=(c.loaded/c.total).toString(),a.mobileweb.getCurrentPage().getName()===b.name&&(new a.actions(b,null,[{method:"SetMainValue",category:"MainValue",name:f.params.refProgressUI,params:{value:c,targetpage:b.name},events:[]}])).execute())},!1);return c}})}},1E3)},fa=function(){var c=f.params.type+"_"+f.params.source+".png";if(void 0!=g){var n=f.params.sourceUIPart.split("[");for(var h=0;h<n.length;h++)if(-1!=n[h].toString().indexOf("]")){var r=n[h].indexOf("]"),k="["+
n[h].substring(0,r)+"]";f.params.sourceUIPart.replace(k,a.utility("getChildAsJson",g,"name",n[h].substring(0,r),d).value)}n=f.params.sourceUIPart}else n=a.utility("tokenizeString",f.params.sourceUIPart,b,f);if(void 0!=n&&""!=n){if(""===f.params.source){var t=a.mobileweb.baseurl+"/images/"+n;c="IMAGE.png"}else t="remote"===f.params.source?a.mobileweb.baseurl+"/images/"+n:n;var m=new XMLHttpRequest;m.open("GET",t,!0);m.onreadystatechange=function(){if(4===m.readyState)if(200===m.status){var a=document.createElement("a");
a.setAttribute("href",t);a.setAttribute("download",c);a.setAttribute("target","_blank");a.style.display="none";document.body.appendChild(a);a.click();document.body.removeChild(a);l(b,d,f,g,!0)}else l(b,d,f,g,!1)};m.send()}else l(b,d,f,g,!1)},U=function(){if(void 0!=g){for(var c=f.params.sourceUIPart.split("["),n=0;n<c.length;n++)if(-1!=c[n].toString().indexOf("]")){var h=c[n].indexOf("]"),r="["+c[n].substring(0,h)+"]";f.params.sourceUIPart=f.params.sourceUIPart.replace(r,a.utility("getChildAsJson",
g,"name",c[n].substring(0,h),d).value)}var k=f.params.sourceUIPart;media=a.utility("getChildAsJson",g,"name",f.params.sourceUIPart,d)}else k=a.utility("tokenizeString",f.params.sourceUIPart,b,f),media=a.utility("getChildAsJson",b,"name",f.params.sourceUIPart,d);var t=!1;if(void 0!=media)if("QRview"===media.source){if(c=a("#"+media.id+"_canvas"),0<c.length){c=c[0].src;a("[name='"+f.params.sourceUIPart.toString().replace("[","").replace("]","")+"']").attr("src",c);var m=a("[name='"+f.params.sourceUIPart.toString().replace("[",
"").replace("]","")+"']").attr("src");t=!0}}else if("url"===media.source){var x=document.getElementById(media.id);c=x.getAttribute("src");if(0<c.length)if(999>x.naturalWidth&&999>x.naturalHeight){if(c=x.getAttribute("src"),0<c.length){var p=new Image;p.crossOrigin="Anonymous";p.src=c;p.onload=function(){var a=document.createElement("Canvas"),c=a.getContext("2d");a.width=x.naturalWidth;a.height=x.naturalHeight;c.drawImage(p,0,0);try{m=a.toDataURL("image/png"),t=!0}catch(ca){console.log("Error: "+ca),
l(b,d,f,g,!1)}}}}else a.errorhandler("messageBox","Large size images can not be save directly to gallery.","","Save Media Limitation"),n=document.createElement("a"),n.setAttribute("href",c),n.setAttribute("download","Image_"+Date.now()),n.setAttribute("target","_blank"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),l(b,d,f,g,!0)}else m="ImageButton"==media.viewtype?a("#"+media.id+'>[name="foregroundimage"]').attr("src"):a("[name='"+f.params.sourceUIPart.toString().replace("[",
"").replace("]","")+"']").attr("src"),t=!0;var v=setInterval(function(){if(t)if(clearInterval(v),void 0!=m&&""!=m){var a=document.createElement("a");a.setAttribute("href",m);void 0!=k&&""!=k?a.setAttribute("download",k):a.setAttribute("download","Image_"+Date.now());a.setAttribute("target","_blank");a.style.display="none";document.body.appendChild(a);a.click();setTimeout(function(){document.body.removeChild(a)},0);l(b,d,f,g,!0)}else l(b,d,f,g,!1)},500)},T=function(){if("text"==f.params.contenttype)var c=
a("#"+h.getId()).get(0).value;if(void 0!=c&&""!=c)if(void 0===navigator.share)a.errorhandler("alertBox","This device does not support this feauture."),l(b,d,f,g,!1);else try{if(-1!=c.indexOf("text:")||-1!=c.indexOf("text: ")||-1!=c.indexOf("text :")||-1!=c.indexOf("text : "))c=c.replace("text:","").replace("text: ","").replace("text :","").replace("text : ","");var n=navigator.share({text:c});void 0!==n&&n.then(function(){console.log("Successfully sent share");l(b,d,f,g,!0)}).catch(function(a){console.log(a);
l(b,d,f,g,!1)})}catch(ma){console.log(ma),l(b,d,f,g,!1)}else l(b,d,f,g,!1)};return r}function d(b,d,f,g,h,l){var r={execute:function(){if("StartWaitIndicator"==f.method){f.params.timeout=a.utility("tokenizeString",f.params.timeout,b,f);var h=a.errorhandler("checkWarningController",f);if(!h)return l(b,d,f,g,h),r}switch(f.method){case "Alert":k();break;case "ActionSheet":c();break;case "StartWaitIndicator":t();break;case "StopWaitIndicator":0<P&&clearTimeout(P);a(".ui-loader span").html("");a.mobile.hidePageLoadingMsg();
a(".ui-loader").css("display","none");a.mobile.loading("hide");void 0!=a("#overlay")[0]?a("#overlay").remove():a("#coverlay").remove();l(b,d,f,g,!0);break;case "ShowDialog":m();break;case "HideDialog":p();break;default:l(b,d,f,g,!1)}h&&("Alert"==f.method&&void 0!=f.events&&void 0!=f.events.Success?a.each(f.events.Success,function(a,c){"Alert"!=c.method&&l(b,d,f,g,h)}):l(b,d,f,g,h))}},k=function(){a.utility("showLoadingIndicator",!1);var c="",h="";if(-1!=f.params.title.indexOf("[")&&-1!=f.params.title.indexOf("]"))if(c=
f.params.title,"RemoteTableViewList"===b.type||"DBTableViewList"===b.type)for(var r=c.split("["),k=0;k<r.length;k++){if(-1!=r[k].indexOf("]")){var t=r[k].indexOf("]"),n="["+r[k].substring(0,t)+"]",m="";a.each(b.data.contents[d.rownum],function(a,c){a===r[k].substring(0,t)&&(m=c)});c=c.replace(n,m)}}else c=a.utility("tokenizeString",f.params.title,b,f);else c=a.utility("tokenizeString",f.params.title,b,f);if(-1!=f.params.message.indexOf("[")&&-1!=f.params.message.indexOf("]"))if(h=f.params.message,
"RemoteTableViewList"===b.type||"DBTableViewList"===b.type)for(r=h.split("["),k=0;k<r.length;k++){if(-1!=r[k].indexOf("]"))if(t=r[k].indexOf("]"),n="["+r[k].substring(0,t)+"]",m="",void 0!=d.rownum)a.each(b.data.contents[d.rownum],function(a,c){a==r[k].substring(0,t)&&(h=h.replace(n,c))});else{var p;if(void 0!=d.getId){var v=p=d.getId();"Row"!=d.getViewType()&&(v=p.substr(0,p.lastIndexOf("-")));p=v.substr(v.lastIndexOf("-")+1,v.length)}isNaN(parseInt(p))&&(void 0!=b.data.pagedata&&a.each(b.data.pagedata,
function(a,c){if(a==r[k].substring(0,t))return h=h.replace(n,c),!1}),-1!=h.indexOf("[")&&(p=0));void 0!=b.data.contents[p]?a.each(b.data.contents[p],function(a,c){a==r[k].substring(0,t)&&(h=h.replace(n,c))}):(void 0!=b.toolbartop&&void 0!=b.toolbarbottom&&(a.each(b.toolbartop.children,function(a,c){c.name==r[k].substring(0,t)&&(h=h.replace(n,c.value))}),a.each(b.toolbarbottom.children,function(a,c){c.name==r[k].substring(0,t)&&(h=h.replace(n,c.value))})),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,
function(a,c){c.name==r[k].substring(0,t)&&(h=h.replace(n,c.value))}))}}else h=a.utility("tokenizeString",f.params.message.toString().replace(/'nl9'/g,"<br>"),b,f);else h=a.utility("tokenizeString",f.params.message.toString().replace(/'nl9'/g,"<br>"),b,f);var u=0;u="preview"===a.mobileweb.state?(window.innerWidth-320)/2:(a.mobileweb.device.width-320)/2;var q=setInterval(function(){if(!a.utility("isBusy")&&a.utility("isInitChildren"))if(clearInterval(q),b.name!==a.mobileweb.getCurrentPage().getName()&&
"PageScrollView"!=b.parentType)l(b,d,f,g,!1),console.log("Alert triggering page title ::",b.pageTitle);else{var n="";if(void 0!=d.getId&&"dialog"===a("#"+d.getId())[0].offsetParent.firstChild.className){var r=a("#"+d.getId())[0].offsetParent.firstChild.id,k=a("#"+r).attr("name");n=a.getUI(k,d,a.mobileweb.getCurrentPage().getName());a.isEmptyObject(n)||(new a.actions(b,null,[{method:"HideDialog",category:"WarningAction",name:k,events:[]}])).execute()}"Error"===f.type?""===c?""==f.params.canceltitle?
a.blockUI({message:'<article class="message clearfix" style="background-color: #f00;"><p style="color:#c50a0a;">'+h+'</p><div id="btnDiv"><button id="okAlert" class="fr" >OK</button></div> </article>',css:{position:"relative",border:"none",backgroundColor:"",left:u+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px","text-align":"left",color:"#fff",top:"45px",opacity:"1",cursor:""}}):a.blockUI({message:'<article class="message clearfix" style="backgroundColor: #f00"><p style="color:#c50a0a;>'+
h+'</p><div id="btnDiv"><button id="cancelAlert" class="fr">'+f.params.canceltitle+' </button> <button id="okAlert" class="fr" style="margin:auto" >OK</button> </div></article>',css:{position:"relative",border:"none",backgroundColor:"",left:u+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px","text-align":"left",color:"#fff",top:"45px",opacity:"1",cursor:""}}):""==f.params.canceltitle?a.blockUI({message:'<article class="message clearfix" style="backgroundColor: #f00"><h1>'+
c+'</h1><p style="color:red;">'+h+'</p><div id="btnDiv"><button id="okAlert" class="fr" style="margin:auto" >OK</button></div> </article>',css:{position:"relative",border:"none",backgroundColor:"",left:u+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px","text-align":"left",color:"#fff",top:"45px",opacity:"1",cursor:""}}):a.blockUI({message:'<article class="message clearfix" style="backgroundColor: #f00"><h1>'+c+'</h1><p style="color:red;>'+
h+'</p><div id="btnDiv"><button id="cancelAlert" class="fr">'+f.params.canceltitle+' </button> <button id="okAlert" class="fr" style="margin:auto" >OK</button></div> </article>',css:{position:"relative",border:"none",backgroundColor:"",left:u+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px","text-align":"left",color:"#fff",top:"45px",opacity:"1",cursor:""}}):""===c?""==f.params.canceltitle?a.blockUI({message:'<article class="message clearfix" style="backgroundColor: #f00"><p>'+
h+'</p><div id="btnDiv"><button id="okAlert" class="fr" style="margin:auto" >OK</button></div> </article>',css:{position:"relative",border:"none",backgroundColor:"",left:u+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px","text-align":"left",color:"#fff",top:"45px",opacity:"1",cursor:""}}):a.blockUI({message:'<article class="message clearfix" style="backgroundColor: #f00"><p>'+h+'</p><div id="btnDiv"><button id="cancelAlert" class="fr">'+f.params.canceltitle+
' </button> <button id="okAlert" class="fr" style="margin:auto" >OK</button></div>  </article>',css:{position:"relative",border:"none",backgroundColor:"",left:u+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px","text-align":"left",color:"#fff",top:"45px",opacity:"1",cursor:""}}):""==f.params.canceltitle?a.blockUI({message:'<article class="message clearfix" style="backgroundColor: #f00"><h1>'+c+"</h1><p>"+h+'</p><div id="btnDiv"><button id="okAlert" class="fr" style="margin:auto" >OK</button></div>  </article>',
css:{position:"relative",border:"none",backgroundColor:"",left:u+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px","text-align":"left",color:"#fff",top:"45px",opacity:"1",cursor:""}}):a.blockUI({message:'<article class="message clearfix" style="backgroundColor: #f00"><h1>'+c+"</h1><p>"+h+'</p><div id="btnDiv"><button id="cancelAlert" class="fr">'+f.params.canceltitle+' </button> <button id="okAlert" class="fr" style="margin:auto" >OK</button></div> </article>',
css:{position:"relative",border:"none",backgroundColor:"",left:u+"px",height:"376px",width:"320px",padding:"0px","-webkit-border-radius":"10px","-moz-border-radius":"10px","text-align":"left",color:"#fff",top:"45px",opacity:"1",cursor:""}});a("#cancelAlert").bind("click",function(){a("#AlertBOX").remove();f.events&&(a.unblockUI(),setTimeout(function(){a.isEmptyObject(n)||0!=f.events.onTapCancel.length||(new a.actions(b,null,[{method:"ShowDialog",category:"WarningAction",name:k,events:[]}])).execute();
l(b,d,f,g,"onTapCancel")},400))});a("#okAlert").bind("click",function(){a("#AlertBOX").remove();f.events&&(a.unblockUI(),setTimeout(function(){a.isEmptyObject(n)||0!=f.events.onTapOk.length||(new a.actions(b,null,[{method:"ShowDialog",category:"WarningAction",name:k,events:[]}])).execute();l(b,d,f,g,"onTapOk")},400))})}},1E3)},c=function(){var c=f.params.buttons,g="";a.each(c,function(a){g=g+"<a id='"+c[a].id+"'style=\"margin-left:2.5%;margin-right:2.5%;width:95%;height:95%;\" data-role='button' rel='close' >"+
c[a].title+"</a>";return!0});void 0!=f.cancelTitle&&(g=g+"<div id='cancel_div' class='ui-header' style=\"background:#111;\"><a id='cancel' style=\"margin-left:2.5%;margin-right:2.5%;width:95%;height:100%;margin-top:6px;border:none;\" data-role='button' rel='close' >"+f.cancelTitle+"</a></div>");a('<div style="height:100%;width:100%; z-index:1;overflow-x:none">').simpledialog2({height:b.height*a.mobileweb.device.aspectHratio+"px",width:b.width*a.mobileweb.device.aspectWratio-15+"px",mode:"blank",headerText:f.title,
headerClose:!0,blankContent:g});void 0!=f.cancelTitle&&a("#cancel span > span").css({"font-size":"16px"});a("h1.ui-title").css({"margin-right":"0px","margin-left":"0px"});a.each(c,function(f){a("#"+c[f].id).click(function(){void 0!=c[f].events.Tap&&(new a.actions(b,d,c[f].events.Tap)).execute()});a("#"+c[f].id+" >span >span").css({"font-size":"16px"});return!0})},t=function(){if(""==f.params.type||"Default"==f.params.type)a("body").append(a("<div id='overlay'></div>").css({position:"fixed",top:0,
left:0,width:"100%",height:"100%","background-color":"rgba(0,0,0,.5)","z-index":1E4})),a(".ui-loader").css("display","block"),a.mobile.loading("show"),a(".ui-loader").append('<span style="position: absolute; left: -30px;color:#000000; width:120px;  display:inline-block;">'+a.utility("tokenizeString",f.params.message,b,f)+"</span>"),a(".ui-icon-loading").css({"background-image":'url("https://code.jquery.com/mobile/1.2.0/images/ajax-loader.gif")'}),-1!=parseInt(f.params.timeout)&&(P=setTimeout(function(){a(".ui-loader").css("display",
"none");a(".ui-loader span").html("");a("#overlay").remove();a.mobile.loading("hide")},1E3*parseInt(f.params.timeout)));else{a("body").append(a("<div id='coverlay'></div>").css({position:"fixed",top:0,left:0,width:"100%",height:"100%","text-align":"center","background-color":"rgba(104,104,104,.5)","z-index":1E4}));a(".ui-loader").css("display","none");a.mobile.loading("show");var c=a.utility("tokenizeString",f.params.file,b,f),d=a.utility("tokenizeString",f.params.message,b,f);void 0!=d&&0<d.length?
a("#coverlay").append('<span style="color:#000000; display:flex; align-items:center;justify-content: center;height:100%;"><img id="customWait" style="width:48px;height:48px;"/><span style="width:120px; color:#000000; ">'+d+"</span></span>"):a("#coverlay").append('<span style="color:#000000; display:flex; align-items:center;justify-content: center;height:100%;"><img id="customWait" style="width:48px;height:48px;"/></span>');a("#customWait").attr("src",a.utility("getImage",c));P=setTimeout(function(){a(".ui-loader").css("display",
"none");a("#coverlay").remove();a.mobile.loading("hide")},1E3*parseInt(f.params.timeout))}},m=function(){var c=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),h.getId());c=void 0!=c.padding?parseFloat(a(".scroller").css("left"))+parseFloat(c.padding.left)+"px":a(".scroller").css("left");var d=parseFloat(a("#"+h.getId()).css("width")),f=a("#"+h.getId()).css("border-radius"),g=(parseFloat(a("#"+b.name).css("height"))-parseFloat(a("#"+h.getId()).css("height")))/2+"px";a("#"+
h.getId()).css({visibility:"visible"});a("#"+h.getId()).css({display:"block"});var l=a("#"+h.getId()).css("padding-left"),n=a("#"+h.getId()).css("padding-right");a.each(h.children,function(c,b){c=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),b.getId());if("false"===c.hidden||!1===c.hidden)a("#"+b.getId()).css({visibility:"visible"}),"TextButton"===b.getViewType()&&a("#"+b.getId()+"_label").css({visibility:"visible"})});a.blockUI({message:a("#"+h.getId()),focusInput:!1,
css:{left:c,width:d,"margin-left":l,"margin-right":n,"-moz-border-radius":f,"-webkit-border-radius":f,top:g,opacity:"1",cursor:"default",border:"0px"},overlayCSS:{cursor:"default"}})},p=function(){a("#"+h.getId()).css({visibility:"hidden"});a("#"+h.getId()).css({display:"none"});a.each(h.children,function(c,b){a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),b.getId());a("#"+b.getId()).css({visibility:"hidden"});"TextButton"===b.getViewType()&&a("#"+b.getId()+"_label").css({visibility:"hidden"})});
a.unblockUI()};return r}function b(b,d,f,g,h,l){var k={execute:function(){var x=a.errorhandler("checkFrameParams",h,f.params,f);if(void 0==g&&!x||a.isEmptyObject(h))return l(b,d,f,g,x),k;switch(f.method){case "setImage":r();break;case "setValue":c();break;case "setColor":t();break;case "moveObject":m();break;case "rotateObject":p();break;case "setFrame":var v=b.data.contents[0]?a.utility("extractDataFromRecord",b.data.contents[0],f.params.x):a.utility("tokenizeString",f.params.x,b,f),q=b.data.contents[0]?
a.utility("extractDataFromRecord",b.data.contents[0],f.params.y):a.utility("tokenizeString",f.params.y,b,f),K=b.data.contents[0]?a.utility("extractDataFromRecord",b.data.contents[0],f.params.width):a.utility("tokenizeString",f.params.width,b,f),n=b.data.contents[0]?a.utility("extractDataFromRecord",b.data.contents[0],f.params.height):a.utility("tokenizeString",f.params.height,b,f);if(isNaN(parseInt(v))||isNaN(parseInt(q))||isNaN(parseInt(K))||isNaN(parseInt(n)))l(b,d,f,g,!1);else{v*=a.mobileweb.device.aspectWratio;
q*=a.mobileweb.device.aspectHratio;K*=a.mobileweb.device.aspectWratio;n*=a.mobileweb.device.aspectHratio;if("Label"==h.getViewType())a("#"+h.getId()+"_p").css({left:v+"px",top:q+"px",width:K+"px",height:n+"px"});else if("Slider"==h.getViewType())a("#"+h.getId()+">div").css({top:"0px",width:(parseInt(f.params.width)-32)*a.mobileweb.device.aspectWratio+"px"}),a("#"+h.getId()+">div").css({"margin-top":(n-a("#"+h.getId()+">div").height())/2+"px"}),a("#"+h.getId()+">div").css({"margin-left":(K-a("#"+h.getId()+
">div").width())/2+"px"}),a("#"+h.getId()).css({left:v+"px",top:q+"px",width:K+"px",height:n+"px"});else{"Image"==h.getViewType()&&a("#"+h.getId()+"_divImg").css({left:v+"px",top:q+"px",width:K+"px",height:n+"px"});if("TextButton"==h.getViewType()&&a("#"+h.getId()).is("img")){var M=v-parseFloat(a("#"+h.getId()).css("left")),X=q-parseFloat(a("#"+h.getId()).css("top")),w=K-parseFloat(a("#"+h.getId()).css("width")),D=n-parseFloat(a("#"+h.getId()).css("height"));M=parseFloat(a("#"+h.getId()+"_label").css("left"))+
M;X=parseFloat(a("#"+h.getId()+"_label").css("top"))+X;w=parseFloat(a("#"+h.getId()+"_label").css("width"))+w;D=parseFloat(a("#"+h.getId()+"_label").css("height"))+D;a("#"+h.getId()+"_label").css({left:M+"px",top:X+"px",width:w+"px",height:D+"px"})}a("#"+h.getId()).css({left:v+"px",top:q+"px",width:K+"px",height:n+"px"});a("#"+h.getId()+" div").css({width:K+"px",height:n+"px"})}a.utility("updateChildProperty",b,h.getName(),f.params.x,"frame.x");a.utility("updateChildProperty",b,h.getName(),f.params.y,
"frame.y");a.utility("updateChildProperty",b,h.getName(),f.params.width,"frame.width");a.utility("updateChildProperty",b,h.getName(),f.params.height,"frame.height");l(b,d,f,g,!0)}break;case "movingFocus":u();break;case "setFocusOff":a.errorhandler("checkTargetUIObject",h,f.params,f)?f.params.targetUI&&("RoundButton"==h.getViewType()||"TextButton"==h.getViewType()?a("#"+h.getId()+">div").blur():"Label"==h.getViewType()?a("#"+h.getId()+"_p").blur():a("#"+h.getId()).blur()):l(b,d,f,g,!1);break;default:l(b,
d,f,g,!1)}x&&"setValue"!==f.method&&"setFrame"!==f.method&&"setColor"!==f.method?l(b,d,f,g,x):x&&"setImage"==f.method&&void 0!=f.params.targetpage&&f.params.targetpage==a.mobileweb.getCurrentPage().getName()&&l(b,d,f,g,x)}},r=function(){var c="";if("remote"==f.params.src||"remotedb"==f.params.src){if(-1==f.params.image.indexOf("[")||-1==f.params.image.indexOf("]"))f.params.image=f.params.image.replace(f.params.image.charAt(f.params.image.length-1),"");c=a.utility("tokenizeString",f.params.image,b,
f)}else if("url"==f.params.src&&void 0!=f.params.imageName&&""!=f.params.imageName&&f.params.image!=f.params.imageName&&(f.params.image=f.params.imageName),-1!=f.params.image.indexOf("[")&&-1!=f.params.image.indexOf("]")){var k=f.params.image.substring(f.params.image.indexOf("[")+1,f.params.image.indexOf("]"));if(void 0!==g){if("BaseView"==g.type||"ScrollView"==g.type)a.each(g.children,function(a,b){b.name==k&&(c=f.params.image.replace("["+k+"]",b.value))}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&
(a.each(g.toolbartop.children,function(a,b){b.name==k&&(c=f.params.image.replace("["+k+"]",b.value))}),a.each(g.toolbarbottom.children,function(a,b){b.name==k&&(c=f.params.image.replace("["+k+"]",b.value))}),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==k&&(c=f.params.image.replace("["+k+"]",b.value))}),void 0!=g.data&&void 0!=g.data.contents&&(g.data.contents.constructor==Array?a.each(g.data.contents,function(b,d){a.each(d,function(a,b){a==k&&(c=f.params.image.replace("["+
k+"]",b))})}):a.each(g.data.contents,function(a,b){a==k&&(c=f.params.image.replace("["+k+"]",b))})));else if(-1!=g.type.toString().toLowerCase().indexOf("table")){if("custom"==g.children[0].style.toString().toLowerCase()){var r="";try{r=d.getId().substr(0,d.getId().lastIndexOf("-"))}catch(fa){r=d.id.toString().substr(0,d.id.lastIndexOf("-"))}var t=r.substr(r.lastIndexOf("-")+1,r.length);if(isNaN(t))try{t=d.getId().substr(d.getId().lastIndexOf("-")+1,d.getId().length)}catch(fa){t=d.id.substr(d.id.lastIndexOf("-")+
1,d.id.length)}var n=!1;isNaN(t)||(a.each(g.children[0].group,function(b,d){a.each(d.row,function(b,d){d.rownum==t&&a.each(d.children,function(a,b){b.name==k&&(c=f.params.image.replace("["+k+"]",b.value),n=!0)})})}),n||(c=a.utility("tokenizeString",f.params.image,g,f)))}else c=k=a.utility("tokenizeString",f.params.image,b,f);void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==k&&(c=f.params.image.replace("["+k+"]",b.value))}),a.each(g.toolbarbottom.children,
function(a,b){b.name==k&&(c=f.params.image.replace("["+k+"]",b.value))}));void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==k&&(c=f.params.image.replace("["+k+"]",b.value))})}else c=k=a.utility("tokenizeString",f.params.image,b,f);c=a.utility("tokenizeString",c,b,f)}else c=k=a.utility("tokenizeString",f.params.image,b,f)}else c=a.utility("tokenizeString",f.params.image,b,f);switch(h.getViewType()){case "TextButton":void 0!=a("#"+h.getId()).attr("src")&&("remote"==f.params.src||
"remotedb"==f.params.src?-1!=c.indexOf("http")?a("#"+h.getId()).attr("src",c):a("#"+h.getId()).attr("src",a.utility("getRemoteImage",c)):"bundle"==f.params.src?a("#"+h.getId()).attr("src",a.utility("getImage",c)):a("#"+h.getId()).attr("src",c));break;case "ImageButton":var m=0;void 0!=f.params.animateTime&&(m=1E3*parseInt(f.params.animateTime));h.setValue(c);"remote"==f.params.src||"remotedb"==f.params.src?(h.setSource("remotedb"),a("#"+h.getId()+'>[name="foregroundimage"]').attr("src",a.mobileweb.baseurl+
"/images/"+c)):"bundle"==f.params.src?(h.setSource("bundle"),a("#"+h.getId()+'>[name="foregroundimage"]').attr("src",a.utility("getImage",c))):(h.setSource("local"),a("#"+h.getId()+'>[name="foregroundimage"]').attr("src",c));0<m&&(0!=c.toString().length?a("#"+h.getId()).fadeOut("fast",function(){a("#"+h.getId()).fadeIn(m)}):a("#"+h.getId()).fadeOut(m,function(){a("#"+h.getId()).fadeIn("fast")}));break;case "ToggleButton":"ImageButton_toggle_on.png"==c||"ImageButton_toggle_off.png"==c?a("input#"+h.getId()).attr("src",
a.utility("getSystemImage",c,h.getViewType())):"remote"==f.params.src||"remotedb"==f.params.src?a("input#"+h.getId()).attr("src",a.mobileweb.baseurl+"/images/"+c):"bundle"==f.params.src?a("input#"+h.getId()).attr("src",a.utility("getImage",c)):a("input#"+h.getId()).attr("src",c);break;default:if(m=0,void 0!=f.params.animateTime&&(m=1E3*parseInt(f.params.animateTime)),void 0===a("#"+h.getId()).attr("src"))l(b,d,f,g,!1);else{if("remote"==f.params.src||"remotedb"==f.params.src)-1!=c.indexOf("http")?
a("#"+h.getId()).attr("src",c):a("#"+h.getId()).attr("src",a.utility("getRemoteImage",c)),h.setValue(c),h.setSource("remoteFile");else if("url"==f.params.src)-1==c.indexOf("http")?(c="/"==c.charAt(0)?a.mobileweb.baseurl+c:a.mobileweb.baseurl+"/"+c,a("#"+h.getId()).attr("src",c)):null!=c.match(/\/\/(?![\s\S]*\/\/)/)&&1<c.match(/\/\/(?![\s\S]*\/\/)/).length?a("#"+h.getId()).attr("src",c.toString().replace(/\/\/(?![\s\S]*\/\/)/,"/")):a("#"+h.getId()).attr("src",c),0<m&&(0!=c.toString().length?a("#"+
h.getId()).fadeOut("fast",function(){a("#"+h.getId()).fadeIn(m)}):a("#"+h.getId()).fadeOut(m,function(){a("#"+h.getId()).fadeIn("fast")}));else if("bundle"==f.params.src)if(0<m){var p=""!==a("#"+h.getId()).attr("src")?"slow":"fast";0!=c.toString().length?a("#"+h.getId()).fadeOut(p,function(){a("#"+h.getId()).fadeIn(m);setTimeout(function(){a("#"+h.getId()).attr("src",a.utility("getImage",c.toString().replace(/\/\/(?![\s\S]*\/\/)/,"/")))},500)}):a("#"+h.getId()).fadeOut(m,function(){a("#"+h.getId()).fadeIn(p);
a("#"+h.getId()).attr("src","")})}else a("#"+h.getId()).attr("src",a.utility("getImage",c.toString().replace(/\/\/(?![\s\S]*\/\/)/,"/")));else a("#"+h.getId()).attr("src",c);h.setValue(c);r=f.params.image.replace("[","").replace("]","");(r=a.getUI(r,d,""))&&!a.isEmptyObject(r)&&"Camera"===r.getViewType()&&(h.setImageName(h.getId()+"_cam.png"),h.getTemplate()!==f.params.image&&h.setTemplate(f.params.image))}}},c=function(){function c(c){switch(t){case "textalignment":a("#"+h.getId()).css({"text-align":c});
break;case "text":"TextField"==r||"NumericField"==r||"Label"==r||"TextArea"==r?(h.setValue(c),"__LAT__"===h.getValue()?h.setValue(a("#targetLatitude_"+a.GMapService("getMapName")).text()):"__LONG__"===h.getValue()?h.setValue(a("#targetLongitude_"+a.GMapService("getMapName")).text()):"__ADDRESS__"===h.getValue()?h.setValue(a("#__ADDRESS__").val()):"__ROUTETIME__"===h.getValue()?h.setValue(a("#__ROUTETIME__").val()):"__ROUTEDISTANCE__"===h.getValue()&&h.setValue(a("#__ROUTEDISTANCE__").val())):"RoundButton"==
r||"TextButton"==r?a("#"+h.getId()+" .ui-btn-text").text(c):"CheckBox"==r?a("label[for='"+h.getId()+h.getName()+"']").text(c):a("#"+h.getId()).text(c);break;case "borderwidth":c=parseInt(a.utility("tokenizeString",f.params.value,b,f));"TextField"==r||"TextArea"==r?a("#"+h.getId()).css({"border-width":c}):"NumericField"==r?a("#"+h.getId()).css({"border-style":"solid","border-width":c}):"RoundButton"==r||"TextButton"==r?a("#"+h.getId()+" .ui-btn-text").text(c):"CheckBox"==r?a("label[for='"+h.getId()+
h.getName()+"']").text(c):"Image"==r?void 0!=a("#"+h.getId()+"_divImg")?a("#"+h.getId()+"_divImg").css({"border-style":"solid","border-width":c}):a("#"+h.getId()).css({"border-style":"solid","border-width":c}):"Label"==r?a("#"+h.getId()+"_p").css({"border-style":"solid","border-width":c}):a("#"+h.getId()).text(c);break;case "ontext":if("ToggleButton"==r){var n=a.utility("getUiID_Object_From_Page",b.name,h.getId());n.selectedtitle=c;1==n.value&&a("label[for='"+h.getId()+"']").text(c)}break;case "offtext":"ToggleButton"==
r&&(n=a.utility("getUiID_Object_From_Page",b.name,h.getId()),n.title=c,0==n.value&&a("label[for='"+h.getId()+"']").text(c));break;case "placeholder":a("#"+h.getId()).attr("placeholder",c);break;case "editable":"true"==c?a("#"+h.getId()).removeAttr("readonly"):a("#"+h.getId()).prop("readonly",!0);h.propagateReadOnly(c);break;case "hidden":"true"===c.toString().toLowerCase()?"Image"===h.getViewType()?setTimeout(function(){a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),h.getId()).hidden=
"true";a("#"+h.getId()).css({visibility:"hidden"});void 0!=a("#"+h.getId()+"_divImg")&&a("#"+h.getId()+"_divImg").css({visibility:"hidden"})},20):"TextButton"===h.getViewType()?(h.setHiddenProperty(c.toString().toLowerCase()),c=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),h.getId()),c.hidden="true"):"TextField"==r||"NumericField"==r||"Label"==r||"TextArea"==r?void 0!=a("#"+h.getId())&&h.setVisibility(!1):"ImageButton"===h.getViewType()?(a("#"+h.getId()).css({visibility:"hidden"}),
a("#"+h.getId()).css({display:"none"})):"Radio"===h.getViewType()?setTimeout(function(){var c=a.utility("getRadio_groupObjects_From_Page",a.mobileweb.getCurrentPage().getName(),a("[id='"+h.getId()+"']"));a.each(c,function(c,b){b.hidden="true";a("[id='"+b.id+"']").css({visibility:"hidden"})})},2E3):"DBTableViewList"===h.getViewType()||"RemoteTableViewList"===h.getViewType()?void 0!=b.children&&a.each(b.children,function(c,b){a.each(b.group,function(c,b){a.each(b.row,function(c,b){a.each(b.children,
function(c,b){if("RemoteTableViewList"===h.getViewType()){if(c=b.id.split("-"),num=c.length,c=c[num-2],b.name==f.name||b.name==f.name+"-"+c)a("#"+b.id).css({visibility:"hidden"}),a("#"+b.id).css({display:"none"})}else b.name==f.name&&(a("#"+b.id).css({visibility:"hidden"}),a("#"+b.id).css({display:"none"}))})})})}):"TileList"===h.getViewType()?void 0!=a("#"+h.getId())&&h.setVisibility(!1):"Camera"===h.getViewType()?(a("#"+h.getId()).css({visibility:"hidden"}),void 0!=a("#"+h.getId()+"_canvas")&&a("#"+
h.getId()+"_canvas").css({visibility:"hidden"})):"DatePicker"===h.getViewType()?void 0!=a("#"+h.getId())&&h.setVisibility(!1):"Calendar"===h.getViewType()?void 0!=a("#"+h.getId())&&h.setVisibility(!1):"ComboBox"===h.getViewType()?void 0!=a("#"+h.getId())&&h.setVisibility(!1):a("#"+h.getId()).css({visibility:"hidden"}):"SoundBox"===h.getViewType()?(a("#"+h.getId()).css({visibility:"visible"}),a("#"+h.getId()).find(".audioPlayer_play").addClass("visible"),a("#"+h.getId()).find(".audioPlayer_pause").removeClass("visible"),
a("#"+h.getId()+"> marquee").text(h.getValue()),a("#"+h.getId()+" audio").attr("src",h.getValue()),a("#"+h.getId()).trigger("loadedmetadata"),a("#"+h.getId()).trigger("timeupdate"),a("#"+h.getId()+" > Label").css({visibility:"visible"})):"TextField"==r||"NumericField"==r||"Label"==r||"TextArea"==r?void 0!=a("#"+h.getId())&&h.setVisibility(!0):"TextButton"===h.getViewType()?(h.setHiddenProperty(c.toString().toLowerCase()),c=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),
h.getId()),c.hidden="false"):"Image"===h.getViewType()?setTimeout(function(){a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),h.getId()).hidden="false";a("#"+h.getId()).css({visibility:"visible"});void 0!=a("#"+h.getId()+"_divImg")&&a("#"+h.getId()+"_divImg").css({visibility:"visible"})},20):"ImageButton"===h.getViewType()?(a("#"+h.getId()).css({visibility:"visible"}),a("#"+h.getId()).css({display:"block"})):"Radio"===h.getViewType()?setTimeout(function(){var c=a.utility("getRadio_groupObjects_From_Page",
a.mobileweb.getCurrentPage().getName(),a("[id='"+h.getId()+"']"));a.each(c,function(c,b){b.hidden="false";a("[id='"+b.id+"']").css({visibility:"visible"})})},2E3):"DBTableViewList"===h.getViewType()||"RemoteTableViewList"===h.getViewType()?void 0!=b.children&&a.each(b.children,function(c,b){a.each(b.group,function(c,b){a.each(b.row,function(c,b){a.each(b.children,function(c,b){if("RemoteTableViewList"===h.getViewType()){if(c=b.id.split("-"),num=c.length,c=c[num-2],b.name==f.name||b.name==f.name+"-"+
c)a("#"+b.id).css({visibility:"visible"}),a("#"+b.id).css({display:"block"})}else b.name==f.name&&(a("#"+b.id).css({visibility:"visible"}),a("#"+b.id).css({display:"block"}))})})})}):"TileList"===h.getViewType()?void 0!=a("#"+h.getId())&&h.setVisibility(!0):"Camera"===h.getViewType()?(a("#"+h.getId()).css({visibility:"visible"}),void 0!=a("#"+h.getId()+"_canvas").get(0)?a("#"+h.getId()+"_canvas").css({visibility:"visible"}):h.getCameraErrorFlag()&&(h.drawCanvas(),a("#"+h.getId()+"_canvas").attr("width",
h.frame.getFrame().width*a.mobileweb.device.aspectratio),a("#"+h.getId()+"_canvas").attr("height",h.frame.getFrame().height*a.mobileweb.device.aspectratio),a("#"+h.getId()+"_canvas").attr("style","top:"+h.frame.getFrame().y*a.mobileweb.device.aspectratio+"px;left:"+h.frame.getFrame().x*a.mobileweb.device.aspectratio+"px; position:absolute"))):"DatePicker"===h.getViewType()?void 0!=a("#"+h.getId())&&h.setVisibility(!0):"Calendar"===h.getViewType()?void 0!=a("#"+h.getId())&&h.setVisibility(!0):"ComboBox"===
h.getViewType()?void 0!=a("#"+h.getId())&&h.setVisibility(!0):a("#"+h.getId()).css({visibility:"visible"});break;case "style":c=a.utility("tokenizeString",f.params.value,b,f);"Add"==c||"Detail"==c||"Info Light"==c||"Info Dark"==c?(h.setStyle(c),l(b,d,f,g,!0)):k();break;case "currentposition":a.GMapService("setValueForMap",h,c,f.params,f);break;case "scale":c=a.utility("tokenizeString",f.params.value,b,f);a.GMapService("SetScale",h,c,f.params);break;case "value":var m=c.split(",");"ToggleButton"===
h.getViewType()?h.setValue(c,"SV"):a("#"+h.getId()).find(" .pickerTable tr")&&(a("#"+h.getId()).find("table").each(function(c,b){var f=m[c];a(b).find("tr").each(function(c,b){a(b).removeClass("activeRow");void 0!=a(b).attr("val")&&a(b).attr("val")==f&&a(b).addClass("activeRow")})}),h.triggerEvent());break;case "state":"null"!=c&&c?(c=h.findItemId(c),void 0!=c?a("#"+c).trigger("tap"):l(b,d,f,g,!1)):h.resetValue();break;case "startindicator":"false"!=c&&(n=a.utility("getUiID_Object_From_Page",b.name,
h.getId()),"true"==n.start?k():(h.removeImage(),n.start="true",h.applyOverrides(),a("#"+h.getId()).css({visibility:"true"}),l(b,d,f,g,!0)));break;case "stopindicator":"false"!=c&&(n=a.utility("getUiID_Object_From_Page",b.name,h.getId()),"true"==n.start&&(n.stop="true",n.start="false",h.applyOverrides(),l(b,d,f,g,!0)));break;case "hidewhenstopped":a("#"+h.getId()).css({visibility:"hidden"});break;case "enable":"true"==c?(a("#"+h.getId()).css({opacity:"1",pointerEvents:"auto"}),a("#"+h.getId()).find("*").css({opacity:"1",
pointerEvents:"auto"})):(a("#"+h.getId()).css({opacity:"0.65",pointerEvents:"none"}),a("#"+h.getId()).find("*").css({opacity:"0.65",pointerEvents:"none"}));break;case "loadchart":"WebView"==r&&h.loadContent(c);break;case "keyboardtype":"TextField"!=r&&"NumericField"!=r&&"TextView"!=r||h.setKeyboardType(c);break;case "minrange":"Calendar"==r&&h.setMinRange(c);break;case "maxrange":"Calendar"==r&&h.setMaxRange(c);break;case "jpyears":"Calendar"==r&&h.setJPEra(c);break;case "type":"Calendar"==r&&h.setCalendarType(c);
break;case "secure":"TextField"!=r&&"NumericField"!=r||h.setSecure(c)}"currentposition"!==t&&"startindicator"!==t&&"stopindicator"!==t&&"style"!==t&&l(b,d,f,g,!0)}function k(){var c=a.mobileweb.getCurrentPage().getTitle();b.pageTitle&&b.pageTitle!=a.mobileweb.getCurrentPage().getTitle()&&(c=b.pageTitle);c="Action problem. Page: "+c+" , Description: Invalid Key Name passed for the given UI Object while applying "+f.method+" action.";void 0!=f.events&&void 0!=f.events.Error&&0!=f.events.Error.length||
a.errorhandler("alertBox",c,"");l(b,d,f,g,!1)}var r=h.getViewType(),t="";f.params.value=a.utility("checkGlobalVariable",f.params.value);-1!=f.params.key.indexOf("[")&&-1!=f.params.key.indexOf("]")?(t=f.params.key.replace("[","").replace("]",""),t=a.utility("CheckAndGetUIElementValue",a("[name='"+t+"']"),t,b).toLowerCase()):t=f.params.key.toLowerCase();if(""==t||void 0==t)k();else if(-1==jQuery.inArray(t,"text placeholder textalignment editable enable hidden value borderwidth style state scale ontext offtext currentposition startindicator stopindicator hidewhenstopped loadchart keyboardtype minrange maxrange jpyears type secure".split(" "))){console.log("SetValue action :--",
"'"+t+"' is not a valid key.");l(b,d,f,g,!1);return}var n=null;if(-1!=f.params.value.indexOf("[")&&-1!=f.params.value.indexOf("]")){var m=f.params.value.replace("[","");m=m.replace("]","");if(void 0!==g){tempTargetValue=f.params.value;for(var p=f.params.value.split("["),v=0;v<p.length;v++)if(-1!=p[v].toString().indexOf("]")){var u=p[v].indexOf("]"),q="["+p[v].substring(0,u)+"]";m=p[v].substring(0,u);"BaseView"==g.type||"ScrollView"==g.type?(a.each(g.children,function(a,c){c.name==m&&(n=tempTargetValue=
tempTargetValue.replace(q,c.value))}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,c){c.name==m&&(n=tempTargetValue=tempTargetValue.replace(q,c.value))}),a.each(g.toolbarbottom.children,function(a,c){c.name==m&&(n=tempTargetValue=tempTargetValue.replace(q,c.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,c){c.name==m&&(n=tempTargetValue=tempTargetValue.replace(q,c.value))}),void 0!=g.data&&void 0!=g.data.contents&&(g.data.contents.constructor==
Array?a.each(g.data.contents,function(c,b){a.each(b,function(a,c){a==m&&(tempTargetValue=tempTargetValue.replace(q,c))})}):a.each(g.data.contents,function(a,c){a==m&&(tempTargetValue=tempTargetValue.replace(q,c))})),null===n&&(n=tempTargetValue=tempTargetValue.replace(q,a.utility("tokenizeString",q,b,f)))):"RemoteTableViewList"===g.type||"DBTableViewList"===g.type?(void 0!=d.rownum?a.each(g.data.contents[d.rownum],function(a,c){a==m&&(tempTargetValue=tempTargetValue.replace(q,c))}):(u=d.getName().substring(d.getName().lastIndexOf("-")+
1,d.getName().length),a.each(g.data.contents[u],function(a,c){a==m&&(tempTargetValue=tempTargetValue.replace(q,c))})),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,c){c.name==m&&(n=tempTargetValue=tempTargetValue.replace(q,c.value))}),a.each(g.toolbarbottom.children,function(a,c){c.name==m&&(n=tempTargetValue=tempTargetValue.replace(q,c.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,c){c.name==m&&(n=tempTargetValue=tempTargetValue.replace(q,
c.value))})):(a.each(g.data.contents,function(c,b){a.each(b,function(a,c){a==m&&(tempTargetValue=tempTargetValue.replace(q,c))})}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,c){c.name==m&&(n=tempTargetValue=tempTargetValue.replace(q,c.value))}),a.each(g.toolbarbottom.children,function(a,c){c.name==m&&(n=tempTargetValue=tempTargetValue.replace(q,c.value))})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,c){c.name==m&&(n=tempTargetValue=
tempTargetValue.replace(q,c.value))}))}}else if("RemoteTableViewList"===b.type||"DBTableViewList"===b.type?(void 0!=d.rownum&&a.each(b.data.contents[d.rownum],function(a,c){}),void 0!=b.toolbartop&&void 0!=b.toolbarbottom&&(a.each(b.toolbartop.children,function(a,c){c.name==m&&(n=c.value)}),a.each(b.toolbarbottom.children,function(a,c){c.name==m&&(n=c.value)})),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,c){c.name==m&&(n=c.value)})):"BaseView"==b.type||"ScrollView"==b.type?n=a.utility("tokenizeString",
f.params.value,b,f):(a.each(b.data.contents,function(c,b){a.each(b,function(a,c){})}),void 0!=b.toolbartop&&void 0!=b.toolbarbottom&&(a.each(b.toolbartop.children,function(a,c){c.name==m&&(n=c.value)}),a.each(b.toolbarbottom.children,function(a,c){c.name==m&&(n=c.value)})),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,c){c.name==m&&(n=c.value)})),(void 0==n||""==n)&&0<a.utility("GetCSVData").length){var K=a.utility("GetCSVData");p=f.params.value.split("[");for(v=0;v<p.length;v++)if(-1!=
p[v].indexOf("]")){u=p[v].indexOf("]");q="["+p[v].substring(0,u)+"]";for(var w in K)if(-1!=p[v].substring(0,u).indexOf("-")){var D=p[v].substring(0,u).split("-");if(K[w].prefix===D[0])for(var F in K[w].rowData)D[1]===F&&(n=n+""+K[w].rowData[F].replace('"',"").replace('"',""))}}}}else n=a.utility("tokenizeString",f.params.value,b,f);if("NumericField"!=r||"text"!==t&&"placeholder"!==t||!isNaN(n)){p=a("#"+h.getId()).parents();var O=!1;a.each(p,function(a,c){if(-1!=c.id.indexOf("_toolbar")||-1!=c.id.indexOf("ToolBar"))O=
!0});v=parseInt(a("#"+h.getId()).css("z-index"));1E3<v||O||"DBTableViewList"!=b.type&&"RemoteTableViewList"!=b.type||(r=b.type,h=a.mobileweb.getCurrentPage());if("DBTableViewList"==b.type||"RemoteTableViewList"==b.type){a.each(p,function(a,c){-1!=c.id.indexOf("_toolbar")||c.id.indexOf("ToolBar")});var y=!1;null!=d&&void 0!=d&&(p=a("#"+d.getId()).parents(),a.each(p,function(a,c){if(-1!=c.id.indexOf("_toolbar")||-1!=c.id.indexOf("ToolBar"))y=!0}),v=parseInt(a("#"+d.getId()).css("z-index")),1E3<v&&(y=
!0));y||O||(r="row")}switch(r){case "Label":p=["text","textalignment","hidden","borderwidth"];-1!=jQuery.inArray(t,p)?c(n):k();break;case "TextField":case "NumericField":p="text placeholder textalignment editable borderwidth hidden keyboardtype secure".split(" ");-1!=jQuery.inArray(t,p)?c(n):k();break;case "RoundButton":case "CheckBox":case "TextButton":p=["text","textalignment","hidden","enable"];-1!=jQuery.inArray(t,p)?c(n):k();break;case "SystemButton":p=["style","hidden","enable"];-1!=jQuery.inArray(t,
p)?c(n):k();break;case "ToggleButton":p=["ontext","offtext","hidden","value","enable"];-1!=jQuery.inArray(t,p)?c(n):k();break;case "TextArea":p="text placeholder textalignment editable borderwidth hidden keyboardtype".split(" ");-1!=jQuery.inArray(t,p)?c(n):k();break;case "GoogleMap":p=["currentposition","scale","hidden"];-1!=jQuery.inArray(t,p)?c(n):k();break;case "Indicator":p=["startindicator","stopindicator","hidewhenstopped","hidden"];-1!=jQuery.inArray(t,p)?c(n):k();break;case "Image":p=["borderwidth",
"hidden"];-1!=jQuery.inArray(t,p)?c(n):k();break;case "Picker":p=["value","hidden","enable"];-1!=jQuery.inArray(t,p)?c(n):k();break;case "Segment":p=["state","hidden","enable"];-1!=jQuery.inArray(t,p)?c(n):k();break;case "WebView":p=["hidden","enable","loadchart"];-1!=jQuery.inArray(t,p)?c(n):k();break;case "ImageButton":case "SwitchBar":case "SearchBar":case "ProgressBar":case "ComboBox":case "Slider":case "DatePicker":case "VideoBox":case "SoundBox":case "TileList":case "Camera":p=["hidden","enable"];
-1!=jQuery.inArray(t,p)?c(n):k();break;case "Calendar":p="hidden enable minrange maxrange jpyears type".split(" ");-1!=jQuery.inArray(t,p)?c(n):k();break;case "Radio":p=["hidden"];-1!=jQuery.inArray(t,p)?c(n):k();break;case "DBTableViewList":case "RemoteTableViewList":p="text placeholder textalignment editable enable hidden value borderwidth style state scale ontext offtext currentposition startindicator stopindicator hidewhenstopped".split(" ");-1!=jQuery.inArray(t,p)?c(n):k();break;case "row":break;
default:k()}}else k()},t=function(){if(a.isEmptyObject(h))l(b,d,f,g,!1);else if("Indicator"===h.getViewType()||"ImageButton"===h.getViewType()||"GoogleMap"===h.getViewType())l(b,d,f,g,!1);else{var c=0;if(f.params.setProperties){for(var k in f.params.setProperties){if("font"==k&&f.params.setProperties[k])"RoundButton"==h.getViewType()?(a("#"+h.getId()+" .ui-btn-text").css("color",f.params.color),c++):"TextButton"==h.getViewType()||"ToggleButton"==h.getViewType()?(a("label[for="+h.getId()+"]").css("color",
f.params.color),c++):"Segment"==h.getViewType()?(a("#"+h.getId()+">tbody>tr>td").css("color",f.params.color),c++):"SearchBar"==h.getViewType()?(a("#"+h.getId()+">div >input").css("color",f.params.color),c++):"Image"!=h.getViewType()&&(a("#"+h.getId()).css("color",f.params.color),c++);else if("border"==k&&f.params.setProperties[k])"Label"==h.getViewType()?a("#"+h.getId()+"_p").css("border-color",f.params.color):"TextArea"==h.getViewType()?(a("#"+h.getId()).css("border-width","1px"),a("#"+h.getId()).css("border-color",
f.params.color)):"Segment"==h.getViewType()?a("#"+h.getId()+">tbody>tr>td").css("border-color",f.params.color):"SearchBar"==h.getViewType()?a("#"+h.getId()+">div").css("border-color",f.params.color):a("#"+h.getId()).css("border-color",f.params.color),c++;else if("background"==k&&f.params.setProperties[k])if("RoundButton"==h.getViewType())h.setBackgroundColor(f.params.color),c++;else if("ToggleButton"!=h.getViewType())if("Segment"==h.getViewType())a("#"+h.getId()+">tbody>tr>td").css("background",f.params.color),
c++;else if("Label"==h.getViewType()){a("#"+h.getId()+"_p").css("background-color",f.params.color);var r=f.params.color.substring(f.params.color.indexOf("(")+1,f.params.color.indexOf(")")).split(",");h.setBackgroundColor({red:r[0],blue:r[2],green:r[1],alpha:r[3]});a("#"+h.getId()).css({"text-shadow":"0px 0px "});c++}else"SearchBar"==h.getViewType()?(a("#"+h.getId()+">div").css("background-color",f.params.color),c++):"Image"!=h.getViewType()&&(a("#"+h.getId()).css("background",f.params.color),a("#"+
h.getId()).css({"text-shadow":"0px 0px "}),c++);a.utility("updateChildProperty",b,h.getName(),f.params.color,k+".color")}0!=c?l(b,d,f,g,!0):l(b,d,f,g,!1)}else a("#"+h.getId()).css("background",f.params.color),l(b,d,f,g,!0);var t=setInterval(function(){clearInterval(t);var c=a("#"+h.getId()+" .ui-btn-text");if(null!=c){var f=c.css("color");if(void 0!=f){f=f.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);c=parseInt(f[1]);var d=parseInt(f[2]);f=parseInt(f[3]);c={page_name:b.name,u_id:a("#"+h.getId()).attr("id"),
color:{red:c,green:d,blue:f,alpha:1}};a.utility("setSessionData",c,"colorObject")}}},1E3)}},m=function(){var c=0,k=0;-1!=f.params.x.indexOf("[")&&-1!=f.params.x.indexOf("]")&&-1!=f.params.y.indexOf("[")&&-1!=f.params.y.indexOf("]")?(c=parseInt(a.utility("tokenizeString",f.params.x,b,f)),k=parseInt(a.utility("tokenizeString",f.params.y,b,f))):-1!=f.params.x.indexOf("[")&&-1!=f.params.x.indexOf("]")?(c=parseInt(a.utility("tokenizeString",f.params.x,b,f)),k=parseInt(f.params.y)):-1!=f.params.y.indexOf("[")&&
-1!=f.params.y.indexOf("]")?(c=parseInt(f.params.x),k=parseInt(a.utility("tokenizeString",f.params.y,b,f))):(c=parseInt(f.params.x),k=parseInt(f.params.y));if(isNaN(parseInt(c))||isNaN(parseInt(k)))l(b,d,f,g,!1);else{var r=parseInt(a("#"+h.getId()).css("left")),t=parseInt(a("#"+h.getId()).css("top"));"Image"===h.getViewType()&&(r=parseInt(a("#"+h.getId()+"_divImg").css("left")),t=parseInt(a("#"+h.getId()+"_divImg").css("top")));c*=a.mobileweb.device.aspectWratio;c+=r;k*=a.mobileweb.device.aspectHratio;
k+=t;t=f.params.duration+"s";"Label"===h.getViewType()?(a("#"+h.getId()+"_p").css({left:c+"px",top:k+"px"}),a("#"+h.getId()).css({left:c+"px",top:k+"px"})):"Image"===h.getViewType()?(a("#"+h.getId()+"_divImg").css({left:c+"px",top:k+"px"}),a("#"+h.getId()).css({left:c+"px",top:k+"px"})):a("#"+h.getId()).css({left:c+"px",top:k+"px","transition-timing-function":"linear","transition-property":"left top","transition-duration":t});a.utility("updateChildProperty",b,h.getName(),c,"frame.x");a.utility("updateChildProperty",
b,h.getName(),k,"frame.y");k=1E3*parseInt(t.replace("s",""));var n=setInterval(function(){clearInterval(n);var c={top:a("#"+h.getId()).css("top"),left:a("#"+h.getId()).css("left")};c={page_name:b.name,u_id:a("#"+h.getId()).attr("id"),framedata:c};a.utility("setSessionData",c,"moveObject")},k);l(b,d,f,g,!0)}},p=function(){var c=h.getId();J++;var k=null;k="Label"==h.getViewType()?a("#"+h.getId()+"_p"):"Image"==h.getViewType()?a("#"+h.getId()+"_divImg"):a("#"+h.getId());var r=0;null!=a.utility("getSessionData",
"rotateObject",c)?(k=a.utility("getSessionData","rotateObject",c),rotateObj=a.parseJSON(k),a.mobileweb.getCurrentPage().getName()==rotateObj.page_name&&c==rotateObj.u_id&&(r=rotateObj.rotation)):(k=k.css("-webkit-transform")||k.css("-moz-transform")||k.css("-ms-transform")||k.css("-o-transform")||k.css("transform"),void 0!=k&&"none"!==k&&(k=k.split("(")[1].split(")")[0].split(","),r=Math.round(180/Math.PI*Math.atan2(k[1],k[0]))));k=parseInt(a.utility("tokenizeString",f.params.x,b,f));var t=parseInt(a.utility("tokenizeString",
f.params.y,b,f)),n=parseInt(a.utility("tokenizeString",f.params.degree,b,f));if(isNaN(parseInt(k))||isNaN(parseInt(t))||isNaN(parseInt(n)))l(b,d,f,g,!1);else{try{h.frame.getFrame(),parseInt(a("#"+h.getId()).css("left").replace("px","")),parseInt(a("#"+h.getId()).css("width").replace("px","")),parseInt(a("#"+h.getId()).css("top").replace("px","")),parseInt(a("#"+h.getId()).css("height").replace("px","")),a("#"+h.getId())}catch(X){console.log(X)}k=f.params.duration+"s";"Label"==h.getViewType()?a("#"+
h.getId()+"_p").animate({rotation:"+="+n},{step:function(c,b){a(this).css({transform:"rotate("+c+"deg)"})},duration:3E3},"linear"):"Image"==h.getViewType()?a("#"+h.getId()+"_divImg").animate({rotation:"+="+n},{step:function(c,b){a(this).css({transform:"rotate("+c+"deg)"})},duration:3E3},"linear"):a("#"+h.getId()).css({filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation="+n/100+")","-ms-transform":"rotate("+(parseInt(r)+parseInt(n))+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation="+
n/100+")","-moz-transform":"rotate("+(parseInt(r)+parseInt(n))+"deg)","-o-transform":"rotate("+n+"deg)",transform:"rotate("+(parseInt(r)+parseInt(n))+"deg)","transition-duration":k,"-webkit-transform":"rotate("+(parseInt(r)+parseInt(n))+"deg)"});k=1E3*parseInt(k.replace("s",""));var m=setInterval(function(){clearInterval(m);a.utility("setSessionData",{page_name:b.name,u_id:c,rotation:r+n},"rotateObject")},k)}},u=function(){if(!a.errorhandler("checkTargetUIObject",h,f.params,f))return l(b,d,f,g,!1),
k;var c=setInterval(function(){clearInterval(c);f.params.targetUI&&("RoundButton"==h.getViewType()||"TextButton"==h.getViewType()?a("#"+h.getId()+">div").focus():"Label"==h.getViewType()?a("#"+h.getId()+"_p").focus():a("#"+h.getId()).focus())},200)};return k}function h(a,b,f,d,h,g){var k=function(){window.setTimeout(function(){window.location=f.params.mail},1E3)};return{execute:function(){switch(f.method){case "CanSendEmail":navigator.onLine?g(a,b,f,d,!0):g(a,b,f,d,!1);break;case "OpenMessageEditor":k();
break;default:g(a,b,f,d,!1)}}}}function q(b,f,d,h,g,k){var l={execute:function(){if(!window.openDatabase)return a.utility("queryDatabase",!1),l;a.errorhandler("checkErrorForDB",g,d.params)||k(b,f,d,h,!1);switch(d.method){case "Select":m();break;case "LocalDBSelect":d.localDBSelect=!0;m();break;case "Insert":r();break;case "Update":p();break;case "NumRecords":c();break;case "Delete":t();break;case "DeleteAll":q();break;default:k(b,f,d,h,!1)}}},m=function(){a.utility("queryDatabase",!0);var c="";if(null!=
b&&("DBTableViewList"===b.type||"RemoteTableViewList"===b.type)){var g=b.data.contents.currentRow;if(isNaN(parseInt(g)))if(void 0!=f){if(void 0!=f.getId){var l=f.getId(),m=l;"Row"!=f.getViewType()&&(m=l.substr(0,l.lastIndexOf("-")));g=m.substr(m.lastIndexOf("-")+1,m.length)}isNaN(parseInt(g))&&(g=0)}else g=0;void 0!=g?void 0!=b.data.contents[g]?c=a.utility("formWhereCondition",a.utility("extractDataFromRecord",b.data.contents[g],d.params.where,!0)):void 0!=b.data.contents[0]&&void 0!=b.data.contents[0][g]&&
(c=a.utility("formWhereCondition",a.utility("extractDataFromRecord",b.data.contents[0][g],d.params.where,!0))):c=a.utility("formWhereCondition",d.params.where)}l=d.params.where;""!=c&&(d.params.where=c);var n=[];d.params.groupby&&b.children[0].accordion?(b.data.groupby=b.data.groupby.replace("[","").replace("]",""),n=["SELECT * FROM ",b.data.tablename,""!==d.params.where?[" WHERE ",a.utility("formWhereCondition",d.params.where,b)].join(""):"",void 0!==b.data.groupby&&""!==b.data.groupby?[" order by ",
b.data.groupby," ASC "].join(""):""]):n=["SELECT * FROM ",d.params.tablename,""!==d.params.where?[" WHERE ",a.utility("formWhereCondition",d.params.where,b)].join(""):"",void 0!==d.params.order&&""!==d.params.order?[" ORDER BY ",d.params.order].join(""):"",void 0!==d.params.limit&&""!==d.params.limit?[" LIMIT ",d.params.limit].join(""):"",void 0!==d.params.offset&&""!==d.params.offset?[" OFFSET ",d.params.offset].join(""):""];d.params.where=l;a.mobileweb.localdb.instance.transaction(function(c){c.executeSql(n.join(""),
[],function(c,n){for(var l=[],m=0;m<n.rows.length;m++){c={};for(key in n.rows.item(m))c[key]=n.rows.item(m)[key];l.push(c)}if(void 0!=d.callAnotherServiceFlag&&d.callAnotherServiceFlag)"SelectNewService"===d.callbackmethod?(n={page:b.name,events:d.events,fromTable:d.fromTable,fromDB:d.fromDB,toDB:d.toDB,table:d.params.tablename,service:"LocalDB",forceFlag:d.forceFlag,forceUpdate:d.forceUpdate,onSuccessEvents:d.onSuccessEvents},c={ret:"ACK",retdic:{code:"",recsize:l.length,rows:[]}},c.retdic.rows=
l,c.callbackdata=n,a.utility(d.callbackmethod,c,n)):"UploadDBRecords"===d.callbackmethod&&(n={page:b.name,events:d.events,fromDB:"localdb",ToTable:d.toparams.toTable,ToService:d.toparams.toService,table:d.params.tablename,forceFlag:d.toparams.forceFlag,forceUpdate:d.toparams.forceUpdate},n.events=d.events,c={ret:"ACK",retdic:{code:"",recsize:l.length,rows:[]}},c.retdic.rows=l,c.callbackdata=n,a.utility(d.callbackmethod,c,n));else if(void 0!=d.comboCallingMethod){var r=!1,p=JSON.parse(JSON.stringify(d.comboCallingMethod).replace(/"/g,
"").replace(/'/g,'"'));a.each(b.children,function(c,d){void 0!=p&&"comboBox"===p.uiobject.ui&&p.uiobject.id===d.id&&(r=!0,a.each(l,function(a,d){b.children[c].combo_options.optionsID[a]=d[p.uiobject.fieldname];for(var f=p.uiobject.displayText.split("["),n=p.uiobject.displayText,h=0;h<f.length;h++)if(-1!=f[h].toString().indexOf("]")){var g=f[h].indexOf("]"),k="["+f[h].substring(0,g)+"]";g=d[f[h].substring(0,g)];n=n.replace(k,g)}b.children[c].combo_options.optionsValue[a]=n}),b.comboBoxData[d.id]={isLoaded:!0})});
r||a.each(b.toolbartop.children,function(c,d){void 0!=p&&"comboBox"===p.uiobject.ui&&p.uiobject.id===d.id&&(r=!0,a.each(l,function(a,d){b.toolbartop.children[c].combo_options.optionsID[a]=d[p.uiobject.fieldname];for(var f=p.uiobject.displayText.split("["),n=p.uiobject.displayText,h=0;h<f.length;h++)if(-1!=f[h].indexOf("]")){var g=f[h].indexOf("]"),k="["+f[h].substring(0,g)+"]";g=d[f[h].substring(0,g)];n=n.replace(k,g)}b.toolbartop.children[c].combo_options.optionsValue[a]=n}),b.comboBoxData[d.id]=
{isLoaded:!0})});r||a.each(b.toolbarbottom.children,function(c,d){void 0!=p&&"comboBox"===p.uiobject.ui&&p.uiobject.id===d.id&&(r=!0,a.each(l,function(a,d){b.toolbarbottom.children[c].combo_options.optionsID[a]=d[p.uiobject.fieldname];for(var f=p.uiobject.displayText.split("["),n=p.uiobject.displayText,h=0;h<f.length;h++)if(-1!=f[h].indexOf("]")){var g=f[h].indexOf("]"),k="["+f[h].substring(0,g)+"]";g=d[f[h].substring(0,g)];n=n.replace(k,g)}b.toolbarbottom.children[c].combo_options.optionsValue[a]=
n}),b.comboBoxData[d.id]={isLoaded:!0})});r||a.each(b.toolbarleft.children,function(c,d){void 0!=p&&"comboBox"===p.uiobject.ui&&p.uiobject.id===d.id&&(r=!0,a.each(l,function(a,d){b.toolbarleft.children[c].combo_options.optionsID[a]=d[p.uiobject.fieldname];for(var f=p.uiobject.displayText.split("["),n=p.uiobject.displayText,h=0;h<f.length;h++)if(-1!=f[h].indexOf("]")){var g=f[h].indexOf("]"),k="["+f[h].substring(0,g)+"]";g=d[f[h].substring(0,g)];n=n.replace(k,g)}b.toolbarleft.children[c].combo_options.optionsValue[a]=
n}),b.comboBoxData[d.id]={isLoaded:!0})});a.utility("queryDatabase",!1)}else if(void 0!=d.spotdetails&&d.spotdetails)a.each(b.children,function(a,c){a=JSON.parse(JSON.stringify(d.childdef).replace(/"/g,"").replace(/'/g,'"'));"GoogleMap"===a.uiobject.ui&&a.uiobject.id===c.id&&void 0!=b.spotdetails[c.id]&&(b.spotdetails[c.id].data=l,b.spotdetails[c.id].isLoaded=!0)}),a.utility("queryDatabase",!1);else if(void 0!=d.addMarker&&d.addMarker)b.markerExistFlag=0!=l.length?!0:!1,a.utility("queryDatabase",
!1);else{n=a.utility("clone",b);if("DBTableView"===b.type)void 0!=b.reverse&&b.reverse&&jQuery.extend(l[0],b.data.contents[0]),void 0!=b.data.contents[0]?jQuery.extend(b.data.contents[0],l[0]):b.data.contents[0]=l[0];else if("DBTableViewList"===b.type||"RemoteTableViewList"===b.type){if(void 0!=b.reverse)if(b.reverse)if(0==n.data.contents.length)jQuery.extend(b.data.contents,l);else{for(m=0;m<l.length;m++)void 0!=b.data.contents[m]?jQuery.extend(b.data.contents[m],l[m]):b.data.contents[m]=l[m];0<
l.length&&(b.data.contents=b.data.contents.splice(0,l.length))}else if(0==n.data.contents.length)jQuery.extend(b.data.contents,l);else{if(void 0==d.localDBSelect||!d.localDBSelect)if(-1==b.parent.indexOf("Tab")&&void 0==b.data.pagedata&&(n=b.data.contents.splice(0,1),b.data.pagedata=a.utility("clone",n[0])),0<l.length)for(b.data.contents=[],m=0;m<l.length;m++)b.data.contents[m]=jQuery.extend({},b.data.pagedata,l[m]);else b.data.tablename==d.params.tablename&&(b.data.contents=[])}else if(0==n.data.contents.length)jQuery.extend(b.data.contents,
l);else if(void 0==d.localDBSelect||!d.localDBSelect)if(0<l.length)if(void 0!=b.data.pagedata)for(b.data.contents=[],m=0;m<l.length;m++)b.data.contents[m]=jQuery.extend({},b.data.pagedata,l[m]);else{if(b.data.tablename!==d.params.tablename)for(m=0;m<l.length;m++)b.data.contents[m]=jQuery.extend({},b.data.contents[m],l[m])}else b.data.tablename==d.params.tablename&&(b.data.contents=[]);"DBTableViewList"===b.type&&0<b.data.contents.length&&(b.data.contents.offset=d.params.offset,b.data.contents.limit=
d.params.limit)}else 0==b.data.contents.length?b.data.contents[0]=l[0]:void 0!=d.localDBSelect&&d.localDBSelect||jQuery.extend(b.data.contents[0],l[0]);b.data.updated=!0;a.utility("queryDatabase",!1);d.reloadStatus&&a.utility(d.reloadCallback,b,!0);if(void 0!=d.localDBSelect&&d.localDBSelect)if(0!=l.length)if(void 0!=d.events.DetectRecords&&0!=d.events.DetectRecords.length){var t=function(){var c=JSON.parse(JSON.stringify(b));if(c.data.contents.constructor==Object&&void 0===c.data.contents[0])jQuery.extend(c.data.contents,
l);else for(var n=0;n<c.data.contents.length;n++)jQuery.extend(c.data.contents[n],l[m]);(new a.actions(c,f,d.events.DetectRecords.slice(),h,function(a,c,b,d){m++;m<l.length?t():k(a,c,v,d,!0)})).execute()};m=0;var v=JSON.parse(JSON.stringify(d));t()}else if(void 0!=d.events.Success&&0!=d.events.Success.length){if(b.data.contents.constructor==Object)jQuery.extend(b.data.contents,l[0]);else if(void 0!=b.data.contents)if(void 0==g||isNaN(g))for(m=0;m<b.data.contents.length;m++)if(void 0!=b.data.contents[m])if(-1<
b.type.indexOf("tableview"))jQuery.extend(b.data.contents[m],l[0]);else{n=a.unique(Object.keys(b.data.contents[m]).concat(Object.keys(l[0])).sort());var x={};a.each(n,function(a,c){a=b.data.contents[m].hasOwnProperty(c)?b.data.contents[m][c]:"";var d=l[0].hasOwnProperty(c)?l[0][c]:"";if(""!=d&&" "!=d)x[c]=d;else if(""==d||" "==d)x[c]=""!=a?a:d});b.data.contents[m]=x}else b.data.contents[m]=l[0];else l[g]?jQuery.extend(b.data.contents[g],l[g]):jQuery.extend(b.data.contents[g],l[0]),b.data.contents.currentRow=
g;k(b,f,d,h,!0)}else k(b,f,d,h,"");else k(b,f,d,h,!1);else 0==l.length&&void 0!=d.events&&void 0!=d.events.Error?k(b,f,d,h,!1):k(b,f,d,h,!0)}},function(c,n){a.utility("handleLocalDBError",n.code,n.message);a.utility("queryDatabase",!1);k(b,f,d,h,!1)})})},c=function(){a.utility("queryDatabase",!0);void 0===d.params.tablename&&(d.params.tablename=d.params.table);a.mobileweb.localdb.instance.transaction(function(c){c.executeSql(["SELECT count(*) FROM ",d.params.tablename,""!==d.params.where?[" WHERE ",
a.utility("formWhereCondition",d.params.where)].join(""):"",void 0!==d.params.order&&""!==d.params.order?[" ORDER BY ",d.params.order].join(""):""].join(""),[],function(c,g){a.utility("queryDatabase",!1);a.mobileweb.__NUMREC__=1===g.rows.length?g.rows.item(0)["count(*)"]:g.rows.length;0==a("body").find("#__NUMREC__").length&&a("body").append("<input id='__NUMREC__' type='text' hidden='true'>"+a.mobileweb.__NUMREC__+"</input>");a("#__NUMREC__").val(a.mobileweb.__NUMREC__);k(b,f,d,h,!0)},function(c,
g){a.utility("queryDatabase",!1);k(b,f,d,h,!1)})})},r=function(){void 0!=d.addMarker&&d.addMarker||a.utility("showLoadingIndicator",!0);for(var c=[],g=[],l="",m=a.mobileweb.localdb.schema,n=0;n<m.length;n++)if(c=m[n],c.tablename==d.params.tablename){g=c;var r=g.fields;for(n=0;n<r.length;n++)if(r[n].pk&&r[n].autoinc){l=r[n].name;break}break}var p=!0;for(m=0;m<r.length;m++){var t=r[m].name,v;for(v in d.params.record)v==t&&(p=!1)}if(p)k(b,f,d,h,!1);else{var q=[],u=[],K=[];b&&(b.data.updated=!1);for(v in d.params.record)if(v!=
l){q.push("?");u.push(v);p=null!=d.params.record[v]?d.params.record[v].toString():d.params.record[v];if(null!=p&&(p=a.utility("checkGlobalVariable",p),-1!=p.indexOf("@@")&&(p=a.utility("tokenizeFunction",p,b)),-1!=p.indexOf("]"))){m=p.indexOf("]");p.lastIndexOf("]")!=m&&(m=p.lastIndexOf("]"));var w="["+p.substring(1,m)+"]",D="";if("DBTableViewList"===b.type||"RemoteTableViewList"===b.type){rowNum=b.data.contents.currentRow;if(isNaN(parseInt(rowNum)))if(void 0!=f){if(void 0!=f.getId){var O=t=f.getId();
"Row"!=f.getViewType()&&(O=t.substr(0,t.lastIndexOf("-")));rowNum=O.substr(O.lastIndexOf("-")+1,O.length)}isNaN(parseInt(rowNum))&&(rowNum=0)}else rowNum=0;void 0!=rowNum&&(D=void 0!=b.data.contents[rowNum]?a.utility("extractDataFromRecord",b.data.contents[rowNum],"["+p.substring(1,m)+"]",!0):a.utility("extractDataFromRecord",b.data.contents[0][rowNum],"["+p.substring(1,m)+"]",!0));-1!=D.indexOf("[")&&(D=a.utility("tokenizeString","["+p.substring(1,m)+"]",b,d))}else D=a.utility("tokenizeString","["+
p.substring(1,m)+"]",b,d);p=p.replace(w,D)}t=!0;if(""==p)for(r=g.fields,n=0;n<r.length;n++)v==r[n].name&&("INTEGER"==r[n].type||"REAL"==r[n].type?p=void 0!=r[n].defaultValue?r[n].defaultValue:0:"TEXT"!=r[n].type&&(p=void 0!=r[n].defaultValue?r[n].defaultValue:""));else try{for(r=g.fields,n=0;n<r.length;n++)if(v==r[n].name)if("INTEGER"==r[n].type||"REAL"==r[n].type)p=eval(p);else if("TIMESTAMP"==r[n].type||"DATETIME"==r[n].type)t=a.utility("validateDate",p);else if("DATE"==c.fields[n].type)t=a.utility("validateOnlyDate",
p);else if("TIME"==c.fields[n].type)t=a.utility("validateOnlyTime",p);else if("BOOLEAN"==c.fields[n].type)t=a.utility("validateBooleanFormat",p);else{do-1!=p.indexOf("]")&&(m=p.indexOf("]"),p.lastIndexOf("]")!=m&&(m=p.lastIndexOf("]")),n=p.indexOf("[")+1,w="["+p.substring(n,m)+"]",D=a.utility("tokenizeString","["+p.substring(n,m)+"]",b,d),p=p.replace(w,D));while(-1!=p.indexOf("]"));t=!0}}catch(ra){t=!1}if(t)"string"!=typeof p||-1==p.indexOf("date('now')")&&-1==p.indexOf("datetime('now')")||(t=new Date,
"date('now')"==p?p=t.toISOString().slice(0,10):"datetime('now')"==p&&(p=t.toISOString().slice(0,19).replace("T"," "))),K.push(p);else return k(b,f,d,h,!1)}a.mobileweb.localdb.instance.transaction(function(c){c.executeSql(["INSERT INTO ",d.params.tablename," (",u.join(),") VALUES (",q.join(),")"].join(""),K,function(c,n){null!=b&&(b.data.updated=!1,a.utility("showLoadingIndicator",!1),k(b,f,d,h,!0))},function(c,n){a.utility("handleLocalDBError",n.code,n.message);a.utility("showLoadingIndicator",!1);
k(b,f,d,h,!1)})})}},p=function(){for(var c=[],g={},l="",m=[],n=a.mobileweb.localdb.schema,r=0;r<n.length;r++)n[r].tablename==d.params.tablename&&(m=n[r]);if(0==m.length)"appVersion"==d.params.tablename?(l=d.params.where,a.mobileweb.localdb.instance.transaction(function(a){a.executeSql(["UPDATE ",d.params.tablename," SET appVersion =",d.params.record.appVersion,""!=l?" WHERE "+l:""].join(""),[],function(a,c){},function(a,c){})})):k(b,f,d,h,!1);else{if((null==b||"BaseView"==b.type||"ScrollView"==b.type||
""!==d.params.where)&&null!=b){var p=!0;if("DBTableViewList"===b.type||"RemoteTableViewList"==b.type){n=b.data.contents.currentRow;if(isNaN(parseInt(n))){if(void 0!=f){if(void 0!=f.getId){var t=f.getId(),v=t;"Row"!=f.getViewType()&&(v=t.substr(0,t.lastIndexOf("-")));n=v.substr(v.lastIndexOf("-")+1,v.length)}isNaN(parseInt(n))&&(n=0)}else n=0;b.data.contents.currentRow=n}void 0!=n&&(void 0!=b.data.contents[n]?l=a.utility("formWhereCondition",a.utility("extractDataFromRecord",b.data.contents[n],d.params.where,
p)):void 0!=b.data.contents[0]&&void 0!=b.data.contents[0][n]&&(l=a.utility("formWhereCondition",a.utility("extractDataFromRecord",b.data.contents[0][n],d.params.where,p))))}else l=a.utility("formWhereCondition",d.params.where,b)}for(var q in d.params.record){n=null!=d.params.record[q]?d.params.record[q].toString():d.params.record[q];null!=n&&(-1!=n.indexOf("@@")||-1!=n.indexOf(/@@/gi)?n=a.utility("tokenizeString",n,b,d):(null==b||"DBTableViewList"!==b.type&&"RemoteTableViewList"!=b.type||(t=0,void 0!=
f&&(void 0!=f.rownum?t=f.rownum:void 0!=f.getId&&(t=f.getId(),v=t.substr(0,t.lastIndexOf("-")),t=v.substr(v.lastIndexOf("-")+1,v.length))),n=a.utility("extractDataFromRecord",b.data.contents[t],n,p)),-1!=n.toString().indexOf("]")?(v=n.indexOf("]"),n.lastIndexOf("]")!=v&&(v=n.lastIndexOf("]")),t="["+n.substring(1,v)+"]",v=a.utility("tokenizeString","["+n.substring(1,v)+"]",b,d),n=n.replace(t,v)):(v=a.utility("tokenizeString",n,b,d),n=n.replace(n,v))));t=!0;if(""==n){var u=m.fields;for(r=0;r<u.length;r++)q==
u[r].name&&("INTEGER"==u[r].type||"REAL"==u[r].type?n=void 0!=u[r].defaultValue?u[r].defaultValue:0:"TEXT"!=u[r].type&&(n=void 0!=u[r].defaultValue?u[r].defaultValue:""))}else{try{for(u=m.fields,r=0;r<u.length;r++)if(q==u[r].name)if("INTEGER"==u[r].type||"REAL"==u[r].type){if(-1!=n.indexOf("@@")||-1!=n.indexOf(/@@/gi))n=n.replace("@@","$.");n=eval(n)}else"TIMESTAMP"==u[r].type||"DATETIME"==u[r].type?t=a.utility("validateDate",n):"DATE"==m.fields[r].type?t=a.utility("validateOnlyDate",n):"TIME"==m.fields[r].type&&
(t=a.utility("validateOnlyTime",n))}catch(qa){t=!1}if(!t)return k(b,f,d,h,!1)}null!=b&&(q=a.utility("extractDataFromRecord",b.data.contents[0],q));c.push([q," = '",n,"'"].join(""));g[q]=n}a.mobileweb.localdb.instance.transaction(function(n){n.executeSql(["UPDATE ",d.params.tablename," SET ",c.join(),""!=l?" WHERE "+l:""].join(""),[],function(c,n){0!=n.rowsAffected?null!=b&&(b.data.updated=!1,a.utility("log","[INFO] Record Updated."),d.flag||a.utility("updatePageData",b,g),k(b,f,d,h,!0)):k(b,f,d,h,
!1)},function(a,c){k(b,f,d,h,!1)})})}},t=function(){var c="";if("BaseView"==b.type||"ScrollView"==b.type||""!==d.params.where)if(null!=b)if("DBTableViewList"===b.type||"RemoteTableViewList"==b.type){var g=b.data.contents.currentRow;if(isNaN(parseInt(g)))if(void 0!=f){if(void 0!=f.getId()){var l=g=f.getId();"Row"!=f.getViewType()&&(l=g.substr(0,g.lastIndexOf("-")));g=l.substr(l.lastIndexOf("-")+1,l.length)}isNaN(parseInt(g))&&(g=0)}else g=0;void 0!=g&&(void 0!=b.data.contents[g]?c=a.utility("formWhereCondition",
a.utility("extractDataFromRecord",b.data.contents[g],d.params.where,!0)):void 0!=b.data.contents[0]&&void 0!=b.data.contents[0][g]&&(c=a.utility("formWhereCondition",a.utility("extractDataFromRecord",b.data.contents[0][g],d.params.where,!0))))}else c=a.utility("formWhereCondition",a.utility("extractDataFromRecord",b.data.contents[0],a.utility("tokenizeString",d.params.where,b,d),!0));else c=a.utility("formWhereCondition",d.params.where,b);a.mobileweb.localdb.instance.transaction(function(g){g.executeSql(["DELETE FROM ",
d.params.tablename,""!=c?" WHERE "+c:""].join(""),[],function(c,g){b.data.updated=!1;a.utility("log","[INFO] Record Deleted");0!=g.rowsAffected?k(b,f,d,h,!0):k(b,f,d,h,!1)},function(a,c){k(b,f,d,h,!1)})})},q=function(){a.mobileweb.localdb.instance.transaction(function(c){c.executeSql(["DROP TABLE ",d.params.tablename].join(""),[],function(c,g){b.data.updated=!1;a.each(a.mobileweb.localdb.schema,function(c,b){b.tablename===d.params.tablename&&a.utility("createTable",a.mobileweb.localdb.instance,b)});
k(b,f,d,h,!0)},function(a,c){k(b,f,d,h,!1)})})};return l}function p(b,d,f,h,g,k){g={};var l='""';f.events&&(l=JSON.stringify(f.events));l=l.replace(/[+]/g,"%2B");l=l.replace(/[-]/g,"%2D");l=l.replace(/[&]/g,"%26");l=l.replace(/[%]/g,"%25");"SynchronizeDB"!=f.method&&(l="NOW REPLACED");var m=[],c=a.utility("clone",f.params);a.utility("initCall");if("Register"===f.method||"Login"===f.method)setTimeout(function(){m=[a.utility("getCommServerDomain"),"llcomm?llcommand=","[command]","&jsonp=","[jsonp]",
a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"]},500);else{if("GeneralLogin"===f.method)setTimeout(function(){m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","events":"',l,'","table":"',
f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"]},500);else if("Mobilous"===f.params.servicename){if("Select"===f.method||"RemoteNumRecords"===f.method){var p=void 0==f.callingMethod||""==f.callingMethod?"direct":f.callingMethod;m=void 0!=f.callback?"changeCondition"===f.callback?[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),
'&callbackdata={"ver":"2","page":"',f.targetPage,'","callingMethod":"',p,'","offset":"',f.params.offset,'","events":"',l,'","table":"',f.params.table,'","callback":"',f.pageCallback,'","parentPage":"',f.parentPage,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"]:"createRemoteTileList"===f.callback?[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),
'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',p,'","offset":"',f.params.offset,'","events":"',l,'","table":"',f.params.table,'","callback":"',f.callback,'","parentPage":"',f.parentPage,'","callbackUI":"',f.callbackUI,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"]:[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',
b.name,'","callingMethod":"',p,'","offset":"',f.params.offset,'","events":"',l,'","table":"',f.params.table,'","callback":"',f.callback,'","parentPage":"',f.parentPage,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"]:"RemoteNumRecords"===f.method?[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',
"RemoteNumRecords",'","offset":"',f.params.offset,'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"]:[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',p,'","offset":"',f.params.offset,'","events":"',l,'","table":"',f.params.table,'"}',
"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"];void 0!=f.comboBox&&f.comboBox&&(m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',p,'","offset":"',f.params.offset,'","events":"',l,'","table":"',f.params.table,'","comboBox":"',f.comboBox,'"}',"&cache=",Math.random(),"&dataset=","[params]",
"&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"])}else m="Insert"===f.method||"Update"===f.method||"Delete"===f.method?[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',p,'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,
"&os=mw"]:[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"];"RemoteSelect"===f.method&&(p=void 0==f.callingMethod||""==f.callingMethod?"direct":f.callingMethod,m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=",
"[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',p,'","events":"',l,'","table":"',f.params.tablename,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"]);"SynchronizeDB"===f.method&&(void 0==f.toparams.forceUpdate&&(f.toparams.forceUpdate="false"),p=void 0==f.callingMethod||""==f.callingMethod?"direct":f.callingMethod,m=[a.utility("getCommServerDomain"),
"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',p,'","fromDB":"',"comdb",'","events":',l,',"table":"',a.utility("tokenizeString",f.params.table,b,f),'","ToService":"',f.toparams.toService,'","ToTable":"',a.utility("tokenizeString",f.toparams.toTable,b,f),'","forceFlag":"',f.toparams.forceFlag,'","forceUpdate":"',f.toparams.forceUpdate,'"}',"&cache=",Math.random(),"&dataset=","[params]",
"&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"]);"UploadRecordsToRemoteDB"===f.method&&(m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',p,'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"]);"SelectNewService"===
f.method&&(p=void 0==f.callingMethod||""==f.callingMethod?"direct":f.callingMethod,m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","fromTable":"',f.fromTable,'","fromDB":"',f.fromDB,'","toDB":"',f.toDB,'","events":"',l,'","table":"',f.params.table,'","forceFlag":"',f.forceFlag,'","forceUpdate":"',f.forceUpdate,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",
a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"])}else void 0!=f.params.servicename&&(m[0]=a.utility("getCommServerDomainForExternalService")+"?servicename="+f.params.servicename);c.database=void 0!=a.mobileweb.release&&a.mobileweb.release?"db_"+a.mobileweb.pid+"_release":"db_"+a.mobileweb.pid}for(var v in c)c[v]=a.utility("clone",c[v]);if(c.rec){p={};for(v in c.rec){var r=a.utility("tokenizeString",v,b,f);p[r]=c.rec[v]}c.rec=p;a.utility("isEmpty",c.rec)||void 0==f.flag&&("DBTableViewList"===
b.type||"RemoteTableViewList"===b.type?null==d&&void 0==d||void 0==d.rownum?a.utility("replaceRecordWithPagedata",c.rec,b.data.contents[0],b):a.utility("replaceRecordWithPagedata",c.rec,b.data.contents[d.rownum],b):a.utility("replaceRecordWithPagedata",c.rec,b.data.contents[0],b))}g.execute=function(){switch(f.method){case "Select":x();break;case "RemoteSelect":q();break;case "Update":u();break;case "Delete":w();break;case "Insert":t();break;case "SynchronizeDB":n();break;case "SelectNewService":M();
break;case "RemoteNumRecords":c.where=a.utility("formWhereCondition",f.params.remotewhere,b);x();break;case "Register":setTimeout(function(){F()},500);break;case "Login":setTimeout(function(){X()},500);break;case "GeneralLogin":var g=document.createElement("script");g.type="text/javascript";"md5"===f.params.encrypt?(g.src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/md5.js",a("head").append(g)):"sha256"===f.params.encrypt?(g.src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/sha256.js",
a("head").append(g)):"sha512"===f.params.encrypt&&(g.src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/sha512.js",a("head").append(g));g.onload=setTimeout(function(){U()},500);break;case "Upload":Upload();break;case "ChangeCondition":setTimeout(function(){(new a.actions(b,null,[{method:"Select",category:"ComAction",callingMethod:f.method,params:{servicename:b.data.servicename,table:b.data.tablename,where:a.utility("tokenizeString",f.params.wherecond,b),order:a.utility("tokenizeString",
f.params.ordercond,b),limit:25,offset:0,fields:""}}])).execute()},500);break;case "UploadRecordsToRemoteDB":y();break;default:k(b,d,f,h,!1)}};var t=function(){var n=[],g="",p=a.mobileweb.comdb.schema;if(void 0!=f.flag&&f.flag)b.data.contents[0]=a.utility("savePageData",b.children,b.data.contents[0]);else{if(0==p.length){k(b,d,f,h,!1);return}for(var v=0;v<p.length;v++)if(g=p[v],g.tablename==f.params.table){n=g;for(var r=n.fields,x=0;x<r.length;x++)if(r[x].pk&&r[x].autoinc){g=r[x].name;for(var t in c.rec)t==
g&&""!=g&&delete c.rec[t]}}b.data.contents[0]=a.utility("savePageData",b.children,b.data.contents[0]);for(t in c.rec)if(""==c.rec[t])for(r=n.fields,v=0;v<r.length;v++)t==r[v].name&&"TEXT"!=r[v].type&&delete c.rec[t]}switch(b.type){case "BaseView":case "ScrollView":void 0!=f.flag&&f.flag||a.utility("replaceRecordWithPagedata",c.rec,b.data.contents[0],b)}"Mobilous"===f.params.servicename?(m[2]="remoteinsert",m[4]=void 0!=f.flag&&f.flag?"RemoteProcessContinue":"RemoteProcess",m[13]="SplitView"===b.parentType?
"SplitView":"",m[18]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[+]/g,"%2B").replace(/[#]/g,"%23"),n=m.join(""),n=n.substring(n.indexOf("?")+1),void 0!=n&&a.utility("sendPOSTRequest",n,"Insert")):(n=a.mobileweb.baseurl+"/mobileweb/mobile/extsvc?uri="+m[0],"8181"==a.utility("getServerPort")&&(n=m[0]),a.getJSON(n).always(function(d){var n=setInterval(function(){if(""!=a.utility("appendDeviceInfo")){clearInterval(n);var d=void 0==f.callingMethod||""==f.callingMethod?"direct":
f.callingMethod;m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',d,'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"];m[2]="remoteinsert";m[4]=void 0!=f.flag&&f.flag?"RemoteProcessContinue":"RemoteProcess";m[13]="SplitView"===b.parentType?
"SplitView":"";m[18]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[+]/g,"%2B").replace(/[;]/g,"%3B").replace(/[#]/g,"%23");d=m.join("");d=d.substring(d.indexOf("?")+1);void 0!=d&&a.utility("sendPOSTRequest",d,"Insert")}},2E3)}).fail(function(a){console.log("---- Fail : External Plugin Authentication ----")}));var q=setInterval(function(){a.utility("isBusy")||""==a.utility("getComActionStatus")||"Success"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||
"Error"!==a.utility("getComActionStatus")?f.flag&&!a.utility("isBusy")&&""!=a.utility("getComActionStatus")&&"SynchSuccess"===a.utility("getComActionStatus")&&(clearInterval(q),k(b,d,f,h,!0)):(clearInterval(q),k(b,d,f,h,!1)):(clearInterval(q),k(b,d,f,h,!0))},100)},x=function(){a.utility("queryDatabase",!0);if("Mobilous"===f.params.servicename)if(""!==c.where&&void 0!=c.where&&(c.where=a.utility("tokenizeString",c.where,b,f)),m.join(""),void 0!=f.callback){m[2]="remoteselect";m[4]="RemoteSelect";"createRemoteTileList"==
f.callback?m[26]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,"%3B").replace(/[#]/g,"%23"):m[24]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,"%3B").replace(/[#]/g,"%23");var n=m.join("");n=n.substring(n.indexOf("?")+1);void 0!=n&&a.utility("sendPOSTRequest",n,"Select")}else void 0!=f.comboBox&&f.comboBox?(m[2]="remoteselect",m[4]="RemoteSelect",m[22]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[+]/g,"%2B").replace(/[#]/g,"%23"),
n=m.join(""),n=n.substring(n.indexOf("?")+1),void 0!=n&&a.utility("sendPOSTRequest",n,"Select"),a("body").everyTime(100,function(){a.utility("isBusy")||""==a.utility("getComActionStatus")||"Success"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||"Error"!==a.utility("getComActionStatus")||(a("body").stopTime(),k(b,d,f,h,!1)):(a("body").stopTime(),k(b,d,f,h,!0))})):(m[2]="RemoteNumRecords"==f.method||"RemoteNumRecords"==f.callingMethod?"numrec":"remoteselect",
m[4]="RemoteSelect",f.params.pageNumRecords&&(m[4]="PageNumRecords"),m[20]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[+]/g,"%2B").replace(/[#]/g,"%23"),n=m.join(""),n=n.substring(n.indexOf("?")+1),void 0!=n&&a.utility("sendPOSTRequest",n,"Select"));else n=a.mobileweb.baseurl+"/mobileweb/mobile/extsvc?uri="+m[0],"8181"==a.utility("getServerPort")&&(n=m[0]),a.getJSON(n).always(function(d){var n=setInterval(function(){if(""!=a.utility("appendDeviceInfo")){clearInterval(n);var d=void 0==f.callingMethod||
""==f.callingMethod?"direct":f.callingMethod;"RemoteNumRecords"==f.method&&(d="RemoteNumRecords");"NOW REPLACED"===l?void 0!=f.comboBox&&f.comboBox?(m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',d,'","events":"',l,'","table":"',f.params.table,'","comboBox":"',f.comboBox,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,
"&version=",a.mobileweb.version,"&os=mw"],m[2]="remoteselect",m[4]="RemoteSelect",m[20]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,"%3B").replace(/[#]/g,"%23")):(void 0!=f.callback&&"createRemoteTileList"===f.callback?(m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',d,'","offset":"',f.params.offset,'","events":"',l,
'","table":"',f.params.table,'","callback":"',f.callback,'","parentPage":"',f.parentPage,'","callbackUI":"',f.callbackUI,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"],m[26]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,"%3B").replace(/[#]/g,"%23")):(m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',
b.name,'","callingMethod":"',d,'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"],m[18]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,"%3B").replace(/[#]/g,"%23")),m[2]="remoteselect",m[4]="RemoteSelect"):(m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',
b.name,'","callingMethod":"',d,'","events":',l,',"table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"],m[2]="remoteselect",m[4]="RemoteSelect",m[18]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,"%3B").replace(/[#]/g,"%23"));d=m.join("");d=d.substring(d.indexOf("?")+1);void 0!=d&&a.utility("sendPOSTRequest",d,"Select")}},2E3)}).fail(function(a){console.log("---- Fail : External Plugin Authentication ----")});
var g=void 0;void 0!=f.comboBox&&f.comboBox&&(g=JSON.parse(JSON.stringify(f.callingMethod).replace(/"/g,"").replace(/'/g,'"')),void 0!=a.utility("getComboBoxDataLoadingStatus")[g.uiobject.id]&&a.utility("setComboBoxDataLoadingStatus",g.uiobject.id,!1));var p=setInterval(function(){if(!a.utility("isBusy")&&""!=a.utility("getComActionStatus")&&"Success"===a.utility("getComActionStatus"))f.reloadStatus?b.data.contents.reload&&(clearInterval(p),a.utility(f.reloadCallback,b,!0),b.data.contents.reload=
!1,a.utility("setComActionStatus","")):"RemoteNumRecords"==f.method?"Success"===a.utility("getRemoteNumStatus")&&(clearInterval(p),a.utility("setRemoteNumStatus",""),k(b,d,f,h,!0)):(clearInterval(p),k(b,d,f,h,!0));else if(!a.utility("isBusy")&&""!=a.utility("getComActionStatus")&&"Error"===a.utility("getComActionStatus"))clearInterval(p),k(b,d,f,h,!1);else if(void 0!=g&&void 0!=a.utility("getComboBoxDataLoadingStatus")[g.uiobject.id]&&a.utility("getComboBoxDataLoadingStatus")[g.uiobject.id].loadingStatus){clearInterval(p);
var c=a.utility("getComboBoxDataLoadingStatus")[g.uiobject.id].data,n=!1;a.each(b.children,function(f,d){"comboBox"===g.uiobject.ui&&g.uiobject.id===d.id&&(n=!0,a.each(c,function(a,c){b.children[f].combo_options.optionsID[a]=c[g.uiobject.fieldname];for(var d=g.uiobject.displayText.split("["),n=g.uiobject.displayText,h=0;h<d.length;h++)if(-1!=d[h].indexOf("]")){var k=d[h].indexOf("]"),l="["+d[h].substring(0,k)+"]";k=c[d[h].substring(0,k)];n=n.replace(l,k)}b.children[f].combo_options.optionsValue[a]=
n}),b.comboBoxData[d.id]={isLoaded:!0})});n||a.each(b.toolbartop.children,function(f,d){"comboBox"===g.uiobject.ui&&g.uiobject.id===d.id&&(n=!0,a.each(c,function(a,c){b.toolbartop.children[f].combo_options.optionsID[a]=c[g.uiobject.fieldname];for(var d=g.uiobject.displayText.split("["),n=g.uiobject.displayText,h=0;h<d.length;h++)if(-1!=d[h].indexOf("]")){var k=d[h].indexOf("]"),l="["+d[h].substring(0,k)+"]";k=c[d[h].substring(0,k)];n=n.replace(l,k)}b.toolbartop.children[f].combo_options.optionsValue[a]=
n}),b.comboBoxData[d.id]={isLoaded:!0})});n||a.each(b.toolbarbottom.children,function(f,d){"comboBox"===g.uiobject.ui&&g.uiobject.id===d.id&&(n=!0,a.each(c,function(a,c){b.toolbarbottom.children[f].combo_options.optionsID[a]=c[g.uiobject.fieldname];for(var d=g.uiobject.displayText.split("["),n=g.uiobject.displayText,h=0;h<d.length;h++)if(-1!=d[h].indexOf("]")){var k=d[h].indexOf("]"),l="["+d[h].substring(0,k)+"]";k=c[d[h].substring(0,k)];n=n.replace(l,k)}b.toolbarbottom.children[f].combo_options.optionsValue[a]=
n}),b.comboBoxData[d.id]={isLoaded:!0})});n||a.each(b.toolbarleft.children,function(f,d){"comboBox"===g.uiobject.ui&&g.uiobject.id===d.id&&(n=!0,a.each(c,function(a,c){b.toolbarleft.children[f].combo_options.optionsID[a]=c[g.uiobject.fieldname];for(var d=g.uiobject.displayText.split("["),n=g.uiobject.displayText,h=0;h<d.length;h++)if(-1!=d[h].indexOf("]")){var k=d[h].indexOf("]"),l="["+d[h].substring(0,k)+"]";k=c[d[h].substring(0,k)];n=n.replace(l,k)}b.toolbarleft.children[f].combo_options.optionsValue[a]=
n}),b.comboBoxData[d.id]={isLoaded:!0})})}},200)},q=function(){if(void 0==f.params.servicename)(new a.actions(b,null,[{method:"Select",category:"DBAction",params:{tablename:f.params.tablename,where:a.utility("tokenizeString",f.params.where,b,f),order:a.utility("tokenizeString",f.params.order,b,f),columns:""},events:f.events}])).execute();else if("Mobilous"===f.params.servicename){a.utility("queryDatabase",!0);var c={};if("RemoteTableViewList"===b.type||"DBTableViewList"===b.type)if(null!=d||void 0!=
d){var n=void 0!=d.rownum?d.rownum:d.getName().substring(d.getName().lastIndexOf("-")+1,d.getName().length);for(var g in f.params)if("table"==g)c.table=f.params[g];else if("where"==g)if(isNaN(parseInt(n)))c[g]=a.utility("tokenizeString",f.params[g],b,f);else if("RemoteTableViewList"===b.type||"DBTableViewList"===b.type){for(var p=f.params[g].toString().split("["),v=0;v<p.length;v++)if(-1!=p[v].indexOf("]")){var r=p[v].indexOf("]"),x="["+p[v].substring(0,r)+"]",t="";t=void 0!=b.data.contents[n][p[v].substring(0,
r)]?b.data.contents[n][p[v].substring(0,r)]:a.utility("CheckAndGetUIElementValue",a("[name='"+p[v].substring(0,r)+"-"+n+"']"),p[v].substring(0,r)+"-"+n,b);f.params[g]=f.params[g].replace(x,t)}c[g]=f.params[g]}else f.params[g]=f.params[g].toString().replace(/]/gi,"-"+n+"]"),c[g]=a.utility("tokenizeString",f.params[g]+"-"+n,b,f);else c[g]=f.params[g]}else for(g in f.params)"table"==g?c.table=f.params[g]:c[g]=a.utility("tokenizeString",f.params[g],b,f);else for(g in f.params)"table"==g?c.table=f.params[g]:
c[g]=a.utility("tokenizeString",f.params[g],b,f);c.database=void 0!=a.mobileweb.release&&a.mobileweb.release?"db_"+a.mobileweb.pid+"_release":"db_"+a.mobileweb.pid;m[2]="remoteselect";m[4]="RemoteSelect";m[18]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[+]/g,"%2B").replace(/[;]/g,"%3B").replace(/[#]/g,"%23");g=m.join("");g=g.substring(g.indexOf("?")+1);void 0!=g&&a.utility("sendPOSTRequest",g,"RemoteSelect")}else{a.utility("queryDatabase",!0);c={};if("RemoteTableViewList"===
b.type||"DBTableViewList"===b.type)if(null==d&&void 0==d||void 0==d.rownum)for(g in f.params)"table"==g?c.table=f.params[g]:c[g]=a.utility("tokenizeString",f.params[g],b,f);else for(g in f.params)if("table"==g)c.table=f.params[g];else if("where"==g)if("RemoteTableViewList"===b.type||"DBTableViewList"===b.type){p=f.params[g].toString().split("[");for(v=0;v<p.length;v++)-1!=p[v].toString().indexOf("]")&&(r=p[v].toString().indexOf("]"),x="["+p[v].substring(0,r)+"]",t="",t=void 0!=b.data.contents[d.rownum][p[v].substring(0,
r)]?b.data.contents[d.rownum][p[v].substring(0,r)]:0<a("[name='"+p[v]+"-"+n+"']").length?a.utility("CheckAndGetUIElementValue",a("[name='"+p[v].substring(0,r)+"-"+n+"']"),p[v].substring(0,r)+"-"+n,b):a.utility("CheckAndGetUIElementValue",a("[name='"+p[v].substring(0,r)+"']"),p[v].substring(0,r),b),f.params[g]=f.params[g].replace(x,t));c[g]=f.params[g]}else f.params[g]=f.params[g].toString().replace(/]/gi,"-"+d.rownum+"]"),c[g]=a.utility("tokenizeString",f.params[g]+"-"+d.rownum,b,f);else c[g]=f.params[g];
else for(g in f.params)"table"==g?c.table=f.params[g]:c[g]=a.utility("tokenizeString",f.params[g],b,f);g=a.mobileweb.baseurl+"/mobileweb/mobile/extsvc?uri="+m[0];"8181"==a.utility("getServerPort")&&(g=m[0]);a.getJSON(g,function(n){var g=null==n?setInterval(function(){if(""!=a.utility("appendDeviceInfo")){clearInterval(g);var d=void 0==f.callingMethod||""==f.callingMethod?"direct":f.callingMethod;m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",
a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',d,'","callback":"',"ExternalRemoteSelect",'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"];m[2]="remoteselect";m[4]="RemoteSelect";m[20]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[+]/g,"%2B").replace(/[;]/g,"%3B").replace(/[#]/g,"%23");d=m.join("");d=d.substring(d.indexOf("?")+
1);void 0!=d&&a.utility("sendPOSTRequest",d,"RemoteSelect")}},2E3):setInterval(function(){if(""!=a.utility("appendDeviceInfo")){clearInterval(g);var p=n.authURL?JSON.parse(n.authURL):n;if("ACK"==p.ret)p=void 0==f.callingMethod||""==f.callingMethod?"direct":f.callingMethod,m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',p,'","callback":"',"ExternalRemoteSelect",
'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"],m[2]="remoteselect",m[4]="RemoteSelect",m[20]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[+]/g,"%2B").replace(/[;]/g,"%3B").replace(/[#]/g,"%23"),p=m.join(""),p=p.substring(p.indexOf("?")+1),void 0!=p&&a.utility("sendPOSTRequest",p,"RemoteSelect");else{var v=p.retdic.authorize_url;if(v){var r=window.open(p.retdic.authorize_url);
null!=r&&"undefined"!=typeof r||alert("Turn off your pop-up blocker! and Refresh the page. \n\nWe try to open the following url:\n"+v);var x=window.setInterval(function(){r.closed&&window.clearInterval(x);if(null!=r.location)try{null!=r.location.href&&void 0!=r.location.href&&"https://console.mobilous.com/en/login"==r.location.href&&(window.clearInterval(x),r.close())}catch(ja){console.log(ja),window.clearInterval(x),r.close()}},1E3)}else k(b,d,tempAction,h,!0)}}},2E3)}).fail(function(d){var n=setInterval(function(){if(""!=
a.utility("appendDeviceInfo")){clearInterval(n);var d=void 0==f.callingMethod||""==f.callingMethod?"direct":f.callingMethod;m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',d,'","callback":"',"ExternalRemoteSelect",'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",
a.mobileweb.version,"&os=mw"];m[2]="remoteselect";m[4]="RemoteSelect";m[20]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[+]/g,"%2B").replace(/[;]/g,"%3B").replace(/[#]/g,"%23");d=m.join("");d=d.substring(d.indexOf("?")+1);void 0!=d&&a.utility("sendPOSTRequest",d,"RemoteSelect")}},2E3)})}var q=setInterval(function(){if(a.utility("isBusy")||""==a.utility("getComActionStatus")||"Success"!==a.utility("getComActionStatus"))a.utility("isBusy")||""==a.utility("getComActionStatus")||
"Error"!==a.utility("getComActionStatus")||(clearInterval(q),k(b,d,f,h,!1));else if(clearInterval(q),void 0!=f.events&&0<f.events.DetectRecords.length){var c=function(){var n=a.utility("clone",b);if(n.data.contents.constructor==Object&&void 0===n.data.contents[0])jQuery.extend(n.data.contents,g);else{n.data.contents=[];for(var v=0;v<n.data.contents.length;v++)jQuery.extend(n.data.contents[v],g[l]);n.data.contents[0]=g[l];p.push(n.data.contents[0])}v={};jQuery.extend(v,n);a.actions(v,d,f.events.DetectRecords.slice(),
h,function(a,b,f,d){l++;l<g.length?c():(a.data.contents=[],a.data.contents=p,k(a,b,m,d,!0))}).execute()},g=a.utility("getRemoteDBRecords"),l=0,m=JSON.parse(JSON.stringify(f));a.utility("showLoadingIndicator",!0);var p=[];c()}else if(g=a.utility("getRemoteDBRecords"),void 0!=g)if(0==g.length)k(b,d,f,h,!1);else{if(b.data.contents.constructor==Object&&void 0===b.data.contents[0])jQuery.extend(b.data.contents,g[0]);else if(void 0!=b.data.contents)if(void 0==n)if(void 0!=b.data.tablename&&b.data.tablename===
f.params.table)jQuery.extend(b.data.contents,g);else for(l=0;l<b.data.contents.length;l++)void 0!=b.data.contents[l]?jQuery.extend(b.data.contents[l],g[0]):b.data.contents[l]=g[0];else b.data.contents.currentRow=n,void 0!=b.data.contents[n]&&(g[n]?jQuery.extend(b.data.contents[n],g[n]):jQuery.extend(b.data.contents[n],g[0]));k(b,d,f,h,!0)}},200)},u=function(){for(var n=[],g=a.mobileweb.comdb.schema,p="",v=0;v<g.length;v++)g[v].tablename==c.table&&(n=g[v]);void 0===c.where&&(c.where="");if(null!=b){if("DBTableViewList"===
b.type||"RemoteTableViewList"==b.type){var r=0;r=b.data.contents.currentRow;void 0!=d&&(void 0==d.rownum?void 0!=d.getId&&(v=d.getId(),v=v.substr(0,v.lastIndexOf("-")),r=v.substr(v.lastIndexOf("-")+1,v.length)):r=d.rownum,isNaN(parseInt(r))&&(r=0))}p=void 0!=b.data.contents[r]?a.utility("formWhereCondition",a.utility("extractDataFromRecord",b.data.contents[r],f.params.where,!0)):void 0!=b.data.contents[0]&&void 0!=b.data.contents[0][r]?a.utility("formWhereCondition",a.utility("extractDataFromRecord",
b.data.contents[0][r],f.params.where,!0)):a.utility("formWhereCondition",f.params.where,b)}if(void 0!=p&&""!=p)c.where=p;else for(g=a.utility("getPK",c.table,a.mobileweb.comdb.schema),p=g.length,v=0;v<g.length;v++)c.where=v!=p-1?c.where+[g[v]," = '",a.utility("extractDataFromRecord",b.data.contents[0],"["+g+"]"),"' AND"].join(""):c.where+[g[v]," = '",a.utility("extractDataFromRecord",b.data.contents[0],"["+g+"]"),"'"].join("");for(var x in c.rec)if(""==c.rec[x])for(g=n.fields,v=0;v<g.length;v++)x==
g[v].name&&"TEXT"!=g[v].type&&(c.rec[x]=null);v=!0;g=n.fields;for(n=0;n<g.length;n++)for(x in p=g[n].name,f.params.rec)x==p&&(v=!1);if(v)k(b,d,f,h,!1);else if("Mobilous"===f.params.servicename){m[2]="remoteupdate";m[4]=void 0!=f.flag&&f.flag?"RemoteProcessContinue":"RemoteProcess";m[13]="SplitView"===b.parentType?"SplitView":"";m[18]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[+]/g,"%2B").replace(/[#]/g,"%23");x=m.join("");x=x.substring(x.indexOf("?")+1);void 0!=x&&a.utility("sendPOSTRequest",
x,"Update");var t=setInterval(function(){a.utility("isBusy")||""==a.utility("getComActionStatus")||"Success"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||"Error"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||"SynchSuccess"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||"SynchError"!==a.utility("getComActionStatus")||(clearInterval(t),k(b,d,f,h,!1)):(clearInterval(t),
k(b,d,f,h,!0)):(clearInterval(t),k(b,d,f,h,!1)):(clearInterval(t),k(b,d,f,h,!0))},100)}else x=a.mobileweb.baseurl+"/mobileweb/mobile/extsvc?uri="+m[0],"8181"==a.utility("getServerPort")&&(x=m[0]),a.getJSON(x,function(n){setInterval(function(){if(""!=a.utility("appendDeviceInfo")){clearInterval(g);var n=void 0==f.callingMethod||""==f.callingMethod?"direct":f.callingMethod;m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),
'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',n,'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"];m[2]="remoteupdate";m[4]=void 0!=f.flag&&f.flag?"RemoteProcessContinue":"RemoteProcess";m[13]="SplitView"===b.parentType?"SplitView":"";m[18]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,"%3B").replace(/[#]/g,"%23");n=m.join("");n=
n.substring(n.indexOf("?")+1);void 0!=n&&a.utility("sendPOSTRequest",n,"Update");var g=setInterval(function(){a.utility("isBusy")||""==a.utility("getComActionStatus")||"Success"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||"Error"!==a.utility("getComActionStatus")?f.flag&&!a.utility("isBusy")&&""!=a.utility("getComActionStatus")&&"SynchSuccess"===a.utility("getComActionStatus")&&(clearInterval(g),k(b,d,f,h,!0)):(clearInterval(g),k(b,d,f,h,!1)):(clearInterval(g),
k(b,d,f,h,!0))},100)}},2E3)})},w=function(){if(""!==c.where&&void 0!=c.where){if(null!=b){var n=!0;if(("DBTableViewList"===b.type||"RemoteTableViewList"==b.type)&&void 0!=d){var g=b.data.contents.currentRow;void 0!=d.getId&&(g=d.getId(),g=g.substr(0,g.lastIndexOf("-")),g=g.substr(g.lastIndexOf("-")+1,g.length));isNaN(parseInt(g))?isNaN(parseInt(b.data.contents.currentRow))?d.rownum=0:d.rownum=b.data.contents.currentRow:d.rownum=g}}c.where=void 0!=d.rownum?a.utility("formWhereCondition",a.utility("extractDataFromRecord",
b.data.contents[d.rownum],f.params.where,n)):a.utility("formWhereCondition",a.utility("extractDataFromRecord",b.data.contents[0],f.params.where,n))}else{n=a.utility("getPK",c.table,a.mobileweb.comdb.schema);g=n.length;for(var p=0;p<n.length;p++)c.where=p!=g-1?c.where+[n[p]," = '",a.utility("extractDataFromRecord",b.data.contents[0],"["+n+"]"),"' AND"].join(""):c.where+[n[p]," = '",a.utility("extractDataFromRecord",b.data.contents[0],"["+n+"]"),"'"].join("")}"Mobilous"===f.params.servicename?(m[2]=
"remotedelete",m[4]="RemoteProcess",m[13]="SplitView"===b.parentType?"SplitView":"",m[18]=JSON.stringify(c),n=m.join(""),n=n.substring(n.indexOf("?")+1),void 0!=n&&a.utility("sendPOSTRequest",n,"Delete")):(n=a.mobileweb.baseurl+"/mobileweb/mobile/extsvc?uri="+m[0],"8181"==a.utility("getServerPort")&&(n=m[0]),a.getJSON(n).always(function(d){var n=setInterval(function(){if(""!=a.utility("appendDeviceInfo")){clearInterval(n);var d=void 0==f.callingMethod||""==f.callingMethod?"direct":f.callingMethod;
m=[a.utility("getCommServerDomain"),"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',d,'","events":',l,',"table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"];m[2]="remotedelete";m[4]=void 0!=f.flag&&f.flag?"RemoteProcessContinue":"RemoteProcess";m[13]="SplitView"===b.parentType?"SplitView":
"";m[18]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,"%3B").replace(/[#]/g,"%23");d=m.join("");d=d.substring(d.indexOf("?")+1);void 0!=d&&a.utility("sendPOSTRequest",d,"Delete")}},2E3)}).fail(function(a){console.log("---- Fail : External Plugin Authentication ----")}));var v=setInterval(function(){a.utility("isBusy")||""==a.utility("getComActionStatus")||"Success"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||"Error"!==
a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||"SynchError"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||"SynchSuccess"!==a.utility("getComActionStatus")||(clearInterval(v),k(b,d,f,h,!0)):(clearInterval(v),k(b,d,f,h,!1)):(clearInterval(v),k(b,d,f,h,!1)):(clearInterval(v),k(b,d,f,h,!0))},100)},n=function(){c.where=a.utility("tokenizeString",c.where,b,f);c.table=a.utility("tokenizeString",c.table,b,f);if("Mobilous"===
f.params.servicename){a.utility("queryDatabase",!0);m[2]="remoteselect";m[4]="UploadDBRecords";m[28]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,"%3B").replace(/[#]/g,"%23");var n=m.join("");n=n.substring(n.indexOf("?")+1);void 0!=n&&a.utility("sendPOSTRequest",n,"SynchronizeDB")}else void 0===f.params.servicename?(n={method:"Select",category:"DBAction",callAnotherServiceFlag:!0,callbackmethod:"UploadDBRecords",params:{tablename:c.table,where:c.where,order:"",fields:""},
toparams:{}},f.toparams.toTable=a.utility("tokenizeString",f.toparams.toTable,b,f),n.toparams=f.toparams,n.events=f.events,(new a.actions(b,null,[n])).execute()):(n=a.mobileweb.baseurl+"/mobileweb/mobile/extsvc?uri="+m[0],"8181"==a.utility("getServerPort")&&(n=m[0]),a.getJSON(n).always(function(d){var n=setInterval(function(){if(""!=a.utility("appendDeviceInfo")){clearInterval(n);var d=void 0==f.callingMethod||""==f.callingMethod?"direct":f.callingMethod;"NOW REPLACED"===l?(m=[a.utility("getCommServerDomain"),
"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',d,'","events":"',l,'","table":"',f.params.table,'"}',"&cache=",Math.random(),"&dataset=","[params]","&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"],m[2]="remoteselect",m[4]="UploadDBRecords",m[20]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,"%3B").replace(/[#]/g,"%23")):(m=[a.utility("getCommServerDomain"),
"llcomm?llcommand=sndmsg&command=","[command]","&jsonp=","[jsonp]",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2","page":"',b.name,'","callingMethod":"',d,'","fromDB":"',"comdb",'","events":',l,',"table":"',a.utility("tokenizeString",f.params.table,b,f),'","ToService":"',f.toparams.toService,'","ToTable":"',a.utility("tokenizeString",f.toparams.toTable,b,f),'","forceFlag":"',f.toparams.forceFlag,'","forceUpdate":"',f.toparams.forceUpdate,'"}',"&cache=",Math.random(),"&dataset=","[params]",
"&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"],m[2]="remoteselect",m[4]="UploadDBRecords",m[28]=JSON.stringify(c));d=m.join("");d=d.substring(d.indexOf("?")+1);void 0!=d&&a.utility("sendPOSTRequest",d,"SynchronizeDB")}},2E3)}).fail(function(a){console.log("---- Fail : External Plugin Authentication ----")}));var g=setInterval(function(){a.utility("isBusy")||""==a.utility("getComActionStatus")||"SynchSuccess"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||
"SynchError"!==a.utility("getComActionStatus")||(clearInterval(g),k(b,d,f,h,!1)):(clearInterval(g),k(b,d,f,h,!0))},100)},M=function(){a.utility("queryDatabase",!0);if("Mobilous"===f.params.servicename){m[2]="remoteselect";m[4]="SelectNewService";m[24]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,"%3B").replace(/[#]/g,"%23");var b=m.join("");b=b.substring(b.indexOf("?")+1);void 0!=b&&a.utility("sendPOSTRequest",b,"SelectNewService")}else a.utility("sendJSONRequest",
m[0])},X=function(){switch(b.type){case "BaseView":case "ScrollView":b.data.contents[0]=a.utility("savePageData",b.children,b.data.contents[0]),a.utility("replaceRecordWithPagedata",c,b.data.contents[0])}m[2]="login";m[4]="AcctLogin";m[16]=JSON.stringify(c);a.utility("sendRequest",m.join(""));a("body").everyTime(100,function(){a.utility("isBusy")||""==a.utility("getComActionStatus")||"Success"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||"Error"!==a.utility("getComActionStatus")||
(a("body").stopTime(),k(b,d,f,h,!1)):(a("body").stopTime(),k(b,d,f,h,!0))})},F=function(){switch(b.type){case "BaseView":case "ScrollView":b.data.contents[0]=a.utility("savePageData",b.children,b.data.contents[0]),a.utility("replaceRecordWithPagedata",c,b.data.contents[0])}m[2]="register";m[4]="AcctRegistry";m[16]=JSON.stringify(c);a.utility("sendRequest",m.join(""));var n=setInterval(function(){a.utility("isBusy")||""==a.utility("getComActionStatus")||"Success"!==a.utility("getComActionStatus")?
a.utility("isBusy")||""==a.utility("getComActionStatus")||"Error"!==a.utility("getComActionStatus")||(clearInterval(n),k(b,d,f,h,!1)):(clearInterval(n),k(b,d,f,h,!0))},100)},U=function(){if(f.params.username&&f.params.password&&f.params.servicename){var c=a.utility("tokenizeString",f.params.username,b,f),n=a.utility("tokenizeString",f.params.password,b,f);if(""!=n)switch(f.params.encrypt){case "md5":n=CryptoJS.MD5(n);break;case "sha256":n=CryptoJS.SHA256(n);break;case "sha512":n=CryptoJS.SHA512(n)}var g=
"";g=void 0==f.params.database?void 0!=a.mobileweb.release&&a.mobileweb.release?"db_"+a.mobileweb.pid+"_release":"db_"+a.mobileweb.pid:f.params.database;c={database:g,usernameField:f.params.usernameField,table:f.params.table,servicename:f.params.servicename,passwordField:f.params.passwordField,where:" "+f.params.usernameField+" = '"+c+"' and "+f.params.passwordField+" = '"+n+"'"};m[2]="remoteselect";m[4]="RemoteSelect";m[16]=JSON.stringify(c).replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[;]/g,
"%3B").replace(/[#]/g,"%23");c=m.join("");c=c.substring(c.indexOf("?")+1);void 0!=c&&a.utility("sendPOSTRequest",c,"GeneralLogin");var l=setInterval(function(){a.utility("isBusy")||""==a.utility("getComActionStatus")||"Success"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||"Error"!==a.utility("getComActionStatus")||(clearInterval(l),k(b,d,f,h,!1)):(clearInterval(l),k(b,d,f,h,!0))},100)}else k(b,d,f,h,!1)},y=function(){if(0==f.params.src.indexOf("device")){var c=
{};0==a("#deviceFile").length&&a("body").append("<input id='deviceFile' type='file' accept='.xlsx,.xls' hidden='true'></input>");a("#deviceFile").off("change").on("change",function(){if(/\.(xls|xlsx)$/i.test(this.files[0].name)){(new a.actions(b,null,[{method:"StartWaitIndicator",category:"WarningAction",params:{message:"Uploading",timeout:"-1",type:"Default"},events:[]}])).execute();var n=new FileReader,g=this.files[0],l=this.files[0].name;n.addEventListener("load",function(){c.value=l;c.src=n.result;
if(c.src){var a=c.src.indexOf("base64");a=c.src.slice(0,a+7);c.src=c.src.replace(a,"")}},!1);n.readAsDataURL(this.files[0]);a("#deviceFile").remove();a.utility("initCall");var p=setInterval(function(){if(""!=a.utility("appendDeviceInfo")||null!=a.utility("appendDeviceInfo")){clearInterval(p);var n="";var v="";var r="[]",x=a.utility("tokenizeString",f.params.loguid.toString(),b,f);v=void 0!=a.mobileweb.release&&a.mobileweb.release?"db_"+a.mobileweb.pid+"_release":"db_"+a.mobileweb.pid;""!=f.params.fieldrecords&&
(r=a.utility("tokenizeString",f.params.fieldrecords.toString(),b,f),r=r.replace(/'/g,'"'),r="["+r+"]");if("8080"==a.utility("getServerPort"))n=a.mobileweb.baseurl+"/mobileweb/mobile/uploadFileToRemoteDB?baseURL="+a.mobileweb.baseurl+"&database="+v+"&tablename="+f.params.table+"&projectid="+m[20]+"&userid="+a.mobileweb.user+"&filename="+l,v=c.src;else{n=a.mobileweb.baseurl+":8181/commapi/comaction/uploadFileToRemoteDB";var t=new FormData;t.append("database",v);t.append("tablename",f.params.table);
t.append("projectid",m[20]);t.append("userid",a.mobileweb.user);t.append("callbackdata",'{"ver":"2","page":"'+b.name+'","callingMethod":"UploadRecordsToRemoteDB","events":"NOW REPLACED","table":"'+f.params.table+'"}');t.append("jsonp","BulkUpload");"true"==f.params.getlogs&&(t.append("appname",a.mobileweb.title),t.append("fixed_xlsx_values",r),t.append("appuserid",x));t.append("file",g);v=t}a.ajax({url:n,type:"POST",data:v,crossDomain:!0,processData:!1,contentType:!1,success:function(c){try{if("object"!=
typeof c){if("string"==typeof c){a.utility("processResponseData",c,"UploadRecordsToRemoteDB");var n=setInterval(function(){a.utility("isBusy")||""==a.utility("getComActionStatus")||"Success"!==a.utility("getComActionStatus")?a.utility("isBusy")||""==a.utility("getComActionStatus")||"Error"!==a.utility("getComActionStatus")||(clearInterval(n),(new a.actions(b,null,[{method:"StopWaitIndicator",category:"WarningAction",events:[]}])).execute(),k(b,d,f,h,!1)):(clearInterval(n),(new a.actions(b,null,[{method:"StopWaitIndicator",
category:"WarningAction",events:[]}])).execute(),k(b,d,f,h,!0))},100)}}else c=JSON.parse(c),(new a.actions(b,null,[{method:"StopWaitIndicator",category:"WarningAction",events:[]}])).execute(),"ACK"===c.ret?k(b,d,f,h,!0):k(b,d,f,h,!1)}catch(ca){(new a.actions(b,null,[{method:"StopWaitIndicator",category:"WarningAction",events:[]}])).execute(),console.log(ca)}},error:function(c){(new a.actions(b,null,[{method:"StopWaitIndicator",category:"WarningAction",events:[]}])).execute();k(b,d,f,h,!1)}})}},1E3)}else a("#deviceFile").remove(),
(new a.actions(b,null,[{method:"StopWaitIndicator",category:"WarningAction",events:[]}])).execute(),k(b,d,f,h,!1)});a("#deviceFile").trigger("click")}};return g}function m(b,f,d,g,h,k){var l={execute:function(){if(a.isEmptyObject(h)||"GoogleMap"!=h.getViewType())return k(b,f,d,g,!1),l;var v=a.errorhandler("checkErrorForMaps",h,d.params,d);if(!v)return k(b,f,d,g,v),l;switch(d.method){case "LocationInfo":m();break;case "RegionInfo":k(b,f,d,g,a.GMapService("showRegionInfo",d.params,h));break;case "AreaInfo":k(b,
f,d,g,a.GMapService("showAreaInfo",d.params,h));break;case "OpenTargetScope":c();break;case "CloseTargetScope":var r=a.GMapService("CloseTargetScope",d.params,h);k(b,f,d,g,r);break;case "OpenCurrentPosition":p();break;case "CloseCurrentPosition":r=a.GMapService("CloseCurrentPosition",d.params,h);k(b,f,d,g,r);break;default:k(b,f,d,g,!1)}v&&"LocationInfo"!=d.method&&"CloseTargetScope"!=d.method&&"OpenCurrentPosition"!=d.method&&"CloseCurrentPosition"!=d.method&&k(b,f,d,g,v)}},m=function(){a.GMapService("showLocationInfo",
d,h,b,f,k);setTimeout(function(){},1500)},c=function(){a.GMapService("OpenTargetScope",d.params,h);var c=setInterval(function(){void 0!=d.OpenTargetScopeStatus?(clearInterval(c),!0===d.OpenTargetScopeStatus?(delete d.OpenTargetScopeStatus,k(b,f,d,g,!0)):(delete d.OpenTargetScopeTimer,k(b,f,d,g,!1))):clearInterval(c)},200)},p=function(){a.GMapService("OpenCurrentPosition",d.params,h,d,k);var c=setInterval(function(){void 0!=d.OpenCurrentPositionStatus?(clearInterval(c),!0===d.OpenCurrentPositionStatus?
(delete d.OpenCurrentPositionStatus,k(b,f,d,g,!0)):(delete d.OpenCurrentPositionStatus,k(b,f,d,g,!1))):clearInterval(c)},600)};return l}function f(b,f,d,g,h,k){var l={execute:function(){if(a.isEmptyObject(h)||"GoogleMap"!=h.getViewType())return k(b,f,d,g,!1),l;var q=a.errorhandler("checkErrorForMaps",h,d.params,d);if(("AddPinMarker"!=d.method&&"AddCustomMarker"!=d.method||""==d.params.address)&&!q&&"removeMarker"!=d.method)return k(b,f,d,g,q),l;switch(d.method){case "ShowRoute":m();break;case "ClearRoute":a.GMapService("ClearRoute",
d.params,h);k(b,f,d,g,!0);break;case "ShowRouteList":q=a.GMapService("ShowRouteList",d.params,h);!1===q&&k(b,f,d,g,q);break;case "StartCheckPoint":q=a.GMapService("GoToStartCheckPoint",d.params,h);!1===q&&k(b,f,d,g,q);break;case "NextCheckPoint":q=a.GMapService("GoToNextCheckPoint",d.params,h);!1===q&&k(b,f,d,g,q);break;case "PrevCheckPoint":q=a.GMapService("GoToPrevCheckPoint",d.params,h);!1===q&&k(b,f,d,g,q);break;case "AddCustomMarker":c();break;case "AddPinMarker":p();break;case "removeMarker":q=
void 0!=g?a.utility("findUI",g,f,d.params.markerid.toString()):a.utility("tokenizeString",d.params.markerid.toString(),b,d);void 0!=q&&(d.params.markerid=q);q=a.GMapService("RemoveMarker",b,f,d,h);k(b,f,d,g,q);break;case "LoadFixedRouteFile":console.log("LoadFixedRouteFile");break;case "AddWayPoint":v();break;case "ShowFixedRoute":console.log("ShowFixedRoute");break;case "GetStartStep":console.log("GetStartStep");break;case "GetNextStep":console.log("GetNextStep");break;case "GetPreviousStep":console.log("GetPreviousStep");
break;case "GetCurrentStep":console.log("GetCurrentStep");break;default:k(b,f,d,g,!1)}}},m=function(){void 0!=g&&(d.params.fromlocation=a.utility("tokenizeString",d.params.fromlocation.toString(),g,d),d.params.tolocation=a.utility("tokenizeString",d.params.tolocation.toString(),g,d));a.GMapService("ShowRoute",d.params,h,d,b,f,k);var c=0,l=setInterval(function(){5==c&&clearInterval(l);void 0!=d.showRouteStatus?(clearInterval(l),!0===d.showRouteStatus?(delete d.showRouteStatus,k(b,f,d,g,!0)):(delete d.showRouteStatus,
k(b,f,d,g,!1))):c+=1},300)},c=function(){a.utility("tokenizeString",d.params.title.toString(),b,d);a.utility("tokenizeString",d.params.subtitle.toString(),b,d);var c=parseFloat(a.utility("tokenizeString",d.params.latitude,b,d)),m=parseFloat(a.utility("tokenizeString",d.params.longitude,b,d)),p=a.utility("tokenizeString",d.params.address,b,d);a.utility("tokenizeString",d.params.markerid,b,d);var v=!1;if(""!=p)(new google.maps.Geocoder).geocode({address:p},function(c,n){n==google.maps.GeocoderStatus.OK?
(d.params.latitude=c[0].geometry.location.lat(),d.params.longitude=c[0].geometry.location.lng(),v=!0):(a.mobileweb.__ERR_CODE__=n,a.GMapService("setMapErrorMessage",n,"AddCustomMarker","Geocode"),k(b,f,d,g,!1))});else{if(isNaN(c)||isNaN(m))return k(b,f,d,g,!1),l;v=!0}var q=setInterval(function(){if(v){clearInterval(q);a.GMapService("AddCustomMarker",b,f,d,h);var c=setInterval(function(){void 0!=d.markerPlotingStatus&&(clearInterval(c),!0===d.markerPlotingStatus?(delete d.markerPlotingStatus,k(b,f,
d,g,!0)):(delete d.markerPlotingStatus,k(b,f,d,g,!1)))},200)}},200)},p=function(){void 0!=g?a.utility("findUI",g,f,d.params.title.toString()):a.utility("tokenizeString",d.params.title.toString(),b,d);void 0!=g?a.utility("findUI",g,f,d.params.subtitle.toString()):a.utility("tokenizeString",d.params.subtitle.toString(),b,d);var c=parseFloat(void 0!=g?a.utility("findUI",g,f,d.params.latitude.toString()):a.utility("tokenizeString",d.params.latitude.toString(),b,d)),m=parseFloat(void 0!=g?a.utility("findUI",
g,f,d.params.longitude.toString()):a.utility("tokenizeString",d.params.longitude.toString(),b,d)),p=void 0!=d.params.address?void 0!=g?a.utility("findUI",g,f,d.params.address.toString()):a.utility("tokenizeString",d.params.address.toString(),b,d):"";void 0!=g?a.utility("findUI",g,f,d.params.markerid.toString()):a.utility("tokenizeString",d.params.markerid.toString(),b,d);var v=!1;if(""!=p)(new google.maps.Geocoder).geocode({address:p},function(c,n){n==google.maps.GeocoderStatus.OK?(d.params.latitude=
c[0].geometry.location.lat(),d.params.longitude=c[0].geometry.location.lng(),v=!0):(a.mobileweb.__ERR_CODE__=n,a.GMapService("setMapErrorMessage",n,"AddPinMarker","Geocode"),k(b,f,d,g,!1))});else{if(isNaN(c)||isNaN(m))return k(b,f,d,g,!1),l;v=!0}var q=setInterval(function(){if(v){clearInterval(q);b.eventinitpagedef=void 0!=g?g:void 0;a.GMapService("AddPinMarker",b,f,d,h);var c=setInterval(function(){void 0!=d.markerPlotingStatus&&(clearInterval(c),!0===d.markerPlotingStatus?(delete d.markerPlotingStatus,
k(b,f,d,g,!0)):(delete d.markerPlotingStatus,k(b,f,d,g,!1)))},1)}},1)},v=function(){console.log("AddWayPoint");var c=a.utility("tokenizeString",d.params.location,b);void 0!=c&&(d.params.location=c);a.GMapService("AddWayPoint",b,f,d,h);var l=setInterval(function(){void 0!=d.addWayPointStatus&&(clearInterval(l),!0===d.addWayPointStatus?k(b,f,d,g,!0):k(b,f,d,g,!1))},500)};return l}function u(b,f,d,g,h,k){var l=function(){if(navigator.geolocation){0==a("body").find("#__LAT__").length&&a("body").append("<input id='__LAT__' type='text' hidden='true'>"+
a.mobileweb.__LAT__+"</input>");0==a("body").find("#__LONG__").length&&a("body").append("<input id='__LONG__' type='text' hidden='true'>"+a.mobileweb.__LONG__+"</input>");0==a("body").find("#__ADDRESS__").length&&a("body").append("<input id='__ADDRESS__' type='text' hidden='true'>"+a.mobileweb.__ADDRESS__+"</input>");0==a("body").find("#__ALT__").length&&a("body").append("<input id='__ALT__' type='text' hidden='true'>"+a.mobileweb.__ALT__+"</input>");var c=new google.maps.Geocoder;navigator.geolocation.getCurrentPosition(function(l){var m=
new google.maps.LatLng(l.coords.latitude,l.coords.longitude);c.geocode({latLng:m},function(c,b){if("OK"==b){if(c){a.isEmptyObject(h)||h.setValue(c[0].formatted_address);try{a.mobileweb.__ADDRESS__=c[0].formatted_address}catch(aa){}}}else a.mobileweb.__ERR_CODE__=b,a.GMapService("setMapErrorMessage",b,"StartGPS","Geocode");a("#__ADDRESS__").val(a.mobileweb.__ADDRESS__);a("#__ADDRESS__").trigger("onchange")});a.mobileweb.__LAT__=l.coords.latitude;a("#__LAT__").val(a.mobileweb.__LAT__);a("#__LAT__").trigger("onchange");
a.mobileweb.__LONG__=l.coords.longitude;a("#__LONG__").val(a.mobileweb.__LONG__);a("#__LONG__").trigger("onchange");a.mobileweb.__ALT__=l.coords.altitude;if(null==a.mobileweb.__ALT__){m=new google.maps.ElevationService;var p=new google.maps.LatLng(a.mobileweb.__LAT__,a.mobileweb.__LONG__),v=[];v.push(p);m.getElevationForLocations({locations:v},function(c,b){b==google.maps.ElevationStatus.OK&&(a.mobileweb.__ALT__=c[0].elevation.toFixed(3)+" m")})}null==a.mobileweb.__ALT__&&(a.mobileweb.__ALT__="");
a("#__ALT__").val(a.mobileweb.__ALT__);a("#__ALT__").trigger("onchange");a.mobileweb.__GPSDATE__=new Date(l.timestamp);l=9>a.mobileweb.__GPSDATE__.getMonth()?"0"+(a.mobileweb.__GPSDATE__.getMonth()+1):a.mobileweb.__GPSDATE__.getMonth()+1;m=9>a.mobileweb.__GPSDATE__.getDate()?"0"+a.mobileweb.__GPSDATE__.getDate():a.mobileweb.__GPSDATE__.getDate();p=9>a.mobileweb.__GPSDATE__.getMinutes()?"0"+a.mobileweb.__GPSDATE__.getMinutes():a.mobileweb.__GPSDATE__.getMinutes();v=9>a.mobileweb.__GPSDATE__.getHours()?
"0"+a.mobileweb.__GPSDATE__.getHours():a.mobileweb.__GPSDATE__.getHours();l=a.mobileweb.__GPSDATE__.getFullYear()+"-"+l+"-"+m+" "+v+":"+p;a.mobileweb.__GPSDATE__=l;a("#__GPSDATE__").val(a.mobileweb.__GPSDATE__);a("#__GPSDATE__").trigger("onchange");setTimeout(function(){k(b,f,d,g,!0)},2E3)},function(c){a.mobileweb.__ERR_CODE__="GMap Error code: "+c.code;a.mobileweb.__ERR_MSG__=c.message;k(b,f,d,g,!1)});gpstimer=setInterval(function(){navigator.geolocation.getCurrentPosition(function(b){var f=new google.maps.LatLng(b.coords.latitude,
b.coords.longitude);c.geocode({latLng:f},function(c,b){"OK"==b?(a.isEmptyObject(h)||h.setValue(c[0].formatted_address),null!=c&&(a.mobileweb.__ADDRESS__=c[0].formatted_address,a("#__ADDRESS__").val(a.mobileweb.__ADDRESS__),a("#__ADDRESS__").trigger("onchange"))):(clearInterval(gpstimer),a.mobileweb.__ERR_CODE__=b,a.GMapService("setMapErrorMessage",b,"StartGPS","Geocode"))});a.mobileweb.__LAT__=b.coords.latitude;a("#__LAT__").val(a.mobileweb.__LAT__);a("#__LAT__").trigger("onchange");a.mobileweb.__LONG__=
b.coords.longitude;a("#__LONG__").val(a.mobileweb.__LONG__);a("#__LONG__").trigger("onchange")})},2E3);a.utility("addNewTimer","gpstimer")}},m=function(){function c(c){c=c.coords;console.log(c.latitude,"---",c.longitude);console.log(b.gpstrackid);a.utility("createIndexedDBTable","gpslog",2);var f=[];f.latitude=c.latitude;f.longitude=c.longitude;a.utility("addDataToIndexedDBTable","gpslog",f)}function f(a){console.warn("ERROR("+a.code+"): "+a.message)}console.log("StartGPSTrack");b.gpstrackid=null;
if(navigator.geolocation){var d={enableHighAccuracy:!1,timeout:5E3,maximumAge:0};b.gpstrackid=navigator.geolocation.watchPosition(c,f,d)}},c=function(){function c(a,c){var b=(c.latitude-a.latitude)*Math.PI/180,f=(c.longitude-a.longitude)*Math.PI/180;a=Math.sin(b/2)*Math.sin(b/2)+Math.cos(a.latitude*Math.PI/180)*Math.cos(c.latitude*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);return 12756274*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}void 0===b.circles&&(b.circles=[]);b.geofence="start";a.mobileweb.localdb.instance.transaction(function(l){a.utility("log",
"select * FROM spotdetail");l.executeSql("select * FROM spotdetail",[],function(l,m){if(0!=m.rows.length){var p={},v={};a.each(m.rows,function(a,c){v={latitude:c.latitude,longitude:c.longitude,locname:c.locname,title:c.title,subtitle:c.subtitle};p["point"+a]=v});for(var q in p)a.GMapService("AddGeoFence",b,f,d,h,p[q]);new google.maps.Geocoder;var u={};options={};if(navigator.geolocation){0==a("body").find("#__CENTERLAT__").length&&a("body").append("<input id='__CENTERLAT__' name='__CENTERLAT__' type='text' hidden='true'>"+
a.mobileweb.__CENTERLAT__+"</input>");0==a("body").find("#__CENTERLONG__").length&&a("body").append("<input id='__CENTERLONG__' name='__CENTERLONG__' type='text' hidden='true'>"+a.mobileweb.__CENTERLONG__+"</input>");var n=navigator.geolocation.watchPosition(function(k){for(var l in p)if(a.GMapService("AddGeoFence",b,f,d,h,p[l]),100>=c(p[l],k.coords)){if(u.latitude!=k.coords.latitude&&u.longitude!=k.coords.longitude){u=p[l];b.watchId=n;a.GMapService("PantoGeofenceEnter",k.coords.latitude,k.coords.longitude,
h);a.mobileweb.__CENTERLAT__=p[l].latitude;a.mobileweb.__CENTERLONG__=p[l].longitude;a("#__CENTERLAT__").val(a.mobileweb.__CENTERLAT__);a("#__CENTERLONG__").val(a.mobileweb.__CENTERLONG__);var m="Entering:-- "+p[l].title;void 0!=d.events.EnterFencing&&0!=d.events.EnterFencing.length&&(new a.actions(b,f,d.events.EnterFencing.slice(),g)).execute();setTimeout(function(){a.growlUI("",m,4E3)},3E3)}}else!a.isEmptyObject(u)&&100<c(u,k.coords)&&(console.log("Exiting ",u),_checkedInPoints={},a.mobileweb.__CENTERLAT__=
"__CENTERLAT__",a.mobileweb.__CENTERLONG__="__CENTERLONG__",a("#__CENTERLAT__").val(a.mobileweb.__CENTERLAT__),a("#__CENTERLONG__").val(a.mobileweb.__CENTERLONG__),void 0!=d.events.ExitFencing&&0!=d.events.ExitFencing.length&&(new a.actions(b,f,d.events.ExitFencing.slice(),g)).execute())},function(a){console.warn("ERROR("+a.code+"): "+a.message)},options);a.utility("addNewTimer","geofencingtimer");k(b,f,d,g,!0)}}},function(a,c){console.log("error---",c);k(b,f,d,g,!1)})})};return{execute:function(){switch(d.method){case "StartGPS":l();
break;case "StopGPS":1==a.utility("getTimers").pop().gpstimer?(clearInterval(gpstimer),a.utility("resetMapGlobalVariable"),a("#__LAT__").trigger("onchange"),a("#__LAT__").remove(),a("#__LONG__").trigger("onchange"),a("#__LONG__").remove(),a("#__ALT__").trigger("onchange"),a("#__ALT__").remove(),a("#__ADDRESS__").trigger("onchange"),a("#__ADDRESS__").remove(),a("#__MAPZOOM__").trigger("onchange"),a("#__MAPZOOM__").remove(),a("#__GPSDATE__").trigger("onchange"),a("#__GPSDATE__").remove(),k(b,f,d,g,
!0)):k(b,f,d,g,!1);break;case "StartGPSTrack":m();break;case "StopGPSTrack":console.log("StopGPSTrack");console.log(b.gpstrackid);null!=b.gpstrackid&&(navigator.geolocation.clearWatch(b.gpstrackid),b.gpstrackid=null);break;case "ConvertGPSLogToFile":console.log("ConvertGPSLogToFile");break;case "StartGeoFencing":c();break;case "StopGeoFencing":1==a.utility("getTimers").pop().geofencingtimer?(b.geofence="stop",a.GMapService("AddGeoFence",b,f,d,h),void 0!=b.watchId&&navigator.geolocation.clearWatch(b.watchId),
a.mobileweb.__CENTERLAT__="__CENTERLAT__",a.mobileweb.__CENTERLONG__="__CENTERLONG__",a("#__CENTERLAT__").trigger("onchange"),a("#__CENTERLAT__").remove(),a("#__CENTERLONG__").trigger("onchange"),a("#__CENTERLONG__").remove(),k(b,f,d,g,!0)):k(b,f,d,g,!1);console.log("StopGeoFencing");break;default:k(b,f,d,g,!1)}}}}function w(b,f,d,g,h,k){return{execute:function(){switch(d.method){case "CallContact":var h=a.utility("tokenizeString",d.params.phonenumber,b,d);try{window.location="tel:"+h,k(b,f,d,g,!0)}catch(K){console.log(K),
k(b,f,d,g,!1)}}}}}function y(b,f,d,g,h,k){var l=function(){var h=[],c=!1;h.matchField=a.utility("tokenizeString",d.params.matchField,b,d);h.matchValue=a.utility("tokenizeString",d.params.matchValue,b,d);h.filterfromdate=a.utility("tokenizeString",d.params.filterfromdate,b,d);h.filtertodate=a.utility("tokenizeString",d.params.filtertodate,b,d);h.startdate=""!=d.params.startdate?a.utility("tokenizeString",d.params.startdate,b,d):[a.utility("extractDataFromRecord",b.data.contents[0],"[fromdate]")].join("");
h.enddate=""!=d.params.enddate?a.utility("tokenizeString",d.params.enddate,b,d):[a.utility("extractDataFromRecord",b.data.contents[0],"[todate]")].join("");if(c=""==h.filterfromdate&&""==h.filtertodate?a.utility("validateDate",h.startdate)&&a.utility("validateDate",h.enddate):a.utility("validateDate",h.filtertodate)&&a.utility("validateDate",h.filterfromdate)&&a.utility("validateDate",h.startdate)&&a.utility("validateDate",h.enddate)){var l=h.enddate;c=a.utility("splitAndReturnDate",h.startdate);
var m=a.utility("splitAndReturnDate",l);if(""==!h.filterfromdate&&""==!h.filtertodate){l=a.utility("splitAndReturnDate",h.filterfromdate);var p=a.utility("splitAndReturnDate",h.filtertodate);c=l<p&&l<=c&&p>=m&&m>c}else c=m>c;c?(h.ownerEmail=a.utility("tokenizeString",d.params.ownerEmail,b,d),h.eventid=a.utility("tokenizeString",d.params.eventId,b,d),""==h.ownerEmail&&(h.ownerEmail="default"),h.title=""!=d.params.category?a.utility("tokenizeString",d.params.category,b,d):[a.utility("extractDataFromRecord",
b.data.contents[0],"[title]")].join(""),h.description=""!=d.params.description?a.utility("tokenizeString",d.params.description,b,d):[a.utility("extractDataFromRecord",b.data.contents[0],"[description]")].join(""),h.place=""!=d.params.place?a.utility("tokenizeString",d.params.place,b,d):[a.utility("extractDataFromRecord",b.data.contents[0],"[place]")].join(""),""!=h.eventid?a.mobileweb.localdb.instance.transaction(function(c){c.executeSql("SELECT eventid, id FROM appexe_tmp_events where eventid LIKE '%"+
h.eventid+"%'",[],function(c,l){1<l.rows.length||0==l.rows.length?k(b,f,d,g,!1):1==l.rows.length&&(c=l.rows.item(0),h.eventid=c.eventid,h.id=c.id,a.GoogleService("UpdateEvent",h,d.events,b,f))},function(a,c){})}):""!=h.matchField&&""!=h.matchValue?a.mobileweb.localdb.instance.transaction(function(c){c.executeSql("SELECT eventid, id FROM appexe_tmp_events where "+h.matchField+"='"+h.matchValue+"'",[],function(c,l){1<l.rows.length||0==l.rows.length?k(b,f,d,g,!1):1==l.rows.length&&(c=l.rows.item(0),
h.eventid=c.eventid,h.id=c.id,a.GoogleService("UpdateEvent",h,d.events,b,f))},function(a,c){})}):k(b,f,d,g,!1)):k(b,f,d,g,!1)}else k(b,f,d,g,!1)};return{execute:function(){switch(d.method){case "FindEvent":var h=[];h.startdate=a.utility("tokenizeString",d.params.startdate,b,d);h.enddate=a.utility("tokenizeString",d.params.enddate,b,d);h.ownerEmail=a.utility("tokenizeString",d.params.ownerEmail,b,d);""==h.ownerEmail&&(h.ownerEmail="default");if(a.utility("validateDate",h.startdate.split(" ")[0])||
a.utility("validateDate",h.startdate.split(" ")[0])){var c=h.startdate.split(" ")[1];void 0==c?h.startdate+=" 00:00":a.utility("validateTime",c)||k(b,f,d,g,!1);void 0==c?h.enddate+=" 23:59":a.utility("validateTime",c)||k(b,f,d,g,!1);c=h.enddate;var m=a.utility("splitAndReturnDate",h.startdate);a.utility("splitAndReturnDate",c)>m?a.GoogleService("findCalendar",h,d.events,b,f):k(b,f,d,g,!1)}else k(b,f,d,g,!1);break;case "CreateEvent":h=[];m=a.utility("tokenizeString",d.params.startdate,b,d);c=a.utility("tokenizeString",
d.params.enddate,b,d);a.utility("validateDate",m)||a.utility("validateDate",c)?(m=a.utility("splitAndReturnDate",m),c=a.utility("splitAndReturnDate",c),h.ownerEmail=a.utility("tokenizeString",d.params.ownerEmail,b,d),h.startdate=a.utility("tokenizeString",d.params.startdate,b,d),h.enddate=a.utility("tokenizeString",d.params.enddate,pagede,actionf),h.title=a.utility("tokenizeString",d.params.category,b,d),h.description=a.utility("tokenizeString",d.params.description,b,d),h.place=a.utility("tokenizeString",
d.params.place,b,d),""==h.ownerEmail&&(h.ownerEmail="default"),c>m?a.GoogleService("createEvent",h,d.events,b,f):k(b,f,d,g,!1)):k(b,f,d,g,!1);break;case "UpdateEvent":l();break;case "DeleteEvent":if(h=[],h.filterFromDate=a.utility("tokenizeString",d.params.filterfromdate,b,d),h.filterToDate=a.utility("tokenizeString",d.params.filtertodate,b,d),""==h.filterFromDate&&""==h.filterToDate?c=!0:""!=h.filterFromDate&&""!=h.filterToDate?(a.utility("validateDate",h.filterFromDate)&&a.utility("validateDate",
h.filterToDate),c=a.utility("splitAndReturnDate",h.filterFromDate),m=a.utility("splitAndReturnDate",h.filterToDate),c=c<m?!0:!1):c=!1,c){c=a.utility("getPK","appexe_tmp_events",a.mobileweb.localdb.schema);c=""+c[0];m=[a.utility("extractDataFromRecord",b.data.contents[0],"[eventid]")].join("");var p=[a.utility("extractDataFromRecord",b.data.contents[0],"["+c+"]")].join("");h.eventid=m;h.id=p;h.where=[c," = ",a.utility("extractDataFromRecord",b.data.contents[0],"["+c+"]")].join("");h.ownerEmail=a.utility("tokenizeString",
d.params.ownerEmail,b,d);""==h.ownerEmail&&(h.ownerEmail="default");delete h.filterFromDate;delete h.filterToDate;a.GoogleService("DeleteEvent",h,d.events,b,f)}else k(b,f,d,g,!1)}}}}function A(b,d,f,g,h,k){return{execute:function(){switch(f.method){case "ReadTextFile":var b="http://192.168.1.11:8080/mobileweb/mobile/readFile?uri=http://akhiltyagi.mobilous.com/appexe/akhiltyagi/31/bin/mobileweb2/demo.txt&uiName="+h.getId();a.utility("sendRequest",b)}}}}function G(b,d,f,g,h,k){var l=function(){var d=
b.parent.substring(0,4);a.each(a.mobileweb.pages,function(c,b){d===b.parent&&a.each(b.children,function(c,b){if(b.name===f.params.targetSection){var d=b.data.contents[0].length;a.fetchLocalDBRecords(b,function(){a.createDBListViewPageRows(b,function(){if(d<b.data.contents[0].length)for(var g=b.data.contents[0].length-d,h=0;h<g;h++){var k=d+h;a.createRow(b,d+h,b.children[0].group[0].row[k],d+h+1,function(d){b.children[0].group[0].row[k]=d;a.mobileweb.getCurrentPage().children[c].children[0].group[0].row.push(b.children[0].group[0].row[k]);
a("#"+f.params.targetSection).find("ul").append(a.mobileweb.getCurrentPage().children[c].children[0].group[0].row[k].getHTML().join(""));a.mobileweb.getCurrentPage().children[c].children[0].group[0].row[k].applyOverrides()})}})})}})})};return{execute:function(){switch(f.method){case "refresh":l()}}}}function E(b,d,f,g,h,k){var l=function(){var l=a.mobileweb.getCurrentPage(),c="",m="",p="",q="",u="";-1!=f.params.where.indexOf("[")&&-1!=f.params.where.indexOf("]")?(p=f.params.where.replace("[",""),
p=p.replace("]","")):p=f.params.where;-1!=f.params.order.indexOf("[")&&-1!=f.params.order.indexOf("]")?(q=f.params.order.replace("[",""),q=q.replace("]","")):q=f.params.order;if(void 0!=b.parentType&&"SplitView"===b.parentType)a.each(a.mobileweb.pages,function(g,h){if(void 0==b.pagedef){var n=b.parent.split("_");n="page_"+n[n.length-1]}else n=b.pagedef.name;n===h.name&&a.each(h.children,function(h,n){n.name===f.params.targetpage&&(c=-1!=a.utility("tokenizeString",f.params.where,b,f).indexOf("null")?
"":a.utility("tokenizeString",f.params.where,b,f),m=-1!=a.utility("tokenizeString",f.params.order,b,f).indexOf("null")?"":a.utility("tokenizeString",f.params.order,b,f),a.mobileweb.pages[g].children[h].data.wherecond=c,a.mobileweb.pages[g].children[h].data.order=m,k(b,d,f,b,!0))})});else{void 0!==g?(0==f.params.where.indexOf("[")?(a.each(g.children,function(a,b){b.name==p&&(c=b.value)}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,b){b.name==p&&(c=b.value)}),
a.each(g.toolbarbottom.children,function(a,b){b.name==p&&(c=b.value)})),void 0!=g.toolbarleft&&a.each(g.toolbarleft.children,function(a,b){b.name==p&&(c=b.value)})):c=a.utility("formWhereCondition",f.params.where,g),0==f.params.order.indexOf("[")?(a.each(g.children,function(a,c){c.name==q&&(m=c.value)}),void 0!=g.toolbartop&&void 0!=g.toolbarbottom&&(a.each(g.toolbartop.children,function(a,c){c.name==q&&(m=c.value)}),a.each(g.toolbarbottom.children,function(a,c){c.name==q&&(m=c.value)})),void 0!=
g.toolbarleft&&a.each(g.toolbarleft.children,function(a,c){c.name==q&&(m=c.value)})):m=q):(c=-1!=a.utility("tokenizeString",f.params.where,b,f).indexOf("null")?"":a.utility("tokenizeString",f.params.where,b,f),m=-1!=a.utility("tokenizeString",f.params.order,b,f).indexOf("null")?"":a.utility("tokenizeString",f.params.order,b,f));l.getName()===f.params.targetpage?(l=a.utility("getObject",a.mobileweb.pages,"name",l.getName()),u="SamePage"):(l=a.utility("getObject",a.mobileweb.pages,"name",f.params.targetpage),
u="DifferentPage");if(a.isEmptyObject(h))"DifferentPage"==u?(l.data.wherecond=c,l.data.order=m):(b.data.wherecond=c,b.data.order=m),k(b,d,f,g,!0);else if("ComboBox"==h.getViewType()||"TileList"==h.getViewType())try{h.refresh(c,m);var x="local"===h.getDBType()?200:500,t=setInterval(function(){clearInterval(t);k(b,d,f,g,!0)},x)}catch(ba){k(b,d,f,g,!1)}else b.data.wherecond=c,b.data.order=m,k(b,d,f,g,!0);void 0!=f.params.initialWhere&&(f.params.where=f.params.initialWhere)}};return{execute:function(){switch(f.method){case "changeCondition":l()}}}}
function C(b,f,d,g,h,k){var l=function(){if("TableView"==b.type||"DBTableView"==b.type||"RemoteTableView"==b.type||"TableViewList"==b.type||"DBTableViewList"==b.type||"RemoteTableViewList"==b.type){var c=b.data.contents.currentRow;if(void 0!=f)if(void 0!=f.rownum)c=f.rownum;else{if(void 0!=f.getId()){var h=c=f.getId();"Row"!=f.getViewType()&&(h=c.substr(0,c.lastIndexOf("-")));c=h.substr(h.lastIndexOf("-")+1,h.length)}isNaN(parseInt(c))&&(c=0)}if(void 0!=b.data.contents[c]){c=b.data.contents[c];h=
d.params.command;h=h.toString().replace(/[\[\]]/g,"#").replace(/[\[\]]/g,"#");h=h.toString().split("#");for(var l=0;l<h.length;l++)void 0!=c[h[l]]&&(h[l]=c[h[l]]);var m=h.join("")}else m=a.utility("tokenizeString",d.params.command,b,d)}else m=a.utility("tokenizeString",d.params.command,b,d);"undefined"===typeof d.params.name?(0==m.indexOf("http")?window.open(m):window.open(m).close(),k(b,f,d,g,!0)):a.ajax({url:m,type:"GET",crossDomain:!0,success:function(c){if("undefined"!==typeof d.params.name){var h=
a.mobileweb.getCurrentPage(),l;"SplitView"===h.getViewType()?"SplitView"===b.parentType&&(l=h.getChild(d.params.name,f,b.name)):l=h.getChild(d.params.name,f);"object"===typeof c&&(c=JSON.stringify(c));l.setValue(c.toString())}else window.open(m);k(b,f,d,g,!0)},error:function(a){k(b,f,d,g,!1)}})},m=function(){var c=setInterval(function(){clearInterval(c);navigator.onLine?a.ajax({url:a.utility("tokenizeString",d.params.targetURL,b,d),type:"GET",crossDomain:!0,success:function(a){"object"!=typeof a&&
(a=JSON.parse(a));"ACK"===a.ret||"ACK"===a.code||"ACK"===a.code?k(b,f,d,g,!0):k(b,f,d,g,!1)},error:function(a){k(b,f,d,g,!1)}}):navigator.onLine||(k(b,f,d,g,!1),clearInterval(c))},1E3)},c=function(){var c=a.utility("tokenizeString",d.params.initials,b).toString();c=c.substring(0,c.indexOf("=")).trim();0==a("body").find("#"+c).length&&a("body").append("<input name='"+c+"' id='"+c+"' type='text' hidden='true'></input>");for(eval(a.utility("tokenizeString",d.params.initials,b));eval(a.utility("tokenizeString",
d.params.condition,b));eval(a.utility("tokenizeString",d.params.nextList,b))){var h=JSON.parse(JSON.stringify(b));h.data.contents.constructor==Object?jQuery.extend(h.data.contents,{variableName:eval(c)}):(void 0===h.data.contents[0]&&(h.data.contents[0]={}),h.data.contents[0][""+c]=eval(c));console.log(c+" "+eval(c));a("#"+c).val(eval(c));(new a.actions(h,f,JSON.parse(JSON.stringify(d.events.Success).slice()),g)).execute()}k(b,f,d,g,"loop")};return{execute:function(){switch(d.method){case "CallExternalApp":l();
break;case "NetworkAvailable":m();break;case "loop":c()}}}}function L(b,f,d,g,h,k){var l=function(){try{var h=a.utility("tokenizeString",d.params.timerName,b,d),c=a.utility("tokenizeString",d.params.interval,b,d),l=0,m=!1,p=a.utility("getTimers"),q;for(q in p)if(void 0!=a.utility("getTimers")[q][h]&&a.utility("getTimers")[q][h]){m=!0;break}if(!m)if(""==h||isNaN(c))k(b,f,d,g,!1);else if(d.params.repeat){var u=a.utility("addNewTimer",h),t=d.events.Success,r=setInterval(function(){void 0!=a.utility("getTimers")[u-
1][h]&&a.utility("getTimers")[u-1][h]?(new a.actions(b,f,t.slice())).execute():(clearInterval(r),l++)},1E3*c);d.events.Success=[];k(b,f,d,g,!0)}else setTimeout(function(){a.utility("removeTimers",h);k(b,f,d,g,!0)},1E3*c)}catch(aa){k(b,f,d,g,!1)}};return{execute:function(){switch(d.method){case "startTimer":l();break;case "stopTimer":try{var h=a.utility("tokenizeString",d.params.timerName,b,d);""!=h?(a.utility("removeTimers",h),k(b,f,d,g,!0)):k(b,f,d,g,!1)}catch(c){k(b,f,d,g,!1)}}}}}function Q(b,f,
d,g,h,k){var l=function(){if("Gadget"===h.getViewType())h.setVisibility("true");else{var c=a.utility("tokenizeString",d.name,b);null!==c&&""!=c&&a.each(b.children,function(b,d){"Gadget"===d.viewtype&&d.name===c&&(d.hidden="false",a("#"+d.id).css({visibility:"visible"}),a.each(d.children,function(c,b){a("#"+b.id).css({visibility:"visible"})}))})}k(b,f,d,g,!0)},m=function(){if("Gadget"===h.getViewType())h.setVisibility("false");else{var c=a.utility("tokenizeString",d.name,b);null!==c&&""!=c&&a.each(b.children,
function(b,d){"Gadget"===d.viewtype&&d.name===c&&(d.hidden=!0,a("#"+d.id).css({visibility:"hidden"}),a.each(d.children,function(c,b){a("#"+b.id).css({visibility:"hidden"})}))})}k(b,f,d,g,!0)};return{execute:function(){switch(d.method){case "ShowGadget":l();break;case "HideGadget":m()}}}}function W(b,d,f,g,h,k){a.utility("initCall");var l=function(){var c=a.utility("containsGlobalVariable",f.params.ClientID)?a.utility("checkGlobalVariable",f.params.ClientID):a.utility("tokenizeString",f.params.ClientID,
b);void 0!=c&&""!=c?(c={userid:a.utility("tokenizeString",f.params.UserId,b),clientid:c},command=[a.utility("getCommServerDomain"),"llcommpost?llcommand=sndmsg&command=registeruserforpushnotification","&jsonp=registerPNClientId",a.utility("appendDeviceInfo"),'&callbackdata={"ver":"2",}',"&cache=",Math.random(),"&dataset=",JSON.stringify(c),"&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"],c=command.join(""),c=c.substring(c.indexOf("?")+1),void 0!=c&&a.utility("sendPOSTRequest",
c,"RegisterUsersForPushNotification"),setTimeout(function(){a.utility("isPNClientRegisterd")?(a.utility("registerPNClient",!1),k(b,d,f,g,!0)):k(b,d,f,g,!1)},500)):k(b,d,f,g,!1)},m=function(){a.utility("tokenizeString",f.params.UserId,b);var c={userid:a.utility("tokenizeString",f.params.UserId,b),messagetext:a.utility("tokenizeString",f.params.Message,b),messageType:"",apns_projectid:a.mobileweb.pid,apikey:""};command=[a.utility("getCommServerDomain"),"llcommpost?llcommand=sndmsg&command=sendpushmessage",
"&jsonp=registerPNClientId",a.utility("appendDeviceInfo"),"&dataset=",JSON.stringify(c),"&project_id=",a.mobileweb.pid,"&version=",a.mobileweb.version,"&os=mw"];c=command.join("");c=c.substring(c.indexOf("?")+1);void 0!=c&&a.utility("sendPOSTRequest",c,"RegisterUsersForPushNotification");setTimeout(function(){a.utility("isPNClientRegisterd")?(a.utility("registerPNClient",!1),k(b,d,f,g,!0)):k(b,d,f,g,!1)},500)};return{execute:function(){switch(f.method){case "RegisterUsersForPushNotification":setTimeout(function(){l()},
300);break;case "SendPushMessage":setTimeout(function(){m()},300)}}}}var J=0,R=0,B="",S="",N="",V="",H=0,P;a.actionHelper=function(t,F,r,J,B,H){void 0!=B&&(void 0!=r.name&&-1<r.name.indexOf("[")&&-1<r.name.indexOf("]")&&(r.name=a.utility("tokenizeString",r.name,B,r)),J="bundle"==t.srcLocation?a.getUI(r.name,F,t.name):a.getRemoteUI(r.name,F,t.name));switch(r.category){case "PageAction":(new l(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "MainValue":(new g(t,F,r,B,J,function(a,
c,b,d,f){H(a,c,b,d,f)})).execute();break;case "WarningAction":(new d(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "UIObjectAction":(new b(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "MediaAction":(new k(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "EmailControllerAction":(new h(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "DBAction":(new q(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "ComAction":window.navigator.onLine?
(r.flag||a.utility("setComActionStatus",""),(new p(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute()):H(t,F,r,B,!1);break;case "GoogleMapControl":(new m(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "GoogleMapAction":(new f(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "MotionAction":(new u(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "GoogleContactService":(new w(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "GoogleCalendarService":var R=
document.createElement("script");R.type="text/javascript";R.src="preview"==a.mobileweb.state?"/mobileweb/resources/js/google-services.js":"js/google-services.js";a("head").append(R);R.onload=(new y(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "FileRead":(new A(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "SplitPage":(new G(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "DBCondition":(new E(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();
break;case "SystemController":(new C(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "SensorAction":(new L(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "GadgetAction":(new Q(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;case "SendPushNotificationAction":(new W(t,F,r,B,J,function(a,c,b,d,f){H(a,c,b,d,f)})).execute();break;default:a.mobileweb.plugin?a.each(a.mobileweb.plugin,function(b,c){if(r.category===c.name){b=a.utility("savePageData",t.children,
t.data.contents[0]);var d=a.utility("clone",r.params),f;for(f in d)d[f]=a.utility("extractDataFromRecord",b,d[f]);a.fn[c.name](r.method,d)}}):H(t,F,r,B,!1)}}})(jQuery);(function(a){function l(d,b,h){b.group=[];a.each(h.group,function(a,k){b.group.push(new g(d,h.id,k,a))});b.getHTML=function(){var g=[],k="Grouped"==h.tablestyle?"style='left:0px;'":"";a.each(b.group,function(a,b){g=g.concat(b.getHTML())});a.utility("detectBrowserLanguage");var l="";l=d.toolbarleft&&void 0!=d.toolbarleft.fixed&&d.toolbarleft.fixed?l="<div id='empty_list' style='font-size: 20px;opacity: .5;text-align: center;color: gray;position:absolute;left:calc(35% - 82px);top:80px;visibility:hidden;'>No records to display</div>":
l="<div id='empty_list' style='font-size: 20px;opacity: .5;text-align: center;color: gray;position:absolute;left:calc(50% - 82px);top:80px;visibility:hidden;'>No records to display</div>";!1===a.utility("getDelayedChangeCondition",d.name)&&("RemoteTableViewList"==d.type?(new a.actions(d,null,[{method:"Select",category:"ComAction",callingMethod:"RemoteNumRecords",params:{servicename:d.data.servicename,table:d.data.tablename,where:d.data.wherecond,order:d.data.order,fields:"",pageNumRecords:!0}}])).execute():
"DBTableViewList"==d.type&&(new a.actions(d,null,[{method:"NumRecords",category:"DBAction",params:{table:d.data.tablename,where:d.data.wherecond,order:d.data.order,fields:""}}])).execute());if(0===a("#pagination-container").length)var f="<div id='pagination-container'><p id='paginationMsg'></p></div>";return["<div id='",h.id,"' "+k+" class='ui-table-position' style='visibility:hidden'>",g.join(""),"",l,f,"</div>"].join("")};b.applyOverrides=function(){"TableView"===d.type&&d.children[0].accordion&&
a(".ui-table-position").css({top:"0px"});"Grouped"==h.tablestyle&&a("#"+h.id).css({left:"0px"});a.each(b.group,function(a,b){b.applyOverrides()})};b.applyEvents=function(){a.each(b.group,function(a,b){b.applyEvents()});"RemoteTableViewList"==d.type||"DBTableViewList"==d.type?a("#showmore").bind("click",function(){a.fn.center=function(){this.css("position","absolute");this.css("top",(a(window).height()-this.height())/2+a(window).scrollTop()+"px");this.css("left",(a(window).width()-this.width())/2+
a(window).scrollLeft()+"px");return this};a.blockUI({css:{backgroundColor:"transparent",border:"none"},message:'<div class="spinner" style="font-size: 18px;font-weight: bold;color: gray;">Please wait...</div>',baseZ:1500,overlayCSS:{backgroundColor:"#D3D3D3",opacity:.5,cursor:"wait"}});a(".blockUI.blockMsg").center();var b=a("#"+d.children[0].id+" ul").attr("id");a.utility("showLoadingIndicator",!0);d.data.contents.loaded=!1;var g=d.data.contents.length;"RemoteTableViewList"==d.type?(new a.actions(d,
null,[{method:"Select",category:"ComAction",callback:"loadMoreRecords",params:{servicename:d.data.servicename,table:d.data.tablename,where:d.data.wherecond,order:d.data.order,offset:parseInt(d.data.contents.offset)+25,limit:25,fields:""}}])).execute():"DBTableViewList"==d.type&&(new a.actions(d,null,[{method:"Select",category:"DBAction",callback:"loadMoreRecords",params:{tablename:d.data.tablename,where:d.data.wherecond,order:d.data.order,columns:""}}])).execute();var h=setInterval(function(){void 0!=
d.data.contents.loaded&&d.data.contents.loaded?(clearInterval(h),a.createRemoteDBListViewPageRows(d,function(){var f=[];f=d.data.contents[0].constructor==Object?d.data.contents:d.data.contents[0];if(g<f.length){f=f.length-g;for(var h=0,k=0;k<f;k++){var l=g+k;a.createRow(d,b,d.children[0].group[0].row[l],g+k,function(b){h+=b.getCellHeight();h+=2;d.children[0].group[0].row[l]=b;d.children[0].group[0].row.push(d.children[0].group[0].row[l]);a(".scroller").find("ul").append(d.children[0].group[0].row[l].getHTML().join(""));
d.children[0].group[0].row[l].applyOverrides();d.children[0].group[0].row[l].applyEvents()})}a.utility("showLoadingIndicator",!1);a(".scroller").find("ul").unblock();a(".ui-loader").css({display:"none"});a(".bglayout").css({height:parseFloat(a(".bglayout").css("height").replace("px",""))+h+"px"});a(".scroller").css({height:parseFloat(a(".scroller").css("height").replace("px",""))+h+"px"})}"Desktop"===a.mobileweb.device.type?(a("#iscroll_"+d.name).css({"overflow-y":"scroll","overflow-x":"hidden"}),
f=a('<style>$("#iscroll_" '+d.name+")::-webkit-scrollbar-track{-webkit-box-shadow: inset 0 0 16px rgba(,1);border-radius: 10px;background-color: #F5F5F5;}</style>"),a("html > head").append(f),f=a('<style>$("#iscroll_" '+d.name+")::-webkit-scrollbar{width: 7px;background-color: #F5F5F5;}</style>"),a("html > head").append(f),f=a('<style>$("#iscroll_" '+d.name+")::-webkit-scrollbar-thumb{border-radius: 10px;-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);background-color: #808080;}</style>"),a("html > head").append(f)):
(d.iscroll={},a("#iscroll_"+d.name+"> div:nth-child(2)").remove(),d.iscroll=new iScroll(a("#iscroll_"+d.name).get(0),{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}}));null!=a.utility("getSessionData","offset")&&(f=a.utility("getSessionData","offset"),f=a.parseJSON(f),a.mobileweb.getCurrentPage().getName()==f.page_name&&d.iscroll.scrollTo(0,f.x,1));a.unblockUI()}),d.data.contents.allRecordsLoaded&&
a("#showmore").remove()):"DBTableViewList"==d.type&&(clearInterval(h),a.createRemoteDBListViewPageRows(d,function(){var f=[];f=d.data.contents[0].constructor==Object?d.data.contents:d.data.contents[0];f=f.length-a(".scroller").find("ul").children("li").length;noOFNewRowsAdded=25<f?25:f;25>noOFNewRowsAdded&&(a("#showmore").remove(),d.data.contents.allRecordsLoaded=!0);var g=0;for(f=0;f<noOFNewRowsAdded;f++){var h=a(".scroller").find("ul").children("li").length;a.createRow(d,b,d.children[0].group[0].row[h],
h,function(b){g+=b.getCellHeight();g+=2;d.children[0].group[0].row[h]=b;a(".scroller").find("ul").append(d.children[0].group[0].row[h].getHTML().join(""));d.children[0].group[0].row[h].applyOverrides();d.children[0].group[0].row[h].applyEvents()})}a.utility("showLoadingIndicator",!1);a(".scroller").find("ul").unblock();a(".ui-loader").css({display:"none"});a(".bglayout").css({height:parseFloat(a(".bglayout").css("height").replace("px",""))+g+"px"});a(".scroller").css({height:parseFloat(a(".scroller").css("height").replace("px",
""))+g+"px"});a(".scroller").css({height:parseFloat(a("#"+d.children[0].id).css("height").replace("px",""))+50+"px"});a(".bglayout").css({height:parseFloat(a("#"+d.children[0].id).css("height").replace("px",""))+50+"px"});"Desktop"===a.mobileweb.device.type?a("#iscroll_"+d.name).css({"overflow-y":"scroll","overflow-x":"hidden"}):(d.iscroll={},a("#iscroll_"+d.name+"> div:nth-child(2)").remove(),d.iscroll=new iScroll(a("#iscroll_"+d.name).get(0),{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=
a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}}));a.unblockUI()}))},300)}):a(".ui-collapsible-heading").click(function(b){a.unblockUI();b=a(this).attr("class");var g=d.children[0].accordionheader;if(g){var h=a.utility("getImage",a.utility("tokenizeString",g.closeicon,d));g=a.utility("getImage",a.utility("tokenizeString",g.openicon,d));-1<b.indexOf("ui-collapsible-heading-collapsed")?""!=h?(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class",
"ui-icon"),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":"url("+h+")"}),a("#"+a(this).attr("id")+"  > a > span > span.ui-icon").css({"background-size":"18px 18px"})):a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":""}):""!=g?(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class","ui-icon"),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":"url("+g+")"}),a("#"+a(this).attr("id")+"  > a > span > span.ui-icon").css({"background-size":"18px 18px"})):
a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":""})}})};b.getValue=function(){return""}}function g(d,b,g,l){var h={id:b+"-group-"+l,row:[]};a.each(g.row,function(a,b){h.row.push(new k(d,h.id,b,a,g.flexibleHeight))});h.getHTML=function(){var b="Grouped"==d.children[0].tablestyle?"style='padding:3px;'":"",f="Grouped"==d.children[0].tablestyle?"true":"false",k="";"TableView"===d.type&&d.children[0].accordion?(k=["<div data-role='collapsible' data-collapsed='false'>","<h2 id='",
h.id,"'>",g.header,"</h2>","<ul id='",h.id,"' data-role='listview' data-split-theme='d' data-inset='",f,"' "+b+">"],a.each(h.row,function(a,b){k=k.concat(b.getHTML())}),k=k.concat(["</ul>","<div id='",h.id,"-footer'>","<p class='ui-table-footer-text'>",g.footer,"&nbsp</p>","</div>","</div>"])):(k=["<div id='",h.id,"-header'>",""!==g.header?["<p class='ui-table-header-text'>",g.header,"</p>"].join(""):"","</div>","<ul id='",h.id,"' data-role='listview' data-split-theme='d' data-inset='",f,"' "+b+">"],
a.each(h.row,function(a,b){k=k.concat(b.getHTML())}),k=k.concat(["</ul>","<div id='",h.id,"-footer'>","<p class='ui-table-footer-text'>",g.footer,"&nbsp</p>","</div>"]));return k};h.applyOverrides=function(){"RemoteTableViewList"==d.type&&25<=d.data.contents.length&&(a.fn.center=function(){this.css("position","absolute");this.css("top",(a(window).height()-this.height())/2+a(window).scrollTop()+"px");this.css("left",(a(window).width()-this.width())/2+a(window).scrollLeft()+"px");return this},a.blockUI({css:{backgroundColor:"transparent",
border:"none"},message:'<div class="spinner" style="font-size: 18px;font-weight: bold;color: gray;">Please wait...</div>',baseZ:1500,overlayCSS:{backgroundColor:"#D3D3D3",opacity:.5,cursor:"wait"}}),a(".blockUI.blockMsg").center());"RemoteTableViewList"!==d.type&&"TableViewList"!==d.type&&"DBTableViewList"!==d.type||a.utility("showLoadingIndicator",!0);"Grouped"==d.children.tablestyle&&(a("#"+h.id).css({padding:"2px",border:"1px solid"}),void 0!=h.row[0].backgroundColor&&a("#"+h.id).css({"background-color":a.attributes("color",
h.row[0].backgroundColor).getColorCode()}));a("#"+h.id).css({width:d.width*a.mobileweb.device.aspectWratio,margin:"-17px 0px 0px"});a("#"+h.id+"-header .ui-table-header-text").css({"font-size":16*a.mobileweb.device.aspectratio,"margin-left":10*a.mobileweb.device.aspectWratio});a("#"+h.id+"-footer .ui-table-footer-text").css({"font-size":16*a.mobileweb.device.aspectratio,"margin-left":10*a.mobileweb.device.aspectWratio,"margin-top":1*a.mobileweb.device.aspectHratio});"TableViewList"!==d.type&&"DBTableViewList"!==
d.type&&"RemoteTableViewList"!==d.type||a("#"+h.id+" .ui-icon").css({"z-index":99});var b="RemoteTableViewList"===d.type||"TableViewList"===d.type||"DBTableViewList"===d.type?1250:100;if("DBTableView"==d.type||"RemoteTableView"==d.type){var f=a.utility("getObject",a.mobileweb.pages,"name",d.parent);if(a.isEmptyObject(f)||void 0==f||"DBTableViewList"!=f.type&&"RemoteTableViewList"!=f.type)b=700}setTimeout(function(){if(!1===a.utility("getDelayedChangeCondition",d.name)){0===a("#pagination-container").length&&
a("#"+d.children[0].id).append("<div id='pagination-container'><p id='paginationMsg'></p></div>");-1<h.id.indexOf("ui-more")&&(a.each(h.row,function(a,b){b.applyOverrides()}),setTimeout(function(){"Desktop"===a.mobileweb.device.type?(a(".bglayout").css({height:parseFloat(a(".scroller").find("ul").css("height"))+80+"px"}),a(".scroller").css({height:parseFloat(a(".scroller").find("ul").css("height"))+80+"px"}),a("#iscroll_"+d.name).css({"overflow-y":"scroll","overflow-x":"hidden"})):(d.iscroll={},a("#iscroll_"+
d.name+"> div:nth-child(2)").remove(),d.iscroll=new iScroll(a("#iscroll_"+d.name).get(0),{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}}))},200));var b=a.mobileweb.__NUMREC__;"RemoteTableViewList"===d.type&&(b=a.mobileweb.__PAGENUMREC__);if(0===b){a("#empty_list").css({visibility:"visible"});return}if(d.data&&0!=d.data.contents.length){var f=function(f){a("#pagination-container").bootpag({total:void 0!=
b?Math.ceil(b/f):0,maxVisible:4,page:void 0!=d.selectedPage?d.selectedPage:1,firstLastUse:!0,leaps:!1}).off("page").on("page",function(h,k){var l=f*(k-1);d.selectedPage=k;"RemoteTableViewList"==d.type?(new a.actions(d,null,[{method:"Select",category:"ComAction",params:{servicename:d.data.servicename,table:d.data.tablename,where:d.data.wherecond,order:d.data.order,offset:l,limit:f,fields:""}}])).execute():"DBTableViewList"==d.type&&(new a.actions(d,null,[{method:"Select",category:"DBAction",params:{tablename:d.data.tablename,
where:d.data.wherecond,order:d.data.order,offset:l,limit:f,columns:""}}])).execute();var m=setInterval(function(){d.data.contents.offset==l&&(clearInterval(m),g(),b>=f*k?a("#paginationMsg").html("Showing "+(f*(k-1)+1)+"-"+f*k+" of "+b+" items"):a("#paginationMsg").html("Showing "+(f*(k-1)+1)+"-"+b+" of "+b+" items"))},500)})},g=function(){var b=a("#"+d.children[0].id+" ul").attr("id");a("#"+b+" li").remove();var f=[];f=d.data.contents[0].constructor==Object?d.data.contents:d.data.contents[0];a.createRemoteDBListViewPageRows(d,
function(){var b=0,g=a("#"+d.children[0].id+" ul").attr("id");a.each(f,function(f,h){a.createRow(d,g,d.children[0].group[0].row[f],f,function(g){b+=g.getCellHeight();b+=2;d.children[0].group[0].row[f]=g;a(".scroller").find("ul").first().append(d.children[0].group[0].row[f].getHTML().join(""));d.children[0].group[0].row[f].applyOverrides();d.children[0].group[0].row[f].applyEvents()})});a.utility("showLoadingIndicator",!1);a(".scroller").find("ul").unblock();a(".ui-loader").css({display:"none"});var h=
0;void 0!=a("#iscroll_"+d.name)[0]&&(h=a("#iscroll_"+d.name)[0].clientHeight);0<h&&h<parseFloat(a(".scroller").find("ul").css("height"))?(60>b-parseFloat(a(".scroller").find("ul").css("height"))?(a(".bglayout").css({height:b+60+"px"}),a(".scroller").css({height:b+60+"px"})):(a(".bglayout").css({height:b+"px"}),a(".scroller").css({height:b+"px"})),"Desktop"===a.mobileweb.device.type&&a("#iscroll_"+d.name).css({"overflow-y":"scroll","overflow-x":"hidden"})):(a("#iscroll_"+d.name).css({"overflow-y":"hidden",
"overflow-x":"hidden"}),a(".bglayout").css({height:h+60+"px"}),a(".scroller").css({height:h+60+"px"}));"Desktop"===a.mobileweb.device.type?a("#iscroll_"+d.name).css({"overflow-y":"scroll","overflow-x":"hidden"}):(d.iscroll={},a("#iscroll_"+d.name+"> div:nth-child(2)").remove(),d.iscroll=new iScroll(a("#iscroll_"+d.name).get(0),{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}}));
a.unblockUI()})},k=void 0!==d.data.contents.limit?d.data.contents.limit:25;f(k);g();25<=b?a("#paginationMsg").html("Showing 1-25 of "+b+" items"):a("#paginationMsg").html("Showing 1-"+b+" of "+b+" items");if(0===a("#recordsLength").length){a("#pagination-container").append("<select id='recordsLength'> <option value='10'>10/Page</option><option value='25' selected='selected'>25/Page</option> <option value='50'>50/Page</option></select>");a("#recordsLength").val(k);var l=parseFloat(a("#paginationMsg").css("width"));
d.data.contents.length<k?a(".pagination").css({visibility:"hidden"}):(l=parseFloat(a("#paginationMsg").css("width"))+parseFloat(a(".pagination").css("width"))+5,a(".pagination").css({visibility:"visible"}));a("#recordsLength").css({left:l+"px"});a("#recordsLength").on("change",function(h){var k=parseInt(a("#recordsLength").val());d.data.contents.length<k?a(".pagination").css({visibility:"hidden"}):(l=parseFloat(a("#paginationMsg").css("width"))+parseFloat(a(".pagination").css("width"))+5,a(".pagination").css({visibility:"visible"}));
a("#recordsLength").css({left:l+"px"});"RemoteTableViewList"==d.type?(new a.actions(d,null,[{method:"Select",category:"ComAction",params:{servicename:d.data.servicename,table:d.data.tablename,where:d.data.wherecond,order:d.data.order,offset:0,limit:k,fields:""}}])).execute():"DBTableViewList"==d.type&&(new a.actions(d,null,[{method:"Select",category:"DBAction",params:{tablename:d.data.tablename,where:d.data.wherecond,order:d.data.order,offset:0,limit:k,columns:""}}])).execute();var m=setInterval(function(){0==
d.data.contents.offset&&(clearInterval(m),f(k),g(),b>=k?a("#paginationMsg").html("Showing 1-"+k+" of "+b+" items"):a("#paginationMsg").html("Showing 1-"+b+" of "+b+" items"))},500)})}else l=parseFloat(a("#paginationMsg").css("width")),d.data.contents.length<k?a(".pagination").css({visibility:"hidden"}):(l=parseFloat(a("#paginationMsg").css("width"))+parseFloat(a(".pagination").css("width"))+5,a(".pagination").css({visibility:"visible"})),a("#recordsLength").css({left:l+"px"})}setTimeout(function(){a(".ui-table-position").css({visibility:"visible"})},
500);d.data&&0===d.data.contents.length&&a("#empty_list").css({visibility:"visible"})}else setTimeout(function(){a.utility("setDelayedChangeCondition",d.name,!1)},300);a("#showmore").css({visibility:"visible"});"RemoteTableViewList"!==d.type&&"TableViewList"!==d.type&&"DBTableViewList"!==d.type||a.utility("showLoadingIndicator",!1);"RemoteTableViewList"!==d.type||a.utility("getDelayedChangeCondition",d.name)||a.unblockUI();"TableViewList"!==d.type&&"DBTableView"!==d.type&&"DBTableViewList"!==d.type&&
"RemoteTableViewList"!==d.type||"Grouped"!=d.children[0].tablestyle||a("#"+h.id).css({width:(d.width-40)*a.mobileweb.device.aspectWratio,"margin-right":20*a.mobileweb.device.aspectWratio,"margin-left":20*a.mobileweb.device.aspectWratio});if("TableView"===d.type){var m=a.mobileweb.device.aspectratio;k=2*a("#"+h.id).css("padding").replace("px","");if(d.children[0].accordion){a("div[data-role='collapsible']").css({width:d.width*a.mobileweb.device.aspectWratio,"margin-top":"0px","margin-bottom":4*a.mobileweb.device.aspectHratio});
a(".ui-collapsible-content").css({padding:"0px 0px 0px"});a(".ui-collapsible-content > .ui-listview").css({margin:"0px 0px 0px"});a(".ui-collapsible-heading-toggle").css({"border-radius":"1px"});var p=d.children[0].accordionheader;p&&(a(".ui-collapsible-heading-toggle").css({background:a.attributes("color",p.bgcolor).getColorCode(),color:a.attributes("color",p.textcolor).getColorCode()}),a(".ui-collapsible-heading-toggle").css({height:p.height*a.mobileweb.device.aspectHratio,padding:"0px 0px 0px"}),
a(".ui-collapsible-heading-toggle > span").css({height:p.height*a.mobileweb.device.aspectHratio,padding:"0px 0px 0px"}),a(".ui-collapsible-heading-toggle > span > span.ui-btn-text").css({"font-size":16*m,top:(p.height-16)*a.mobileweb.device.aspectHratio/2}),"right"==p.iconposition?(a(".ui-collapsible-heading-toggle > span").css({"padding-left":"12px"}),a(".ui-collapsible-heading-toggle > span > span.ui-icon").css({right:"10px",left:"auto"})):a(".ui-collapsible-heading-toggle > span").css({"padding-left":"40px"}),
p.openicon&&(a(".ui-collapsible-heading > a > span > span.ui-icon").attr("class","ui-icon"),m=a.utility("getImage",a.utility("tokenizeString",p.openicon,d)),a(".ui-collapsible-heading > a > span > span.ui-icon").css({"background-image":"url("+m+")"}),a(".ui-collapsible-heading > a > span > span.ui-icon").css({"background-size":"18px 18px"})));"Grouped"!=d.children[0].tablestyle&&(k=0);a("#"+h.id).css({width:d.width*a.mobileweb.device.aspectWratio-k,margin:"0px"})}else"Grouped"!=d.children[0].tablestyle&&
(k=0),a("#"+h.id).css({width:d.width*a.mobileweb.device.aspectWratio-k+"px","margin-left":"0px"})}"DBTableView"!==d.type&&"DBTableViewList"!==d.type&&"RemoteTableView"!==d.type&&"RemoteTableViewList"!==d.type||void 0==a("#iscroll_"+d.name)[0]||(k=a("#iscroll_"+d.name)[0].clientHeight,0<k&&k<parseFloat(a(".scroller").find("ul").css("height"))?(a(".bglayout").css({height:parseFloat(a(".scroller").find("ul").css("height"))+100+"px"}),a(".scroller").css({height:parseFloat(a(".scroller").find("ul").css("height"))+
100+"px"}),"Desktop"===a.mobileweb.device.type?(a("#iscroll_"+d.name).css({"overflow-y":"scroll","overflow-x":"hidden"}),k=a('<style>$("#iscroll_" '+d.name+")::-webkit-scrollbar-track{-webkit-box-shadow: inset 0 0 16px rgba(,1);border-radius: 10px;background-color: #F5F5F5;}</style>"),a("html > head").append(k),k=a('<style>$("#iscroll_" '+d.name+")::-webkit-scrollbar{width: 7px;background-color: #F5F5F5;}</style>"),a("html > head").append(k),k=a('<style>$("#iscroll_" '+d.name+")::-webkit-scrollbar-thumb{border-radius: 10px;-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);background-color: #808080;}</style>"),
a("html > head").append(k)):(d.iscroll={},a("#iscroll_"+d.name+"> div:nth-child(2)").remove(),d.iscroll=new iScroll(a("#iscroll_"+d.name).get(0),{bounceLock:!0,onScrollEnd:function(){curScrollPos=a(this).get(0).y;a.utility("setSessionData",{page_name:d.name,x:curScrollPos},"offset")},onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}}))):(a(".bglayout").css({height:k+60+"px"}),a(".scroller").css({height:k+
60+"px"})))},b)};h.applyEvents=function(){a.each(h.row,function(a,b){b.applyEvents()})};return h}function k(d,b,g,k,l){var h={id:b+"-row-"+k,rownum:g.rownum,backgroundColor:g.backgroundColor,repeatImage:g.repeatImage,isFlexible:l,selected:!1};if(a.utility("isReverseTransition")){var f;"SplitView"==a.mobileweb.getCurrentPage().getViewType()?a.each(a.mobileweb.getCurrentPage().children,function(a,b){b.getId()===d.name&&(f=b)}):f=a.mobileweb.getCurrentPage();if(f.children[0].group[0].row.length!=d.children[0].group[0].row.length)h.children=
new a.uichildren(d,g.children,g.data.contents[0]);else if("RemoteTableViewList"===d.type)h.children=new a.uichildren(d,g.children,g.data.contents[0]);else if(void 0!=f){var p;void 0!=f.children&&void 0!=f.children[0]&&(p=f.children[0].group[0].row[g.rownum]);h.children=void 0!=p?p.children:[]}else h.children=[]}else h.children=new a.uichildren(d,g.children,g.data.contents[0]);0===h.rownum%2?(h.cellBackgroundColor=g.oddRowBackgroundColor,h.cellBackgroundImage=g.oddRowBackgroundImage):(h.cellBackgroundColor=
g.evenRowBackgroundColor,h.cellBackgroundImage=g.evenRowBackgroundImage);h.getHTML=function(){return 0<h.children.length?["<li data-icon='",g.icon.style,"'>","<a href='#' data-item='",g.icon.style,"'id='",h.id,"' class='ui-table-padding'>","<div class='ui-table-row-size' style='visibility:hidden'>",h.children.getHTML(),"</div>","</a>",g.icon.events?["<div id='",h.id,"-icon'></div>"].join(""):"","</li>"]:[]};h.applyOverrides=function(){h.setCellHeight(g.rowsize);0<h.children.length&&(a.utility("setReverseTransition",
!1),h.children.applyOverrides(),a.utility("setReverseTransition",!0),h.children.applyEvents());a("#"+h.id+" .ui-table-row-size").css({visibility:"visible"});a("#"+h.id).data("item",g.data.contents[0]);a(".ui-li").css({"border-top-width":"0px","border-bottom-width":"0px"});void 0!=h.backgroundColor&&(a("#"+h.id).css({"background-color":a.attributes("color",h.backgroundColor).getColorCode()}),a(".ui-li>.ui-btn-inner").css({"background-color":a.attributes("color",h.backgroundColor).getColorCode()}));
void 0!=h.cellBackgroundColor&&a("#"+h.id).css({"background-color":a.attributes("color",h.cellBackgroundColor).getColorCode()});void 0!=h.cellBackgroundImage&&""!=h.cellBackgroundImage&&(h.repeatImage?a("#"+h.id).css({"z-index":99,"background-image":"url("+a.utility("getImage",h.cellBackgroundImage)+")","background-color":"white","background-position":"100% 100%","background-repeat":"repeat"}):a("#"+h.id).css({"z-index":99,"background-image":"url("+a.utility("getImage",h.cellBackgroundImage)+")",
"background-color":"white","background-position":"100% 100%","background-size":"cover"}));if("button"==g.icon.style)a("#"+h.id).parent().siblings().css({"z-index":199,"background-image":"url("+a.utility("getSystemImage","button.png",h.getViewType())+")","background-color":"white","background-position":" 50% 50%","background-repeat":"no-repeat no-repeat"});else if("false"!=g.icon.style&&(a("#"+h.id).parent().siblings().css({"z-index":199}),"arrow-r"==g.icon.style)){var b=a.utility("getSystemImage",
"icons-18-white.png","Image");a("#"+h.id).parent().siblings().css({"background-image":'url("'+b+'")',"background-repeat":"no-repeat no-repeat"})}g.icon.events&&a("#"+h.id+"-icon").css({position:"absolute",top:0,left:d.width*a.mobileweb.device.aspectWratio-40,height:g.rowsize*a.mobileweb.device.aspectHratio,width:40});var f=[];a.each(h.children,function(a,b){h.isFlexible&&"TextArea"===b.getViewType()&&b.flexibleHeight&&h.setFlexibleHeight(b,f)})};h.setFlexibleHeight=function(b,f){a("#"+b.getId()).addClass("autoExpand");
a("#"+b.getId()).css({height:"initial","max-height":"",overflow:"hidden"});var d=h.getCellHeight()-(parseInt(b.frame.getFrame().y)+parseInt(b.frame.getFrame().height))*a.mobileweb.device.aspectHratio;a("#"+b.getId()).css({bottom:d+"px"});d=document.getElementById(b.getId());if(null!=d){var g=parseInt(window.getComputedStyle(d).height,10)-d.clientHeight;d.style.height=0;g=Math.max(d.scrollHeight,d.scrollHeight+g);d.style.height=g+"px";b=h.getCellHeight()-parseInt(b.frame.getFrame().height)*a.mobileweb.device.aspectHratio+
g;var k,l,m;a.each(h.children,function(a,b){"TextArea"===b.getViewType()&&(k=parseInt(b.frame.getFrame().x),l=parseInt(b.frame.getFrame().y),m=parseInt(b.frame.getFrame().height))});a.each(h.children,function(b,f){"TextArea"!=f.getViewType()&&(parseInt(f.frame.getFrame().y)>=l+m?(b=h.getCellHeight()-(parseInt(f.frame.getFrame().y)+parseInt(f.frame.getFrame().height))*a.mobileweb.device.aspectHratio,a("#"+f.getId()).css({top:""}),a("#"+f.getId()+"_p").css({top:""}),a("#"+f.getId()).css({bottom:b}),
a("#"+f.getId()+"_p").css({bottom:b})):parseInt(f.frame.getFrame().y)>=l&&parseInt(f.frame.getFrame().x)>=k&&(b=h.getCellHeight()-(parseInt(f.frame.getFrame().y)+parseInt(f.frame.getFrame().height))*a.mobileweb.device.aspectHratio,a("#"+f.getId()).css({top:""}),a("#"+f.getId()).css({bottom:b})))});f.push(b);b=Math.max.apply(Math,f);a("#"+h.id).css({height:b+"px"})}};h.setCellHeight=function(b){h.isFlexible||(g.rowsize=b,a("#"+h.id+" .ui-table-row-size").css({height:b*a.mobileweb.device.aspectHratio}))};
h.getCellHeight=function(){return g.rowsize*a.mobileweb.device.aspectHratio};var q;h.setSelected=function(a){h.selected=a;q=h.rownum;console.log(h.id,"selected ---\x3e>",h.selected)};h.getSelected=function(){return q};h.applyEvents=function(){var b=!1,f=!1;g.icon.events&&g.icon.events.Tap&&a("#"+h.id+"-icon").click(function(){void 0!=d.data&&(d.data.contents.currentRow=h.rownum);a.each(g.icon.events.Tap,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")});(new a.actions(d,
h,g.icon.events.Tap.slice())).execute()});0==g.events.Tap.length&&(a("#"+h.id).removeClass("ui-focus"),a("#"+h.id).mouseup(function(){var b=setInterval(function(){clearInterval(b);a("#"+h.id).blur()},200)}));if(g.events){g.events.Tap&&a("#"+h.id).click(function(f){void 0!=d.data&&(d.data.contents.currentRow=h.rownum);if(b)b=!1,clearTimeout(alreadyclickedTimeout);else if(b=!0,alreadyclickedTimeout=setTimeout(function(){b=!1},300),"INPUT"!==f.target.tagName)if("LABEL"===f.target.tagName)0<f.target.htmlFor.length||
(a.each(g.events.Tap,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.Tap).slice()))).execute());else{a.each(g.events.Tap,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")});var k=!0;"TEXTAREA"!==f.target.tagName||f.target.readOnly||(k=!1);"IMG"===f.target.tagName&&"draggable"===f.target.className&&(k=!1);"ui-btn-text"===f.target.className&&(k=!1);k&&(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.Tap).slice()))).execute()}});
if(g.events.flickRL)a("#"+h.id).on("swipeleft",function(b){void 0!=d.data&&(d.data.contents.currentRow=h.rownum);if(f)f=!1,clearTimeout(alreadySwipedTimeout);else if(f=!0,alreadySwipedTimeout=setTimeout(function(){f=!1},300),"INPUT"!==b.target.tagName)if("LABEL"===b.target.tagName)0<b.target.htmlFor.length||(a.each(g.events.flickRL,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.flickRL).slice()))).execute());else{a.each(g.events.flickRL,
function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")});var k=!0;"TEXTAREA"!==b.target.tagName||b.target.readOnly||(k=!1);"IMG"===b.target.tagName&&"draggable"===b.target.className&&(k=!1);k&&(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.flickRL).slice()))).execute()}});if(g.events.flickLR)a("#"+h.id).on("swiperight",function(b){void 0!=d.data&&(d.data.contents.currentRow=h.rownum);if(f)f=!1,clearTimeout(alreadySwipedTimeout);else if(f=!0,alreadySwipedTimeout=setTimeout(function(){f=
!1},300),"INPUT"!==b.target.tagName)if("LABEL"===b.target.tagName)0<b.target.htmlFor.length||(a.each(g.events.flickLR,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.flickLR).slice()))).execute());else{a.each(g.events.flickLR,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")});var k=!0;"TEXTAREA"!==b.target.tagName||b.target.readOnly||(k=!1);"IMG"===b.target.tagName&&"draggable"===b.target.className&&
(k=!1);k&&(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.flickLR).slice()))).execute()}})}};h.getId=function(){return h.id};h.getName=function(){return h.name};h.getViewType=function(){return"Row"};return h}a.uitable=function(a,b){var d={};new l(a,d,b);return d}})(jQuery);/*
 iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 Released under MIT license, http://cubiq.org/license
*/
(function(a,l){function g(a){if(""===b)return a;a=a.charAt(0).toUpperCase()+a.substr(1);return b+a}var k=Math,d=l.createElement("div").style,b=function(){for(var a=["t","webkitT","MozT","msT","OT"],b,f=0,g=a.length;f<g;f++)if(b=a[f]+"ransform",b in d)return a[f].substr(0,a[f].length-1);return!1}(),h=b?"-"+b.toLowerCase()+"-":"",q=g("transform"),p=g("transitionProperty"),m=g("transitionDuration"),f=g("transformOrigin"),u=g("transitionTimingFunction"),w=g("transitionDelay"),y=/android/gi.test(navigator.appVersion),
A=/iphone|ipad/gi.test(navigator.appVersion),G=/hp-tablet/gi.test(navigator.appVersion),E=g("perspective")in d,C="ontouchstart"in a&&!G,L=!1!==b,Q=g("transition")in d,W="onorientationchange"in a?"orientationchange":"resize",J=C?"touchstart":"mousedown",R=C?"touchmove":"mousemove",B=C?"touchend":"mouseup",S=C?"touchcancel":"mouseup",N=!1===b?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[b],V=function(){return a.requestAnimationFrame||
a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),H=a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout,P=E?" translateZ(0)":"";G=function(b,d){var g=this,k;g.wrapper="object"==typeof b?b:l.getElementById(b);g.wrapper.style.overflow="hidden";
g.scroller=g.wrapper.children[0];g.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:y,hideScrollbar:A,fadeScrollbar:A&&E,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,
onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(k in d)g.options[k]=d[k];g.x=g.options.x;g.y=g.options.y;g.options.useTransform=L&&g.options.useTransform;g.options.hScrollbar=g.options.hScroll&&g.options.hScrollbar;g.options.vScrollbar=g.options.vScroll&&g.options.vScrollbar;g.options.zoom=g.options.useTransform&&g.options.zoom;g.options.useTransition=Q&&g.options.useTransition;g.options.zoom&&y&&(P="");g.scroller.style[p]=
g.options.useTransform?h+"transform":"top left";g.scroller.style[m]="0";g.scroller.style[f]="0 0";g.options.useTransition&&(g.scroller.style[u]="cubic-bezier(0.33,0.66,0.66,1)");g.options.useTransform?g.scroller.style[q]="translate("+g.x+"px,"+g.y+"px)"+P:g.scroller.style.cssText+=";position:absolute;top:"+g.y+"px;left:"+g.x+"px";g.options.useTransition&&(g.options.fixedScrollbar=!0);g.refresh();g._bind(W,a);g._bind(J);C||"none"==g.options.wheelAction||(g._bind("DOMMouseScroll"),g._bind("mousewheel"));
g.options.checkDOMChanges&&(g.checkDOMTime=setInterval(function(){g._checkDOMChanges()},500))};G.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(b){switch(b.type){case J:if(!C&&0!==b.button)break;if(!C&&10<=$(a).outerWidth()-b.clientX)break;this._start(b);break;case R:this._move(b);break;case B:case S:this._end(b);break;case W:this._resize();break;case "DOMMouseScroll":case "mousewheel":if(void 0!=b.currentTarget.offsetParent){var f=
b.currentTarget.offsetParent.id.replace("iscroll_","");if($("#iscroll_"+f)[0].clientHeight>parseFloat($(".scroller").find("ul").css("height")))break;if("Desktop"===$.mobileweb.device.type&&$("#iscroll_"+f)[0].clientHeight<parseFloat($(".scroller").find("ul").css("height")))break}this._wheel(b);break;case N:this._transitionEnd(b)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||
this.refresh()},_scrollbar:function(a){if(this[a+"Scrollbar"]){if(!this[a+"ScrollbarWrapper"]){var b=l.createElement("div");this.options.scrollbarClass?b.className=this.options.scrollbarClass+a.toUpperCase():b.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px");b.style.cssText+=";pointer-events:none;"+h+"transition-property:opacity;"+h+"transition-duration:"+
(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1");this.wrapper.appendChild(b);this[a+"ScrollbarWrapper"]=b;b=l.createElement("div");this.options.scrollbarClass||(b.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+h+"background-clip:padding-box;"+h+"box-sizing:border-box;"+("h"==a?"height:100%":"width:100%")+";"+h+"border-radius:3px;border-radius:3px");b.style.cssText+=";pointer-events:none;"+
h+"transition-property:"+h+"transform;"+h+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+h+"transition-duration:0;"+h+"transform: translate(0,0)"+P;this.options.useTransition&&(b.style.cssText+=";"+h+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)");this[a+"ScrollbarWrapper"].appendChild(b);this[a+"ScrollbarIndicator"]=b}"h"==a?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=k.max(k.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),
8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=k.max(k.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,
this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY);this._scrollbarPos(a,!0)}else this[a+"ScrollbarWrapper"]&&(L&&(this[a+"ScrollbarIndicator"].style[q]=""),this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},y?200:0)},_pos:function(a,b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[q]=
"translate("+a+"px,"+b+"px) scale("+this.scale+")"+P:(a=k.round(a),b=k.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){b="h"==a?this.x:this.y;this[a+"Scrollbar"]&&(b*=this[a+"ScrollbarProp"],0>b?(this.options.fixedScrollbar||(b=this[a+"ScrollbarIndicatorSize"]+k.round(3*b),8>b&&(b=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=b+"px"),b=0):b>this[a+"ScrollbarMaxScroll"]&&
(this.options.fixedScrollbar?b=this[a+"ScrollbarMaxScroll"]:(b=this[a+"ScrollbarIndicatorSize"]-k.round(3*(b-this[a+"ScrollbarMaxScroll"])),8>b&&(b=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=b+"px",b=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-b))),this[a+"ScrollbarWrapper"].style[w]="0",this[a+"ScrollbarIndicator"].style[q]="translate("+("h"==a?b+"px,0)":"0,"+b+"px)")+P)},_start:function(b){var f=C?b.touches[0]:b;if(this.enabled){this.options.onBeforeScrollStart&&
this.options.onBeforeScrollStart.call(this,b);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.zoom&&C&&1<b.touches.length){var d=k.abs(b.touches[0].pageX-b.touches[1].pageX);var g=k.abs(b.touches[0].pageY-b.touches[1].pageY);this.touchesDistStart=k.sqrt(d*d+g*g);this.originX=k.abs(b.touches[0].pageX+b.touches[1].pageX-2*this.wrapperOffsetLeft)/2-
this.x;this.originY=k.abs(b.touches[0].pageY+b.touches[1].pageY-2*this.wrapperOffsetTop)/2-this.y;this.options.onZoomStart&&this.options.onZoomStart.call(this,b)}this.options.momentum&&(this.options.useTransform?(g=getComputedStyle(this.scroller,null)[q].replace(/[^0-9\-.,]/g,"").split(","),d=+(g[12]||g[4]),g=+(g[13]||g[5])):(d=+getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),g=+getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),d!=this.x||g!=this.y)&&(this.options.useTransition?
this._unbind(N):H(this.aniTime),this.steps=[],this._pos(d,g),this.options.onScrollEnd&&this.options.onScrollEnd.call(this));this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=f.pageX;this.pointY=f.pageY;this.startTime=b.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,b);this._bind(R,a);this._bind(B,a);this._bind(S,a)}},_move:function(a){var b=C?a.touches[0]:a,f=b.pageX-this.pointX,d=b.pageY-this.pointY,g=this.x+f,h=
this.y+d,l=a.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,a);if(this.options.zoom&&C&&1<a.touches.length)g=k.abs(a.touches[0].pageX-a.touches[1].pageX),h=k.abs(a.touches[0].pageY-a.touches[1].pageY),this.touchesDist=k.sqrt(g*g+h*h),this.zoomed=!0,b=1/this.touchesDistStart*this.touchesDist*this.scale,b<this.options.zoomMin?b=.5*this.options.zoomMin*Math.pow(2,b/this.options.zoomMin):b>this.options.zoomMax&&(b=2*this.options.zoomMax*Math.pow(.5,this.options.zoomMax/
b)),this.lastScale=b/this.scale,g=this.originX-this.originX*this.lastScale+this.x,h=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[q]="translate("+g+"px,"+h+"px) scale("+b+")"+P,this.options.onZoom&&this.options.onZoom.call(this,a);else{this.pointX=b.pageX;this.pointY=b.pageY;if(0<g||g<this.maxScrollX)g=this.options.bounce?this.x+f/2:0<=g||0<=this.maxScrollX?0:this.maxScrollX;if(h>this.minScrollY||h<this.maxScrollY)h=this.options.bounce?this.y+d/2:h>=this.minScrollY||0<=this.maxScrollY?
this.minScrollY:this.maxScrollY;this.distX+=f;this.distY+=d;this.absDistX=k.abs(this.distX);this.absDistY=k.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(h=this.y,d=0):this.absDistY>this.absDistX+5&&(g=this.x,f=0)),this.moved=!0,this._pos(g,h),this.dirX=0<f?-1:0>f?1:0,this.dirY=0<d?-1:0>d?1:0,300<l-this.startTime&&(this.startTime=l,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,
a))}},_end:function(b){if(!C||0===b.touches.length){var f=this,d=C?b.changedTouches[0]:b,g,h,p={dist:0,time:0},u={dist:0,time:0},w=(b.timeStamp||Date.now())-f.startTime,c=f.x,t=f.y;f._unbind(R,a);f._unbind(B,a);f._unbind(S,a);f.options.onBeforeScrollEnd&&f.options.onBeforeScrollEnd.call(f,b);if(f.zoomed)c=f.scale*f.lastScale,c=Math.max(f.options.zoomMin,c),c=Math.min(f.options.zoomMax,c),f.lastScale=c/f.scale,f.scale=c,f.x=f.originX-f.originX*f.lastScale+f.x,f.y=f.originY-f.originY*f.lastScale+f.y,
f.scroller.style[m]="200ms",f.scroller.style[q]="translate("+f.x+"px,"+f.y+"px) scale("+f.scale+")"+P,f.zoomed=!1,f.refresh(),f.options.onZoomEnd&&f.options.onZoomEnd.call(f,b);else{if(f.moved){if(300>w&&f.options.momentum){p=c?f._momentum(c-f.startX,w,-f.x,f.scrollerW-f.wrapperW+f.x,f.options.bounce?f.wrapperW:0):p;u=t?f._momentum(t-f.startY,w,-f.y,0>f.maxScrollY?f.scrollerH-f.wrapperH+f.y-f.minScrollY:0,f.options.bounce?f.wrapperH:0):u;c=f.x+p.dist;t=f.y+u.dist;if(0<f.x&&0<c||f.x<f.maxScrollX&&
c<f.maxScrollX)p={dist:0,time:0};if(f.y>f.minScrollY&&t>f.minScrollY||f.y<f.maxScrollY&&t<f.maxScrollY)u={dist:0,time:0}}p.dist||u.dist?(p=k.max(k.max(p.time,u.time),10),f.options.snap&&(u=c-f.absStartX,w=t-f.absStartY,k.abs(u)<f.options.snapThreshold&&k.abs(w)<f.options.snapThreshold?f.scrollTo(f.absStartX,f.absStartY,200):(u=f._snap(c,t),c=u.x,t=u.y,p=k.max(u.time,p))),f.scrollTo(k.round(c),k.round(t),p)):f.options.snap?(u=c-f.absStartX,w=t-f.absStartY,k.abs(u)<f.options.snapThreshold&&k.abs(w)<
f.options.snapThreshold?f.scrollTo(f.absStartX,f.absStartY,200):(u=f._snap(f.x,f.y),u.x==f.x&&u.y==f.y||f.scrollTo(u.x,u.y,u.time))):f._resetPos(200)}else C&&(f.doubleTapTimer&&f.options.zoom?(clearTimeout(f.doubleTapTimer),f.doubleTapTimer=null,f.options.onZoomStart&&f.options.onZoomStart.call(f,b),f.zoom(f.pointX,f.pointY,1==f.scale?f.options.doubleTapZoom:1),f.options.onZoomEnd&&setTimeout(function(){f.options.onZoomEnd.call(f,b)},200)):this.options.handleClick&&(f.doubleTapTimer=setTimeout(function(){f.doubleTapTimer=
null;for(g=d.target;1!=g.nodeType;)g=g.parentNode;"SELECT"!=g.tagName&&"INPUT"!=g.tagName&&"TEXTAREA"!=g.tagName&&(h=l.createEvent("MouseEvents"),h.initMouseEvent("click",!0,!0,b.view,1,d.screenX,d.screenY,d.clientX,d.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null),h._fake=!0,g.dispatchEvent(h))},f.options.zoom?250:0))),f._resetPos(400);f.options.onTouchEnd&&f.options.onTouchEnd.call(f,b)}}},_resetPos:function(a){var f=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,d=this.y>=this.minScrollY||
0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;f==this.x&&d==this.y?(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==b&&(this.hScrollbarWrapper.style[w]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar&&("webkit"==b&&(this.vScrollbarWrapper.style[w]="300ms"),this.vScrollbarWrapper.style.opacity="0")):this.scrollTo(f,d,a||0)},
_wheel:function(a){var b=this;if("wheelDeltaX"in a){var f=a.wheelDeltaX/12;var d=a.wheelDeltaY/12}else if("wheelDelta"in a)f=d=a.wheelDelta/12;else if("detail"in a)f=d=3*-a.detail;else return;"zoom"==b.options.wheelAction?(d=b.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0)),d<b.options.zoomMin&&(d=b.options.zoomMin),d>b.options.zoomMax&&(d=b.options.zoomMax),d!=b.scale&&(!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,d,400),setTimeout(function(){b.wheelZoomCount--;
!b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400))):(f=b.x+f,d=b.y+d,0<f?f=0:f<b.maxScrollX&&(f=b.maxScrollX),d>b.minScrollY?d=b.minScrollY:d<b.maxScrollY&&(d=b.maxScrollY),0>b.maxScrollY&&b.scrollTo(f,d,0))},_transitionEnd:function(a){a.target==this.scroller&&(this._unbind(N),this._startAni())},_startAni:function(){var a=this,b=a.x,f=a.y,d=Date.now(),g;if(!a.animating)if(a.steps.length){var h=a.steps.shift();h.x==b&&h.y==f&&(h.time=0);a.animating=!0;a.moved=!0;if(a.options.useTransition)a._transitionTime(h.time),
a._pos(h.x,h.y),a.animating=!1,h.time?a._bind(N):a._resetPos(0);else{var l=function(){var m=Date.now();m>=d+h.time?(a._pos(h.x,h.y),a.animating=!1,a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a),a._startAni()):(m=(m-d)/h.time-1,g=k.sqrt(1-m*m),m=(h.x-b)*g+b,a._pos(m,(h.y-f)*g+f),a.animating&&(a.aniTime=V(l)))};l()}}else a._resetPos(400)},_transitionTime:function(a){a+="ms";this.scroller.style[m]=a;this.hScrollbar&&(this.hScrollbarIndicator.style[m]=a);this.vScrollbar&&(this.vScrollbarIndicator.style[m]=
a)},_momentum:function(a,b,f,d,g){b=k.abs(a)/b;var h=b*b/.0012;0<a&&h>f?(f+=g/(6/(h/b*6E-4)),b=b*f/h,h=f):0>a&&h>d&&(d+=g/(6/(h/b*6E-4)),b=b*d/h,h=d);return{dist:h*(0>a?-1:1),time:k.round(b/6E-4)}},_offset:function(a){for(var b=-a.offsetLeft,f=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,f-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,f*=this.scale);return{left:b,top:f}},_snap:function(a,b){var f;var d=this.pagesX.length-1;var g=0;for(f=this.pagesX.length;g<f;g++)if(a>=this.pagesX[g]){d=g;break}d==
this.currPageX&&0<d&&0>this.dirX&&d--;a=this.pagesX[d];f=(f=k.abs(a-this.pagesX[this.currPageX]))?k.abs(this.x-a)/f*500:0;this.currPageX=d;d=this.pagesY.length-1;for(g=0;g<d;g++)if(b>=this.pagesY[g]){d=g;break}d==this.currPageY&&0<d&&0>this.dirY&&d--;b=this.pagesY[d];g=(g=k.abs(b-this.pagesY[this.currPageY]))?k.abs(this.y-b)/g*500:0;this.currPageY=d;d=k.round(k.max(f,g))||200;return{x:a,y:b,time:d}},_bind:function(a,b,f){(b||this.scroller).addEventListener(a,this,!!f)},_unbind:function(a,b,f){(b||
this.scroller).removeEventListener(a,this,!!f)},destroy:function(){this.scroller.style[q]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(W,a);this._unbind(J);this._unbind(R,a);this._unbind(B,a);this._unbind(S,a);this.options.hasTouch||(this._unbind("DOMMouseScroll"),this._unbind("mousewheel"));this.options.useTransition&&this._unbind(N);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},
refresh:function(){var a=0;var b=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=k.round(this.scroller.offsetWidth*this.scale);this.scrollerH=k.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&
this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;var f=this._offset(this.wrapper);this.wrapperOffsetLeft=-f.left;this.wrapperOffsetTop=-f.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=[];var d=this.scroller.querySelectorAll(this.options.snap);
f=0;for(b=d.length;f<b;f++)a=this._offset(d[f]),a.left+=this.wrapperOffsetLeft,a.top+=this.wrapperOffsetTop,this.pagesX[f]=a.left<this.maxScrollX?this.maxScrollX:a.left*this.scale,this.pagesY[f]=a.top<this.maxScrollY?this.maxScrollY:a.top*this.scale}else if(this.options.snap){for(this.pagesX=[];a>=this.maxScrollX;)this.pagesX[b]=a,a-=this.wrapperW,b++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);
b=a=0;for(this.pagesY=[];a>=this.maxScrollY;)this.pagesY[b]=a,a-=this.wrapperH,b++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[m]="0",this._resetPos(400))},scrollTo:function(a,b,f,d){var g=a;this.stop();g.length||(g=[{x:a,y:b,time:f,relative:d}]);a=0;for(b=g.length;a<b;a++)g[a].relative&&(g[a].x=this.x-g[a].x,g[a].y=this.y-
g[a].y),this.steps.push({x:g[a].x,y:g[a].y,time:g[a].time||0});this._startAni()},scrollToElement:function(a,b){if(a=a.nodeType?a:this.scroller.querySelector(a))a=this._offset(a),a.left+=this.wrapperOffsetLeft,a.top+=this.wrapperOffsetTop,a.left=0<a.left?0:a.left<this.maxScrollX?this.maxScrollX:a.left,a.top=a.top>this.minScrollY?this.minScrollY:a.top<this.maxScrollY?this.maxScrollY:a.top,b=void 0===b?k.max(2*k.abs(a.left),2*k.abs(a.top)):b,this.scrollTo(a.left,a.top,b)},scrollToPage:function(a,b,f){f=
void 0===f?400:f;this.options.onScrollStart&&this.options.onScrollStart.call(this);this.options.snap?(a="next"==a?this.currPageX+1:"prev"==a?this.currPageX-1:a,b="next"==b?this.currPageY+1:"prev"==b?this.currPageY-1:b,a=0>a?0:a>this.pagesX.length-1?this.pagesX.length-1:a,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b]):(a*=-this.wrapperW,b*=-this.wrapperH,a<this.maxScrollX&&(a=this.maxScrollX),b<this.maxScrollY&&(b=this.maxScrollY));
this.scrollTo(a,b,f)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(R,a);this._unbind(B,a);this._unbind(S,a)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(N):H(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(a,b,f,d){var g=f/this.scale;this.options.useTransform&&(this.zoomed=!0,d=void 0===d?200:d,a=a-this.wrapperOffsetLeft-this.x,b=b-this.wrapperOffsetTop-this.y,this.x=a-a*g+this.x,this.y=b-b*g+this.y,
this.scale=f,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[m]=d+"ms",this.scroller.style[q]="translate("+this.x+"px,"+this.y+"px) scale("+f+")"+P,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};d=null;"undefined"!==typeof exports?exports.iScroll=G:a.iScroll=G})(window,document);function Rotate(a,l,g,k){var d=[];switch(k){case 90:for(k=0;k<4*l;k+=4)for(var b=4*l*(g-1);0<=b;b-=4*l)d.push(a[k+b]),d.push(a[k+b+1]),d.push(a[k+b+2]),d.push(a[k+b+3]);break;case -90:for(k=4*l-4;0<=k;k-=4)for(b=0;b<a.length;b+=4*l)d.push(a[k+b]),d.push(a[k+b+1]),d.push(a[k+b+2]),d.push(a[k+b+3]);break;case 180:for(b=4*l*(g-1);0<=b;b-=4*l)for(k=4*l-4;0<=k;k-=4)d.push(a[k+b]),d.push(a[k+b+1]),d.push(a[k+b+2]),d.push(a[k+b+3])}return new Uint8ClampedArray(d)}
function BoxFilter(a,l,g){for(var k=[],d=[],b=0;b<l;b++){k.push([]);d.push(0);for(var h=0;h<(g+1)*l;h+=l)k[k.length-1].push(a[b+h]),d[d.length-1]+=a[b+h]}var q=[];for(h=0;h<a.length;h+=l){for(b=0;b<l;b++){for(var p=0,m=0,f=b;0<=f&&(p+=d[f],m++,m!=g+1);f--);var u=0;for(f=b+1;f<l&&(p+=d[f],m++,u++,u!=g);f++);m*=k[0].length;p/=m;q.push(p)}if(0<=h-g*l)for(f=0;f<k.length;f++)b=k[f].shift(),d[f]-=b;if(h+(g+1)*l<a.length)for(f=0;f<k.length;f++)b=a[f+h+(g+1)*l],k[f].push(b),d[f]+=b}return q}
function Scale(a,l,g){g=[];for(var k=0;k<a.length;k+=8*l)for(var d=0;d<4*l;d+=8)g.push((a[k+d]+a[k+d+4]+a[k+4*l+d]+a[k+4*l+d+4])/4),g.push((a[k+d+1]+a[k+d+4+1]+a[k+4*l+d+1]+a[k+4*l+d+4+1])/4),g.push((a[k+d+2]+a[k+d+4+2]+a[k+4*l+d+2]+a[k+4*l+d+4+2])/4),g.push(255);return new Uint8ClampedArray(g)}
function IntensityGradient(a,l){for(var g=[],k=Number.MAX_VALUE,d=0;d<a.length;d+=4*l)for(var b=0;b<4*l;b+=4){for(var h=0,q=0,p=1;2>p;p++)b+4*p<4*l&&(h+=Math.abs(a[d+b]-a[d+b+4*p])),d+4*l*p<a.length&&(q+=q+Math.abs(a[d+b]-a[d+b+4*l*p]));h-=q;k=h<k?h:k;g.push(h)}if(0>k)for(p=0;p<g.length;p++)g[p]-=k;return g}
function greyScale(a){for(var l=0;l<a.length;l+=4){var g=0,k=255;g=a[l]>g?a[l]:g;g=a[l+1]>g?a[l+1]:g;g=a[l+2]>g?a[l+2]:g;k=a[l]<k?a[l]:k;k=a[l+1]<k?a[l+1]:k;k=a[l+2]<k?a[l+2]:k;a[l]=a[l+1]=a[l+2]=(g+k)/2}}function histogram(a){for(var l=[],g=0;256>g;g++)l[g]=0;for(g=0;g<a.length;g+=4)l[a[g]]+=1;return l}
function otsu(a,l){for(var g=0,k=1;k<a.length;++k)g+=k*a[k];var d=0,b=0,h=0,q=0,p=0;for(k=0;k<a.length;++k)if(b+=a[k],0!=b){var m=l-b;if(0==m)break;d+=k*a[k];var f=d/b;var u=(g-d)/m;m=b*m*Math.pow(f-u,2);m>=h&&(q=k,m>h&&(p=k),h=m)}return(q+p)/2}
function CreateImageData(){Image.data=new Uint8ClampedArray(Image.width*Image.height*4);for(var a,l=0;l<Image.height;l++)for(var g=0;g<Image.width;g++)a=4*l*Image.width,Image.data[a+4*g]=Image.table[g][l][0],Image.data[a+4*g+1]=Image.table[g][l][1],Image.data[a+4*g+2]=Image.table[g][l][2],Image.data[a+4*g+3]=Image.table[g][l][3]}
function CreateScanImageData(){ScanImage.data=new Uint8ClampedArray(ScanImage.width*ScanImage.height*4);for(var a,l=0;l<ScanImage.height;l++)for(var g=0;g<ScanImage.width;g++)a=4*l*ScanImage.width,ScanImage.data[a+4*g]=ScanImage.table[g][l][0],ScanImage.data[a+4*g+1]=ScanImage.table[g][l][1],ScanImage.data[a+4*g+2]=ScanImage.table[g][l][2],ScanImage.data[a+4*g+3]=ScanImage.table[g][l][3]}
function CreateTable(){Image.table=[];for(var a,l=0;l<4*Image.width;l+=4){a=[];for(var g=l;g<Image.data.length;g+=4*Image.width)a.push([Image.data[g],Image.data[g+1],Image.data[g+2],Image.data[g+3]]);Image.table.push(a)}}function CreateScanTable(){ScanImage.table=[];for(var a,l=0;l<4*ScanImage.width;l+=4){a=[];for(var g=l;g<ScanImage.data.length;g+=4*ScanImage.width)a.push([ScanImage.data[g],ScanImage.data[g+1],ScanImage.data[g+2],ScanImage.data[g+3]]);ScanImage.table.push(a)}}
function EnlargeTable(a,l){for(var g,k=0;k<Image.width;k++){g=[];for(var d=0;d<Image.height;d++)for(var b=0;b<a;b++)g.push(Image.table[k][d]);Image.table[k]=g.slice()}g=Image.table.slice();for(k=0;k<Image.width;k++)for(b=0;b<l;b++)Image.table[k*l+b]=g[k].slice();Image.width=Image.table.length;Image.height=Image.table[0].length;CreateImageData()}
function ScaleHeight(a){for(var l=[],g,k,d,b=0;b<Image.height-a;b+=a)for(var h=0;h<Image.width;h++){d=k=g=0;for(var q=b;q<b+a;q++)g+=Image.table[h][q][0],k+=Image.table[h][q][1],d+=Image.table[h][q][2];l.push(g/a);l.push(k/a);l.push(d/a);l.push(255)}return new Uint8ClampedArray(l)}function Intersects(a,l){return a[0][0]<=l[0][1]&&l[0][0]<=a[0][1]&&a[1][0]<=l[1][1]&&l[1][0]<=a[1][1]}
function maxLocalization(a,l,g){var k=a,d=[];do{var b=l%Image.width;l=(l-b)/Image.width;a=0;for(var h=Image.height,q=0,p=Image.width-1,m=l;m<Image.height-1;m++)if(0==Image.table[b][m+1][0]){h=m;break}for(m=l;0<m;m--)if(0==Image.table[b][m-1][0]){a=m;break}for(var f=b;f<Image.width-1;f++)if(0==Image.table[f+1][l][0]){p=f;break}for(f=b;0<f;f--)if(0==Image.table[f-1][l][0]){q=f;break}for(m=a*Image.width;m<=h*Image.width;m+=Image.width)for(f=q;f<=p;f++)g[m+f]=0;l=[[q,p],[a,h]];for(b=0;b<d.length;b++)if(Intersects(l,
d[b])){d[b][0][1]-d[b][0][0]>l[0][1]-l[0][0]?(d[b][0][0]=d[b][0][0]<l[0][0]?d[b][0][0]:l[0][0],d[b][0][1]=d[b][0][1]>l[0][1]?d[b][0][1]:l[0][1]):(d[b][0][0]=d[b][0][0]<l[0][0]?d[b][0][0]:l[0][0],d[b][0][1]=d[b][0][1]>l[0][1]?d[b][0][1]:l[0][1],d[b][1][0]=l[1][0],d[b][1][1]=l[1][1]);l=[];break}0<l.length&&d.push(l);for(b=l=a=0;b<g.length;b++)g[b]>a&&(a=g[b],l=b)}while(a>.7*k);return d}
function ImgProcessing(){greyScale(Image.data);var a=IntensityGradient(Image.data,Image.width);a=BoxFilter(a,Image.width,15);for(var l=a[0],g=1;g<a.length;g++)l=l>a[g]?a[g]:l;var k=0,d=0,b=0;for(g=0;g<a.length;g++)a[g]=Math.round(a[g]-l),b+=a[g],k<a[g]&&(k=a[g],d=g);b/=a.length;if(15>b){a=BoxFilter(a,Image.width,8);l=a[0];for(g=1;g<a.length;g++)l=l>a[g]?a[g]:l;for(g=d=k=0;g<a.length;g++)a[g]=Math.round(a[g]-l),k<a[g]&&(k=a[g],d=g)}l=[];for(g=0;g<=k;g++)l[g]=0;for(g=0;g<a.length;g++)l[a[g]]+=1;l=otsu(l,
a.length);for(g=0;g<a.length;g++)Image.data[4*g]=a[g]<l?Image.data[4*g+1]=Image.data[4*g+2]=0:Image.data[4*g+1]=Image.data[4*g+2]=255;CreateTable();a=maxLocalization(k,d,a);k=[];for(g=0;g<a.length;g++)k.push({x:a[g][0][0],y:a[g][1][0],width:a[g][0][1]-a[g][0][0],height:a[g][1][1]-a[g][1][0]});0<k.length&&postMessage({result:k,success:"localization"});allTables=[];for(g=0;g<a.length;g++){k=[];for(d=2*a[g][0][0];d<2*a[g][0][1];d++){l=[];for(b=2*a[g][1][0];b<2*a[g][1][1];b++)l.push([ScanImage.table[d][b][0],
ScanImage.table[d][b][1],ScanImage.table[d][b][2],255]);k.push(l)}1>k.length||(Image.table=k,Image.width=k.length,Image.height=k[0].length,CreateImageData(),allTables.push({table:k,data:new Uint8ClampedArray(Image.data),width:Image.width,height:Image.height}))}}function showImage(a,l,g){postMessage({result:a,width:l,height:g,success:"image"})}
function Main(){ImgProcessing();for(var a=[],l=0;l<allTables.length;l++){Image=allTables[l];var g=ScaleHeight(30),k=0,d="",b={},h=[];Selection=!1;do{var q=g.subarray(k,k+4*Image.width);for(var p=[],m=0;256>m;m++)p[m]=0;for(m=0;m<q.length;m+=4){var f=Math.round((q[m]+q[m+1]+q[m+2])/3);p[f]+=1}m=otsu(p,q.length/4);p=41>m?1:m-40;m=214<m?254:m+40;q=yStraighten(q,p,m);Selection=BinaryString(q);Selection.string?(d=Selection.format,q=Selection,Selection=Selection.string,"EAN-13"==d&&("undefined"==typeof b[Selection]?
(b[Selection]={count:1,correction:q.correction},h.push(Selection)):(b[Selection].count+=1,b[Selection].correction+=q.correction),Selection=!1)):Selection=!1;k+=4*Image.width}while(!Selection&&k<g.length);Selection&&"EAN-13"!=d&&a.push({Format:d,Value:Selection});"EAN-13"==d&&(Selection=!1);if(!Selection){EnlargeTable(4,2);k=0;g=ScaleHeight(20);do{q=g.subarray(k,k+4*Image.width);p=[];for(m=0;256>m;m++)p[m]=0;for(m=0;m<q.length;m+=4)f=Math.round((q[m]+q[m+1]+q[m+2])/3),p[f]+=1;m=otsu(p,q.length/4);
p=40>m?0:m-40;m=215<m?255:m+40;q=yStraighten(q,p,m);Selection=BinaryString(q);Selection.string?(d=Selection.format,q=Selection,Selection=Selection.string,"EAN-13"==d&&("undefined"==typeof b[Selection]?(b[Selection]={count:1,correction:q.correction},h.push(Selection)):(b[Selection].count+=1,b[Selection].correction+=q.correction),Selection=!1)):Selection=!1;k+=4*Image.width}while(!Selection&&k<g.length);if("EAN-13"==d){g={};for(var u in b)b[u].correction/=b[u].count,k=b[u].correction,k-=b[u].count,
k+=h.indexOf(u),g[u]=k;b=Number.POSITIVE_INFINITY;h="";for(u in g)g[u]<b&&(b=g[u],h=u);Selection=11>b?h:!1}Selection&&a.push({Format:d,Value:Selection})}if(0<a.length&&!Multiple)break}return a}function yStraighten(a,l,g){for(var k,d=new Uint8ClampedArray(Image.width*(g-l+1)*4),b=0;b<d.length;b++)d[b]=255;for(b=0;b<4*Image.width;b+=4){k=g;l=(a[b]+a[b+1]+a[b+2])/3;b<4*Image.width-4&&(l+=(a[b+4]+a[b+5]+a[b+6])/3,l/=2);for(var h=b;h<d.length;h+=4*Image.width)l<k&&(d[h]=d[h+1]=d[h+2]=0),k--}return d}
function CheckEan13(a,l){if(l){if(5!=a.length)return!1}else if(3!=a.length)return!1;for(var g=l=0;g<a.length;g++)l+=a[g];l/=a.length;for(g=0;g<a.length;g++)if(.5>a[g]/l||1.5<a[g]/l)return!1;return!0}function TwoOfFiveStartEnd(a,l){if(5>a.length||6<a.length)return!1;l=0;for(var g=[0,0],k=0;k<a.length;k++)a[k]>l&&(l=a[k],g[0]=k);for(k=l=0;k<a.length;k++)k!=g[0]&&a[k]>l&&(l=a[k],g[1]=k);return 2==g[0]+g[1]}
function CheckInterleaved(a,l){for(var g=0,k=0;k<a.length;k++)g+=a[k];g/=4;if(l){if(4!=a.length)return!1;k=0}else{if(3!=a.length)return!1;l=0;for(k=0;k<a.length;k++)if(a[k]>l){l=a[k];var d=k}if(0!=d||1.5>a[0]/g||2.5<a[0]/g)return!1;k=1}for(;k<a.length;k++)if(.5>a[k]/g||1.5<a[k]/g)return!1;return!0}
function BinaryConfiguration(a,l){var g=[],k,d;if("Code128"==l||"Code93"==l){var b=6;var h=a[0];"Code128"==l&&(h/=2);for(d=0;d<a.length;d++)if(a[d]>6*h){a.splice(d,a.length);break}do 7==a.length&&"Code128"==l?g.push(a.splice(0,a.length)):g.push(a.splice(0,b)),"Code93"==l&&6>a.length&&a.splice(0,b);while(0<a.length)}if("Code39"==l){b=9;h=a[0];for(d=0;d<a.length;d++)if(a[d]>5*h){a.splice(d,a.length);break}do g.push(a.splice(0,b)),a.splice(0,1);while(0<a.length)}if("EAN-13"==l){b=4;h=a[0];for(d=k=0;d<
a.length;d++)if(a[d]>6*h){a.splice(d,a.length);break}CheckEan13(a.splice(0,3),!1)&&k++;d=0;do g.push(a.splice(0,b)),d++,6==d&&CheckEan13(a.splice(0,5),!0)&&k++;while(12>g.length&&0<a.length);CheckEan13(a.splice(0,3),!1)&&k++;if(2>k)return[]}if("2Of5"==l){b=5;h=a[0]/2;for(d=0;d<a.length;d++)if(a[d]>5*h){a.splice(d,a.length);break}d=a.splice(0,6);g.push(d);do{k=[];for(d=0;d<b;d++)k.push(a.splice(0,1)[0]),a.splice(0,1);g.push(k);5==a.length&&g.push(a.splice(0,5))}while(0<a.length)}if("Inter2Of5"==l){b=
5;h=a[0];for(d=0;d<a.length;d++)if(a[d]>5*h){a.splice(d,a.length);break}g.push(a.splice(0,4));do{k=[];h=[];for(d=0;d<b;d++)k.push(a.splice(0,1)[0]),h.push(a.splice(0,1)[0]);g.push(k);g.push(h);3==a.length&&g.push(a.splice(0,3))}while(0<a.length)}if("Codabar"==l){b=7;h=a[0];for(d=0;d<a.length;d++)if(a[d]>5*h){a.splice(d,a.length);break}do g.push(a.splice(0,b)),a.splice(0,1);while(0<a.length)}return g}
function BinaryString(a,l){l=[];for(var g,k,d,b,h=0;h<a.length-4*Image.width;h+=4*Image.width){g=a.subarray(h,h+4*Image.width);l=[];for(var q=0;255==g[q];)q+=4;for(;q<g.length;){d=0;for(k=g[q];g[q]==k&&q<g.length;)d++,q+=4;l.push(d)}2<l.length&&l[0]<=l[1]/10&&l.splice(0,2);k=l.slice();d=!1;for(q=0;q<FormatPriority.length;q++){l=k.slice();l=BinaryConfiguration(l,FormatPriority[q]);if("2Of5"==FormatPriority[q]||"Inter2Of5"==FormatPriority[q]){var p=l.splice(0,1)[0];var m=l.splice(l.length-1,1)[0]}g=
Distribution(l,FormatPriority[q]);"EAN-13"==FormatPriority[q]?(l=g.data,corrections=g.correction):l=g;if("undefined"!=typeof l){if(4<l.length||"Code39"==FormatPriority[q]&&2<l.length)if("Code128"==FormatPriority[q])CheckCode128(l)&&(l=DecodeCode128(l),d=!0);else if("Code93"==FormatPriority[q])CheckCode93(l)&&(l=DecodeCode93(l),d=!0);else if("Code39"==FormatPriority[q])CheckCode39(l)&&(l=DecodeCode39(l),d=!0);else if("EAN-13"==FormatPriority[q])!(g=DecodeEAN13(l))||13!==g.length&&7!==g.length||(l=
g,d=!0);else if("2Of5"==FormatPriority[q]||"Inter2Of5"==FormatPriority[q]){if("2Of5"==FormatPriority[q]){if("undefined"!=typeof p&&!TwoOfFiveStartEnd(p,!0))continue;if("undefined"!=typeof m&&!TwoOfFiveStartEnd(m,!1))continue}if("Inter2Of5"==FormatPriority[q]){if("undefined"!=typeof p&&!CheckInterleaved(p,!0))continue;if("undefined"!=typeof m&&!CheckInterleaved(m,!1))continue}if(g=Decode2Of5(l))l=g,d=!0}else"Codabar"==FormatPriority[q]&&(g=DecodeCodaBar(l))&&(l=g,d=!0);if(d){b=FormatPriority[q];"Inter2Of5"==
b&&(b="Interleaved 2 of 5");"2Of5"==b&&(b="Standard 2 of 5");break}}}if(d)break}return"Code128"==b?"string"===typeof l.string?l:{string:!1}:"string"===typeof l?"EAN-13"==b?{string:l,format:b,correction:corrections}:{string:l,format:b}:{string:!1}}
function Distribution(a,l){l=availableFormats.indexOf(l);var g=0,k=[];if(0===l){var d=11;var b=6;var h=4}else 1===l?(d=9,b=6,h=4):2===l?(d=12,b=9):3===l&&7===a.length?(d=4,h=b=2):3===l?(d=7,h=b=4):6==l&&(b=7);for(var q=0;q<a.length;q++){var p=a[q],m,f=m=0,u=[];if(6==l){if(7!=p.length)return[];if(0==q||q==a.length-1){m=[[0,0],[0,0]];var w=[0,0];for(f=0;f<p.length;f++)if(0==f%2)p[f]>w[0]&&(w[0]=p[f],w[1]=f);else if(p[f]>m[0][0]){m[0][0]=p[f];var y=m[0][1];m[0][1]=f;f=y-1}else p[f]>m[1][0]&&f!=m[0][1]&&
(m[1][0]=p[f],m[1][1]=f);if(SecureCodabar){y=m[0][0]+m[1][0]+w[0];y/=3;var A=[m[0][0],m[1][0],w[0]];for(f=0;f<A.length;f++)if(1.5<A[f]/y||.5>A[f]/y)return[];for(f=y=0;f<p.length;f++)f!=w[1]&&f!=m[0][1]&&f!=m[1][1]&&(y+=p[f]);y/=4;for(f=0;f<p.length;f++)if(f!=w[1]&&f!=m[0][1]&&f!=m[1][1]&&(1.5<p[f]/y||.5>p[f]/y))return[]}for(f=0;f<p.length;f++)f==w[1]||f==m[0][1]||f==m[1][1]?u.push(1):u.push(0)}else{w=[0,0];m=[0,0];for(f=0;f<p.length;f++)0==f%2?p[f]>w[0]&&(w[0]=p[f],w[1]=f):p[f]>m[0]&&(m[0]=p[f],m[1]=
f);if(1.55<w[0]/m[0]){w=[w,[0,0],[0,0]];for(f=0;f<p.length;f++)0==f%2&&(p[f]>w[1][0]&&f!=w[0][1]?(w[1][0]=p[f],y=w[1][1],w[1][1]=f,f=y-1):p[f]>w[2][0]&&f!=w[0][1]&&f!=w[1][1]&&(w[2][0]=p[f],w[2][1]=f));if(SecureCodabar){y=w[0][0]+w[1][0]+w[2][0];y/=3;for(f=0;f<w.length;f++)if(1.5<w[f][0]/y||.5>w[f][0]/y)return[];for(f=y=0;f<p.length;f++)f!=w[0][1]&&f!=w[1][1]&&f!=w[2][1]&&(y+=p[f]);y/=4;for(f=0;f<p.length;f++)if(f!=w[0][1]&&f!=w[1][1]&&f!=w[2][1]&&(1.5<p[f]/y||.5>p[f]/y))return[]}for(f=0;f<p.length;f++)f==
w[0][1]||f==w[1][1]||f==w[2][1]?u.push(1):u.push(0)}else{if(SecureCodabar){y=w[0]+m[0];y/=2;if(1.5<w[0]/y||.5>w[0]/y||1.5<m[0]/y||.5>m[0]/y)return[];for(f=y=0;f<p.length;f++)f!=w[1]&&f!=m[1]&&(y+=p[f]);y/=5;for(f=0;f<p.length;f++)if(f!=w[1]&&f!=m[1]&&(1.5<p[f]/y||.5>p[f]/y))return[]}for(f=0;f<p.length;f++)f==w[1]||f==m[1]?u.push(1):u.push(0)}}k.push(u)}else if(4==l||5==l){w=[[0,0],[0,0]];for(f=0;f<p.length;f++){if(!isFinite(p[f]))return[];p[f]>w[0][0]&&(w[0][0]=p[f],y=w[0][1],w[0][1]=f,f=y-1);p[f]>
w[1][0]&&f!=w[0][1]&&(w[1][0]=p[f],w[1][1]=f)}if(Secure2Of5){y=w[0][0]+w[1][0];y/=2;if(1.3<w[0][0]/y||.7>w[0][0]/y||1.3<w[1][0]/y||.7>w[1][0]/y)return[];for(f=y=0;f<p.length;f++)f!=w[0][1]&&f!=w[1][1]&&(y+=p[f]);y/=3;for(f=0;f<p.length;f++)if(f!=w[0][1]&&f!=w[1][1]&&(1.3<p[f]/y||.7>p[f]/y))return[]}for(f=0;f<p.length;f++)f==w[0][1]||f==w[1][1]?u.push(1):u.push(0);k.push(u)}else{for(;f<b;)m+=p[f],f++;if(2===l){w=[[0,0],[0,0]];m=[0,0];for(f=0;f<p.length;f++)0==f%2?(p[f]>w[0][0]&&(w[0][0]=p[f],y=w[0][1],
w[0][1]=f,f=y),p[f]>w[1][0]&&f!=w[0][1]&&(w[1][0]=p[f],w[1][1]=f)):p[f]>m[0]&&(m[0]=p[f],m[1]=f);if(1.5<m[0]/w[0][0]&&1.5<m[0]/w[1][0])for(w=[[0,0],[0,0]],f=0;f<p.length;f++)0!=f%2&&(p[f]>w[0][0]&&f!=m[1]&&(w[0][0]=p[f],y=w[0][1],w[0][1]=f,f=y),p[f]>w[1][0]&&f!=w[0][1]&&f!=m[1]&&(w[1][0]=p[f],w[1][1]=f));y=w[0][0]+w[1][0]+m[0];y/=3;if(1.6<w[0][0]/y||.4>w[0][0]/y||1.6<w[1][0]/y||.4>w[1][0]/y||1.6<m[0]/y||.4>m[0]/y)return[];for(f=y=0;f<p.length;f++)f!=w[0][1]&&f!=w[1][1]&&f!=m[1]&&(y+=p[f]);y/=6;for(f=
0;f<p.length;f++)if(f!=w[0][1]&&f!=w[1][1]&&f!=m[1]&&(1.6<p[f]/y||.4>p[f]/y))return[];for(f=0;f<p.length;f++)f==w[0][1]||f==w[1][1]||f==m[1]?u.push(2):u.push(1);k.push(u)}else if(3==l){w=[[0,0],[0,0],[0,0]];for(f=0;f<p.length;f++)p[f]>w[0][0]&&(w[0][0]=p[f],y=w[0][1],w[0][1]=f,f=y),p[f]>w[1][0]&&f!=w[0][1]&&(w[1][0]=p[f],y=w[1][1],w[1][1]=f,f=y),p[f]>w[2][0]&&f!=w[0][1]&&f!=w[1][1]&&(w[2][0]=p[f],w[2][1]=f);if(3<=w[0][0]/w[1][0]){for(f=y=0;f<p.length;f++)f!=w[0][1]&&(y+=p[f]);y/=3;for(f=0;f<p.length;f++)if(f!=
w[0][1]&&(.02>p[f]/y||3<p[f]/y))return{data:[],correction:0};if(2.2>w[0][0]/y||6<w[0][0]/y)return{data:[],correction:0};for(f=0;f<p.length;f++)f==w[0][1]?u.push(4):u.push(1)}else if(2<w[0][0]/w[2][0]){y=w[0][0]+w[1][0];y/=5;if(.02>w[0][0]/(3*y)||3<w[0][0]/(3*y)||.02>w[1][0]/(2*y)||3<w[1][0]/(2*y))return{data:[],correction:0};for(f=y=0;f<p.length;f++)f!=w[0][1]&&f!=w[1][1]&&(y+=p[f]);y/=2;for(f=0;f<p.length;f++)if(f!=w[0][1]&&f!=w[1][1]&&(.02>p[f]/y||3<p[f]/y))return{data:[],correction:0};for(f=0;f<
p.length;f++)f==w[0][1]?u.push(3):f==w[1][1]?u.push(2):u.push(1)}else{if(w[0][1]%2==w[1][1]%2&&w[0][1]%2==w[2][1]%2)for(y=w[0][1]%2,w[2]=[0,0],f=0;f<p.length;f++)f%2!=y&&p[f]>w[2][0]&&(w[2][0]=p[f],w[2][1]=f);y=w[0][0]+w[1][0]+w[2][0];y/=3;for(f=0;f<w.length;f++)if(.02>w[f][0]/y||3<w[f][0]/y)return{data:[],correction:0};for(f=A=0;f<p.length;f++)f!=w[0][1]&&f!=w[1][1]&&f!=w[2][1]&&(A=p[f]);if(.02>y/A||3<y/A)return{data:[],correction:0};for(f=0;f<p.length;f++)f==w[0][1]||f==w[1][1]||f==w[2][1]?u.push(2):
u.push(1)}k.push(u);for(f=0;f<u.length;f++)g+=Math.abs(u[f]-p[f]/m*d)}else{for(f=0;f<b;)u.push(p[f]/m*d),f++;for(f=0;f<b;)u[f]=u[f]>h?h:u[f],u[f]=1>u[f]?1:u[f],u[f]=Math.round(u[f]),f++;if(3==l){for(f=y=0;f<u.length;f++)y+=u[f];if(7<y){for(f=A=w=0;f<u.length;f++)u[f]>w&&(w=u[f],A=f);u[A]=w-(y-7)}}if(3==l)for(f=0;f<u.length;f++)g+=Math.abs(u[f]-p[f]/m*d);k.push(u)}}}return 3==l?{data:k,correction:g}:k}
function CheckCode128(a){var l=a[a.length-2].join("");l=Code128Encoding.value.indexOf(l);if(-1==l)return!1;var g=Code128Encoding.value.indexOf(a[0].join(""));if(-1==g)return!1;var k=Code128Encoding[a[0].join("")];if("undefined"==typeof k||"A"!=k&&"B"!=k&&"C"!=k)return!1;for(k=1;k<a.length-2;k++)if(g+=Code128Encoding.value.indexOf(a[k].join(""))*k,-1===Code128Encoding.value.indexOf(a[k].join("")))return!1;return g%103===l}
function Decode2Of5(a){for(var l="",g=0;g<a.length;g++){if(-1==TwoOfFiveEncoding.indexOf(a[g].join("")))return!1;l+=TwoOfFiveEncoding.indexOf(a[g].join(""))}return l}
function DecodeCodaBar(a){var l="",g=a[0].join(""),k=a[a.length-1].join("");if("A"!=CodaBarEncoding[g]&&"B"!=CodaBarEncoding[g]&&"C"!=CodaBarEncoding[g]&&"D"!=CodaBarEncoding[g]||"A"!=CodaBarEncoding[k]&&"B"!=CodaBarEncoding[k]&&"C"!=CodaBarEncoding[k]&&"D"!=CodaBarEncoding[k])return!1;for(g=1;g<a.length-1;g++){if("undefined"==typeof CodaBarEncoding[a[g].join("")])return!1;l+=CodaBarEncoding[a[g].join("")]}return l}
function checkResultForEAN(a){for(var l=3,g=0,k=a.length-2;0<=k;k--)g+=a[k]*l,l=3===l?1:3;return(10-g%10)%10}
function DecodeEAN13(a){if(12!==a.length&&7!==a.length)return!1;var l=0;if(7===a.length){if("23"!=a[a.length-1].join(""))return!1;a.splice(a.length-1,1);l=1}for(var g=a.slice(0,6),k=!1,d=a.slice(6,a.length),b=0;b<g.length;b++)if(g[b]=g[b].join(""),4!=g[b].length){k=!0;break}if(k)return!1;for(b=0;b<d.length;b++)if(d[b]=d[b].join(""),4!=d[b].length){k=!0;break}if(k)return!1;var h=[];for(b=0;b<g.length;b++)if("undefined"!=typeof EAN13Encoding.L[g[b]])h.push("L");else if("undefined"!=typeof EAN13Encoding.G[g[b]])h.push("G");
else{k=!0;break}if(k)return!1;a=[];if("undefined"==typeof EAN13Encoding.formats[h.join("")])return!1;a.push(EAN13Encoding.formats[h.join("")]);for(b=0;b<g.length;b++){if("undefined"==typeof EAN13Encoding[h[b]][g[b]]){k=!0;break}a.push(EAN13Encoding[h[b]][g[b]])}if(k)return!1;for(b=0;b<d.length;b++)if("undefined"!=typeof EAN13Encoding.R[d[b]])a.push(EAN13Encoding.R[d[b]]);else if("undefined"!=typeof EAN13Encoding.G[d[b]])a.push(EAN13Encoding.G[d[b]]);else{k=!0;break}if(k)return!1;l=l?a[0]:checkResultForEAN(a.join(""),
1);return a[a.length-1]==l||a[0]==l?a.join(""):!1}
function CheckCode93(a){var l=a[a.length-3].join(""),g=a[a.length-2].join(""),k=!0;if("undefined"==typeof Code93Encoding[l]||"undefined"==typeof Code93Encoding[g])return!1;l=Code93Encoding[l].value;for(var d=1,b=0,h=a.length-4;0<h;h--){k="undefined"===typeof Code93Encoding[a[h].join("")]?!1:k;if(!k)break;b+=Code93Encoding[a[h].join("")].value*d;d++;20<d&&(d=1)}d=b%47;var q=d===l;if(!q||!k)return!1;b=d;d=2;l=Code93Encoding[g].value;for(h=a.length-4;0<h;h--){k="undefined"===typeof Code93Encoding[a[h].join("")]?
!1:k;if(!k)break;b+=Code93Encoding[a[h].join("")].value*d;d++;15<d&&(d=1)}return b%47===l&&q}function CheckCode39(a){var l=!0;if("undefined"==typeof Code39Encoding[a[0].join("")]||"*"!=Code39Encoding[a[0].join("")].character||"undefined"==typeof Code39Encoding[a[a.length-1].join("")]||"*"!=Code39Encoding[a[a.length-1].join("")].character)return!1;for(var g=1;g<a.length-1;g++)if("undefined"==typeof Code39Encoding[a[g].join("")]){l=!1;break}return l}
function DecodeCode39(a){for(var l="",g=!1,k,d="",b=1;b<a.length-1;b++)k=Code39Encoding[a[b].join("")].character,("$"==k||"/"==k||"+"==k||"%"==k)&&b+1<a.length-1?(g=!0,d=k):g?("undefined"!=typeof ExtendedEncoding[d+k]&&(l+=ExtendedEncoding[d+k]),g=!1):l+=k;return l}
function DecodeCode93(a){for(var l="",g=!1,k,d="",b=1;b<a.length-3;b++)k=Code93Encoding[a[b].join("")].character,"($)"==k||"(/)"==k||"(+)"==k||"(%)"==k?(g=!0,d=k[1]):g?("undefined"!=typeof ExtendedEncoding[d+k]&&(l+=ExtendedEncoding[d+k]),g=!1):l+=k;return l}
function DecodeCode128(a){for(var l=Code128Encoding[a[0].join("")],g,k="Code128",d="",b=1;b<a.length-2;b++)switch(g=Code128Encoding[a[b].join("")][l],g){case "FNC1":1==b&&(k="GS1-128");case "FNC2":case "FNC3":case "FNC4":break;case "SHIFT_B":b++;d+=Code128Encoding[a[b].join("")].B;break;case "SHIFT_A":b++;d+=Code128Encoding[a[b].join("")].A;break;case "Code_A":l="A";break;case "Code_B":l="B";break;case "Code_C":l="C";break;default:d+=g}return{string:d,format:k}}
function checkFinalResult(a){for(var l=0;l<a.length;l++)"EAN-13"===a[l].Format&&7===a[l].Value.length&&(a[l].Value=a[l].Value.substring(1,7),a[l].Format="UPC-E");return a}TwoOfFiveEncoding="00110 10001 01001 11000 00101 10100 01100 00011 10010 01010".split(" ");
Code128Encoding={212222:{A:" ",B:" ",C:"00"},222122:{A:"!",B:"!",C:"01"},222221:{A:'"',B:'"',C:"02"},121223:{A:"#",B:"#",C:"03"},121322:{A:"$",B:"$",C:"04"},131222:{A:"%",B:"%",C:"05"},122213:{A:"&",B:"&",C:"06"},122312:{A:"'",B:"'",C:"07"},132212:{A:"(",B:"(",C:"08"},221213:{A:")",B:")",C:"09"},221312:{A:"*",B:"*",C:"10"},231212:{A:"+",B:"+",C:"11"},112232:{A:",",B:",",C:"12"},122132:{A:"-",B:"-",C:"13"},122231:{A:".",B:".",C:"14"},113222:{A:"/",B:"/",C:"15"},123122:{A:"0",B:"0",C:"16"},123221:{A:"1",
B:"1",C:"17"},223211:{A:"2",B:"2",C:"18"},221132:{A:"3",B:"3",C:"19"},221231:{A:"4",B:"4",C:"20"},213212:{A:"5",B:"5",C:"21"},223112:{A:"6",B:"6",C:"22"},312131:{A:"7",B:"7",C:"23"},311222:{A:"8",B:"8",C:"24"},321122:{A:"9",B:"9",C:"25"},321221:{A:":",B:":",C:"26"},312212:{A:";",B:";",C:"27"},322112:{A:"<",B:"<",C:"28"},322211:{A:"=",B:"=",C:"29"},212123:{A:">",B:">",C:"30"},212321:{A:"?",B:"?",C:"31"},232121:{A:"@",B:"@",C:"32"},111323:{A:"A",B:"A",C:"33"},131123:{A:"B",B:"B",C:"34"},131321:{A:"C",
B:"C",C:"35"},112313:{A:"D",B:"D",C:"36"},132113:{A:"E",B:"E",C:"37"},132311:{A:"F",B:"F",C:"38"},211313:{A:"G",B:"G",C:"39"},231113:{A:"H",B:"H",C:"40"},231311:{A:"I",B:"I",C:"41"},112133:{A:"J",B:"J",C:"42"},112331:{A:"K",B:"K",C:"43"},132131:{A:"L",B:"L",C:"44"},113123:{A:"M",B:"M",C:"45"},113321:{A:"N",B:"N",C:"46"},133121:{A:"O",B:"O",C:"47"},313121:{A:"P",B:"P",C:"48"},211331:{A:"Q",B:"Q",C:"49"},231131:{A:"R",B:"R",C:"50"},213113:{A:"S",B:"S",C:"51"},213311:{A:"T",B:"T",C:"52"},213131:{A:"U",
B:"U",C:"53"},311123:{A:"V",B:"V",C:"54"},311321:{A:"W",B:"W",C:"55"},331121:{A:"X",B:"X",C:"56"},312113:{A:"Y",B:"Y",C:"57"},312311:{A:"Z",B:"Z",C:"58"},332111:{A:"[",B:"[",C:"59"},314111:{A:"\\",B:"\\",C:"60"},221411:{A:"]",B:"]",C:"61"},431111:{A:"^",B:"^",C:"62"},111224:{A:"_",B:"_",C:"63"},111422:{A:"NUL",B:"`",C:"64"},121124:{A:"SOH",B:"a",C:"65"},121421:{A:"STX",B:"b",C:"66"},141122:{A:"ETX",B:"c",C:"67"},141221:{A:"EOT",B:"d",C:"68"},112214:{A:"ENQ",B:"e",C:"69"},112412:{A:"ACK",B:"f",C:"70"},
122114:{A:"BEL",B:"g",C:"71"},122411:{A:"BS",B:"h",C:"72"},142112:{A:"HT",B:"i",C:"73"},142211:{A:"LF",B:"j",C:"74"},241211:{A:"VT",B:"k",C:"75"},221114:{A:"FF",B:"l",C:"76"},413111:{A:"CR",B:"m",C:"77"},241112:{A:"SO",B:"n",C:"78"},134111:{A:"SI",B:"o",C:"79"},111242:{A:"DLE",B:"p",C:"80"},121142:{A:"DC1",B:"q",C:"81"},121241:{A:"DC2",B:"r",C:"82"},114212:{A:"DC3",B:"s",C:"83"},124112:{A:"DC4",B:"t",C:"84"},124211:{A:"NAK",B:"u",C:"85"},411212:{A:"SYN",B:"v",C:"86"},421112:{A:"ETB",B:"w",C:"87"},
421211:{A:"CAN",B:"x",C:"88"},212141:{A:"EM",B:"y",C:"89"},214121:{A:"SUB",B:"z",C:"90"},412121:{A:"ESC",B:"{",C:"91"},111143:{A:"FS",B:"|",C:"92"},111341:{A:"GS",B:"}",C:"93"},131141:{A:"RS",B:"~",C:"94"},114113:{A:"US",B:"DEL",C:"95"},114311:{A:"FNC3",B:"FNC3",C:"96"},411113:{A:"FNC2",B:"FNC2",C:"97"},411311:{A:"SHIFT_B",B:"SHIFT_A",C:"98"},113141:{A:"Code_C",B:"Code_C",C:"99"},114131:{A:"Code_B",B:"FNC4",C:"Code_B"},311141:{A:"FNC4",B:"Code_A",C:"Code_A"},411131:{A:"FNC1",B:"FNC1",C:"FNC1"},211412:"A",
211214:"B",211232:"C",233111:{A:"STOP",B:"STOP",C:"STOP"},value:"212222 222122 222221 121223 121322 131222 122213 122312 132212 221213 221312 231212 112232 122132 122231 113222 123122 123221 223211 221132 221231 213212 223112 312131 311222 321122 321221 312212 322112 322211 212123 212321 232121 111323 131123 131321 112313 132113 132311 211313 231113 231311 112133 112331 132131 113123 113321 133121 313121 211331 231131 213113 213311 213131 311123 311321 331121 312113 312311 332111 314111 221411 431111 111224 111422 121124 121421 141122 141221 112214 112412 122114 122411 142112 142211 241211 221114 413111 241112 134111 111242 121142 121241 114212 124112 124211 411212 421112 421211 212141 214121 412121 111143 111341 131141 114113 114311 411113 411311 113141 114131 311141 411131 211412 211214 211232 233111".split(" ")};
Code93Encoding={131112:{value:0,character:"0"},111213:{value:1,character:"1"},111312:{value:2,character:"2"},111411:{value:3,character:"3"},121113:{value:4,character:"4"},121212:{value:5,character:"5"},121311:{value:6,character:"6"},111114:{value:7,character:"7"},131211:{value:8,character:"8"},141111:{value:9,character:"9"},211113:{value:10,character:"A"},211212:{value:11,character:"B"},211311:{value:12,character:"C"},221112:{value:13,character:"D"},221211:{value:14,character:"E"},231111:{value:15,
character:"F"},112113:{value:16,character:"G"},112212:{value:17,character:"H"},112311:{value:18,character:"I"},122112:{value:19,character:"J"},132111:{value:20,character:"K"},111123:{value:21,character:"L"},111222:{value:22,character:"M"},111321:{value:23,character:"N"},121122:{value:24,character:"O"},131121:{value:25,character:"P"},212112:{value:26,character:"Q"},212211:{value:27,character:"R"},211122:{value:28,character:"S"},211221:{value:29,character:"T"},221121:{value:30,character:"U"},222111:{value:31,
character:"V"},112122:{value:32,character:"W"},112221:{value:33,character:"X"},122121:{value:34,character:"Y"},123111:{value:35,character:"Z"},121131:{value:36,character:"-"},311112:{value:37,character:"."},311211:{value:38,character:" "},321111:{value:39,character:"$"},112131:{value:40,character:"/"},113121:{value:41,character:"+"},211131:{value:42,character:"%"},121221:{value:43,character:"($)"},312111:{value:44,character:"(%)"},311121:{value:45,character:"(/)"},122211:{value:46,character:"(+)"},
111141:{value:-1,character:"*"}};
Code39Encoding={111221211:{value:0,character:"0"},211211112:{value:1,character:"1"},112211112:{value:2,character:"2"},212211111:{value:3,character:"3"},111221112:{value:4,character:"4"},211221111:{value:5,character:"5"},112221111:{value:6,character:"6"},111211212:{value:7,character:"7"},211211211:{value:8,character:"8"},112211211:{value:9,character:"9"},211112112:{value:10,character:"A"},112112112:{value:11,character:"B"},212112111:{value:12,character:"C"},111122112:{value:13,character:"D"},211122111:{value:14,
character:"E"},112122111:{value:15,character:"F"},111112212:{value:16,character:"G"},211112211:{value:17,character:"H"},112112211:{value:18,character:"I"},111122211:{value:19,character:"J"},211111122:{value:20,character:"K"},112111122:{value:21,character:"L"},212111121:{value:22,character:"M"},111121122:{value:23,character:"N"},211121121:{value:24,character:"O"},112121121:{value:25,character:"P"},111111222:{value:26,character:"Q"},211111221:{value:27,character:"R"},112111221:{value:28,character:"S"},
111121221:{value:29,character:"T"},221111112:{value:30,character:"U"},122111112:{value:31,character:"V"},222111111:{value:32,character:"W"},121121112:{value:33,character:"X"},221121111:{value:34,character:"Y"},122121111:{value:35,character:"Z"},121111212:{value:36,character:"-"},221111211:{value:37,character:"."},122111211:{value:38,character:" "},121212111:{value:39,character:"$"},121211121:{value:40,character:"/"},121112121:{value:41,character:"+"},111212121:{value:42,character:"%"},121121211:{value:-1,
character:"*"}};
ExtendedEncoding={"/A":"!","/B":'"',"/C":"#","/D":"$","/E":"%","/F":"&","/G":"'","/H":"(","/I":")","/J":"*","/K":"+","/L":",","/O":"/","/Z":":","%F":";","%G":"<","%H":"=","%I":">","%J":"?","%K":"[","%L":"\\","%M":"]","%N":"^","%O":"_","+A":"a","+B":"b","+C":"c","+D":"d","+E":"e","+F":"f","+G":"g","+H":"h","+I":"i","+J":"j","+K":"k","+L":"l","+M":"m","+N":"n","+O":"o","+P":"p","+Q":"q","+R":"r","+S":"s","+T":"t","+U":"u","+V":"v","+W":"w","+X":"x","+Y":"y","+Z":"z","%P":"{","%Q":"|","%R":"|","%S":"~"};
CodaBarEncoding={"0000011":"0","0000110":"1","0001001":"2",11E5:"3","0010010":"4",1000010:"5","0100001":"6","0100100":"7","0110000":"8",1001E3:"9","0001100":"-","0011000":"$",1000101:":",1010001:"/",1010100:".","0011111":"+","0011010":"A","0001011":"B","0101001":"C","0001110":"D"};
EAN13Encoding={L:{3211:0,2221:1,2122:2,1411:3,1132:4,1231:5,1114:6,1312:7,1213:8,3112:9},G:{1123:0,1222:1,2212:2,1141:3,2311:4,1321:5,4111:6,2131:7,3121:8,2113:9},R:{3211:0,2221:1,2122:2,1411:3,1132:4,1231:5,1114:6,1312:7,1213:8,3112:9},formats:{GGGGGG:0,GGLGLL:1,GGLLGL:2,GGLLLG:3,GLGGLL:4,GLLGGL:5,GLLLGG:6,GLGLGL:7,GLGLLG:8,GLLGLG:9,LLLLLL:0,LLGLGG:1,LLGGLG:2,LLGGGL:3,LGLLGG:4,LGGLLG:5,LGGGLL:6,LGLGLG:7,LGLGGL:8,LGGLGL:9}};
self.onmessage=function(a){ScanImage={data:new Uint8ClampedArray(a.data.scan),width:a.data.scanWidth,height:a.data.scanHeight};switch(a.data.rotation){case 8:ScanImage.data=Rotate(ScanImage.data,ScanImage.width,ScanImage.height,-90);var l=a.data.scanWidth;ScanImage.width=ScanImage.height;ScanImage.height=l;break;case 6:ScanImage.data=Rotate(ScanImage.data,ScanImage.width,ScanImage.height,90);l=a.data.scanWidth;ScanImage.width=ScanImage.height;ScanImage.height=l;break;case 3:ScanImage.data=Rotate(ScanImage.data,
ScanImage.width,ScanImage.height,180)}Image={data:Scale(ScanImage.data,ScanImage.width,ScanImage.height),width:ScanImage.width/2,height:ScanImage.height/2};a.data.postOrientation&&postMessage({result:Image,success:"orientationData"});availableFormats="Code128 Code93 Code39 EAN-13 2Of5 Inter2Of5 Codabar".split(" ");FormatPriority=[];l="Code128 Code93 Code39 EAN-13 2Of5 Inter2Of5 Codabar".split(" ");Multiple=Secure2Of5=SecureCodabar=!0;"undefined"!=typeof a.data.multiple&&(Multiple=a.data.multiple);
"undefined"!=typeof a.data.decodeFormats&&(l=a.data.decodeFormats);for(a=0;a<l.length;a++)FormatPriority.push(l[a]);CreateTable();CreateScanTable();a=Main();0<a.length?postMessage({result:checkFinalResult(a),success:!0}):postMessage({result:a,success:!1})};/*
 jQuery Mobile fixedtoolbar polyfill for blacklisted browsers that don't natively support position:fixed
 Author @scottjehl
 Copyright 2012 Filament Group, Inc.
 License Dual MIT or GPLv2
*/
(function(a,l){if(a.mobile.fixedtoolbar.prototype.options.supportBlacklist()&&a.support.scrollTop){var g=a.mobile.fixedtoolbar.prototype._create,k=function(){if(!0===this.options.polyfillSupport){var d=this.element,b=d.hasClass("ui-header-fixed")?"header":"footer",g=d.closest(":jqmData(role='page')");d.addClass("ui-fixed-faux");var k=function(){return"header"===b?function(){d.css("top",a(window).scrollTop()+"px")}:function(){d.css("bottom",g.outerHeight()-a(window).scrollTop()-a.mobile.getScreenHeight()+
"px")}}();g.bind("pagebeforeshow",function(b){var h;(0===a(document).scrollTop()?a(window):a(document)).bind("scrollstart.fixedtoolbarpolyfill",function(){h=d.not(".ui-fixed-hidden").fixedtoolbar("hide",!0)}).bind("scrollstop.fixedtoolbarpolyfill",function(){k();h.fixedtoolbar("show")});a(window).bind("throttledresize.fixedtoolbarpolyfill",k);g.one("pagehide",function(){a(this).add(this).add(document).unbind(".fixedtoolbarpolyfill")});k()})}};a.mobile.fixedtoolbar.prototype.options.supportBlacklist=
function(){return!1};a.mobile.fixedtoolbar.prototype.options.polyfillSupport=!0;a.mobile.fixedtoolbar.prototype._create=function(){g.call(this);k.call(this)}}})(jQuery);(function(a,l,g,k){function d(b,f){this.element=b;p=a(b);this.options=a.extend({},G,f);this._defaults=G;this._name="WebCodeCam";this._id=a(b).attr("id");this.init()&&(this.setEventListeners(),this.options.ReadQRCode&&this.setCallback())}var b,h,q,p,m,f,u={},w=a('<video style="position: relative;visibility:hidden;display: inline-block;">')[0],y=!1,A=!1,G={ReadQRCode:!0,width:320,height:480,videoSource:{id:!0,maxWidth:240,maxHeight:320},flipVertical:!1,flipHorizontal:!1,zoom:-1,beep:"js/beep.mp3",resultFunction:function(a,
b){},getUserMediaError:function(){},cameraError:function(a){}};d.prototype={init:function(){b=this;q=b.element.getContext("2d");m=b.options.width;f=b.options.height;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(navigator.getUserMedia)u[b.options.videoSource.id]&&u[b.options.videoSource.id].active?b.cameraSuccess(u[b.options.videoSource.id]):navigator.getUserMedia({video:{mandatory:{maxWidth:b.options.videoSource.maxWidth,
maxHeight:b.options.videoSource.maxHeight},optional:[{sourceId:b.options.videoSource.id}]},audio:!1},b.cameraSuccess,b.cameraError);else return b.options.getUserMediaError(),!1;return!0},cameraSuccess:function(a){u[b.options.videoSource.id]=a;var f=l.URL||l.webkitURL;w.src=f?f.createObjectURL(a):a;w.play()},cameraError:function(a){b.options.cameraError(a);return!1},setEventListeners:function(){w.addEventListener("canplay",function(a){y||(0<w.videoWidth&&(f=w.videoHeight/(w.videoWidth/m)),p[0].setAttribute("width",
m),p[0].setAttribute("height",f),b.options.flipHorizontal&&(q.scale(-1,1),q.translate(-m,0)),b.options.flipVertical&&(q.scale(1,-1),q.translate(0,-f)),y=!0,b.options.ReadQRCode&&b.delay())},!1);w.addEventListener("play",function(){setInterval(function(){if(!w.paused&&!w.ended){q.clearRect(0,0,m,f);var a=b.options.zoom;0>a&&(a=b.optimalZoom());q.drawImage(w,(m*a-m)/-2,(f*a-f)/-2,m*a,f*a);a=q.getImageData(0,0,m,f);q.putImageData(a,0,0);qrcode.callback()}},40)},!1)},setCallback:function(){qrcode.callback=
function(a){A||w.paused||(b.beep(),A=!0,b.delay(),b.options.resultFunction(a,h))}},tryParseQRCode:function(){try{h=p[0].toDataURL(),qrcode.setId(this._id),qrcode.decode()}catch(E){A||setTimeout(function(){b.tryParseQRCode()},320)}},delay:function(){b.cameraPlay(!0)},cameraPlay:function(a){u[b.options.videoSource.id]?a||b.cameraSuccess(u[b.options.videoSource.id]):b.init();A=!0;w.play();setTimeout(function(){A=!1;b.options.ReadQRCode&&b.tryParseQRCode()},2E3)},getLastImageSrc:function(){return h},
optimalZoom:function(a){return w.videoHeight/f},beep:function(){if("string"==typeof b.options.beep){var a=b.options.beep;setTimeout(function(){(new Audio(a)).play()},0)}}};a.fn.WebCodeCam=function(b){return this.each(function(){a.data(this,"plugin_WebCodeCam")||a.data(this,"plugin_WebCodeCam",new d(this,b))})}})(jQuery,window,document);(function(a){function l(b){var d={},f=b.frame;d.getFrame=function(){return f};d.setFrame=function(a){f=a;this.applyCSS()};d.applyCSS=function(){var d=a.mobileweb.device.aspectratio;if(null!=a.utility("getSessionData","moveObject",b.id)){var g=a.utility("getSessionData","moveObject",b.id);moveObj=a.parseJSON(g);a.mobileweb.getCurrentPage().getName()==moveObj.page_name&&b.id==moveObj.u_id&&(f.x=parseInt(moveObj.framedata.left.replace("px",""))/d,f.y=parseInt(moveObj.framedata.top.replace("px",""))/
d)}null!=a.utility("getSessionData","rotateObject",b.id)&&(d=a.utility("getSessionData","rotateObject",b.id),rotateObj=a.parseJSON(d),a.mobileweb.getCurrentPage().getName()==rotateObj.page_name&&b.id==rotateObj.u_id&&(f.rotation=rotateObj.rotation));"Image"===b.viewtype&&475==f.height&&(f.height=480);"Desktop"!==a.mobileweb.device.type&&"TextArea"===b.viewtype&&(d=a("<style>::-webkit-scrollbar{ display:none; }</style>"),a("html > head").append(d));a("#"+b.id).css({position:"absolute",left:f.x*a.mobileweb.device.aspectWratio,
width:f.width*a.mobileweb.device.aspectWratio});a("#"+b.id).css({position:"absolute",top:f.y*a.mobileweb.device.aspectHratio,height:f.height*a.mobileweb.device.aspectHratio});"Image"===b.viewtype&&"ScaleToFill"==b.scalemode?a("#"+b.id+"_divImg").css({filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation="+f.rotation+")","-ms-transform":"rotate("+parseInt(f.rotation)+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation="+f.rotation+")","-moz-transform":"rotate("+ +parseInt(f.rotation)+
"deg)","-o-transform":"rotate("+f.rotation+"deg)",transform:"rotate("+parseInt(f.rotation)+"deg)","-webkit-transform":"rotate("+parseInt(f.rotation)+"deg)"}):a("#"+b.id).css({filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation="+f.rotation+")","-ms-transform":"rotate("+parseInt(f.rotation)+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation="+f.rotation+")","-moz-transform":"rotate("+ +parseInt(f.rotation)+"deg)","-o-transform":"rotate("+f.rotation+"deg)",transform:"rotate("+
parseInt(f.rotation)+"deg)","-webkit-transform":"rotate("+parseInt(f.rotation)+"deg)"})};return d}function g(b){var d={},f=b.font;d.setFontFace=function(d){f&&""!=f.fontName&&"system"!=f.fontName&&(d=f.fontName);"Helvetica Neue"==d&&(d="Arial, Helvetica, sans-serif");"button"==b.type?a("#"+b.id+" .ui-btn-text").css({"font-family":d,"font-weight":"normal"}):"image"==b.type?a("label[for="+b.id+"]").css({"font-family":d}):a("#"+b.id).css({"font-family":d})};d.setSize=function(d){f&&(f.size=d);"button"==
b.type?a("#"+b.id+" .ui-btn-text").css({"font-size":parseInt(d*a.mobileweb.device.aspectWratio)}):"image"==b.type?a("label[for="+b.id+"]").css({"font-size":d*a.mobileweb.device.aspectratio}):a("#"+b.id).css({"font-size":d*a.mobileweb.device.aspectratio})};d.setWeight=function(d){f&&(f.weight=b.font.weight);"Radio"==b.viewtype?a("label[for="+b.id+"]").css({"font-weight":d}):"button"==b.type?a("#"+b.id+" .ui-btn-text").css({"font-weight":d}):"image"==b.type?a("label[for="+b.id+"]").css({"font-weight":d}):
a("#"+b.id).css({"font-weight":d})};d.setStyle=function(d){f&&(f.style=b.font.style);"Radio"==b.viewtype?a("label[for="+b.id+"]").css({"font-style":d}):"button"==b.type?a("#"+b.id+" .ui-btn-text").css({"font-style":d}):"image"==b.type?a("label[for="+b.id+"]").css({"font-style":d}):a("#"+b.id).css({"font-style":d})};d.setAlign=function(d){f&&(f.align=d);"button"==b.type?a("#"+b.id+">div").css({"text-align":d}):"image"==b.type?a("label[for="+b.id+"]").css({"text-align":d}):a("#"+b.id).css({"text-align":d})};
d.setColor=function(g){f&&(f.color=g);d.color=a.attributes("color",g);"text"==b.type?a("#"+b.id).css({color:d.color.getColorCode()}):"image"==b.type?a("label[for="+b.id+"]").css({color:d.color.getColorCode()}):"button"==b.type?a("#"+b.id+" .ui-btn-text").css({color:d.color.getColorCode()}):a("#"+b.id).css({color:d.color.getColorCode()})};d.applyCSS=function(){if(null!=a.utility("getSessionData","colorObject",b.id)){var d=a.utility("getSessionData","colorObject",b.id);colorObj=a.parseJSON(d);a.mobileweb.getCurrentPage().getName()==
colorObj.page_name&&b.id==colorObj.u_id&&f&&(f.color=colorObj.color)}a("#"+b.id).css({wordwrap:"normal","text-shadow":"1px 1px 1px #FFFFFF"});this.setFontFace('"source_sans_proregular","Arial","Sans Serif"');f&&(this.setSize(f.size),this.setAlign(f.align),this.setColor(f.color),this.setWeight(f.weight?"bold":"normal"),this.setStyle(f.style?"italic":""))};return d}function k(b){var d={setColor:function(){d.background=a.attributes("color",b.background);"search"==b.type?a("#"+b.id+" .ui-input-search").css({background:d.background.getColorCode()}):
a("#"+b.id).css({background:d.background.getColorCode()})}};return d}function d(a){var d={};"string"==typeof a&&(a=b(a));d.getColorCode=function(){return a.name?a.name:["rgba(",a.red,",",a.green,",",a.blue,",",a.alpha,")"].join("")};return d}function b(a){a=parseInt(a);0>a&&(a=4294967295+a+1);var b=a.toString(16).toUpperCase();a=parseInt(b.slice(1,3),16);var f=parseInt(b.slice(3,5),16);b=parseInt(b.slice(5,7),16);return a={red:a,green:f,blue:b,alpha:1}}function h(b){return{applyCSS:function(){if(b.border){a("#"+
b.id).css({"border-style":"solid","border-width":b.border.borderweight*a.mobileweb.device.aspectratio+"px"});var d=a.attributes("color",b.border.bordercolor);a("#"+b.id).css({"border-color":d.getColorCode()})}}}}function q(b){return{applyCSS:function(){b.padding&&(a("#"+b.id).css({"padding-top":b.padding.top*a.mobileweb.device.aspectHratio,"padding-bottom":b.padding.bottom*a.mobileweb.device.aspectHratio}),a("#"+b.id).css({"padding-left":b.padding.left*a.mobileweb.device.aspectWratio,"padding-right":b.padding.right*
a.mobileweb.device.aspectWratio}))}}}a.attributes=function(a,b){switch(a){case "frame":return new l(b);case "font":return new g(b);case "color":return new d(b);case "background":return new k(b);case "border":return new h(b);case "padding":return new q(b)}}})(jQuery);jQuery.cookie=function(a,l,g){if(1<arguments.length&&"[object Object]"!==String(l)){g=jQuery.extend({},g);if(null===l||void 0===l)g.expires=-1;if("number"===typeof g.expires){var k=g.expires,d=g.expires=new Date;d.setDate(d.getDate()+k)}l=String(l);return document.cookie=[encodeURIComponent(a),"=",g.raw?l:encodeURIComponent(l),g.expires?"; expires="+g.expires.toUTCString():"",g.path?"; path="+g.path:"",g.domain?"; domain="+g.domain:"",g.secure?"; secure":""].join("")}g=l||{};d=g.raw?function(a){return a}:
decodeURIComponent;return(k=(new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)")).exec(document.cookie))?d(k[1]):null};(function(a){a.mobileweb=function(l){if(-1!=navigator.appVersion.indexOf("Win")){var g=navigator.userAgent.toLowerCase();-1==g.indexOf("safari")||-1<g.indexOf("chrome")||(a.errorhandler("alertBox","This browser(Windows > Safari) does not support MW url."),a(".blockOverlay").css({cursor:"none"}))}a.mobileweb=JSON.parse(JSON.stringify(l));a.mobileweb.device={iframe:!1,standalone:"standalone"in window.navigator&&window.navigator.standalone,orientation:document.documentElement.clientWidth>document.documentElement.clientHeight?
"landscape-right":"portrait-up",type:a.utility("getDeviceType")};a.mobileweb.serverport="8181";a.utility("setServerPort",a.mobileweb.serverport);a.utility("setBootingForFirstTime",!0);window.scrollTo(0,1);"preview"===a.mobileweb.state&&(a.mobileweb.device.iframe=!0);-1!=document.location.href.indexOf("#")&&(document.location.href=String(document.location.href).substring(0,document.location.href.lastIndexOf("#")));a.mobileweb.setDeviceScreen=function(){document.addEventListener("visibilitychange",
function(){0<a("#ui-datepicker-div").length&&a("#ui-datepicker-div").hide();var b=[];void 0!=a.mobileweb.appEvents&&void 0!=a.mobileweb.appEvents.EnterBackground&&(a.extend(b,a.mobileweb.appEvents.EnterBackground),b=JSON.stringify(b).slice(),(new a.actions(a.utility("getObject",a.mobileweb.pages,"name",a.mobileweb.getCurrentPage().getName()),null,JSON.parse(b))).execute())},!1);a.mobileweb.googleMap&&a.mobileweb.googleMap.googleMapUsed&&(a.mobileweb.googleMap.googleMapKeyFound||a.errorhandler("alertBox",
"No googleAPI key found"));if("preview"===a.mobileweb.state||a.mobileweb.device.iframe)a.mobileweb.device.width=Math.min(document.documentElement.clientWidth,document.documentElement.clientHeight),a.mobileweb.device.height=Math.max(document.documentElement.clientWidth,document.documentElement.clientHeight),a.mobileweb.device.aspectratio=1,a.mobileweb.device.aspectWratio=a.mobileweb.device.aspectratio,a.mobileweb.device.aspectHratio=a.mobileweb.device.aspectratio;else{if(!navigator.userAgent.match(/android/i)||
void 0!=a.browser.chrome&&0!=a.browser.chrome)"landscape-right"==a.utility("getDeviceOrientation",window.orientation)||"landscape-left"==a.utility("getDeviceOrientation",window.orientation)?a.mobileweb.device.width=Math.min(document.documentElement.clientWidth,document.documentElement.clientHeight):a.mobileweb.device.width=document.documentElement.clientWidth;else if("landscape-right"==a.utility("getDeviceOrientation",window.orientation)||"landscape-left"==a.utility("getDeviceOrientation",window.orientation))a.mobileweb.device.width=
Math.min(document.documentElement.clientWidth,document.documentElement.clientHeight);else if("portrait-down"==a.utility("getDeviceOrientation",window.orientation)||"portrait-up"==a.utility("getDeviceOrientation",window.orientation)){if(void 0==a.mobileweb.device.width||a.mobileweb.device.width>=document.documentElement.clientWidth)a.mobileweb.device.width=document.documentElement.clientWidth}else a.mobileweb.device.width=Math.min(document.documentElement.clientWidth,document.documentElement.clientHeight);
a.mobileweb.device.height=document.documentElement.clientHeight;var b=document.location.href;-1<b.indexOf("#")&&(b=b.substring(0,b.indexOf("#")));var d=0;"Desktop"===a.mobileweb.device.type||"Untested Device"===a.mobileweb.device.type?(b&&-1!=b.lastIndexOf("index.")?a.mobileweb.device.aspectratio=a.mobileweb.device.height/a.mobileweb.screens[0].height:(a.mobileweb.device.aspectratio=a.mobileweb.device.height/a.mobileweb.screens[0].height,d=b.substring(b.lastIndexOf("index_")+6,b.lastIndexOf(".")),
isNaN(d)?d=0:(b=parseInt(d)-1,-1<b&&b<a.mobileweb.screens.length&&(a.mobileweb.device.aspectratio=a.mobileweb.device.height/a.mobileweb.screens[b].height))),1<a.mobileweb.screens.length&&0<d&&d--,parseInt(a.mobileweb.screens[d].width)>parseInt(a.mobileweb.screens[d].height)?a.mobileweb.device.aspectWratio=a.mobileweb.device.width/a.mobileweb.screens[d].width:a.mobileweb.device.aspectWratio=a.mobileweb.device.aspectratio,a.mobileweb.device.aspectHratio=a.mobileweb.device.aspectratio):(b&&-1!=b.lastIndexOf("_")&&
(d=b.substring(b.lastIndexOf("_")+1,b.lastIndexOf("."))-1,isNaN(d)&&(d=0)),b=a.mobileweb.device.height/a.mobileweb.screens[d].height,a.mobileweb.device.aspectWratio=a.mobileweb.device.width/a.mobileweb.screens[d].width,a.mobileweb.device.aspectHratio=b,a.mobileweb.device.aspectratio=b);a.mobileweb.screens.screenIndex=d}};a.mobileweb.plugin&&a.each(a.mobileweb.plugin,function(b,d){a.utility("sendRequest",d.link)});a.mobileweb.serveracc&&a.utility("initServer",!1);a.mobileweb.localdb&&(window.openDatabase?
(a.utility("initData",!1),"preview"===a.mobileweb.state?(a.utility("log","[INIT] Running preview so drop the database and recreate evrything from scratch..."),a.mobileweb.localdb.instance=a.utility("createDatabase",["db_",a.mobileweb.pid,"_test"].join(""),2),a.utility("isDatabaseExists",a.mobileweb.localdb.instance,a.mobileweb.localdb.schema)):(a.mobileweb.localdb.instance=a.utility("createDatabase",["db_",a.mobileweb.pid].join(""),2),a.utility("createTable",a.mobileweb.localdb.instance,{status:!1,
tablename:"appVersion",value:[],fields:[{name:"appVersion",type:"REAL",autoinc:!1,pk:!1}]}),a.mobileweb.localdb.instance.transaction(function(b){b.executeSql("SELECT appVersion FROM appVersion",[],function(b,d){0===d.rows.length?(a.utility("log","[INIT] new application... send request"),a.utility("insertIntoLocalDB","appVersion",[{appVersion:a.mobileweb.version}])):(void 0!=d.rows[0].appVersion&&d.rows[0].appVersion!=a.mobileweb.version&&(a.utility("log","[INIT] new version so update version and send request"),
a.each(a.mobileweb.localdb.schema,function(b,f){a.utility("dropTable",a.mobileweb.localdb.instance,f.tablename)})),(new a.actions(null,null,[{method:"Update",category:"DBAction",params:{tablename:"appVersion",where:"rowid = 1",record:{appVersion:a.mobileweb.version}}}])).execute());a.utility("isDatabaseExists",a.mobileweb.localdb.instance,a.mobileweb.localdb.schema)},function(b,d){a.utility("log",d)})}))):a.mobileweb.serveracc&&(a.utility("initServer",!0),a.utility("requestData",!0)));if(4<a.mobileweb.tabs.length){var k=
[];"tab-more"===a.mobileweb.tabs[4].id&&(a.each(a.mobileweb.tabs[4].tabs,function(a,b){k.push({rowsize:44,data:{contents:[null]},icon:{type:"row",style:"arrow-r",events:{Tap:[{method:"SelectTab",category:"PageAction",params:{tab:4+a}}]}},children:[{id:"ui-more-1-"+a,name:"",value:b.text,template:"",viewtype:"Label",frame:{x:50,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-more-2-"+a,value:b.icon.image,template:"",name:"",
viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}],events:{Tap:[{method:"SelectTab",category:"PageAction",params:{tab:4+a}}]}})}),a.mobileweb.pages.push({height:480,width:320,name:"more",parent:"",header:{title:"More",hidden:!1},footer:{hidden:!1},children:[{id:"ui-more",style:"default",group:[{header:"",footer:"",row:k}],viewtype:"TableViewListTab"}],type:"TableViewListTab"}))}a.mobileweb.changeTab=function(b,d){setTimeout(function(){a("#tab-"+b+">a").addClass("ui-btn-active ui-state-persist")},
0);"more"==b?(a.utility("setTabPage",b),a.mobileweb.changePage(b,d,!1)):1<=b&&4>=b?0!=a.mobileweb.tabs.length?(a.utility("setTabPage",a.mobileweb.tabs[b-1].page),d?a.mobileweb.changePage(a.mobileweb.tabs[b-1].page,d,!1):a.mobileweb.changePage(a.mobileweb.tabs[b-1].page,"fade",!1)):a.utility("requestData",!0):"tab-more"!=a.mobileweb.tabs[4].id?(a.utility("setTabPage",a.mobileweb.tabs[b-1].page),a.mobileweb.changePage(a.mobileweb.tabs[b-1].page,"fade",!1)):(a.utility("setTabPage",a.mobileweb.tabs[4].tabs[b-
5].page),a.mobileweb.changePage(a.mobileweb.tabs[4].tabs[b-5].page,"slide",!1))};a.mobileweb.getPage=function(b,d){var g=a.utility("getTabPageData",b);if(void 0!=g&&-1!=g.getParent().indexOf("Tab"))return a.utility("setReverseTransition",!0),g;if(!0===d)return a.utility("getParentPage");if("returnToParentView"===d)return a.utility("getSpecificParentPage",b);a.utility("setReverseTransition",!1);return a.page(a.utility("getObject",a.mobileweb.pages,"name",b),d)};var d={};a.mobileweb.changePage=function(b,
g,k){a.utility("setActionRunningStatus",!1);"slidefade"===g&&(g="fade");d=a.mobileweb.getPage(b,k);"returnToParentView"===k||!0===k?k=!0:k=!1;a("body").everyTime(100,function(){if(!a.utility("isBusy")){a.utility("getResetEvent")||a("body").stopTime();var h=a.utility("getObject",a.mobileweb.pages,"name",b);if(void 0!=h.events&&void 0!=h.events.BeforeViewPage&&0<h.events.BeforeViewPage.length){if(!k){var f=!1,l=a.utility("getTabPage");a.each(l,function(a,d){d.page==b&&1==d.tabFlag&&(f=!0)});f?f&&a.utility("getResetEvent")&&
(a.utility("setActionRunningStatus",!0),(new a.actions(h,null,h.events.BeforeViewPage.slice())).execute()):(a.utility("setActionRunningStatus",!0),(new a.actions(h,null,h.events.BeforeViewPage.slice())).execute())}}else a("body").stopTime();var p=setInterval(function(){if(!a.utility("getActionRunningStatus")){clearInterval(p);a("body").find("video").each(function(){try{a(this)[0].pause()}catch(A){console.log(A)}});a("body").find("audio").each(function(){try{a(this)[0].pause()}catch(A){console.log(A)}});
var b=a.utility("getTimers");a.each(b,function(b,f){a.utility("removeTimers",Object.keys(f)[0])});a.utility("setPageLoadingFlag",!0);a("body").everyTime(100,function(){a.utility("getResetEvent")&&a.utility("queryDatabase",!1);if(!a.utility("isBusy")&&a.utility("isInitChildren")){a("body").stopTime();k?(a.utility("setReverseTransition",!0),d.callReverse(g)):(d.show(g,k),a(".ui-icon-loading").css({"background-image":'url("https://code.jquery.com/mobile/1.2.0/images/ajax-loader.gif")'}),d.liveContainer());
var b="BaseView"!=d.getViewType()&&"ScrollView"!=d.getViewType()?500:100,f=setInterval(function(){if(a.utility("isInitChildren")){clearInterval(f);a.utility("setReverseTransition",!1);var b=a.utility("getRegisteredActions");if(0!=b.length){var g=function(){var f=!1,k=b[h].action.params.targetpage,l,m;if("SplitView"===a.mobileweb.getCurrentPage().getViewType()){var p=a.utility("getObject",a.mobileweb.pages,"name",a.mobileweb.getCurrentPage().getName()).children;a.each(p,function(a,b){k===b.name&&(f=
!0,l=b)})}else"PageScrollView"===a.mobileweb.getCurrentPage().getViewType()?(p=a.utility("getObject",a.mobileweb.pages,"name",a.mobileweb.getCurrentPage().getName()).children,a.each(p,function(a,b){k===b.name&&(f=!0,m=b)})):k==a.mobileweb.getCurrentPage().getName()&&(f=!0);if(f){p=[];p.push(b[h].action);var q=a.utility("getObject",a.mobileweb.pages,"name",a.mobileweb.getCurrentPage().getName());"SplitView"===a.mobileweb.getCurrentPage().getViewType()&&void 0!=l?q=l:"PageScrollView"===a.mobileweb.getCurrentPage().getViewType()&&
void 0!=m&&(q=m);"DBCondition"===b[h].action.category&&"changeCondition"===b[h].action.method&&b[h].action.params.targetpage==q.name&&(q.data.wherecond=b[h].action.params.where,q.data.order=b[h].action.params.order);b[h].pagedef.target=b[h].target;(new a.actions(q,b[h].ui,p.slice(),b[h].pagedef,function(){h++;if(h<b.length)g();else var f="BaseView"!=d.getViewType()&&"ScrollView"!=d.getViewType()?3E3:5,k=setInterval(function(){a.utility("getActionRunningStatus")||(clearInterval(k),d.triggerActions())},
f)})).execute()}else if(h++,h<b.length)g();else{p="BaseView"!=d.getViewType()&&"ScrollView"!=d.getViewType()?3E3:5;var u=setInterval(function(){a.utility("getActionRunningStatus")||(clearInterval(u),d.triggerActions())},p)}},h=0;g()}else var l="BaseView"!=d.getViewType()&&"ScrollView"!=d.getViewType()?3E3:5,m=setInterval(function(){a.utility("getActionRunningStatus")||(clearInterval(m),k||d.triggerActions())},l);a.utility("removeTrigerredActions")}},b);!window.openDatabase&&a.utility("isBootingForFirstTime")&&
a.mobileweb.tabs[0].page===a.mobileweb.getCurrentPage().getName()&&1<a.mobileweb.localdb.schema.length&&(setTimeout(function(){var b=navigator.userAgent.toLowerCase();-1!=b.indexOf("safari")?-1<b.indexOf("chrome")||a.errorhandler("alertBox","By default local database not supported. To enable : Settings > Safari > Advanced > Experimental Features > Disable Web SQL > turn off"):a.errorhandler("alertBox","\u3053\u306e\u30d6\u30e9\u30a6\u30b6\u306f\u30ed\u30fc\u30ab\u30ebDB\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u306e\u3067\u3001\u3053\u306e\u30a2\u30d7\u30ea\u306e\u5e7e\u3064\u304b\u306e\u753b\u9762\u3084\u6a5f\u80fd\u306f\u6b63\u3057\u304f\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002\u5225\u306e\u30ed\u30fc\u30ab\u30eb\u30c0\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30b5\u30dd\u30fc\u30c8\u3057 \u3066\u3044\u308b\u30d6\u30e9\u30a6\u30b6\uff08Chrome\u3084Safari\u7b49\uff09\u3067\u3001\u3053\u306e\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3059\u308b\u4e8b\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002",
"This browser does not support local database which the app will use, So some functions will not be work correctly. We strongly recommend you should use another browser which supports local database, like Safari or Chrome.")},4E3),a.utility("setBootingForFirstTime",!1))}})}},100)}})};a.mobileweb.getCurrentPage=function(){return d};a.mobileweb.setCurrentPage=function(a){d=a};var b=window.innerHeight;a(window).resize(function(){window.innerHeight<b?a("[data-role=footer]").hide():a("[data-role=footer]").show();
if(a("input, textarea, select").is(":focus")||"Android"!=a.utility("getDeviceType"))"Untested Device"===a.utility("getDeviceType")||a.utility("getDeviceType");else var g=setInterval(function(){clearInterval(g);a.mobileweb.device.height=document.documentElement.clientHeight;a.mobileweb.device.aspectratio=a.mobileweb.device.height/a.mobileweb.screens[0].height;setTimeout(d.refreshDisplay(),0)},800)});a(window).on("orientationchange",function(b){if("Desktop"!=a.mobileweb.device.type)var g=setInterval(function(){clearInterval(g);
a.mobileweb.device.height=document.documentElement.clientHeight;a.mobileweb.device.width=document.documentElement.clientWidth;a.mobileweb.device.aspectWratio=a.mobileweb.device.width/a.mobileweb.screens[0].width;a.mobileweb.device.aspectHratio=a.mobileweb.device.height/a.mobileweb.screens[0].height;a.mobileweb.device.aspectratio=a.mobileweb.device.aspectHratio;setTimeout(d.refreshDisplay(),0)},800)});a(window).on("navigate",function(a){a.preventDefault();window.history.forward(1)});a.mobileweb.setDeviceScreen();
a.mobileweb.getProjectCoreData=function(){return l};return a.mobileweb}})(jQuery);(function(a){function l(d,b,h){b.group=[];d.toolbarleft.type=d.type;d.toolbarleft.sidebarParentPagedef=d;"PageScrollView"!=d.type&&a.each(d.children,function(a,b){d.toolbarleft.children.push(b)});a.each(h.group,function(a,k){d.toolbarleft.name=d.name;d.toolbarleft.parent=d.parent;d.toolbarleft.data=d.data;b.group.push(new g(d.toolbarleft,h.id,k,a))});b.getHTML=function(){var g=[],k="Grouped"==h.tablestyle?"style='left:0px;'":"";a.each(b.group,function(a,b){g=g.concat(b.getHTML())});var l="",f="";
f="ja"!=a.utility("detectBrowserLanguage")?"Show More":"\u7d9a\u304d\u3092\u898b\u308b";if("RemoteTableViewList"==d.type&&25==d.data.contents.totalRecords||"DBTableViewList"==d.type&&25==d.data.contents.length)l="<fieldset id='showmore'> <input id='showmore'  type='button' value='"+f+"' class=ui-btn-hidden aria-disabled=false /></fieldset>";return["<div id='",h.id,"' "+k+" class='ui-table-position'>",g.join(""),l,"</div>"].join("")};b.applyOverrides=function(){a("#"+h.id).css({"z-index":"1001"});
"TableView"===d.type&&d.children[0].accordion&&a(".ui-table-position").css({top:"0px"});"Grouped"==h.tablestyle&&a("#"+h.id).css({left:"0px"});a.each(b.group,function(a,b){b.applyOverrides()})};b.applyEvents=function(){a.each(b.group,function(a,b){b.applyEvents()});"RemoteTableViewList"==d.type||"DBTableViewList"==d.type?a("#showmore").bind("click",function(){var b=a("#"+d.children[0].id+" ul").attr("id");a.utility("showLoadingIndicator",!0);d.data.contents.loaded=!1;var g=d.data.contents.length,
h=a(".scroller").offset(),f=h.top,k=h.left;"RemoteTableViewList"==d.type?(new a.actions(d,null,[{method:"Select",category:"ComAction",callback:"loadMoreRecords",params:{servicename:d.data.servicename,table:d.data.tablename,where:d.data.wherecond,order:d.data.order,offset:parseInt(d.data.contents.offset)+25,limit:25,fields:""}}])).execute():"DBTableViewList"==d.type&&(new a.actions(d,null,[{method:"Select",category:"DBAction",callback:"loadMoreRecords",params:{tablename:d.data.tablename,where:d.data.wherecond,
order:d.data.order,columns:""}}])).execute();var l=setInterval(function(){void 0!=d.data.contents.loaded&&d.data.contents.loaded?(clearInterval(l),a.createRemoteDBListViewPageRows(d,function(){var h=[];h=d.data.contents[0].constructor==Object?d.data.contents:d.data.contents[0];if(g<h.length){h=h.length-g;for(var l=0,m=0;m<h;m++){var p=g+m;a.createRow(d,b,d.children[0].group[0].row[p],g+m,function(b){l+=b.getCellHeight();l+=2;d.children[0].group[0].row[p]=b;d.children[0].group[0].row.push(d.children[0].group[0].row[p]);
a(".scroller").find("ul").append(d.children[0].group[0].row[p].getHTML().join(""));d.children[0].group[0].row[p].applyOverrides();d.children[0].group[0].row[p].applyEvents()})}a.utility("showLoadingIndicator",!1);a(".scroller").find("ul").unblock();a(".ui-loader").css({display:"none"});a(".bglayout").css({height:parseFloat(a(".bglayout").css("height").replace("px",""))+l+"px"});a(".scroller").css({height:parseFloat(a(".scroller").css("height").replace("px",""))+l+"px"});a(".scroller").css({height:parseFloat(a("#"+
d.children[0].id).css("height").replace("px",""))+20+"px"});a(".scroller").offset();var q=setInterval(function(){clearInterval(q);a(".scroller").offset({top:f,left:k});a(".scroller").offset()},400)}d.iscroll={};a("#iscroll_"+d.name+"> div:nth-child(2)").remove();d.iscroll=new iScroll(a("#iscroll_"+d.name).get(0),{useTransform:!1,bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}),
d.data.contents.allRecordsLoaded&&a("#showmore").remove()):(clearInterval(l),a.createRemoteDBListViewPageRows(d,function(){for(var g=0,h=0;25>h;h++){var l=a(".scroller").find("ul").children("li").length;a.createRow(d,b,d.children[0].group[0].row[l],25+h,function(b){g+=b.getCellHeight();g+=2;d.children[0].group[0].row[l]=b;d.children[0].group[0].row.push(d.children[0].group[0].row[l]);a(".scroller").find("ul").append(d.children[0].group[0].row[l].getHTML().join(""));d.children[0].group[0].row[l].applyOverrides();
d.children[0].group[0].row[l].applyEvents()})}a.utility("showLoadingIndicator",!1);a(".scroller").find("ul").unblock();a(".ui-loader").css({display:"none"});a(".bglayout").css({height:parseFloat(a(".bglayout").css("height").replace("px",""))+g+"px"});a(".scroller").css({height:parseFloat(a(".scroller").css("height").replace("px",""))+g+"px"});a(".scroller").css({height:parseFloat(a("#"+d.children[0].id).css("height").replace("px",""))+50+"px"});a(".bglayout").css({height:parseFloat(a("#"+d.children[0].id).css("height").replace("px",
""))+50+"px"});a(".scroller").offset();var m=setInterval(function(){clearInterval(m);a(".scroller").offset({top:f,left:k});a(".scroller").offset()},400);d.iscroll={};a("#iscroll_"+d.name+"> div:nth-child(2)").remove();d.iscroll=new iScroll(a("#iscroll_"+d.name).get(0),{useTransform:!1,bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}))},300)}):a(".ui-collapsible-heading").click(function(b){b=
a(this).attr("class");console.log(a(this).attr("id")," --\x3e",b);var g=d.children[0].accordionheader;if(g){var h=a.utility("getImage",a.utility("tokenizeString",g.closeicon,d));g=a.utility("getImage",a.utility("tokenizeString",g.openicon,d));-1<b.indexOf("ui-collapsible-heading-collapsed")?""!=h?(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class","ui-icon"),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":"url("+h+")"}),a("#"+a(this).attr("id")+"  > a > span > span.ui-icon").css({"background-size":"18px 18px"})):
a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":""}):""!=g?(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class","ui-icon"),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":"url("+g+")"}),a("#"+a(this).attr("id")+"  a > span > span.ui-icon").css({"background-size":"18px 18px"})):a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":""});a("#iscroll_leftToolBar_"+d.name).css({height:parseInt(a(".ui-table-position").css("height"))+
60,width:parseInt(a("#leftToolBar").css("width"))});a.isEmptyObject(leftToolBar.iscroll)||(leftToolBar.iscroll.refresh(),leftToolBar.iscroll.hScroll=!1)}})};b.getValue=function(){return""}}function g(d,b,g,l){var h={id:b+"-group-"+l,row:[]};a.each(g.row,function(a,b){h.row.push(new k(d,h.id,b,a,g.flexibleHeight))});h.getHTML=function(){var b="Grouped"==d.children[0].tablestyle?"style='padding:3px;'":"",f="Grouped"==d.children[0].tablestyle?"true":"false",k="";"TableView"===d.view&&d.children[0].accordion?
(k=["<div data-role='collapsible' data-collapsed='false'>","<h2 id='",h.id,"'>",g.header,"</h2>","<ul id='",h.id,"' data-role='listview' data-split-theme='d' data-inset='",f,"' "+b+">"],a.each(h.row,function(a,b){k=k.concat(b.getHTML())}),k=""==g.footer?k.concat(["</ul>","<div id='",h.id,"-footer'>","</div>","</div>"]):k.concat(["</ul>","<div id='",h.id,"-footer'>","<p class='ui-table-footer-text'>",g.footer,"&nbsp</p>","</div>","</div>"])):(k=["<div id='",h.id,"-header'>",""!==g.header?["<p class='ui-table-header-text'>",
g.header,"</p>"].join(""):"","</div>","<ul id='",h.id,"' data-role='listview' data-split-theme='d' data-inset='",f,"' "+b+">"],a.each(h.row,function(a,b){k=k.concat(b.getHTML())}),k=k.concat(["</ul>","<div id='",h.id,"-footer'>","<p class='ui-table-footer-text'>",g.footer,"&nbsp</p>","</div>"]));return k};h.applyOverrides=function(){"TableView"===d.view&&a.utility("showLoadingIndicator",!0);a("#"+h.id).css({width:d.width*a.mobileweb.device.aspectratio,margin:"-17px 0px 0px"});a("#"+h.id+"-header .ui-table-header-text").css({"font-size":16*
a.mobileweb.device.aspectratio,"margin-left":10*a.mobileweb.device.aspectratio});a("#"+h.id+"-footer .ui-table-footer-text").css({"font-size":16*a.mobileweb.device.aspectratio,"margin-left":10*a.mobileweb.device.aspectratio,"margin-top":1*a.mobileweb.device.aspectratio});-1<d.view.indexOf("TableView")&&a("#"+h.id+" .ui-icon").css({"z-index":99});var b=1250;if(-1<d.view.indexOf("TableView")){var f=a.utility("getObject",a.mobileweb.pages,"name",d.parent);if(a.isEmptyObject(f)||void 0==f||"DBTableViewList"!=
f.type&&"RemoteTableViewList"!=f.type)b=700}setTimeout(function(){a.each(h.row,function(a,b){b.applyOverrides()});"TableView"===d.view&&a.utility("showLoadingIndicator",!1);-1<d.view.indexOf("TableView")&&a("#"+h.id).css({width:d.frame.width*a.mobileweb.device.aspectratio,"margin-right":20*a.mobileweb.device.aspectratio,"margin-left":20*a.mobileweb.device.aspectratio});if("TableView"===d.view){var b=a.mobileweb.device.aspectratio,f=2*a("#"+h.id).css("padding").replace("px","");if(d.children[0].accordion){a("div[data-role='collapsible']").css({width:d.width*
b,"margin-top":"0px","margin-bottom":4*b});a(".ui-collapsible-content").css({padding:"0px 0px 0px"});a(".ui-collapsible-content > .ui-listview").css({margin:"0px 0px 0px"});a(".ui-collapsible-heading-toggle").css({"border-radius":"1px"});var g=d.children[0].accordionheader;g&&(a(".ui-collapsible-heading-toggle").css({background:a.attributes("color",g.bgcolor).getColorCode(),color:a.attributes("color",g.textcolor).getColorCode()}),a(".ui-collapsible-heading-toggle").css({height:g.height*b,padding:"0px 0px 0px"}),
a(".ui-collapsible-heading-toggle > span").css({height:g.height*b,padding:"0px 0px 0px"}),a(".ui-collapsible-heading-toggle > span > span.ui-btn-text").css({"font-size":16*b,top:(g.height-16)*b/2}),"right"==g.iconposition?(a(".ui-collapsible-heading-toggle > span").css({"padding-left":"12px"}),a(".ui-collapsible-heading-toggle > span > span.ui-icon").css({right:"10px",left:"auto"})):a(".ui-collapsible-heading-toggle > span").css({"padding-left":"40px"}),g.openicon&&""!=g.openicon&&(a(".ui-collapsible-heading > a > span > span.ui-icon").attr("class",
"ui-icon"),g=a.utility("getImage",a.utility("tokenizeString",g.openicon,d)),a(".ui-collapsible-heading > a > span > span.ui-icon").css({"background-image":"url("+g+")"}),a(".ui-collapsible-heading > a > span > span.ui-icon").css({"background-size":"18px 18px"})));"Grouped"!=d.children[0].tablestyle&&(f=0);a("#"+h.id).css({width:d.width*b-f,margin:"0px"})}else"Grouped"!=d.children[0].tablestyle&&(f=0),a("#"+h.id).css({width:d.width*b-f+"px","margin-left":"0px"})}"Grouped"==d.children[0].tablestyle&&
a("#"+h.id).css({width:d.width*b-5+"px",border:"2px solid black","border-radius":"10px","background-color":"white",padding:"1px"})},b)};h.applyEvents=function(){a.each(h.row,function(a,b){b.applyEvents()})};return h}function k(d,b,g,k,l){var h={id:b+"-row-"+k,rownum:g.rownum,backgroundColor:g.backgroundColor,repeatImage:g.repeatImage,isFlexible:l};if(a.utility("isReverseTransition")){var f;"SplitView"==a.mobileweb.getCurrentPage().getViewType()?a.each(a.mobileweb.getCurrentPage().children,function(a,
b){b.getId()===d.name&&(f=b)}):f=a.mobileweb.getCurrentPage();if(void 0!=f){var p;void 0!=f.children[0]&&(p=f.children[0].group[0].row[g.rownum]);h.children=void 0!=p?p.children:[]}else h.children=[]}else h.children=new a.uichildren(d,g.children,g.data.contents[0]);0===h.rownum%2?(h.cellBackgroundColor=g.oddRowBackgroundColor,h.cellBackgroundImage=g.oddRowBackgroundImage):(h.cellBackgroundColor=g.evenRowBackgroundColor,h.cellBackgroundImage=g.evenRowBackgroundImage);h.getHTML=function(){return["<li data-icon='",
g.icon.style,"'>","<a href='#' id='",h.id,"' class='ui-table-padding'>","<div class='ui-table-row-size' style='visibility:hidden'>",h.children.getHTML(),"</div>","</a>",g.icon.events?["<div id='",h.id,"-icon'></div>"].join(""):"","</li>"]};h.getViewType=function(){return"Row"};h.applyOverrides=function(){h.setCellHeight(g.rowsize);0<h.children.length&&(h.children.applyOverrides(),h.children.applyEvents());a("#"+h.id+" .ui-table-row-size").css({visibility:"visible"});"Grouped"!=d.children[0].tablestyle&&
a(".ui-li").css({"border-top-width":"0px","border-bottom-width":"0px"});void 0!=h.backgroundColor&&a("#"+h.id).css({"background-color":a.attributes("color",h.backgroundColor).getColorCode()});void 0!=h.cellBackgroundColor&&a("#"+h.id).css({"background-color":a.attributes("color",h.cellBackgroundColor).getColorCode()});if(void 0!=h.cellBackgroundImage&&""!=h.cellBackgroundImage)if(h.repeatImage)a("#"+h.id).css({"z-index":99,"background-image":"url("+a.utility("getImage",h.cellBackgroundImage)+")",
"background-color":"white","background-position":"100% 100%","background-repeat":"repeat"});else{a("#"+h.id).css({"z-index":99});var b=a("<img/>");b.css({height:g.rowsize*a.mobileweb.device.aspectratio+"px",width:d.width*a.mobileweb.device.aspectratio+"px","margin-left":a("#"+h.id+" div > p").css("left")});b.attr("src",a.utility("getImage",h.cellBackgroundImage));a("#"+h.id+" div").append(b)}"button"==g.icon.style?a("#"+h.id).parent().siblings().css({"z-index":199,"background-image":"url("+a.utility("getSystemImage",
"button.png",h.getViewType())+")","background-color":"white","background-position":" 50% 50%","background-repeat":"no-repeat no-repeat"}):"false"!=g.icon.style&&(a("#"+h.id).parent().siblings().css({"z-index":199}),"arrow-r"==g.icon.style&&(b=a.utility("getSystemImage","icons-18-white.png","Image"),a("#"+h.id).parent().siblings().css({"background-image":'url("'+b+'")',"background-repeat":"no-repeat no-repeat"})));g.icon.events&&a("#"+h.id+"-icon").css({position:"absolute",top:0,left:d.frame.width*
a.mobileweb.device.aspectratio-40,height:g.rowsize*a.mobileweb.device.aspectratio,width:40});a.each(h.children,function(a,b){h.isFlexible&&"TextArea"===b.getViewType()&&h.setFlexibleHeight(b)})};h.setFlexibleHeight=function(b){a("#"+b.getId()).addClass("autoExpand");a("#"+b.getId()).css({height:"initial","max-height":"",overflow:"hidden"});var f=h.getCellHeight()-(parseInt(b.frame.getFrame().y)+parseInt(b.frame.getFrame().height));a("#"+b.getId()).css({bottom:f+"px"});f=document.getElementById(b.getId());
var d=parseInt(window.getComputedStyle(f).height,10)-f.clientHeight;f=Math.max(f.scrollHeight,f.scrollHeight+d);b=h.getCellHeight()-parseInt(b.frame.getFrame().height)+f;b>h.getCellHeight()?a("#"+h.id).css({height:b+"px"}):a("#"+h.id).css({height:h.getCellHeight()+"px"})};h.setCellHeight=function(b){h.isFlexible||(g.rowsize=b,a("#"+h.id+" .ui-table-row-size").css({height:b*a.mobileweb.device.aspectratio}))};h.getCellHeight=function(){return g.rowsize*a.mobileweb.device.aspectratio};h.getId=function(){return h.id};
h.getName=function(){return h.name};h.applyEvents=function(){var b=!1,f=!1;g.icon.events&&g.icon.events.Tap&&a("#"+h.id+"-icon").click(function(){a.each(g.icon.events.Tap,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")});(new a.actions(d,h,g.icon.events.Tap.slice())).execute()});if(g.events){g.events.Tap&&a("#"+h.id).click(function(f){b?(b=!1,clearTimeout(alreadyclickedTimeout)):(b=!0,alreadyclickedTimeout=setTimeout(function(){b=!1},300),"INPUT"!==f.target.tagName&&
("LABEL"===f.target.tagName?0<f.target.htmlFor.length||(a.each(g.events.Tap,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.Tap).slice()))).execute()):(a.each(g.events.Tap,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")}),"TEXTAREA"!==f.target.tagName&&"IMG"!==f.target.tagName&&"draggable"!==f.target.className&&(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.Tap).slice()))).execute())))});
if(g.events.flickRL)a("#"+h.id).on("swipeleft",function(b){f?(f=!1,clearTimeout(alreadySwipedTimeout)):(f=!0,alreadySwipedTimeout=setTimeout(function(){f=!1},300),"INPUT"!==b.target.tagName&&("LABEL"===b.target.tagName?0<b.target.htmlFor.length||(a.each(g.events.flickRL,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.flickRL).slice()))).execute()):(a.each(g.events.flickRL,function(b,f){"PageAction"===f.category&&
a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.flickRL).slice()))).execute())))});if(g.events.flickLR)a("#"+h.id).on("swiperight",function(b){f?(f=!1,clearTimeout(alreadySwipedTimeout)):(f=!0,alreadySwipedTimeout=setTimeout(function(){f=!1},300),"INPUT"!==b.target.tagName&&("LABEL"===b.target.tagName?0<b.target.htmlFor.length||(a.each(g.events.flickLR,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,h,
JSON.parse(JSON.stringify(g.events.flickLR).slice()))).execute()):(a.each(g.events.flickLR,function(b,f){"PageAction"===f.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(d,h,JSON.parse(JSON.stringify(g.events.flickLR).slice()))).execute())))})}};return h}a.sidebartable=function(a,b){var d={};new l(a,d,b);return d}})(jQuery);(function(a){function l(d,b,h){b.group=[];a.each(h.group,function(a,k){b.group.push(new g(d,h.id,k,a))});var k=[];b.getHTML=function(){a.each(b.group,function(a,b){k=k.concat(b.getHTML())});return["<table id='",h.id,"'>",k.join(""),"</table>"].join("")};b.applyOverrides=function(){a.each(b.group,function(a,b){b.applyOverrides()});a("#"+h.id).css({"border-spacing":"0px"})};b.applyEvents=function(){};b.getValue=function(){return""}}function g(d,b,g,l){var h={id:b+"-group-"+l,row:[]},m="";a.each(g.row,
function(a,b){h.row.push(new k(d,h.id,b,a))});h.getHTML=function(){a.each(h.row,function(a,b){m=m.concat(b.getHTML())});return m};h.applyOverrides=function(){a.each(h.row,function(a,b){b.applyOverrides()})};h.applyEvents=function(){a.each(h.row,function(a,b){b.applyEvents()})};return h}function k(d,b,g,k){var h={id:b+"-row-"+k,rownum:g.rownum,children:new a.uichildren(d,g.children,g.data.contents[0]),backgroundColor:g.backgroundColor,getHTML:function(){var b="";a.each(d.children[0].group["0"].template.gridFields,
function(f,d){f=a.utility("extractDataFromRecord",g.data.contents[0],d.template);b=b+'<td id="'+d.id+"_"+h.id+'_td"><p id="'+d.id+"_"+h.id+'_p" tabindex="" > <label class="ui-label" id="'+d.id+"_"+h.id+'" name="'+d.name+'" ">'+f+"</label></p></td>"});return['<tr id="'+h.id+'_tr">'+b+"</tr>"]},getViewType:function(){return"Row"},applyOverrides:function(){a.each(d.children[0].group["0"].template.gridFields,function(b,f){a("#"+f.id+"_"+h.id+"_td").css({width:(f.frame.width-4)*a.mobileweb.device.aspectratio+
"px",border:"1px solid"});a("#"+f.id+"_"+h.id+"_p").css({margin:"auto"});a("#"+f.id+"_"+h.id+"_p").css({"border-width":"1px solid"});a("#"+f.id+"_"+h.id).css({"text-shadow":"0px 0px 0px #FFFFFF"});a("#"+f.id+"_"+h.id).css({position:""});a("#"+f.id+"_"+h.id+"_p").css({"text-align":"center"});a("#"+f.id+"_"+h.id+"_p").css({position:""});a("#"+f.id+"_"+h.id+"_p").css({overflow:"hidden"});a("#"+f.id+"_"+h.id+"_p").css({width:(f.frame.width-4)*a.mobileweb.device.aspectratio+"px"})});h.setCellHeight()},
setCellHeight:function(){a.each(d.children[0].group["0"].template.gridFields,function(b,f){a("#"+h.id+"_tr").css({height:(f.frame.height-4)*a.mobileweb.device.aspectratio+"px"})})},getCellHeight:function(){return g.rowsize*a.mobileweb.device.aspectratio},applyEvents:function(){}};return h}a.uiGrid=function(a,b){var d={};new l(a,d,b);return d}})(jQuery);if("undefined"===typeof jQuery)throw Error("MDTimePicker: This plugin requires jQuery");
+function(a){var l=[9,112,113,114,115,116,117,118,119,120,121,122,123],g=function(d,b){this.hour=d;this.minute=b;this.format=function(b,d){var g=this,h=1<(b.match(/h/g)||[]).length;return a.trim(b.replace(/(hh|h|mm|ss|tt|t)/g,function(a){switch(a.toLowerCase()){case "h":return a=g.getHour(!0),d&&10>a?"0"+a:a;case "hh":return 10>g.hour?"0"+g.hour:g.hour;case "mm":return 10>g.minute?"0"+g.minute:g.minute;case "ss":return"00";case "t":return h?"":g.getT().toLowerCase();case "tt":return h?"":g.getT()}}))};
this.setHour=function(a){this.hour=a};this.getHour=function(a){return a?0<=[0,12].indexOf(this.hour)?12:this.hour%12:this.hour};this.invert=function(){"AM"===this.getT()?this.setHour(this.getHour()+12):this.setHour(this.getHour()-12)};this.setMinutes=function(a){this.minute=a};this.getMinutes=function(a){return this.minute};this.getT=function(){return 12>this.hour?"AM":"PM"}},k=function(d,b){var h=this;this.visible=!1;this.activeView="hours";this.mTimeout=this.hTimeout=null;this.input=a(d);this.config=
b;this.time=new g(0,0);this.selected=new g(0,0);this.timepicker={overlay:a('<div class="mdtimepicker hidden"></div>'),wrapper:a('<div class="mdtp__wrapper"></div>'),timeHolder:{wrapper:a('<section class="mdtp__time_holder"></section>'),hour:a('<span class="mdtp__time_h">12</span>'),dots:a('<span class="mdtp__timedots">:</span>'),minute:a('<span class="mdtp__time_m">00</span>'),am_pm:a('<span class="mdtp__ampm">AM</span>')},clockHolder:{wrapper:a('<section class="mdtp__clock_holder"></section>'),am:a('<span class="mdtp__am">AM</span>'),
pm:a('<span class="mdtp__pm">PM</span>'),clock:{wrapper:a('<div class="mdtp__clock"></div>'),dot:a('<span class="mdtp__clock_dot"></span>'),hours:a('<div class="mdtp__hour_holder"></div>'),minutes:a('<div class="mdtp__minute_holder"></div>')},buttonsHolder:{wrapper:a('<div class="mdtp__buttons">'),btnClear:a('<span class="mdtp__button clear-btn">Clear</span>'),btnOk:a('<span class="mdtp__button ok">Ok</span>'),btnCancel:a('<span class="mdtp__button cancel">Cancel</span>')}}};d=h.timepicker;h.setup(d).appendTo("body");
d.clockHolder.am.click(function(){"AM"!==h.selected.getT()&&h.setT("am")});d.clockHolder.pm.click(function(){"PM"!==h.selected.getT()&&h.setT("pm")});d.timeHolder.hour.click(function(){"hours"!==h.activeView&&h.switchView("hours")});d.timeHolder.minute.click(function(){"minutes"!==h.activeView&&h.switchView("minutes")});d.clockHolder.buttonsHolder.btnOk.click(function(){h.setValue(h.selected);var a=h.getFormattedTime();h.triggerChange({time:a.time,value:a.value});h.hide()});d.clockHolder.buttonsHolder.btnCancel.click(function(){h.hide()});
h.config.clearBtn&&d.clockHolder.buttonsHolder.btnClear.click(function(){h.input.val("").attr("data-time",null).attr("value","");h.triggerChange({time:null,value:""});h.hide()});h.input.on("keydown",function(a){13===a.keyCode&&h.show();return!(0>l.indexOf(a.which)&&h.config.readOnly)}).on("click",function(){h.show()}).prop("readonly",h.config.readOnly);""!==h.input.val()?(d=h.parseTime(h.input.val(),h.config.format),h.setValue(d)):(d=h.getSystemTime(),h.time=new g(d.hour,d.minute));h.resetSelected();
h.switchView(h.activeView)};k.prototype={constructor:k,setup:function(d){if("undefined"===typeof d)throw Error("Expecting a value.");var b=this,g=d.overlay,k=d.wrapper,l=d.timeHolder;d=d.clockHolder;l.wrapper.append(l.hour).append(l.dots).append(l.minute).append(l.am_pm).appendTo(k);for(l=0;12>l;l++){var m=l+1,f=(120+30*l)%360;f=a('<div class="mdtp__digit rotate-'+f+'" data-hour="'+m+'"><span>'+m+"</span></div>");f.find("span").click(function(){var f=parseInt(a(this).parent().data("hour")),d=b.selected.getT();
b.setHour((f+("PM"===d&&12>f||"AM"===d&&12===f?12:0))%24);b.switchView("minutes")});d.clock.hours.append(f)}for(l=0;60>l;l++)m=10>l?"0"+l:l,f=(90+6*l)%360,f=a('<div class="mdtp__digit rotate-'+f+'" data-minute="'+l+'"></div>'),0===l%5?f.addClass("marker").html("<span>"+m+"</span>"):f.html("<span></span>"),f.find("span").click(function(){b.setMinute(a(this).parent().data("minute"))}),d.clock.minutes.append(f);d.clock.wrapper.append(d.am).append(d.pm).append(d.clock.dot).append(d.clock.hours).append(d.clock.minutes).appendTo(d.wrapper);
b.config.clearBtn&&d.buttonsHolder.wrapper.append(d.buttonsHolder.btnClear);d.buttonsHolder.wrapper.append(d.buttonsHolder.btnCancel).append(d.buttonsHolder.btnOk).appendTo(d.wrapper);d.wrapper.appendTo(k);k.attr("data-theme",b.config.theme||a.fn.mdtimepicker.defaults.theme);k.appendTo(g);return g},setHour:function(d){if("undefined"===typeof d)throw Error("Expecting a value.");var b=this;this.selected.setHour(d);this.timepicker.timeHolder.hour.text(this.selected.getHour(!0));this.timepicker.clockHolder.clock.hours.children("div").each(function(d,
g){d=a(g);g=d.data("hour");d[g===b.selected.getHour(!0)?"addClass":"removeClass"]("active")})},setMinute:function(d){if("undefined"===typeof d)throw Error("Expecting a value.");this.selected.setMinutes(d);this.timepicker.timeHolder.minute.text(10>d?"0"+d:d);this.timepicker.clockHolder.clock.minutes.children("div").each(function(b,g){b=a(g);g=b.data("minute");b[g===d?"addClass":"removeClass"]("active")})},setT:function(a){if("undefined"===typeof a)throw Error("Expecting a value.");this.selected.getT()!==
a.toUpperCase()&&this.selected.invert();a=this.selected.getT();this.timepicker.timeHolder.am_pm.text(a);this.timepicker.clockHolder.am["AM"===a?"addClass":"removeClass"]("active");this.timepicker.clockHolder.pm["PM"===a?"addClass":"removeClass"]("active")},setValue:function(a){if("undefined"===typeof a)throw Error("Expecting a value.");a="string"===typeof a?this.parseTime(a,this.config.format):a;this.time=new g(a.hour,a.minute);a=this.getFormattedTime();this.input.val(a.value).attr("data-time",a.time).attr("value",
a.value)},resetSelected:function(){this.setHour(this.time.hour);this.setMinute(this.time.minute);this.setT(this.time.getT())},getFormattedTime:function(){var a=this.time.format(this.config.timeFormat,!1),b=this.time.format(this.config.format,this.config.hourPadding);return{time:a,value:b}},getSystemTime:function(){var a=new Date;return new g(a.getHours(),a.getMinutes())},parseTime:function(a,b){var d="undefined"===typeof b?this.config.format:b;b=1<(d.match(/h/g)||[]).length;d.match(/m/g);var k=(d.match(/t/g)||
[]).length,l=a.length,m=d.indexOf("h"),f=d.lastIndexOf("h");if(this.config.hourPadding||b)m=a.substr(m,2);else{var u=d.substring(m-1,m),w=d.substring(f+1,f+2);m=f===d.length-1?a.substring(a.indexOf(u,m-1)+1,l):0===m?a.substring(0,a.indexOf(w,m)):a.substring(a.indexOf(u,m-1)+1,a.indexOf(w,m+1))}d=d.replace(/(hh|h)/g,m);u=d.indexOf("m");w=d.lastIndexOf("m");f=d.indexOf("t");var y=d.substring(u-1,u);d.substring(w+1,w+2);d=w===d.length-1?a.substring(a.indexOf(y,u-1)+1,l):0===u?a.substring(0,2):a.substr(u,
2);a="pm"===(b?11<parseInt(m)?1<k?"PM":"pm":1<k?"AM":"am":a.substr(f,2)).toLowerCase();b=new g(parseInt(m),parseInt(d));(a&&12>parseInt(m)||!a&&12===parseInt(m))&&b.invert();return b},switchView:function(a){var b=this.timepicker;if("hours"===a||"minutes"===a)this.activeView=a,b.timeHolder.hour["hours"===a?"addClass":"removeClass"]("active"),b.timeHolder.minute["hours"===a?"removeClass":"addClass"]("active"),b.clockHolder.clock.hours.addClass("animate"),"hours"===a&&b.clockHolder.clock.hours.removeClass("hidden"),
clearTimeout(this.hTimeout),this.hTimeout=setTimeout(function(){"hours"!==a&&b.clockHolder.clock.hours.addClass("hidden");b.clockHolder.clock.hours.removeClass("animate")},"hours"===a?20:350),b.clockHolder.clock.minutes.addClass("animate"),"minutes"===a&&b.clockHolder.clock.minutes.removeClass("hidden"),clearTimeout(this.mTimeout),this.mTimeout=setTimeout(function(){"minutes"!==a&&b.clockHolder.clock.minutes.addClass("hidden");b.clockHolder.clock.minutes.removeClass("animate")},"minutes"===a?20:350)},
show:function(){var d=this;if(""===d.input.val()){var b=d.getSystemTime();this.time=new g(b.hour,b.minute)}d.resetSelected();a("body").attr("mdtimepicker-display","on");d.timepicker.wrapper.addClass("animate");d.timepicker.overlay.removeClass("hidden").addClass("animate");setTimeout(function(){d.timepicker.overlay.removeClass("animate");d.timepicker.wrapper.removeClass("animate");d.visible=!0;d.input.blur()},10)},hide:function(){var d=this;d.timepicker.overlay.addClass("animate");d.timepicker.wrapper.addClass("animate");
setTimeout(function(){d.switchView("hours");d.timepicker.overlay.addClass("hidden").removeClass("animate");d.timepicker.wrapper.removeClass("animate");a("body").removeAttr("mdtimepicker-display");d.visible=!1;d.input.focus()},300)},destroy:function(){this.input.removeData("mdtimepicker").unbind("keydown").unbind("click").removeProp("readonly");this.timepicker.overlay.remove()},triggerChange:function(d){this.input.trigger(a.Event("timechanged",d)).trigger("onchange").trigger("change")}};a.fn.mdtimepicker=
function(){var d=arguments,b=d[0];return a(this).each(function(g,l){g=a(this);var h=a(this).data("mdtimepicker");options=a.extend({},a.fn.mdtimepicker.defaults,g.data(),"object"===typeof b&&b);h||g.data("mdtimepicker",h=new k(this,options));"string"===typeof b&&h[b].apply(h,Array.prototype.slice.call(d).slice(1));a(document).on("keydown",function(a){27===a.keyCode&&h.visible&&h.hide()})})};a.fn.mdtimepicker.defaults={timeFormat:"hh:mm:ss.000",format:"h:mm tt",theme:"blue",readOnly:!0,hourPadding:!1,
clearBtn:!1}}(jQuery);(function(a){a.actions=function(l,g,k,d,b){var h={},q=[];q=k.slice();q.shift();var p={};p=a(k).get(0);h.execute=function(){if(1>k.length)return h;new a.run(l,g,p,d,function(d,f,g,h,l){!0===l&&void 0!=g.events&&0<g.events.Success.length?(a.each(q,function(a,b){a=!1;for(var f=g.events.Success.slice(),d=0;d<f.length;d++)JSON.stringify(f[d])===JSON.stringify(b)&&(a=!0);a||g.events.Success.push(b)}),a.actions(d,f,g.events.Success.slice(),h,b).execute()):!1===l&&void 0!=g.events&&0<g.events.Error.length?
(a.each(q,function(a,b){a=!1;for(var f=g.events.Error.slice(),d=0;d<f.length;d++)f[d]===b&&(a=!0);a||g.events.Error.push(b)}),a.actions(d,f,g.events.Error.slice(),h,b).execute()):"onTapOk"===l&&void 0!=g.events&&0<g.events.onTapOk.length?(a.each(q,function(a,b){a=!1;for(var f=g.events.onTapOk.slice(),d=0;d<f.length;d++)f[d]===b&&(a=!0);a||g.events.onTapOk.push(b)}),a.actions(d,f,g.events.onTapOk.slice(),h,b).execute()):"onTapCancel"===l&&void 0!=g.events&&0<g.events.onTapCancel.length?(a.each(q,function(a,
b){a=!1;for(var f=g.events.onTapCancel.slice(),d=0;d<f.length;d++)f[d]===b&&(a=!0);a||g.events.onTapCancel.push(b)}),a.actions(d,f,g.events.onTapCancel.slice(),h,b).execute()):"OnElse"===l&&void 0!=g.events&&0<g.events.OnElse.length?(a.each(q,function(a,b){a=!1;for(var f=g.events.OnElse.slice(),d=0;d<f.length;d++)f[d]===b&&(a=!0);a||g.events.OnElse.push(b)}),a.actions(d,f,g.events.OnElse.slice(),h,b).execute()):(k.shift(),l=k.slice(),l.shift(),0<k.length?a.actions(d,f,k,h,b).execute():(a.utility("setActionRunningStatus",
!1),void 0!=b&&b(d,f,k,h)))})};a.getUI=function(b,f,d){return a.mobileweb.getCurrentPage().getChild(b,f,d)};a.getGadgetUI=function(b,f,d){return a.mobileweb.getCurrentPage().getGadgetChild(b,f,d)};a.getRemoteUI=function(b,f,d){return a.mobileweb.getPage(d,!1).getChild(b,f)};a.run=function(b,f,d,g,k){var l={};if(void 0!=d&&d.name){var m="";m=void 0!=d.params&&void 0!=d.params.cellId&&void 0!=d.params.groupId?a.utility("tokenizeString",d.name,b)+"_ui-defgroup-"+d.params.groupId+"-main-"+d.params.cellId:
a.utility("tokenizeString",d.name,b);void 0!=g?(l=g.target,a.isEmptyObject(l)&&(l=a.getUI(m,f,""))):l=void 0!=d.actionParentUI&&"Gadget"==d.actionParentUI?a.getGadgetUI(m,f,d.actionParentUIName):void 0!=b.parentType&&"SplitView"==b.parentType?void 0!=d.params&&void 0!=d.params.targetpage?a.getUI(m,f,d.params.targetpage):a.getUI(m,f,""):void 0!=b.type&&"SplitView"==b.type?void 0!=d.params&&void 0!=d.params.targetpage?a.getUI(m,f,d.params.targetpage):a.getUI(m,f,""):void 0!=b.parentType&&"PageScrollView"==
b.parentType?void 0!=d.params&&void 0!=d.params.targetpage?a.getUI(m,f,d.params.targetpage):a.getUI(m,f,b.name):void 0!=d.params&&void 0!=d.params.targetpage?a.getUI(m,f,d.params.targetpage):a.getUI(m,f,"")}if(void 0!=d.condition&&void 0==d.condition.result){if(!a.isEmptyObject(d.condition)&&(m=a.utility("parseCondition",b,f,d,g,d.condition.groupcases),!m))return void 0!=d.events&&void 0!=d.events.OnElse&&0<d.events.OnElse.length?k(b,f,d,g,"OnElse"):k(b,f,d,g,""),h}else void 0!=d.condition&&void 0!=
d.condition.result&&d.condition.result&&console.log("Here...");"setParentData"===d.method&&(d.params.targetpage="");if(null!==b){"DBTableViewList"!==b.type&&"RemoteTableViewList"!=b.type||void 0==f||void 0==f.getId||"Row"==f.getViewType()||"ToggleButton"==f.getViewType()||(m=f.getId(),2<m.split("-").length&&(m=m.substr(0,m.lastIndexOf("-")),rowNum=m.substr(m.lastIndexOf("-")+1,m.length),isNaN(parseInt(rowNum))&&(rowNum=0),isNaN(b.data.contents.currentRow)&&(b.data.contents.currentRow=rowNum)));if("SplitView"!=
b.type&&void 0!==d.params&&void 0!==d.params.targetpage&&""!==d.params.targetpage&&a.utility("isParentPageHierarchy",d.params.targetpage)&&!a.isEmptyObject(l)&&void 0!=g)return a.actionHelper(b,f,d,l,g,function(b,d,f,g,h){try{k(b,d,f,g,h)}catch(H){a.utility("setActionRunningStatus",!1)}}),h;if(void 0==b.parentType&&"SplitView"!=b.type&&"PageScrollView"!=b.type)if("Page"==d.actionParentUI&&void 0!==d.params&&void 0!==d.params.targetpage&&""!==d.params.targetpage&&d.params.targetpage!==a.mobileweb.getCurrentPage().getName())if("ResetViewData"===
d.method){var p=a.utility("clone",d);delete p.events;m=!1;if(m=void 0==d.condition||a.isEmptyObject(d.condition)?!0:a.utility("parseCondition",b,f,d,g,d.condition.groupcases))m={pagedef:b,ui:f,action:p,target:l},a.utility("setRegisteredActions",m),k(b,f,d,g,!0)}else{m=b.parent.split("page");"setParentData"===d.method&&(d.params.targetpage="page"+m[m.length-1]);if("SetMainValue"===d.method&&-1!=d.params.targetpage.indexOf("[")&&-1!=d.params.targetpage.indexOf("]")){var q=a.utility("tokenizeString",
d.params.targetpage,b);a.each(a.mobileweb.pages,function(a,b){console.log(b.pageTitle,"---",b.name,"---",q);b.pageTitle==q&&(d.params.targetpage=b.name)})}var u=!1;m=a.utility("getObject",a.mobileweb.pages,"name",d.params.targetpage);void 0!=m&&"SplitView"===m.parentType&&(u=!0);var w=!1;a.each(a.mobileweb.pages,function(h,l){if(d.params.targetpage==l.name||u)if(u=!1,w=!0,h={},"DBCondition"!=d.category&&void 0!=d.params&&void 0!=d.params.cellId&&void 0!=d.params.groupId&&a.utility("tokenizeString",
d.name,b),void 0==d.condition||a.isEmptyObject(d.condition)||a.utility("parseCondition",b,f,d,g,d.condition.groupcases)){l=a.utility("clone",d);if("DBCondition"===d.category){var m;void 0!=f.rownum&&(m=void 0!=b.data.contents[0][f.rownum]?b.data.contents[0][f.rownum]:b.data.contents[f.rownum]);void 0!=m&&(b.data.contents[0]=m);void 0!=d.params.where&&("changeCondition"===d.method&&(l.params.initialWhere=d.params.where),l.params.where=a.utility("tokenizeString",d.params.where,b));void 0!=d.params.order&&
(l.params.order=a.utility("tokenizeString",d.params.order,b))}else void 0==l.condition||a.isEmptyObject(l.condition)||delete l.condition;m=void 0!=d.params&&void 0!=d.params.cellId&&void 0!=d.params.groupId?a.utility("tokenizeString",d.name,b)+"_ui-defgroup-"+d.params.groupId+"-main-"+d.params.cellId:a.utility("tokenizeString",d.name,b);"changeCondition"===d.method&&a.utility("setDelayedChangeCondition",!0,d.params.targetpage);l.name=m;delete l.events;a.utility("setRegisteredActions",{pagedef:b,ui:f,
action:l,target:h});k(b,f,d,g,!0)}else k(b,f,d,g,!1)});w||k(b,f,d,g,!1)}else if(void 0!=f&&null!=f&&1!=f.headerFlag&&void 0!=f.getId&&-1!=f.getId().indexOf("-tile-"))var y=setInterval(function(){clearInterval(y);a.actionHelper(b,f,d,l,g,function(b,d,f,g,h){try{k(b,d,f,g,h)}catch(H){a.utility("setActionRunningStatus",!1)}})},200);else a.actionHelper(b,f,d,l,g,function(b,d,f,g,h){try{k(b,d,f,g,h)}catch(H){a.utility("setActionRunningStatus",!1)}});else if(void 0!=b.parentType&&("SplitView"==b.parentType||
"PageScrollView"==b.parentType)||void 0==b.parentType&&void 0!=b.type&&("SplitView"==b.type||"PageScrollView"==b.type)){var J=!0;void 0==d.params||void 0==d.params.targetpage?J=!1:"SplitView"===a.mobileweb.getCurrentPage().getViewType()?(m=a.utility("getObject",a.mobileweb.pages,"name",a.mobileweb.getCurrentPage().getName()).children,a.each(m,function(a,b){b.name!=d.params.targetpage||b.isgrandChild||(J=!1)})):void 0!=a.mobileweb.getCurrentPage().children&&a.each(a.mobileweb.getCurrentPage().children,
function(a,b){b.getName()==d.params.targetpage&&(J=!1)});if(J)if("Page"==d.actionParentUI&&void 0!==d.params&&void 0!==d.params.targetpage&&""!==d.params.targetpage&&d.params.targetpage!==a.mobileweb.getCurrentPage().getName()){if(m=void 0==d.condition||a.isEmptyObject(d.condition)?!0:a.utility("parseCondition",b,f,d,g,d.condition.groupcases))p=a.utility("clone",d),"DBCondition"===d.category?(a.isEmptyObject(p.condition),void 0!=d.params.where&&(p.params.where=a.utility("tokenizeString",d.params.where,
b)),void 0!=d.params.order&&(p.params.order=a.utility("tokenizeString",d.params.order,b))):void 0==p.condition||a.isEmptyObject(p.condition)||delete p.condition,delete p.events,m={pagedef:b,ui:f,action:p,target:l},a.utility("setRegisteredActions",m),k(b,f,d,g,!0)}else a.actionHelper(b,f,d,l,g,function(b,d,f,g,h){try{k(b,d,f,g,h)}catch(H){a.utility("setActionRunningStatus",!1)}});else a.actionHelper(b,f,d,l,g,function(b,d,f,g,h){try{k(b,d,f,g,h)}catch(H){a.utility("setActionRunningStatus",!1)}})}else a.actionHelper(b,
f,d,l,g,function(b,d,f,g,h){try{k(b,d,f,g,h)}catch(H){a.utility("setActionRunningStatus",!1)}})}else a.actionHelper(b,f,d,l,g,function(b,d,f,g,h){try{k(b,d,f.slice(),g,h)}catch(H){a.utility("setActionRunningStatus",!1)}})};return h}})(jQuery);(function(a,l){a.widget("mobile.simpledialog2",a.mobile.widget,{options:{version:"1.0.1-2012061300",mode:"blank",themeDialog:"b",themeInput:!1,themeButtonDefault:!1,themeHeader:"a",fullScreen:!1,fullScreenForce:!1,dialogAllow:!1,dialogForce:!1,headerText:!1,headerClose:!1,buttonPrompt:!1,buttonInput:!1,buttonInputDefault:!1,buttonPassword:!1,blankContent:!1,blankContentAdopt:!1,resizeListener:!0,safeNuke:!0,forceInput:!0,showModal:!0,animate:!0,transition:"pop",clickEvent:"click",zindex:"500",width:"280px",
left:!1,top:!1,callbackOpen:!1,callbackOpenArgs:[],callbackClose:!1,callbackCloseArgs:[]},_eventHandler:function(a,k){var d=a.data.widget;if(!a.isPropagationStopped())switch(k.method){case "close":d.close();break;case "html":d.updateBlank(k.source)}},_create:function(){var g=this,k=a.extend(this.options,this.element.jqmData("options")),d=new Date,b=a("<div class='ui-simpledialog-container ui-overlay-shadow ui-corner-all ui-simpledialog-hidden "+(!0===k.animate?k.transition:"")+" ui-body-"+k.themeDialog+
"'></div>");!1===k.themeButtonDefault&&(k.themeButtonDefault=k.themeDialog);!1===k.themeInput&&(k.themeInput=k.themeDialog);a.mobile.sdCurrentDialog=g;"undefined"!==typeof a.mobile.sdLastInput&&delete a.mobile.sdLastInput;g.internalID=d.getTime();g.displayAnchor=a.mobile.activePage.children(".ui-content").first();0===g.displayAnchor.length&&(g.displayAnchor=a.mobile.activePage);g.dialogPage=a("<div data-role='dialog' data-theme='"+k.themeDialog+"'><div data-role='header'></div><div data-role='content'></div></div>");
g.sdAllContent=g.dialogPage.find("[data-role=content]");b.appendTo(g.sdAllContent);g.sdIntContent=g.sdAllContent.find(".ui-simpledialog-container");g.sdIntContent.css("width",k.width);if(!1!==k.headerText||!1!==k.headerClose)g.sdHeader=a('<div style="margin-bottom: 4px;" class="ui-header ui-bar-'+k.themeHeader+'"></div>'),a('<h1 class="ui-title">'+(!1!==k.headerText?k.headerText:"")+"</h1>").appendTo(g.sdHeader),g.sdHeader.appendTo(g.sdIntContent);"blank"===k.mode?(!0===k.blankContent&&(k.blankContent=
!0===k.blankContentAdopt?g.element.children():g.element.html()),a(k.blankContent).appendTo(g.sdIntContent)):"button"===k.mode&&g._makeButtons().appendTo(g.sdIntContent);g.sdIntContent.appendTo(g.displayAnchor.parent());g.dialogPage.appendTo(a.mobile.pageContainer).page().css("minHeight","0px").css("zIndex",k.zindex);!0===k.animate&&g.dialogPage.addClass(k.transition);g.screen=a("<div>",{"class":"ui-simpledialog-screen ui-simpledialog-hidden"}).css("z-index",k.zindex-1).appendTo(g.displayAnchor.parent()).bind(k.clickEvent,
function(a){k.forceInput||g.close();a.preventDefault()});k.showModal&&g.screen.addClass("ui-simpledialog-screen-modal");a(document).bind("simpledialog."+g.internalID,{widget:g},function(a,b){g._eventHandler(a,b)})},_makeButtons:function(){var g=this,k=g.options,d=a("<div></div>"),b=a("<div class='ui-simpledialog-controls'><input class='ui-simpledialog-input ui-input-text ui-shadow-inset ui-corner-all ui-body-"+k.themeInput+"' type='"+(!0===k.buttonPassword?"password":"text")+"' value='"+(!1!==k.buttonInputDefault?
k.buttonInputDefault.replace('"',"&#34;").replace("'","&#39;"):"")+"' name='pickin' /></div>"),h=a("<div>",{"class":"ui-simpledialog-controls"});!1!==k.buttonPrompt&&(g.buttonPromptText=a("<p class='ui-simpledialog-subtitle'>"+k.buttonPrompt+"</p>").appendTo(d));!1!==k.buttonInput&&(a.mobile.sdLastInput="",b.appendTo(d),b.find("input").bind("change",function(){a.mobile.sdLastInput=b.find("input").first().val();g.thisInput=b.find("input").first().val()}));h.appendTo(d);g.butObj=[];a.each(k.buttons,
function(b,d){d=a.isFunction(d)?{click:d}:d;d=a.extend({text:b,id:b+g.internalID,theme:k.themeButtonDefault,icon:"check",iconpos:"left",corners:"true",shadow:"true",args:[],close:!0},d);g.butObj.push(a("<a href='#'>"+b+"</a>").appendTo(h).attr("id",d.id).buttonMarkup({theme:d.theme,icon:d.icon,iconpos:d.iconpos,corners:d.corners,shadow:d.shadow}).unbind("vclick click").bind(k.clickEvent,function(){k.buttonInput&&g.sdIntContent.find("input [name=pickin]").trigger("change");!1!==d.click.apply(g,a.merge(arguments,
d.args))&&!0===d.close&&g.close()}))});return d},_getCoords:function(g){var k=a.mobile.activePage.width(),d=a(window).scrollTop(),b=a(window).height(),h=g.sdIntContent.innerWidth(),l=g.sdIntContent.outerHeight();g={high:a.mobile.activePage.height(),width:a.mobile.activePage.width(),fullTop:44,fullLeft:a(window).scrollLeft(),winTop:d+(!1!==g.options.top?g.options.top:b/2-l/2),winLeft:!1!==g.options.left?g.options.left:k/2-h/2};45>g.winTop&&(g.winTop=45);return g},_orientChange:function(a){var g=a.data.widget,
d=a.data.widget.options,b=a.data.widget._getCoords(a.data.widget);a.stopPropagation();if(!0===g.isDialog)return!0;!0===d.fullScreen&&(400>b.width||!0===d.fullScreenForce)?g.sdIntContent.css({border:"none",position:"absolute",top:b.fullTop,left:b.fullLeft,height:b.high,width:b.width,maxWidth:b.width}).removeClass("ui-simpledialog-hidden"):g.sdIntContent.css({position:"absolute",top:b.winTop,left:b.winLeft}).removeClass("ui-simpledialog-hidden")},repos:function(){this._orientChange({data:{widget:this},
stopPropagation:function(){return!0}})},open:function(){var g=this,k=this.options,d=this._getCoords(this);g.sdAllContent.find(".ui-btn-active").removeClass("ui-btn-active");g.sdIntContent.delegate("[rel=close]",k.clickEvent,function(a){a.preventDefault();g.close()});!0===k.dialogAllow&&400>d.width||k.dialogForce?(g.isDialog=!0,"blank"===k.mode&&g.sdIntContent.find("select").each(function(){a(this).jqmData("nativeMenu",!0)}),g.displayAnchor.parent().unbind("pagehide.remove"),g.sdAllContent.append(g.sdIntContent),
g.sdAllContent.trigger("create"),!1!==k.headerText&&(g.sdHeader.find("h1").appendTo(g.dialogPage.find("[data-role=header]")),g.sdIntContent.find(".ui-header").empty().removeClass()),!0===k.headerClose?g.dialogPage.find(".ui-header a").bind("click",function(){setTimeout("$.mobile.sdCurrentDialog.destroy();",1E3)}):g.dialogPage.find(".ui-header a").remove(),g.sdIntContent.removeClass().css({top:"auto",width:"auto",left:"auto",marginLeft:"auto",marginRight:"auto",zIndex:k.zindex}),a.mobile.changePage(g.dialogPage,
{transition:!0===k.animate?k.transition:"none"})):(g.isDialog=!1,g.selects=[],!1===k.fullScreen&&(!0===k.showModal&&!0===k.animate?g.screen.fadeIn("slow"):g.screen.removeClass("ui-simpledialog-hidden")),g.sdIntContent.addClass("ui-overlay-shadow in").css("zIndex",k.zindex).trigger("create"),!0===k.fullScreen&&(400>d.width||!0===k.fullScreenForce)?g.sdIntContent.removeClass("ui-simpledialog-container").css({border:"none",position:"absolute",top:d.fullTop,left:d.fullLeft,height:d.high,width:d.width,
maxWidth:d.width}).removeClass("ui-simpledialog-hidden"):g.sdIntContent.css({position:"absolute",top:d.fulltop,overflow:"auto","max-height":a.mobile.activePage.height()-2*d.fullTop,left:d.winLeft}).removeClass("ui-simpledialog-hidden"),a(document).bind("orientationchange.simpledialog",{widget:g},function(a){g._orientChange(a)}),!0===k.resizeListener&&a(window).bind("resize.simpledialog",{widget:g},function(a){g._orientChange(a)}));a.isFunction(k.callbackOpen)&&k.callbackOpen.apply(g,k.callbackOpenArgs)},
close:function(){var g=this.options;if(a.isFunction(this.options.callbackClose)){var k=this.options.callbackClose.apply(this,this.options.callbackCloseArgs);if(!1===k)return!1}this.isDialog?(a(this.dialogPage).dialog("close"),this.sdIntContent.addClass("ui-simpledialog-hidden"),this.sdIntContent.appendTo(this.displayAnchor.parent()),1!=a.mobile.activePage.jqmData("page").options.domCache&&a.mobile.activePage.is(":jqmData(external-page='true')")&&a.mobile.activePage.bind("pagehide.remove",function(){a(this).remove()})):
(!0===this.options.showModal&&!0===this.options.animate?this.screen.fadeOut("slow"):this.screen.addClass("ui-simpledialog-hidden"),this.sdIntContent.addClass("ui-simpledialog-hidden").removeClass("in"),a(document).unbind("orientationchange.simpledialog"),!0===this.options.resizeListener&&a(window).unbind("resize.simpledialog"));"blank"===g.mode&&!1!==g.blankContent&&!0===g.blankContentAdopt&&(this.element.append(g.blankContent),g.blankContent=!0);!0===this.isDialog||!0===this.options.animate?setTimeout(function(a){return function(){a.destroy()}}(this),
1E3):this.destroy()},destroy:function(){var g=this.element;"blank"===this.options.mode&&a.mobile.sdCurrentDialog.sdIntContent.find("select").each(function(){0==a(this).data("nativeMenu")&&(a(this).data("selectmenu").menuPage.remove(),a(this).data("selectmenu").screen.remove(),a(this).data("selectmenu").listbox.remove())});a(this.sdIntContent).remove();a(this.dialogPage).remove();a(this.screen).remove();a(document).unbind("simpledialog."+this.internalID);delete a.mobile.sdCurrentDialog;a.Widget.prototype.destroy.call(this);
!0===this.options.safeNuke&&0===a(g).parents().length&&0===a(g).contents().length&&g.remove()},updateBlank:function(g){var k=this.options;this.sdIntContent.empty();if(!1!==k.headerText||!1!==k.headerClose)this.sdHeader=a('<div class="ui-header ui-bar-'+k.themeHeader+'"></div>'),!0===k.headerClose&&a("<a class='ui-btn-left' rel='close' href='#'>Close</a>").appendTo(this.sdHeader).buttonMarkup({theme:k.themeHeader,icon:"delete",iconpos:"notext",corners:!0,shadow:!0}),a('<h1 class="ui-title">'+(!1!==
k.headerText?k.headerText:"")+"</h1>").appendTo(this.sdHeader),this.sdHeader.appendTo(this.sdIntContent);a(g).appendTo(this.sdIntContent);this.sdIntContent.trigger("create");a(document).trigger("orientationchange.simpledialog")},_init:function(){this.open()}})})(jQuery);(function(a){function l(b,l){a.utility("setAppBootingForFirstTime",!0);b.reverse=l;var f={header:new k(b),toolbartop:new h(b),toolbarbottom:new q(b),footer:new d(b),statusbar:new g(b),leftToolBar:new p(b),rightToolBar:new m(b),applyData:function(){switch(b.type){case "RemoteTableView":case "DBTableView":a.each(b.children[0].group,function(d,f){a.each(f.row,function(a,f){f.data.contents=b.data.contents;"custom"!==b.children[0].style&&(f.children=[]);switch(b.children[0].style){case "default":f.children.push({id:"ui-defgroup-"+
d+"-main-"+a,name:"",value:"",template:f.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}});""!==f.template.image&&(f.children[0].frame.x=50,f.children.push({id:"ui-defgroup-"+d+"-img-"+a,value:"",template:f.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "subtitle":f.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"",value:"",template:f.template.maintext,viewtype:"Label",frame:{x:10,
y:7,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:f.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"gray"}}});""!==f.template.image&&(f.children[0].frame.x=50,f.children[1].frame.x=50,f.children.push({id:"ui-defgroup-"+d+"-img-"+a,value:"",template:f.template.image,name:"",viewtype:"Image",
frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":f.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"",value:"",template:f.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}});"Grouped"===b.children[0].tablestyle?f.children.push({id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:f.template.subtext,viewtype:"Label",frame:{x:b.width-210,y:16,width:150,height:20},padding:{top:5,
bottom:5,left:5,right:5},font:{size:12,align:"right",color:{name:"SteelBlue"}}}):f.children.push({id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:f.template.subtext,viewtype:"Label",frame:{x:b.width-185,y:16,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"right",color:{name:"SteelBlue"}}});break;case "contactform":f.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"",value:"",template:f.template.maintext,viewtype:"Label",frame:{x:10,y:17,width:.4*(b.width-
40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"right",color:{name:"black"}}},{id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:f.template.subtext,viewtype:"Label",frame:{x:90,y:17,width:.6*(b.width-40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"SteelBlue"}}})}})});if(void 0!=b.pageOverlay&&0<b.pageOverlay.length){for(var d=0;d<b.pageOverlay.length;d++)b.children.push(b.pageOverlay[d]);b.pageOverlay=[]}f.children=new a.uichildren(b,
b.children,null);break;case "TableView":a.each(b.children[0].group,function(d,f){a.each(f.row,function(a,f){f.data.contents=b.data.contents;"custom"!==b.children[0].style&&(f.children=[]);switch(b.children[0].style){case "default":f.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"mainText_ui-defgroup-"+d+"-main-"+a,value:"",template:f.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}});
""!==f.template.image&&(f.children[0].frame.x=50,f.children.push({id:"ui-defgroup-"+d+"-img-"+a,value:"",template:f.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "subtitle":f.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"mainText_ui-defgroup-"+d+"-main-"+a,value:"",template:f.template.maintext,viewtype:"Label",frame:{x:10,y:7,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-defgroup-"+
d+"-sub-"+a,name:"subText_ui-defgroup-"+d+"-sub-"+a,value:"",template:f.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"gray"}}});""!==f.template.image&&(f.children[0].frame.x=50,f.children[1].frame.x=50,f.children.push({id:"ui-defgroup-"+d+"-img-"+a,value:"",template:f.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":f.children.push({id:"ui-defgroup-"+
d+"-main-"+a,name:"mainText_ui-defgroup-"+d+"-main-"+a,value:"",template:f.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-defgroup-"+d+"-sub-"+a,name:"subText_ui-defgroup-"+d+"-sub-"+a,value:"",template:f.template.subtext,viewtype:"Label",frame:{x:b.width-185,y:16,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"right",color:{name:"SteelBlue"}}});
break;case "contactform":f.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"mainText_ui-defgroup-"+d+"-main-"+a,value:"",template:f.template.maintext,viewtype:"Label",frame:{x:10,y:17,width:.4*(b.width-40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"right",color:{name:"black"}}},{id:"ui-defgroup-"+d+"-sub-"+a,name:"subText_ui-defgroup-"+d+"-sub-"+a,value:"",template:f.template.subtext,viewtype:"Label",frame:{x:.4*(b.width-40)+20,y:17,width:.6*(b.width-40),height:20},
padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"SteelBlue"}}})}})});if(void 0!=b.pageOverlay&&0<b.pageOverlay.length){for(d=0;d<b.pageOverlay.length;d++)b.children.push(b.pageOverlay[d]);b.pageOverlay=[]}f.children=new a.uichildren(b,b.children,null);break;case "TableViewList":var g=b.children[0].group[0],h=[];a.each(b.children[0].group[0].template,function(d,f){var k={rownum:d,rowsize:g.template[d].rowsize,backgroundColor:g.template[d].backgroundColor,icon:g.template[d].icon,
data:{contents:[b.data.contents[0]]},events:g.template[d].events,children:[]};switch(b.children[0].style){case "default":k.children.push({id:"ui-group-0-main-"+d,name:"mainText_ui-defgroup-0-main-"+d,value:"",template:g.template[d].maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}});""!==g.template[d].image&&(k.children[0].frame.x=50,k.children.push({id:"ui-group-0-img-"+d,value:"",template:g.template[d].image,
name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "subtitle":k.children.push({id:"ui-group-0-main-"+d,name:"mainText_ui-defgroup-0-main-"+d,value:"",template:g.template[d].maintext,viewtype:"Label",frame:{x:10,y:7,width:250,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:"subtext_ui-defgroup-0-main-"+d,value:"",template:g.template[d].subtext,viewtype:"Label",frame:{x:10,y:22,width:150,height:20},
padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"gray"}}});""!==g.template[d].image&&(k.children[0].frame.x=50,k.children[1].frame.x=50,k.children.push({id:"ui-group-0-img-"+d,value:"",template:g.template[d].image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":k.children.push({id:"ui-group-0-main-"+d,name:"maintext_ui-defgroup-0-main-"+d,value:"",template:g.template[d].maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},
padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:"subtext_ui-defgroup-0-main-"+d,value:"",template:g.template[d].subtext,viewtype:"Label",frame:{x:b.width-185,y:16,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"right",color:{name:"SteelBlue"}}});break;case "contactform":k.children.push({id:"ui-group-0-main-"+d,name:"maintext_ui-defgroup-0-main-"+d,value:"",template:g.template[d].maintext,viewtype:"Label",
frame:{x:10,y:17,width:.4*(b.width-40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"right",color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:"subtext_ui-defgroup-0-main-"+d,value:"",template:g.template[d].subtext,viewtype:"Label",frame:{x:.4*(b.width-40)+20,y:17,width:.6*(b.width-40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"SteelBlue"}}});break;case "custom":a.each(g.template[d].children,function(b,f){k.children.push(a.utility("clone",
f));k.children[b].id=["ui-group-0-",d,"-",b].join("")})}h.push(k)});g.row=h;if(void 0!=b.pageOverlay&&0<b.pageOverlay.length){for(d=0;d<b.pageOverlay.length;d++)b.children.push(b.pageOverlay[d]);b.pageOverlay=[]}f.children=new a.uichildren(b,b.children,null);break;case "RemoteTableViewList":g=b.children[0].group[0];d=b.children[0].accordion;h=[];void 0==g.row||b.data.contents.length==g.row.length||d||(b.data.contents=[],a.each(g.row,function(a,d){b.data.contents.push(d.data.contents[0])}));0!=b.data.contents.rows&&
a.each(b.data.contents,function(d,f){if(25>d||d<b.data.contents.length){var k={rownum:d,rowsize:g.template.rowsize,backgroundColor:g.template.backgroundColor,evenRowBackgroundColor:g.template.evenRowBackgroundColor,oddRowBackgroundColor:g.template.oddRowBackgroundColor,evenRowBackgroundImage:g.template.evenRowBackgroundImage,oddRowBackgroundImage:g.template.oddRowBackgroundImage,repeatImage:g.template.repeatImage,icon:g.template.icon,data:{contents:[f]},events:g.template.events,children:[]};switch(b.children[0].style){case "default":k.children.push({id:"ui-group-0-main-"+
d,name:g.template.maintext.toString().replace("[","").replace("]","")+"-"+d,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}});""!==g.template.image&&(k.children[0].frame.x=50,k.children.push({id:"ui-group-0-img-"+d,value:"",template:g.template.image,name:g.template.image.toString().replace("[","").replace("]","")+"-"+d,viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));
break;case "subtitle":k.children.push({id:"ui-group-0-main-"+d,name:g.template.maintext.toString().replace("[","").replace("]","")+"-"+d,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:7,width:250,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:g.template.subtext.toString().replace("[","").replace("]","")+"-"+d,value:"",template:g.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:250,height:20},
padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"gray"}}});""!==g.template.image&&(k.children[0].frame.x=50,k.children[1].frame.x=50,k.children.push({id:"ui-group-0-img-"+d,value:"",template:g.template.image,name:g.template.image.toString().replace("[","").replace("]","")+"-"+d,viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":k.children.push({id:"ui-group-0-main-"+d,name:g.template.maintext.toString().replace("[","").replace("]","")+
"-"+d,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:g.template.subtext.toString().replace("[","").replace("]","")+"-"+d,value:"",template:g.template.subtext,viewtype:"Label",frame:{x:b.width-185,y:16,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"right",color:{name:"SteelBlue"}}});break;case "contactform":k.children.push({id:"ui-group-0-main-"+
d,name:g.template.maintext.toString().replace("[","").replace("]","")+"-"+d,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:17,width:.4*(b.width-40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"right",color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:g.template.subtext.toString().replace("[","").replace("]","")+"-"+d,value:"",template:g.template.subtext,viewtype:"Label",frame:{x:.4*(b.width-40)+20,y:17,width:.6*(b.width-40),height:20},padding:{top:5,
bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"SteelBlue"}}});break;case "custom":a.each(g.template.children,function(b,f){k.children.push(a.utility("clone",f));k.children[b].id=["ui-group-0-",d,"-",b].join("");k.children[b].name=[k.children[b].name.toString().replace("[","").replace("]",""),"-",d].join("")})}h.push(k)}});g.row=h;if(void 0!=b.pageOverlay&&0<b.pageOverlay.length){for(d=0;d<b.pageOverlay.length;d++)b.children.push(b.pageOverlay[d]);b.pageOverlay=[]}f.children=new a.uichildren(b,
b.children,null);break;case "DBTableViewList":g=b.children[0].group[0];h=[];g&&(void 0!=g.row&&b.data.contents.length!=g.row.length&&(b.data.contents=[],a.each(g.row,function(a,d){void 0!==d.data&&b.data.contents.push(d.data.contents[0])})),a.each(b.data.contents,function(d,f){var k={rownum:d,rowsize:g.template.rowsize,backgroundColor:g.template.backgroundColor,evenRowBackgroundColor:g.template.evenRowBackgroundColor,oddRowBackgroundColor:g.template.oddRowBackgroundColor,evenRowBackgroundImage:g.template.evenRowBackgroundImage,
oddRowBackgroundImage:g.template.oddRowBackgroundImage,repeatImage:g.template.repeatImage,icon:g.template.icon,data:{contents:[f]},events:g.template.events,children:[]};switch(b.children[0].style){case "default":k.children.push({id:"ui-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}});""!==g.template.image&&(k.children[0].frame.x=50,k.children.push({id:"ui-group-0-img-"+
d,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "subtitle":k.children.push({id:"ui-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:7,width:250,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:250,height:20},padding:{top:5,bottom:5,
left:5,right:5},font:{size:12,align:"left",color:{name:"gray"}}});""!==g.template.image&&(k.children[0].frame.x=50,k.children[1].frame.x=50,k.children.push({id:"ui-group-0-img-"+d,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":k.children.push({id:"ui-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,
align:"left",color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:b.width-185,y:16,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"right",color:{name:"SteelBlue"}}});break;case "contactform":k.children.push({id:"ui-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:17,width:.4*(b.width-40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"right",
color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:.4*(b.width-40)+20,y:17,width:.6*(b.width-40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"SteelBlue"}}});break;case "custom":a.each(g.template.children,function(b,f){k.children.push(a.utility("clone",f));k.children[b].id=["ui-group-0-",d,"-",b].join("")})}h.push(k)}),g.row=h,void 0!=b.data.pagedata&&1==b.data.contents.length&&b.data.pagedata===
b.data.contents[0]&&(g.row=[]));if(void 0!=b.pageOverlay&&0<b.pageOverlay.length){for(d=0;d<b.pageOverlay.length;d++)b.children.push(b.pageOverlay[d]);b.pageOverlay=[]}f.children=new a.uichildren(b,b.children,null);void 0!=a.mobileweb.getCurrentPage()&&f.getName()==a.mobileweb.getCurrentPage().getName()&&void 0!=a.mobileweb.getCurrentPage().children&&f.children!==a.mobileweb.getCurrentPage().children&&a.mobileweb.setCurrentPage(f);break;case "BaseView":case "ScrollView":if(void 0!=b.pageOverlay&&
0<b.pageOverlay.length){for(d=0;d<b.pageOverlay.length;d++)b.children.push(b.pageOverlay[d]);b.pageOverlay=[]}f.children=new a.uichildren(b,b.children,b.data.contents[0]);void 0==a.mobileweb.getCurrentPage()||a.isEmptyObject(a.mobileweb.getCurrentPage())||f.getName()==a.mobileweb.getCurrentPage().getName()&&void 0!=a.mobileweb.getCurrentPage().children&&f.children!==a.mobileweb.getCurrentPage().children&&a.mobileweb.setCurrentPage(f);break;case "PageScrollView":var k=[];a.each(b.children,function(b,
d){k.push(a.utility("getObject",a.mobileweb.pages,"name",d.name))});b.containerchildren=k;f.children=new a.uiPageScrollViewContainer(b,b.children,b.data.contents[0]);var m=setInterval(function(){b.children.length==b.data.innerPagesCount&&(clearInterval(m),f.pagescrollviewChildren=!0,a.utility("initChildren",!0))},300);break;case "SplitView":var p=[];a.each(b.children,function(a,d){-1!=b.children[a].parent.lastIndexOf(b.name)&&""==b.children[a].parent.split(b.name)[1]&&p.push(d)});var q=[];a.each(b.children,
function(b,d){a.each(a.mobileweb.pages,function(b,f){if(-1!=f.parent.lastIndexOf(d.name)&&""==f.parent.split(d.name)[1]){f.parent=d.name;f.isgrandChild=!0;q.push(f);var g={};g=Object.assign({},f);g.name+="_ntd";g.notransferdata=!0;g.children=[];0<f.children.length&&a.each(f.children,function(a,b){a=Object.assign({},b);a.id+="_ntd";g.children.push(a)});q.push(g)}})});void 0==l&&(l=!1);0<q.length&&!l&&(b.children=[],b.children=p,b.children=a.merge(b.children,q));f.children=new a.uiSplitViewPageContainer(b,
b.children);m=setInterval(function(){b.children.length==b.data.innerPagesCount&&(clearInterval(m),f.splitviewChildren=!0,a.utility("initChildren",!0))},300)}},getName:function(){return b.name},getParent:function(){return b.parent},setParent:function(a){b.parent=a},getViewType:function(){return b.type},getTitle:function(){return b.pageTitle},MovePage:function(d,f){a(" .scroller").remove();a("#"+b.name).live("pagehide",A);a("#"+b.name).live("pagebeforeshow",E);"ScrollView"!=b.type&&a("#"+b.name).live("pagebeforeshow",
L);a("#"+b.name).live("pageshow",Q);a("#page_body").append(u());a.mobile.initializePage();a.mobile.changePage("#"+b.name,{transition:d,reverse:f,changeHash:!0})},liveContainer:function(){if(void 0!=b.containerchildren)for(var a in b.containerchildren)b.containerchildren[a]==b.name&&(parseInt(a),parseInt(a))},show:function(d,g){g&&(b.reverse=!0);a.utility("log","[INFO] Change Page: "+b.name);var h=a.utility("getObject",a.mobileweb.pages,"name",b.parent);"preview"!==a.mobileweb.state&&G(b);if("DBTableViewList"==
b.type)var k=setInterval(function(){a("#"+b.name).live("pagehide",A);a("#"+b.name).live("pagebeforeshow",E);a("#"+b.name).live("pagebeforeshow",L);a("#"+b.name).live("pageshow",Q);a(" .scroller").remove();f.applyData();a("#page_body").append(u());a.mobile.activePage.attr("id")===b.name?E(!0):a.mobile.changePage("#"+b.name,{transition:d,reverse:g,changeHash:!0});a.utility("queryDatabase",!1);window.clearInterval(k)},0);else"DBTableView"==b.type||"RemoteTableView"==b.type?a.isEmptyObject(h)||void 0==
h||"DBTableViewList"!=h.type&&"RemoteTableViewList"!=h.type?("DBTableView"==b.type?(new a.actions(b,null,[{method:"Select",category:"DBAction",params:{tablename:b.data.tablename,where:b.data.wherecond,order:b.data.order,columns:""}}])).execute():(h="",h=void 0!=a.mobileweb.release&&a.mobileweb.release?"db_"+a.mobileweb.pid+"_release":"db_"+a.mobileweb.pid,(new a.actions(b,null,[{method:"Select",category:"ComAction",params:{servicename:b.data.servicename,database:h,table:b.data.tablename,where:b.data.wherecond,
order:b.data.order,fields:""}}])).execute()),k=setInterval(function(){a.utility("isBusy")||(a("#"+b.name).live("pagehide",A),a("#"+b.name).live("pagebeforeshow",E),a("#"+b.name).live("pagebeforeshow",L),a("#"+b.name).live("pageshow",Q),a("#page_body").append(u()),f.applyData(),a.mobile.initializePage(),a.mobile.activePage.attr("id")===b.name?E(!0):a.mobile.changePage("#"+b.name,{transition:d,reverse:g,changeHash:!0}),a.utility("queryDatabase",!1),window.clearInterval(k))},700)):void 0!=h&&"DBTableViewList"==
h.type&&"DBTableView"==b.type&&h.data.tablename!=b.data.tablename?(a.utility("queryDatabase",!0),(new a.actions(b,null,[{method:"Select",category:"DBAction",params:{tablename:b.data.tablename,where:b.data.wherecond,order:b.data.order,columns:""}}])).execute(),k=setInterval(function(){a.utility("isBusy")||(a("#"+b.name).live("pagehide",A),a("#"+b.name).live("pagebeforeshow",E),a("#"+b.name).live("pagebeforeshow",L),a("#"+b.name).live("pageshow",Q),a("#page_body").append(u()),f.applyData(),a.mobile.initializePage(),
a.mobile.activePage.attr("id")===b.name?E(!0):a.mobile.changePage("#"+b.name,{transition:d,reverse:g,changeHash:!0}),a.utility("queryDatabase",!1),window.clearInterval(k))},700)):void 0!=h&&"RemoteTableViewList"==h.type&&"RemoteTableView"==b.type&&h.data.tablename!=b.data.tablename?(a.utility("queryDatabase",!0),h="",h=void 0!=a.mobileweb.release&&a.mobileweb.release?"db_"+a.mobileweb.pid+"_release":"db_"+a.mobileweb.pid,(new a.actions(b,null,[{method:"Select",category:"ComAction",params:{servicename:b.data.servicename,
database:h,table:b.data.tablename,where:b.data.wherecond,order:b.data.order,fields:""}}])).execute(),k=setInterval(function(){a.utility("isBusy")||(a("#"+b.name).live("pagehide",A),a("#"+b.name).live("pagebeforeshow",E),a("#"+b.name).live("pagebeforeshow",L),a("#"+b.name).live("pageshow",Q),a("#page_body").append(u()),f.applyData(),a.mobile.initializePage(),a.mobile.activePage.attr("id")===b.name?E(!0):a.mobile.changePage("#"+b.name,{transition:d,reverse:g,changeHash:!0}),a.utility("queryDatabase",
!1),window.clearInterval(k))},700)):f.MovePage(d,g):"SplitView"===b.type?k=setInterval(function(){f.splitviewChildren&&(window.clearInterval(k),a("#"+b.name).live("pagehide",A),a("#"+b.name).live("pagebeforeshow",E),a("#"+b.name).live("pagebeforeshow",L),a("#"+b.name).live("pageshow",Q),a("#page_body").append(u()),a.mobile.initializePage(),a.mobile.activePage.attr("id")===b.name?E(!0):a.mobile.changePage("#"+b.name,{transition:d,reverse:g,changeHash:!0}))},700):"PageScrollView"===b.type?k=setInterval(function(){f.pagescrollviewChildren&&
(window.clearInterval(k),a("#"+b.name).live("pagehide",A),a("#"+b.name).live("pagebeforeshow",E),a("#"+b.name).live("pagebeforeshow",L),a("#"+b.name).live("pageshow",Q),a("#page_body").append(u()),a.mobile.initializePage(),a.mobile.activePage.attr("id")===b.name?E(!0):a.mobile.changePage("#"+b.name,{transition:d,reverse:g,changeHash:!0}))},700):f.MovePage(d,g);a.utility("setbasicPageDef",b)},getOriginalFrame:function(){return{height:b.height,width:b.width}},refreshDisplay:function(a){E(!0,a)},getChild:function(d,
g,h){var k={},l=0;void 0!=this.toolbartop.children&&a.each(this.toolbartop.children,function(a,b){b.getName()===d&&(k=b,l++)});void 0!=this.toolbarbottom.children&&a.each(this.toolbarbottom.children,function(a,b){b.getName()===d&&(k=b,l++)});void 0!=this.leftToolBar&&void 0!=this.leftToolBar.children&&"TableView"!==b.toolbarleft.view&&a.each(this.leftToolBar.children,function(a,b){void 0==b.group&&b.getName()===d&&(k=b,l++)});void 0!=this.toolbarright&&void 0!=this.toolbarright.children&&"TableView"!==
b.toolbarright.view&&a.each(this.toolbarright.children,function(a,b){void 0==b.group&&b.getName()===d&&(k=b,l++)});0==l&&("PageScrollView"==this.getViewType()?a.each(f.children,function(b,f){f.getName()===h&&(b=a.mobileweb.getPage(f.getName()),a.each(b.children,function(a,b){b.getName()===d&&(k=b)}))}):"SplitView"==this.getViewType()?a.each(f.children,function(b,f){f.getName()===h&&(b=a.mobileweb.getPage(f.getName()),a.each(b.children,function(a,b){b.getName()===d&&(k=b)}))}):void 0!=this.children&&
a.each(this.children,function(f,h){if("DBTableViewList"==b.type||"RemoteTableViewList"==b.type||"RemoteTableView"==b.type||"DBTableView"==b.type||"TableView"==b.type){if(void 0!==h.getName&&"Dialog"===h.getViewType())return h.getName()===d?k=h:a.each(h.children,function(a,b){if(b.getName()===d)return k=b,!1}),!1;a.each(h.group,function(f,h){a.each(h.row,function(f,h){a.each(h.children,function(l,m){if(null==g)if("Radio"==m.getViewType()){if(m.getRadioGroup()===d)return k=m,!1}else{if(m.getName()===
d)return k=m,!1}else"undefined"!=typeof g.getId?a.each(h.children,function(a,b){if("Radio"==b.getViewType()){if(b.getRadioGroup()===d)return k=b,!1}else if(b.getName()===d||b.getName()===d+"-"+f)return k=b,!1}):null!=g.id&&(m.getId()==g.id?a.each(h.children,function(a,b){if(b.getName()===d||b.getName()===d+"-"+f)return k=b,!1}):"RemoteTableViewList"==b.type||"DBTableViewList"==b.type?a.each(h.children,function(a,b){if(b.getName()===d)return k=b,!1}):("RemoteTableView"==b.type||"DBTableView"==b.type||
"TableView"==b.type)&&a.each(h.children,function(a,b){if(b.getName()===d)return k=b,!1}))})})})}else if("TableViewList"==b.type)a.each(h.group,function(f,h){a.each(h.row,function(f,h){a.each(h.children,function(f,l){"undefined"!=typeof g.getId?a.each(h.children,function(a,b){if(b.getName()===d)return k=b,!1}):null!=g.id&&(l.getId()==g.id?a.each(h.children,function(a,b){if(b.getName()===d)return k=b,!1}):("RemoteTableViewList"==b.type||"DBTableViewList"==b.type)&&a.each(h.children,function(a,b){if(b.getName()===
d)return k=b,!1}))})})});else if(h.getName()===d)return k="Gadget"===h.getViewType()?h.getMainObject():h,!1}));if(a.isEmptyObject(k)&&0!=a("[name='"+d+"']").length){var m=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),a(a("[name='"+d+"']")).attr("id"));k=f.getChild(m.name,g,h)}return k},getGadgetChild:function(b,d,f){var g={};void 0!=this.children&&a.each(this.children,function(d,h){h.getName()===f&&a.each(h.getChildren(),function(a,d){d[0].getName()===b&&(g=d[0])})});
void 0!=this.toolbartop.children&&a.each(this.toolbartop.children,function(d,h){h.getName()===f&&a.each(h.getChildren(),function(a,d){d[0].getName()===b&&(g=d[0])})});void 0!=this.toolbarbottom.children&&a.each(this.toolbarbottom.children,function(d,h){h.getName()===f&&a.each(h.getChildren(),function(a,d){d[0].getName()===b&&(g=d[0])})});return g},getGadgetUI:function(b,d){var f={};if(void 0!=this.children)return a.each(this.children,function(a,d){d.getName()===b&&"Gadget"===d.getViewType()&&(f=d)}),
f;void 0!=this.toolbartop.children&&a.each(this.toolbartop.children,function(a,d){d.getName()===b&&"Gadget"===d.getViewType()&&(f=d)});void 0!=this.toolbarbottom.children&&a.each(this.toolbarbottom.children,function(a,d){d.getName()===b&&"Gadget"===d.getViewType()&&(f=d)});return f},triggerActions:function(){var d=!1,g=a.utility("getTabPage");a.each(g,function(a,b){b.page==f.getName()&&1==b.tabFlag&&(d=!0)});if(d&&(a.utility("setPageLoadingFlag",!1),!a.utility("getResetEvent"))){a.utility("setResetEvent",
!1);return}a.utility("getResetEvent")&&a.utility("setResetEvent",!1);void 0!=b.events&&void 0!=b.events.AfterViewPage&&0<b.events.AfterViewPage.length?(a.utility("setActionRunningStatus",!0),(new a.actions(b,null,b.events.AfterViewPage.slice(),void 0,function(){a.utility("setPageLoadingFlag",!1)})).execute()):a.utility("setPageLoadingFlag",!1);void 0!=b.parent&&-1==b.parent.indexOf("page")&&a.utility("setTabPage",f.getName())},callReverse:function(d){f=a.mobileweb.getCurrentPage();a("#"+b.name).live("pagehide",
A);a("#"+b.name).live("pagebeforeshow",E);a("#"+b.name).live("pagebeforeshow",L);1<b.parent.split("_").length&&a("#"+b.name).live("pagebeforeshow",C);a("#"+b.name).live("pageshow",Q);"RemoteTableViewList"==b.type||"DBTableViewList"==b.type?(f.applyData(!0),a("#page_body").append(u())):(a("#page_body").append(u()),f.applyData(!0));a.mobile.initializePage();a.mobile.activePage.attr("id")===b.name?E(!0):a.mobile.changePage("#"+b.name,{transition:d,reverse:!0,changeHash:!0});a.utility("queryDatabase",
!1)}},u=function(){var a=[];void 0!=f.children&&(a=f.children);return['<div data-role="page" id="',b.name,'" class="page-body">',f.statusbar.getHTML(),f.header.getHTML(),f.toolbartop.getHTML(),f.leftToolBar.getHTML(),f.rightToolBar.getHTML(),'<div data-role="content"><div class="wrapper"><div id="iscroll_',b.name,'"><div class="bglayout" style="background:transparent"><div class="scroller">',0<a.length?a.getHTML():"","</div></div></div></div></div>",f.toolbarbottom.getHTML(),f.footer.getHTML(),"</div>"].join("")},
A=function(){a("#"+b.name).remove();a("#"+b.name).die("pagehide",A);a("#"+b.name).die("pagebeforeshow",E);a("#"+b.name).die("pagebeforeshow",L);a("#"+b.name).die("pagebeforeshow",C);a("#"+b.name).die("pageshow",Q)},G=function(b){var d=0;b.statusbarhidden||(d+=20);void 0==b.header||b.header.hidden||(d=""!=b.header.prompt?d+77:d+44);void 0==b.footer||b.footer.hidden||(d+=49);var f=b.height;"ScrollView"==b.type&&(b=0,void 0!=a.mobileweb.screens.screenIndex&&(b=a.mobileweb.screens.screenIndex),f=a.mobileweb.screens[b].height);
a.mobileweb.device.aspectHratio=(document.documentElement.clientHeight-d)/(f-d)},E=function(d,g){window.scrollTo(0,1);var h=b.height;"preview"!==a.mobileweb.state&&(1!=g?(G(b),h=document.documentElement.clientHeight):h=a.mobileweb.device.height);"preview"==a.mobileweb.state&&"ScrollView"==b.type&&(h=document.documentElement.clientHeight);void 0==b.toolbarleft||b.toolbarleft.hidden||(b.isSidebarFixed=b.toolbarleft.fixed?!0:!1);if(void 0==b.parentType||"PageScrollView"!=b.parentType)f.statusbar.applyOverrides(),
f.header.applyOverrides(),f.footer.applyOverrides(),f.toolbartop.applyOverrides(d),f.toolbarbottom.applyOverrides(d),f.leftToolBar.applyOverrides(),f.rightToolBar.applyOverrides();var k=void 0==b.statusbarhidden||b.statusbarhidden?0:20,l=0<k?20:0,m=void 0==b.toolbartop||b.toolbartop.hidden?0:b.toolbartop.frame.height,p=void 0==b.toolbarbottom||b.toolbarbottom.hidden?0:b.toolbarbottom.frame.height;f.frame=b.isSidebarFixed?{x:b.toolbarleft.frame.width*a.mobileweb.device.aspectWratio,y:f.header.height+
l+parseInt(m)*a.mobileweb.device.aspectHratio,width:(b.width-b.toolbarleft.frame.width)*a.mobileweb.device.aspectWratio,height:h-(parseFloat(m)+parseFloat(p))*a.mobileweb.device.aspectHratio-(k+f.header.height+f.footer.height)}:{x:0,y:f.header.height+l+parseInt(m)*a.mobileweb.device.aspectHratio,width:b.width*a.mobileweb.device.aspectWratio,height:h-(parseFloat(m)+parseFloat(p))*a.mobileweb.device.aspectHratio-(k+f.header.height+f.footer.height)};a.utility("setPageFrame",f.frame);void 0!=f.children&&
f.children.applyOverrides();1==g?a.utility("setreSettingDataStatus",!1):(f.toolbartop.applyEvents(),void 0!=f.children&&f.children.applyEvents(),f.toolbarbottom.applyEvents(),f.leftToolBar.applyEvents(),f.rightToolBar.applyEvents(),a.utility("setAppBootingForFirstTime",!1));g=0;b.isSidebarFixed?"ScrollView"!=b.type&&(g=f.frame.x):g=document.documentElement.clientWidth>f.frame.width?(document.documentElement.clientWidth-f.frame.width)/2:0;l=h-(k+f.footer.height+f.header.height);a.mobileweb.device.standalone||
"iPhone"!==a.mobileweb.device.type&&"iPad"!==a.mobileweb.device.type||(l+=60);a("#iscroll_"+b.name).css({position:"absolute",top:f.frame.y,left:0,width:document.documentElement.clientWidth});a("#iscroll_"+b.name).css({height:l-(parseFloat(m)+parseFloat(p))*a.mobileweb.device.aspectHratio});a(".scroller").css({position:"relative",left:g,width:f.frame.width,height:f.frame.height});"TableViewListTab"!=b.type?a(".scroller").css({background:a.attributes("color",b.backgroundColor).getColorCode()}):a(".scroller").css({background:"rgba(255,255,255,1.0)"});
f.frame.width<document.documentElement.clientWidth?a(".bglayout").css({width:document.documentElement.clientWidth}):a(".bglayout").css({width:f.frame.width});f.frame.height<l?"iPhone"===a.mobileweb.device.type&&a.browser.safari?a(".bglayout").css({height:l+20}):a(".bglayout").css({height:l}):a(".bglayout").css({height:f.frame.height});if("BaseView"===b.type)0<a("#iscroll_"+b.name).length&&(k=a("#iscroll_"+b.name).css("height").replace("px",""),a(".bglayout").css({height:k})),a("#"+b.name).css({overflow:"hidden"});
else if("ScrollView"==b.type)"preview"!=a.mobileweb.state?a("#iscroll_"+b.name).css({position:"absolute",width:document.documentElement.clientWidth-b.x,height:l-b.y-(parseFloat(m)+parseFloat(p))*a.mobileweb.device.aspectHratio,top:f.frame.y+b.y,left:b.x}):a("#iscroll_"+b.name).css({position:"absolute",width:document.documentElement.clientWidth-b.x,height:l-b.y-parseFloat(m)-parseFloat(p),top:f.frame.y+b.y,left:b.x}),b.height*a.mobileweb.device.aspectHratio>=l?(a(".scroller").css({height:b.height*
a.mobileweb.device.aspectHratio,width:b.width*a.mobileweb.device.aspectWratio,left:f.frame.x}),a(".bglayout").css({height:b.height*a.mobileweb.device.aspectHratio,width:(b.width-b.x)*a.mobileweb.device.aspectWratio})):(a(".scroller").css({height:f.frame.height,width:b.width*a.mobileweb.device.aspectWratio,left:f.frame.x}),a(".bglayout").css({height:f.frame.height,width:(b.width-b.x)*a.mobileweb.device.aspectWratio})),"iPhone"===a.mobileweb.device.type&&a.browser.safari&&a(".bglayout").css({height:(parseFloat(b.height)+
60)*a.mobileweb.device.aspectHratio}),k=0,void 0!=a("#iscroll_"+b.name).css("left")&&(k=a("#iscroll_"+b.name).css("left").replace("px","")),a("#iscroll_"+b.name).css({left:parseFloat(k)+g}),"Desktop"===a.mobileweb.device.type&&a("#iscroll_"+b.name).css({"overflow-y":"scroll","overflow-x":"hidden"});else if("RemoteTableViewList"==b.type||"TableViewListTab"==b.type||"DBTableViewList"==b.type||"TableViewList"==b.type||"DBTableView"==b.type||"TableView"==b.type||"RemoteTableView"==b.type){var q=0;a.each(b.children,
function(b,d){"Grouped"!==d.tablestyle&&"Plain"!==d.tablestyle||a.each(d.group,function(a,b){q+=170})});void 0!=f.children&&a.each(f.children,function(b,d){void 0!=d.group&&a.each(d.group,function(b,d){a.each(d.row,function(a,b){q+=b.getCellHeight();q+=2})})});a.mobileweb.device.iframe?q<document.documentElement.clientHeight&&q<f.frame.height&&(q=f.frame.height):q<f.frame.height&&(q=f.frame.height);170==q&&(q=f.frame.height);a(".scroller").css({height:q});a(".bglayout").css({height:q});a("#iscroll_"+
b.name).css({height:l-(parseFloat(m)+parseFloat(p))*a.mobileweb.device.aspectHratio});"TableViewListTab"==b.type&&"more"==b.name&&(l=20==k?l+20:l,"iPhone"==a.utility("getDeviceType")||"iPad"==a.utility("getDeviceType")?a("#iscroll_"+b.name).css({height:l-49}):a("#iscroll_"+b.name).css({height:l}))}else"SplitView"===b.type&&(a(".bglayout").css({height:f.frame.height}),a("#"+b.name).css({overflow:"hidden"}));"preview"!=a.mobileweb.state&&"iphone5"===a.mobileweb.type&&"BaseView"===b.type&&(460<h?a(".bglayout").css({height:h-
(f.footer.height+f.header.height)+"px"}):a(".bglayout").css({height:h+44+20+"px"}),a(".scroller").css({height:h+"px"}));a("#"+b.name).css({position:"fixed"});"PageScrollView"===b.type&&(h=f.frame.width*b.children.length,a(".bglayout").css({height:f.frame.height}),a(".bglayout").css({width:h}),a(".scroller").css({left:"0px"}),a("#iscroll_"+b.name).css({left:g}),a("#iscroll_"+b.name).css({width:f.frame.width}));"PageScrollView"===b.parentType&&d&&(a(".scroller").css({left:"0px"}),a("#"+b.name).css({position:"relative"}));
f.toolbarbottom.applyOverrides(d);a.utility("registerPagedefData",b)},C=function(){void 0!=b.events&&void 0!=b.events.BeforeViewPage&&0<b.events.BeforeViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(b,null,b.events.BeforeViewPage.slice())).execute())},L=function(){if(void 0!=b.events&&void 0!=b.events.BeforeViewPage&&0<b.events.BeforeViewPage.length){a("#"+b.name).hide();var d=setInterval(function(){a.utility("getActionRunningStatus")||(clearInterval(d),a("#"+b.name).show())},
100)}},Q=function(){"Desktop"===a.mobileweb.device.type?a("#iscroll_"+f.name).css({"overflow-y":"scroll"}):(f.iscroll=new iScroll(a("#iscroll_"+b.name).get(0),{bounceLock:!0,hideScrollbar:!0,hScroll:!1,onScrollEnd:function(){b.iscroll.vScroll=!0;curScrollPos=a(this).get(0).y;a.utility("setSessionData",{page_name:b.name,x:curScrollPos},"offset")},onBeforeScrollStart:function(b){for(var d=b.target;1!=d.nodeType;)d=d.parentNode;"scroller"==d.className&&(a("#ui-datepicker-div").css({display:"none"}),
document.getElementsByClassName("scroller")[0].setAttribute("tabindex",-1),document.getElementsByClassName("scroller")[0].focus());"SELECT"!=d.tagName&&"INPUT"!=d.tagName&&"TEXTAREA"!=d.tagName&&"VIDEO"!=d.tagName&&b.preventDefault()}}),b.iscroll=f.iscroll);a(".scroller").keyup(function(d){312>=parseFloat(a("#iscroll_"+b.name).scrollTop())?a("#iscroll_"+b.name+" > div:nth-child(2) > div").css({transform:"translate(0px, "+a("#iscroll_"+b.name).scrollTop()+"px) translateZ(0px)"}):a("#iscroll_"+b.name+
" > div:nth-child(2) > div").css({transform:"translate(0px, 312px) translateZ(0px)"})});void 0!=a(".scroller").get(0)&&null!=a(".scroller").get(0)&&a(".scroller").get(0).addEventListener("keydown",function(b){var d=a(".scroller").get(0).querySelectorAll('a[href], input, img, button, textarea, input[type="text"],input[type="password"],input[type="password"], input[type="radio"], input[type="checkbox"], select'),f=[].slice.call(d);f.sort(function(a,b){return a.tabIndex<b.tabIndex?-1:a.tabIndex>b.tabIndex?
1:0});d=f[f.length-1];f=f[0];if("Tab"===b.key||9==b.keyCode)b.shiftKey?b.srcElement.tabIndex==f.tabIndex&&(f.focus(),b.preventDefault()):b.srcElement.tabIndex==d.tabIndex&&(d.focus(),b.preventDefault())})};(function(){a.utility("initChildren",!1);switch(b.type){case "RemoteTableViewList":case "DBTableViewList":a(document).everyTime(100,function(){if(!a.utility("isBusy")){a(document).stopTime();void 0!=b.data.groupby&&(b.data.groupby=b.data.groupby.replace("[","").replace("]",""));if("DBTableViewList"===
b.type)(new a.actions(b,null,[{method:"Select",category:"DBAction",params:{tablename:b.data.tablename,where:b.data.wherecond,order:b.data.order,groupby:b.data.groupby,limit:25,offset:0,columns:""}}])).execute();else{if(void 0==b.data.groupby||""==b.data.groupby){b.children[0].accordion&&(b.data.groupby=b.data.order);var d=25}void 0!=b.data.groupby&&(b.data.groupby=b.data.groupby.replace("[","").replace("]",""));(new a.actions(b,null,[{method:"Select",category:"ComAction",params:{servicename:b.data.servicename,
table:b.data.tablename,where:b.data.wherecond,order:b.data.order,limit:d,offset:0,fields:""}}])).execute()}a(document).everyTime(100,function(){a.utility("isBusy")||(a(document).stopTime(),f.applyData())})}});break;case "RemoteTableView":case "BaseView":case "ScrollView":case "DBTableView":if(""!==b.data.tablename){var d=[];if("BaseView"===b.type){var g={};g=b.data.servicename?a.mobileweb.comdb.schema:a.mobileweb.localdb.schema;d.push(a.utility("getPK",b.data.tablename,g))}}f.applyData();break;case "TableViewList":f.applyData();
break;case "TableView":f.applyData();break;case "SplitView":a.utility("initCall");var h=setInterval(function(){""!=a.utility("appendDeviceInfo")&&(clearInterval(h),f.applyData())},200);break;case "PageScrollView":f.applyData();break;default:if(void 0!=b.pageOverlay&&0<b.pageOverlay.length){for(d=0;d<b.pageOverlay.length;d++)b.children.push(b.pageOverlay[d]);b.pageOverlay=[]}f.children=new a.uichildren(b,b.children,null)}})();return f}function g(b){var d={height:0,getHTML:function(){var d="phone"===
a.mobileweb.type?b.statusbarhidden?"":a.mobileweb.baseurl+"/mobileweb/resources/images/system/statusbar_mobile.png":b.statusbarhidden?"":a.mobileweb.baseurl+"/mobileweb/resources/images/system/statusbar_tablet.png";var f=document.documentElement.clientWidth;if("preview"===a.mobileweb.state)return['<img src="',d,'" style="position:absolute; top:0px; left:0px; height:20px;width:',f,'px"/>'].join("");d=0;var g=b.width*a.mobileweb.device.aspectratio;isNaN(g)||(f=g,d=document.documentElement.clientWidth>
g?(document.documentElement.clientWidth-g)/2:0);return void 0==b.statusbarhidden||b.statusbarhidden?"":['<div id="statusBar" style="position:absolute; top:0px;z-index:1; left:',d,"px; height:20px; width:",f,'px;background-color: rgba(190, 190, 190, 0.8); background-image: linear-gradient(to right, rgba(190, 190, 190, 0.8), rgb(190, 190, 190));"/>'].join("")},applyOverrides:function(){d.height="preview"===a.mobileweb.state?20:void 0==b.statusbarhidden||b.statusbarhidden?0:20},applyevents:function(){}};
return d}function k(b){var d={height:0,persistent:"object"===typeof a.utility("getObject",a.mobileweb.tabs,"page",b.name)},f=b.header;d.setTitle=function(a){f.title=a};d.getTitle=function(){return f.title};d.isHidden=function(){return f.hidden};d.setTheme=function(){return f.theme};d.getTheme=function(){return f.theme};d.getHTML=function(){var a=void 0!=b.header.titleValue?b.header.titleValue:b.header.title;return f.hidden?"":['<div data-role="header" ',d.persistent?'data-id="persistent"':"",'data-position="fixed" id="',
f.id,'" data-tap-toggle="false">',,d.getBackBtn(),'<div class="ui-title">',a,"</div>",d.getForwardBtn(),"</div>"].join("")};d.getBackBtn=function(){if(f.backBtn){if("image"==f.backBtn.type)return['<div class="ui-btn-left"><input id="toolbar-btn-leftbar" data-adf-name="toolbar-btn-leftbar" type="image" height="30px" src="',a.utility("getSystemImageToolBarItem",f.style,f.backBtn.src),'" parent="" /></div>'].join("");""==f.backBtn.name&&(f.backBtn.name=a.mobileweb.getPage(b.parent).getTitle());return['<div class="ui-btn-left"><input id="toolbar-btn-leftbar" data-adf-name="toolbar-btn-leftbar" type="button" height="30px" value="',
f.backBtn.name,'" parent="" /></div>'].join("")}};d.getForwardBtn=function(){if(f.forwardBtn)return"image"==f.forwardBtn.type?['<div class="ui-btn-right"><input id="toolbar-btn-rightbar" data-adf-name="toolbar-btn-rightbar" type="image" height="30px" src="',a.utility("getSystemImageToolBarItem",f.style,f.forwardBtn.src),'" parent="" /></div>'].join(""):void 0!=f.forwardBtn.nameValue?['<div class="ui-btn-right"><input id="toolbar-btn-rightbar" data-adf-name="toolbar-btn-rightbar" type="button" height="30px" value="',
f.forwardBtn.nameValue,'" parent="" /></div>'].join(""):['<div class="ui-btn-right"><input id="toolbar-btn-rightbar" data-adf-name="toolbar-btn-rightbar" type="button" height="30px" value="',f.forwardBtn.name,'" parent="" /></div>'].join("")};d.applyOverrides=function(){if(void 0!=f&&!f.hidden){var g=b.width*a.mobileweb.device.aspectWratio;if(!isNaN(g)){a('div[data-role="header"]').css({width:g});var h=document.documentElement.clientWidth>g?(document.documentElement.clientWidth-g)/2:0;a('div[data-role="header"]').css({left:h})}g=
a("div:jqmData(role='header')");var k=g.children("div");if("landscape-right"===a.mobileweb.device.orientation&&"tablet"===a.mobileweb.type)d.height=44;else if(f.prompt){d.height=77;var l=0==a("h2.ui-title").length?document.createElement("h2"):a("h2.ui-title");void 0!=f.promptValue?a(l).addClass("ui-title").html(f.promptValue):a(l).addClass("ui-title").html(f.prompt);g.prepend(l);a(l).css({"font-size":16});a(l).css({"margin-top":15,"margin-left":7,"margin-right":7});a("div.ui-btn-left>div").css("bottom",
"-27px");a("div.ui-btn-right>div").css("bottom","-27px");f.backBtn&&"image"==f.backBtn.type&&(a("div.ui-btn-left").css("top","37px"),a("div.ui-btn-left").css("left","7px"));f.forwardBtn&&"image"==f.forwardBtn.type&&(a("div.ui-btn-right").css("top","37px"),a("div.ui-btn-right").css("right","7px"))}else d.height=44,f.backBtn&&"image"==f.backBtn.type&&(a("div.ui-btn-left").css("top","7px"),a("div.ui-btn-left").css("left","7px")),f.forwardBtn&&"image"==f.forwardBtn.type&&(a("div.ui-btn-right").css("top",
"7px"),a("div.ui-btn-right").css("right","7px")),a("div.ui-btn-left>div").css("bottom","6.5px"),a("div.ui-btn-right>div").css("bottom","6.5px");d.height*=1;g.css({"background-image":"url("+a.utility("getNavTheme",f.style,f.prompt)+")","background-repeat":"repeat"});""==b.header.style&&a('div[data-role="header"]').css({"background-image":" linear-gradient(rgba(220, 220, 220, 0.3), rgba(254, 254, 254, 0.6) 33%, rgb(208, 208, 208,0.85) 67%)","background-color":"rgba(220, 220, 220, 0.85)"});b.statusbarhidden?
g.css({height:d.height,border:0}):void 0!=b.statusbarhidden?g.css({height:d.height,top:20,border:0}):g.css({height:d.height,border:0});k.css({"font-size":21});k.css({"margin-bottom":15});k.css({"margin-right":0});k.css({"margin-left":0});a("div.ui-btn-left>div").css("left","5px");a("div.ui-btn-left").css({height:30,"min-width":30,margin:0,border:"none"});a("div.ui-btn-left .ui-btn-up-a").css("border","none");a("div.ui-btn-left>div").css({"text-shadow":"none","box-shadow":"none"});a("div.ui-btn-left .ui-btn-corner-all").css("border-radius",
"0.3em");a("div.ui-btn-left>div").css({"background-image":"url("+a.utility("getNavTheme",f.style,f.prompt)+")","background-repeat":"repeat","background-color":"white"});a("div.ui-btn-right>div").css("right","5px");a("div.ui-btn-right").css({height:30,"min-width":30,margin:0,border:"none"});a("div.ui-btn-right .ui-btn-up-a").css("border","none");a("div.ui-btn-right>div").css({"text-shadow":"none","box-shadow":"none"});a("div.ui-btn-right .ui-btn-corner-all").css("border-radius","0.3em");a("div.ui-btn-right>div").css({"background-image":"url("+
a.utility("getNavTheme",f.style,f.prompt)+")","background-repeat":"repeat","background-color":"white"});a.isEmptyObject(f.custom)?(a("div .ui-btn-left > div").css({"background-color":""}),a("div .ui-btn-right > div").css({"background-color":""})):(k="rgb("+f.custom.red+","+f.custom.green+","+f.custom.blue+")",g.css({"background-color":k}),a("div .ui-btn-left > div").css({"background-color":k}),a("div .ui-btn-right > div").css({"background-color":k}));b.isSidebarFixed&&(k=b.toolbarleft.frame.width*
a.mobileweb.device.aspectWratio,g.css({left:h+k,width:b.width*a.mobileweb.device.aspectWratio-k}))}a.utility("getreSettingDataStatus")||d.applyevents(f)};d.applyevents=function(){void 0!=f&&(f.backBtn&&f.backBtn.events&&f.backBtn.events.Tap&&(f.backBtn.headerFlag=!0,a("input[id='toolbar-btn-leftbar' ]").click(function(){(new a.actions(b,f.backBtn,f.backBtn.events.Tap.slice())).execute()})),f.forwardBtn&&f.forwardBtn.events&&f.forwardBtn.events.Tap&&(f.forwardBtn.headerFlag=!0,a("input[id='toolbar-btn-rightbar' ]").click(function(){(new a.actions(b,
f.forwardBtn,f.forwardBtn.events.Tap.slice())).execute()})))};return d}function d(d){var f={height:0},g=d.footer;f.getHTML=function(){var f=[];a.each(a.mobileweb.tabs,function(a,g){f.push((new b(g,d.name)).getHTML())});return 1==g.hidden?['<div id="clearfooter"></div>']:['<div data-role="footer" data-id="persistent" data-tap-toggle="false" data-position="fixed">',g.hidden?"":['<div data-role="navbar" class="nav-icon"><ul>',f.join(""),"</ul></div>"].join(""),"</div>"].join("")};f.isHidden=function(){return g.hidden};
f.applyOverrides=function(){if(void 0!=g&&!g.hidden){var b=1;1>a.mobileweb.device.aspectratio&&(b=a.mobileweb.device.aspectratio);f.height=49*b;a("div:jqmData(role='footer')").attr("style","border-width: 0px");a("div:jqmData(role='navbar')>ul").attr("style","height: "+f.height+"px!important");a("div:jqmData(role='navbar')>ul>li>a").attr("style","height: "+f.height+"px!important");a("div:jqmData(role='navbar')>ul>li>a>span").css({"padding-top":35*b});a("div:jqmData(role='navbar')>ul>li>a>span>span>div").css({height:12*
b,"font-size":parseInt(11*b)});var h=d.width*a.mobileweb.device.aspectWratio;isNaN(h)||(a('div[data-role="footer"]').css({width:h}),h=document.documentElement.clientWidth>h?(document.documentElement.clientWidth-h)/2:0,a(".ui-footer-fixed").css({left:h}));var k="";a.each(a.mobileweb.tabs,function(f,g){void 0!=a("#"+g.id).get(0)&&0<=a("#"+g.id).get(0).firstChild.getAttribute("class").indexOf("ui-btn-active")&&("tab-more"===g.id?a("#"+d.name).live("pageshow",function(b,f){a.each(a.mobileweb.tabs[4].tabs,
function(b,f){if(f.page==d.name)for(k="rgb("+f.tintcolor.red+","+f.tintcolor.green+","+f.tintcolor.blue+")",b=1;4>=b;b++)a("#tab-"+b+">a").css({background:k})})}):(k="rgb("+g.tintcolor.red+","+g.tintcolor.green+","+g.tintcolor.blue+")",a.each(a.mobileweb.tabs,function(b,d){0<=a("#"+d.id).get(0).firstChild.getAttribute("class").indexOf("ui-btn-active")||a("#"+d.id+">a").css({background:k})})));f=30*b;a(".ui-icon-"+g.id).css({top:5*b,width:f,height:f,"margin-left":-15,"background-image":'url("'+a.utility("getImage",
g.icon.image)+'")',"background-size":f+"px "+f+"px","background-color":"transparent","background-repeat":"no-repeat"});a("#tab-more > a").css({"margin-right":"inherit"})})}};return f}function b(b,d){return{getHTML:function(){var f=b.page===d?'ui-btn-active ui-state-persist"':"tab-more"===b.id?"\" onclick=\"$.mobileweb.changePage('more','fade',false)\"":['" onclick="$.mobileweb.changeTab(',b.id.substring(4,b.id.length),')"'].join("");"tab-more"===b.id&&a.each(b.tabs,function(a,b){b.page===d&&(f='ui-btn-active ui-state-persist"'+
f.replace("'fade',false","'slide',false"))});return['<li id="',b.id,'"><a href="#',b.page,'" data-icon="',b.id,'" class="',f,'><div class="nav-footer-text">',b.text,"</div></a></li>"].join("")}}}function h(b){var d={height:0},f=b.toolbartop;void 0!=f&&void 0!=f.children&&a.each(f.children,function(a,b){b.taborder=parseInt(b.taborder)+2E3});"RemoteTableViewList"!=b.type&&"DBTableViewList"!=b.type||!(0<b.children.length)||"simplegrid"!=b.children[0].style&&"tabulargrid"!=b.children[0].style?void 0!=
f&&(d.children=void 0!=b.data&&void 0!=b.data.contents?new a.uichildren(b,f.children,b.data.contents[0]):new a.uichildren(b,f.children)):d.children=new a.uichildren(b,b.children[0].group[0].template.gridHeaders,b.data.contents[0]);d.isHidden=function(){return f.hidden};d.getHTML=function(){return a.isEmptyObject(f)?"":['<div id="'+b.name+'_toolbarTop">',d.children.getHTML(),"</div>"].join("")};d.applyOverrides=function(g){if(!a.isEmptyObject(f)){setTimeout(function(){d.children.applyOverrides();a("#"+
b.name+"_toolbarTop").children().css({display:"block"});a("#"+b.name+"_toolbarTop").children().children().css({display:"block"})},"BaseView"==b.type||"ScrollView"==b.type?300:1E3);1!=g&&(a("#"+b.name+"_toolbarTop").children().css({display:"none"}),a("#"+b.name+"_toolbarTop").children().children().css({display:"none"}));d.width=b.width*a.mobileweb.device.aspectWratio;d.height=f.frame.height*a.mobileweb.device.aspectHratio;a("#"+b.name+"_toolbarTop").css({position:"absolute",width:d.width,height:d.height});
g=document.documentElement.clientWidth>d.width?(document.documentElement.clientWidth-d.width)/2:0;a("#"+b.name+"_toolbarTop").css({left:g});var h=0;b.statusbarhidden||(h+=20);void 0==b.header||b.header.hidden||(h=""!=b.header.prompt?h+77:h+44);a("#"+b.name+"_toolbarTop").css({top:h+"px"});a("#"+b.name+"_toolbarTop").css({background:a.attributes("color",f.backgroundColor).getColorCode(),"background-repeat":"repeat"});if("RemoteTableViewList"==b.type&&0<b.children.length&&("simplegrid"==b.children[0].style||
"tabulargrid"==b.children[0].style)&&(h=b.children[0].group,void 0!=h[0].template.gridHeaders))for(var k in h[0].template.gridHeaders)a("#"+h[0].template.gridHeaders[k].id).css({"font-size":"",padding:""});f.hidden&&a("#"+b.name+"_toolbarTop").css({visibility:"hidden"});b.isSidebarFixed&&(k=b.toolbarleft.frame.width*a.mobileweb.device.aspectWratio,"ScrollView"===b.type?a("#"+b.name+"_toolbarTop").css({left:k,width:b.width*a.mobileweb.device.aspectWratio}):a("#"+b.name+"_toolbarTop").css({left:g+k,
width:b.width*a.mobileweb.device.aspectWratio-k}))}};d.applyEvents=function(){a.isEmptyObject(f)||f.hidden||d.children.applyEvents();void 0!=a("#"+b.name+"_toolbarTop").get(0)&&null!=a("#"+b.name+"_toolbarTop").get(0)&&a("#"+b.name+"_toolbarTop").get(0).addEventListener("keydown",function(d){var f=a("#"+b.name+"_toolbarTop").get(0).querySelectorAll('a[href], button, textarea, input[type="text"],input[type="password"], input[type="radio"], input[type="checkbox"], select');[].slice.call(f).sort(function(a,
b){return a.tabIndex<b.tabIndex?-1:a.tabIndex>b.tabIndex?1:0});var g=f[f.length-1];f=f[0];if("Tab"===d.key||9==d.keyCode)d.shiftKey?d.srcElement.tabIndex==f.tabIndex&&(f.focus(),d.preventDefault()):d.srcElement.tabIndex==g.tabIndex&&(g.focus(),d.preventDefault())})};return d}function q(b){var d={height:0},f=b.toolbarbottom;a.isEmptyObject(f)||(void 0!=f.children&&a.each(f.children,function(a,b){b.taborder=parseInt(b.taborder)+1E3}),d.children=void 0!=b.data&&void 0!=b.data.contents?new a.uichildren(b,
f.children,b.data.contents[0]):new a.uichildren(b,f.children));d.isHidden=function(){return f.hidden};d.getHTML=function(){return a.isEmptyObject(f)?"":['<div id="'+b.name+'_toolbarBottom">',d.children.getHTML(),"</div>"].join("")};d.applyOverrides=function(g){if(!a.isEmptyObject(f)){setTimeout(function(){d.children.applyOverrides();a.each(a("#"+b.name+"_toolbarBottom").children(),function(b,d){-1===d.id.indexOf("_divImg")?a("#"+d.id).css({display:"block"}):a("#"+d.id).css({display:"flex"})})},"BaseView"==
b.type||"ScrollView"==b.type?300:500);1!=g&&a("#"+b.name+"_toolbarBottom").children().css({display:"none"});d.width=b.width*a.mobileweb.device.aspectWratio;d.height=f.frame.height*a.mobileweb.device.aspectHratio;a("#"+b.name+"_toolbarBottom").css({position:"absolute",width:d.width,height:d.height});g=document.documentElement.clientWidth>d.width?(document.documentElement.clientWidth-d.width)/2:0;a("#"+b.name+"_toolbarBottom").css({left:g});var h=0;b.footer.hidden||(h+=49);b.toolbarbottom.hidden||(h+=
b.toolbarbottom.frame.height*a.mobileweb.device.aspectHratio);h=document.documentElement.clientHeight-h;a("#"+b.name+"_toolbarBottom").css({top:h+"px"});a("#"+b.name+"_toolbarBottom").css({background:a.attributes("color",f.backgroundColor).getColorCode(),"background-repeat":"repeat"});"preview"!=a.mobileweb.state&&"ScrollView"===b.type&&0!=a("#"+b.name+"_toolbarBottom").length&&(h=a("#"+b.name+"_toolbarBottom").css("top").replace("px",""),"iPhone"==a.utility("getDeviceType")||"iPad"==a.utility("getDeviceType"))&&
(h-=60,h=parseFloat(a("#iscroll_"+b.name).css("height").replace("px",""))-60,a("#iscroll_"+b.name).css({height:h+"px"}),h=parseFloat(a(".bglayout").css("height").replace("px",""))-80,a(".bglayout").css({height:h+"px"}));b.toolbarbottom.hidden&&(a("#"+b.name+"_toolbarBottom").css({visibility:"hidden"}),a("#"+b.name+"_toolbarBottom").css({height:"0px"}));b.isSidebarFixed&&(h=b.toolbarleft.frame.width*a.mobileweb.device.aspectWratio,"ScrollView"===b.type?a("#"+b.name+"_toolbarTop").css({left:h,width:b.width*
a.mobileweb.device.aspectWratio}):a("#"+b.name+"_toolbarTop").css({left:g+h,width:b.width*a.mobileweb.device.aspectWratio-h}));b.isSidebarFixed&&(h=b.toolbarleft.frame.width*a.mobileweb.device.aspectWratio,"ScrollView"===b.type?a("#"+b.name+"_toolbarBottom").css({left:h,width:b.width*a.mobileweb.device.aspectWratio}):a("#"+b.name+"_toolbarBottom").css({left:g+h,width:b.width*a.mobileweb.device.aspectWratio-h}))}};d.applyEvents=function(){a.isEmptyObject(f)||f.hidden||d.children.applyEvents();void 0!=
a("#"+b.name+"_toolbarBottom").get(0)&&null!=a("#"+b.name+"_toolbarBottom").get(0)&&a("#"+b.name+"_toolbarBottom").get(0).addEventListener("keydown",function(d){var f=a("#"+b.name+"_toolbarBottom").get(0).querySelectorAll('a[href], button, textarea, input[type="text"],input[type="password"], input[type="radio"], input[type="checkbox"], select'),g=[].slice.call(f);g.sort(function(a,b){return a.tabIndex<b.tabIndex?-1:a.tabIndex>b.tabIndex?1:0});f=g[g.length-1];g=g[0];if("Tab"===d.key||9==d.keyCode)d.shiftKey?
d.srcElement.tabIndex==g.tabIndex&&(g.focus(),d.preventDefault()):d.srcElement.tabIndex==f.tabIndex&&(f.focus(),d.preventDefault())})};return d}function p(b){var d={height:0},f=b.toolbarleft;if(!a.isEmptyObject(f))if(void 0!=f.children&&a.each(f.children,function(a,b){b.taborder=parseInt(b.taborder)+3E3}),"TableView"==f.view){a.each(f.children[0].group,function(d,g){a.each(g.row,function(a,g){g.children=[];switch(f.children[0].style){case "default":g.children.push({id:"ui-sidegroup-"+d+"-main-"+a,
name:"mainText_ui-defgroup-"+d+"-main-"+a,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}});""!==g.template.image&&(g.children[0].frame.x=50,g.children.push({id:"ui-sidegroup-"+d+"-img-"+a,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "subtitle":g.children.push({id:"ui-sidegroup-"+d+"-main-"+a,name:"mainText_ui-defgroup-"+
d+"-main-"+a,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:7,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-sidegroup-"+d+"-sub-"+a,name:"subText_ui-defgroup-"+d+"-sub-"+a,value:"",template:g.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"gray"}}});""!==g.template.image&&(g.children[0].frame.x=50,g.children[1].frame.x=
50,g.children.push({id:"ui-sidegroup-"+d+"-img-"+a,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":g.children.push({id:"ui-sidegroup-"+d+"-main-"+a,name:"mainText_ui-defgroup-"+d+"-main-"+a,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-sidegroup-"+d+"-sub-"+a,name:"subText_ui-defgroup-"+
d+"-sub-"+a,value:"",template:g.template.subtext,viewtype:"Label",frame:{x:f.frame.width-185,y:16,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"right",color:{name:"SteelBlue"}}});break;case "contactform":g.children.push({id:"ui-sidegroup-"+d+"-main-"+a,name:"mainText_ui-defgroup-"+d+"-main-"+a,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:17,width:.4*(b.width-40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"right",
color:{name:"black"}}},{id:"ui-sidegroup-"+d+"-sub-"+a,name:"subText_ui-defgroup-"+d+"-sub-"+a,value:"",template:g.template.subtext,viewtype:"Label",frame:{x:.4*(b.width-40)+20,y:17,width:.6*(b.width-40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"SteelBlue"}}})}})});var g=f.children[0].accordion?{width:f.frame.width,sidebarTableview:!0,type:"TableView",children:[{accordion:!0,accordionheader:f.children[0].accordionheader}]}:{width:f.frame.width,sidebarTableview:!0};
a.isEmptyObject(b.data.contents)&&(b.data.contents=[]);g=a.extend({},b,g);d.children=new a.uichildren(g,f.children,g.data.contents[0])}else d.children=void 0!=b.data&&void 0!=b.data.contents?new a.uichildren(b,f.children,b.data.contents[0]):new a.uichildren(b,f.children);d.isHidden=function(){};d.getHTML=function(){return a.isEmptyObject(f)?"":"FreeLayout"==f.view?['<div id="leftToolBar" class="sidenav"><div class="leftToolBarOverlay" style="z-index: 1000;border: none;margin: 0px;padding: 0px;width: 100%;height: 100%;top: 0px;left: 0px;background-color: rgb(0, 0, 0);opacity: 0.2;position: fixed;"></div>',
d.children.getHTML(),"</div>"].join(""):['<div id="leftToolBar" class="sidenav"><div id="iscroll_leftToolBar_',b.name,'"><div class="leftToolBarOverlay" style="z-index: 1000;border: none;margin: 0px;padding: 0px;width: 100%;height: 100%;top: 0px;left: 0px;background-color: rgb(0, 0, 0);opacity: 0.2;position: fixed;"></div>',d.children.getHTML(),"</div></div>"].join("")};d.applyOverrides=function(){if(void 0!=d.children){var g=a.mobileweb.device.aspectHratio;setTimeout(function(){.95<m&&1>m&&(m=1);
m&&(a.mobileweb.device.aspectHratio=m);d.children.applyOverrides();a.mobileweb.device.leftbarHratio=a.mobileweb.device.aspectHratio;a.mobileweb.device.aspectHratio=g;a(".sidenav").children().css({display:"block"})},500);var h=b.statusbarhidden?0:20,k=document.documentElement.clientWidth>b.width*a.mobileweb.device.aspectWratio?(document.documentElement.clientWidth-b.width*a.mobileweb.device.aspectWratio)/2:0,l=document.documentElement.clientHeight;"preview"===a.mobileweb.state&&(l=b.toolbarleft.frame.height);
var m=1;m="FreeScroll"!=f.view?a.mobileweb.device.aspectHratio:(l-h)/(b.toolbarleft.frame.height-h);a(".leftToolBarOverlay").css({top:h,left:k,width:"0px",height:l-h});a(".sidenav").children().css({display:"none"});a(".sidenav").css({"padding-top":"0px",top:h,width:"0px",left:k});if(b.isSidebarFixed){k<b.toolbarleft.frame.width&&(k=0);var p=b.toolbarleft.frame.width*a.mobileweb.device.aspectWratio;a(".sidenav").css({width:p,left:k})}a(".sidenav").css({background:a.attributes("color",f.backgroundColor).getColorCode(),
"background-repeat":"repeat"});"TableView"==f.view?(a(".sidenav").css({height:l-h-60}),k="preview"===a.mobileweb.state?f.frame.height:l-h,a("#iscroll_leftToolBar_"+b.name).css({position:"absolute",top:h,left:"0px",height:parseInt(k),width:b.width*a.mobileweb.device.aspectWratio})):"FreeScroll"==f.view?(a(".sidenav").css({height:l-h}),a("#iscroll_leftToolBar_"+b.name).css({position:"absolute",top:h,left:"0px",height:(f.frame.height-h)*a.mobileweb.device.aspectHratio,width:b.width*a.mobileweb.device.aspectWratio}),
a(".sidenav").css({height:document.documentElement.clientHeight-h}),a("#iscroll_leftToolBar_"+b.name).css({height:f.frame.height*m})):(a(".sidenav").css({height:l-h}),a(".sidenav").css({top:h}),setTimeout(function(){for(var b=0;b<d.children.length;b++){a("#"+d.children[b].getId()).css({"z-index":1001+b});"Label"==d.children[b].getViewType()&&(a("#"+d.children[b].getId()).css({position:"initial"}),void 0!=a("#"+d.children[b].getId()+"_p")&&a("#"+d.children[b].getId()+"_p").css({"z-index":1001+b}));
void 0!=a("#"+d.children[b].getId()+"_label")&&a("#"+d.children[b].getId()+"_label").css({"z-index":1001+b});var f=a("#"+d.children[b].getId()).css("top");void 0!=f&&(f=parseFloat(f.replace("px","")),a("#"+d.children[b].getId()).css({top:f+"px"}),void 0!=a("#"+d.children[b].getId()+"_p")&&(f=a("#"+d.children[b].getId()+"_p").css("top"),void 0!=f&&("LinkLabel"==d.children[b].getViewType()&&a("#"+d.children[b].getId()).css({transform:"none"}),-1!=d.children[b].getViewType().indexOf("Label")&&(f=parseFloat(f.replace("px",
"")),a("#"+d.children[b].getId()+"_p").css({top:f+"px"})))),void 0!=a("#"+d.children[b].getId()+"_label")&&(f=a("#"+d.children[b].getId()+"_label").css("top"),void 0!=f&&a("#"+d.children[b].getId()+"_label").prev().attr("name")==a("#"+d.children[b].getId()).attr("name")&&(f=parseFloat(f.replace("px","")),a("#"+d.children[b].getId()+"_label").css({top:f+"px"}))),void 0!=a("#"+d.children[b].getId()+"_divImg")&&(f=a("#"+d.children[b].getId()+"_divImg").css("top"),a("#"+d.children[b].getId()+"_divImg").css({display:"flex"}),
a("#"+d.children[b].getId()+"_divImg").css({"z-index":1001+b}),void 0!=f&&(f=parseFloat(f.replace("px","")),a("#"+d.children[b].getId()+"_divImg").css({top:f+"px"}))))}},600))}};d.applyEvents=function(){a.isEmptyObject(f)||f.hidden||d.children.applyEvents();if(void 0!=a("#leftToolBar").get(0)&&null!=a("#leftToolBar").get(0)){var b=a(".sidenav").length;0<b&&a(".sidenav").get(b-1).addEventListener("keydown",function(b){var d=a("#leftToolBar").get(0).querySelectorAll('a[href], button, textarea, input[type="text"],input[type="password"], input[type="radio"], input[type="checkbox"], select'),
f=[].slice.call(d);f.sort(function(a,b){return a.tabIndex<b.tabIndex?-1:a.tabIndex>b.tabIndex?1:0});d=f[f.length-1];f=f[0];if("Tab"===b.key||9==b.keyCode)b.shiftKey?b.srcElement.tabIndex==f.tabIndex&&(f.focus(),b.preventDefault()):b.srcElement.tabIndex==d.tabIndex&&(d.focus(),b.preventDefault())})}a(".leftToolBarOverlay").bind("click",function(b){b.stopPropagation();b=a.mobileweb.device.leftbarHratio;a.mobileweb.device.leftbarHratio=a.mobileweb.device.aspectHratio;a.mobileweb.device.aspectHratio=
b;document.getElementById("leftToolBar").style.width="0px";a(".leftToolBarOverlay").css({width:"0px"})});a(".leftToolBarOverlay").bind("swipe",function(b){b.stopPropagation();b=a.mobileweb.device.leftbarHratio;a.mobileweb.device.leftbarHratio=a.mobileweb.device.aspectHratio;a.mobileweb.device.aspectHratio=b;document.getElementById("leftToolBar").style.width="0px";a(".leftToolBarOverlay").css({width:"0px"})})};return d}function m(b){var d={height:0},f=b.toolbarright;if(!a.isEmptyObject(f))if(void 0!=
f.children&&a.each(f.children,function(a,b){b.taborder=parseInt(b.taborder)+3E3}),"TableView"==f.view){a.each(f.children[0].group,function(d,g){a.each(g.row,function(a,g){g.children=[];switch(f.children[0].style){case "default":g.children.push({id:"ui-sidegroup-"+d+"-main-"+a,name:"mainText_ui-defgroup-"+d+"-main-"+a,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}});
""!==g.template.image&&(g.children[0].frame.x=50,g.children.push({id:"ui-sidegroup-"+d+"-img-"+a,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "subtitle":g.children.push({id:"ui-sidegroup-"+d+"-main-"+a,name:"mainText_ui-defgroup-"+d+"-main-"+a,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:7,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-sidegroup-"+
d+"-sub-"+a,name:"subText_ui-defgroup-"+d+"-sub-"+a,value:"",template:g.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"gray"}}});""!==g.template.image&&(g.children[0].frame.x=50,g.children[1].frame.x=50,g.children.push({id:"ui-sidegroup-"+d+"-img-"+a,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":g.children.push({id:"ui-sidegroup-"+
d+"-main-"+a,name:"mainText_ui-defgroup-"+d+"-main-"+a,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-sidegroup-"+d+"-sub-"+a,name:"subText_ui-defgroup-"+d+"-sub-"+a,value:"",template:g.template.subtext,viewtype:"Label",frame:{x:f.frame.width-185,y:16,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"right",color:{name:"SteelBlue"}}});
break;case "contactform":g.children.push({id:"ui-sidegroup-"+d+"-main-"+a,name:"mainText_ui-defgroup-"+d+"-main-"+a,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:17,width:.4*(b.width-40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"right",color:{name:"black"}}},{id:"ui-sidegroup-"+d+"-sub-"+a,name:"subText_ui-defgroup-"+d+"-sub-"+a,value:"",template:g.template.subtext,viewtype:"Label",frame:{x:.4*(b.width-40)+20,y:17,width:.6*(b.width-40),height:20},
padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"SteelBlue"}}})}})});var g=f.children[0].accordion?{width:f.frame.width,sidebarTableview:!0,type:"TableView",children:[{accordion:!0,accordionheader:f.children[0].accordionheader}]}:{width:f.frame.width,sidebarTableview:!0};a.isEmptyObject(b.data.contents)&&(b.data.contents=[]);g=a.extend({},b,g);d.children=new a.uichildren(g,f.children,g.data.contents[0])}else d.children=void 0!=b.data&&void 0!=b.data.contents?new a.uichildren(b,
f.children,b.data.contents[0]):new a.uichildren(b,f.children);d.isHidden=function(){};d.getHTML=function(){return a.isEmptyObject(f)?"":"FreeLayout"==f.view?['<div id="rightToolBar" class="sidenav"><div class="RightToolBarOverlay" style="z-index: 1000;border: none;margin: 0px;padding: 0px;width: 100%;height: 100%;top: 0px;left: 0px;background-color: rgb(0, 0, 0);opacity: 0.2;position: fixed;"></div>',d.children.getHTML(),"</div>"].join(""):['<div id="rightToolBar" class="sidenav"><div id="iscroll_RightToolBar_',
b.name,'"><div class="RightToolBarOverlay" style="z-index: 1000;border: none;margin: 0px;padding: 0px;width: 100%;height: 100%;top: 0px;left: 0px;background-color: rgb(0, 0, 0);opacity: 0.2;position: fixed;"></div>',d.children.getHTML(),"</div></div>"].join("")};d.applyOverrides=function(){if(void 0!=d.children){var g=a.mobileweb.device.aspectHratio;setTimeout(function(){m&&(a.mobileweb.device.aspectHratio=m);d.children.applyOverrides();a.mobileweb.device.sidebarHratio=a.mobileweb.device.aspectHratio;
a.mobileweb.device.aspectHratio=g},500);var h=b.statusbarhidden?0:20,k=document.documentElement.clientWidth>b.width*a.mobileweb.device.aspectWratio?(document.documentElement.clientWidth-b.width*a.mobileweb.device.aspectWratio)/2:0;sLeftSidebar=document.documentElement.clientWidth-k;var l=document.documentElement.clientHeight;"preview"===a.mobileweb.state&&(l=b.toolbarright.frame.height);var m=(l-h)/(b.toolbarright.frame.height-h);a(".RightToolBarOverlay").css({top:h,left:k,width:"0px",height:l-h});
a(".sidenav").css({"padding-top":"0px",top:h,width:"0px",left:sLeftSidebar});a(".sidenav").css({background:a.attributes("color",f.backgroundColor).getColorCode(),"background-repeat":"repeat"});"TableView"==f.view?(a(".sidenav").css({height:l-h-60}),k="preview"===a.mobileweb.state?f.frame.height:l-h,a("#iscroll_RightToolBar_"+b.name).css({position:"absolute",top:h,left:"0px",height:parseInt(k),width:b.width*a.mobileweb.device.aspectWratio})):"FreeScroll"==f.view?(a(".sidenav").css({height:l-h}),a("#iscroll_RightToolBar_"+
b.name).css({position:"absolute",top:h,left:"0px",height:(f.frame.height-h)*a.mobileweb.device.aspectHratio,width:b.width*a.mobileweb.device.aspectWratio}),a(".sidenav").css({height:document.documentElement.clientHeight-h}),a("#iscroll_RightToolBar_"+b.name).css({height:f.frame.height*leftbarHratio})):(a(".sidenav").css({height:l-h}),a(".sidenav").css({top:h}),setTimeout(function(){for(var b=0;b<d.children.length;b++){a("#"+d.children[b].getId()).css({"z-index":1001+b});"Label"==d.children[b].getViewType()&&
(a("#"+d.children[b].getId()).css({position:"initial"}),void 0!=a("#"+d.children[b].getId()+"_p")&&a("#"+d.children[b].getId()+"_p").css({"z-index":1001+b}));void 0!=a("#"+d.children[b].getId()+"_label")&&a("#"+d.children[b].getId()+"_label").css({"z-index":2001+b});var f=a("#"+d.children[b].getId()).css("top");void 0!=f&&(f=parseFloat(f.replace("px","")),a("#"+d.children[b].getId()).css({top:f+"px"}),void 0!=a("#"+d.children[b].getId()+"_p")&&(f=a("#"+d.children[b].getId()+"_p").css("top"),void 0!=
f&&("LinkLabel"==d.children[b].getViewType()&&a("#"+d.children[b].getId()).css({transform:"none"}),-1!=d.children[b].getViewType().indexOf("Label")&&(f=parseFloat(f.replace("px","")),a("#"+d.children[b].getId()+"_p").css({top:f+"px"})))),void 0!=a("#"+d.children[b].getId()+"_label")&&(f=a("#"+d.children[b].getId()+"_label").css("top"),void 0!=f&&a("#"+d.children[b].getId()+"_label").prev().attr("name")==a("#"+d.children[b].getId()).attr("name")&&(f=parseFloat(f.replace("px","")),a("#"+d.children[b].getId()+
"_label").css({top:f+"px"}))),void 0!=a("#"+d.children[b].getId()+"_divImg")&&(f=a("#"+d.children[b].getId()+"_divImg").css("top"),void 0!=f&&(f=parseFloat(f.replace("px","")),a("#"+d.children[b].getId()+"_divImg").css({top:f+"px"}))))}},600))}};d.applyEvents=function(){a.isEmptyObject(f)||f.hidden||d.children.applyEvents();if(void 0!=a("#RightToolBar").get(0)&&null!=a("#RightToolBar").get(0)){var g=a(".sidenav").length;0<g&&a(".sidenav").get(g-1).addEventListener("keydown",function(b){var d=a("#RightToolBar").get(0).querySelectorAll('a[href], button, textarea, input[type="text"],input[type="password"], input[type="radio"], input[type="checkbox"], select'),
f=[].slice.call(d);f.sort(function(a,b){return a.tabIndex<b.tabIndex?-1:a.tabIndex>b.tabIndex?1:0});d=f[f.length-1];f=f[0];if("Tab"===b.key||9==b.keyCode)b.shiftKey?b.srcElement.tabIndex==f.tabIndex&&(f.focus(),b.preventDefault()):b.srcElement.tabIndex==d.tabIndex&&(d.focus(),b.preventDefault())})}a(".RightToolBarOverlay").bind("click",function(d){d.stopPropagation();d=document.documentElement.clientWidth>b.width*a.mobileweb.device.aspectWratio?(document.documentElement.clientWidth-b.width*a.mobileweb.device.aspectWratio)/
2:0;d+=a(".RightToolBarOverlay").width();var f=a.mobileweb.device.sidebarHratio;a.mobileweb.device.sidebarHratio=a.mobileweb.device.aspectHratio;a.mobileweb.device.aspectHratio=f;a("#rightToolBar").animate({left:d,width:"0px"},500);var g=setInterval(function(){clearInterval(g);a(".RightToolBarOverlay").css({width:"0px"})},400)});a(".RightToolBarOverlay").bind("swipe",function(d){d.stopPropagation();d=document.documentElement.clientWidth>b.width*a.mobileweb.device.aspectWratio?(document.documentElement.clientWidth-
b.width*a.mobileweb.device.aspectWratio)/2:0;d+=a(".RightToolBarOverlay").width();var f=a.mobileweb.device.sidebarHratio;a.mobileweb.device.sidebarHratio=a.mobileweb.device.aspectHratio;a.mobileweb.device.aspectHratio=f;a("#rightToolBar").animate({left:d,width:"0px"},400);var g=setInterval(function(){clearInterval(g);a(".RightToolBarOverlay").css({width:"0px"})},200)})};return d}a.page=function(a,b){return new l(a,b)}})(jQuery);var Canvas2Image=function(){function a(a,b,d){var f=a.width,g=a.height;void 0==b&&(b=f);void 0==d&&(d=g);var h=document.createElement("canvas"),k=h.getContext("2d");h.width=b;h.height=d;k.drawImage(a,0,0,f,g,0,0,b,d);return h}function l(a){var b=document.createElement("img");b.src=a;return b}function g(a){a=a.toLowerCase().replace(/jpg/i,"jpeg");return"image/"+a.match(/png|jpeg|bmp|gif/)[0]}function k(a){if(!window.btoa)throw"btoa undefined";var b="";if("string"==typeof a)b=a;else for(var d=0;d<a.length;d++)b+=
String.fromCharCode(a[d]);return btoa(b)}function d(a){var b=a.width,d=a.height;return a.getContext("2d").getImageData(0,0,b,d)}var b=function(){var a=document.createElement("canvas"),b=a.getContext("2d");return{canvas:!!b,imageData:!!b.getImageData,dataURL:!!a.toDataURL,btoa:!!window.btoa}}(),h=function(a){var b=[],d=[],g=a.width,h=a.height;b.push(66);b.push(77);var l=g*h*3+54;b.push(l%256);l=Math.floor(l/256);b.push(l%256);l=Math.floor(l/256);b.push(l%256);l=Math.floor(l/256);b.push(l%256);b.push(0);
b.push(0);b.push(0);b.push(0);b.push(54);b.push(0);b.push(0);b.push(0);d.push(40);d.push(0);d.push(0);d.push(0);l=g;d.push(l%256);l=Math.floor(l/256);d.push(l%256);l=Math.floor(l/256);d.push(l%256);l=Math.floor(l/256);d.push(l%256);l=h;d.push(l%256);l=Math.floor(l/256);d.push(l%256);l=Math.floor(l/256);d.push(l%256);l=Math.floor(l/256);d.push(l%256);d.push(1);d.push(0);d.push(24);d.push(0);d.push(0);d.push(0);d.push(0);d.push(0);l=g*h*3;d.push(l%256);l=Math.floor(l/256);d.push(l%256);l=Math.floor(l/
256);d.push(l%256);l=Math.floor(l/256);d.push(l%256);for(l=0;16>l;l++)d.push(0);l=(4-3*g%4)%4;a=a.data;var m="";do{for(var p=g*(h-1)*4,q="",L=0;L<g;L++){var Q=4*L;q+=String.fromCharCode(a[p+Q+2]);q+=String.fromCharCode(a[p+Q+1]);q+=String.fromCharCode(a[p+Q])}for(p=0;p<l;p++)q+=String.fromCharCode(0);m+=q}while(--h);return k(b.concat(d))+k(m)},q=function(k,f,l,p){if(b.canvas&&b.dataURL)if(void 0==p&&(p="png"),p=g(p),/bmp/.test(p)){p=d(a(k,f,l));var m=h(p);document.location.href="data:image/octet-stream;base64,"+
m}else m=p,k=a(k,f,l),m=k.toDataURL(m),document.location.href=m.replace(p,"image/octet-stream")},p=function(k,f,p,q){if(b.canvas&&b.dataURL){void 0==q&&(q="png");q=g(q);if(/bmp/.test(q))return k=d(a(k,f,p)),k=h(k),l("data:image/bmp;base64,"+k);k=a(k,f,p);k=k.toDataURL(q);return l(k)}};return{saveAsImage:q,saveAsPNG:function(a,b,d){return q(a,b,d,"png")},saveAsJPEG:function(a,b,d){return q(a,b,d,"jpeg")},saveAsGIF:function(a,b,d){return q(a,b,d,"gif")},saveAsBMP:function(a,b,d){return q(a,b,d,"bmp")},
convertToImage:p,convertToPNG:function(a,b,d){return p(a,b,d,"png")},convertToJPEG:function(a,b,d){return p(a,b,d,"jpeg")},convertToGIF:function(a,b,d){return p(a,b,d,"gif")},convertToBMP:function(a,b,d){return p(a,b,d,"bmp")}}}();(function(a){a.mobileweblanguage=function(l){a.mobileweblanguage.redirectLanguageScreen=function(){switch(navigator.languages[0]){case "hi":window.location.href="./index_"+l.screenId+"hi.html";break;case "jp":window.location.href="./index_"+l.screenId+"jp.html";break;default:window.location.href="./index_"+l.screenId+"en.html"}};return a.mobileweblanguage}})(jQuery);(function(a){"function"===typeof define&&define.amd?define(["../widgets/datepicker"],a):a(jQuery.datepicker)})(function(a){a.regional.ja={closeText:"\u9589\u3058\u308b",prevText:"&#x3C;\u524d",nextText:"\u6b21&#x3E;",currentText:"\u4eca\u65e5",monthNames:"1\u6708 2\u6708 3\u6708 4\u6708 5\u6708 6\u6708 7\u6708 8\u6708 9\u6708 10\u6708 11\u6708 12\u6708".split(" "),monthNamesShort:"1\u6708 2\u6708 3\u6708 4\u6708 5\u6708 6\u6708 7\u6708 8\u6708 9\u6708 10\u6708 11\u6708 12\u6708".split(" "),dayNames:"\u65e5\u66dc\u65e5 \u6708\u66dc\u65e5 \u706b\u66dc\u65e5 \u6c34\u66dc\u65e5 \u6728\u66dc\u65e5 \u91d1\u66dc\u65e5 \u571f\u66dc\u65e5".split(" "),
dayNamesShort:"\u65e5\u6708\u706b\u6c34\u6728\u91d1\u571f".split(""),dayNamesMin:"\u65e5\u6708\u706b\u6c34\u6728\u91d1\u571f".split(""),weekHeader:"\u9031",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.setDefaults(a.regional.ja);return a.regional.ja});(function(a){function l(b){return{frame:a.attributes("frame",b),font:a.attributes("font",b),border:a.attributes("border",b),padding:a.attributes("padding",b),background:a.attributes("background",b),flexibleHeight:b.flexibleHeight,getName:function(){return b.name},getId:function(){return b.id},getViewType:function(){return b.viewtype},getRadioGroup:function(){return b.groupName?b.groupName:""}}}function g(b,c,d){var f=new l(c);a.utility("containsGlobalVariable",c.value)&&(c.systemVariableValue=c.value,
c.isSystemVariable=!0);f.getTemplate=function(){return c.template};f.getHTML=function(){a.utility("isReverseTransition")?""!==c.template&&-1===c.template.indexOf("[")&&-1===c.template.indexOf("]")&&(c.value=c.template):(""!==c.value&&(c.value=a.utility("spaceInStringConversion",c.value)),""!==c.template&&(c.value=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b),-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template&&(c.value="")),c.value=a.utility("convertSpecialCharacter",
a.utility("tokenizeString",c.value),b));c.taborder=-1;return["<p id ='"+c.id+"_p' tabindex='",c.taborder,"'> <label class='ui-label' id='",c.id,"' name='",c.name,"' >",c.value,"</label></p>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();f.font.applyCSS();var g=0;c.border&&0!=c.border.borderweight&&(g=c.border.borderweight*a.mobileweb.device.aspectHratio,a("#"+c.id+"_p").css({"border-style":"solid",margin:"0px"}),a("#"+c.id+"_p").css({"border-width":g+"px"}),a("#"+c.id+"_p").css({"border-color":"rgba("+
c.border.bordercolor.red+","+c.border.bordercolor.green+","+c.border.bordercolor.blue+","+c.border.bordercolor.alpha+")"}));c.background&&a("#"+c.id+"_p").css({"background-color":a.attributes("color",c.background).getColorCode()});c.font.color&&a("#"+c.id).css("color",c.font.color);a("#"+c.id+"_p").css({position:"absolute",overflow:"hidden"});a("#"+c.id+"_p").css({margin:"auto"});a("#"+c.id+"_p").css({"text-align":c.font.align});a("#"+c.id+"_p").css({height:c.frame.height*a.mobileweb.device.aspectHratio-
2*g+"px",width:c.frame.width*a.mobileweb.device.aspectWratio-2*g+"px"});a("#"+c.id+"_p").css({"line-height":c.frame.height*a.mobileweb.device.aspectHratio-2*g+"px"});a("#"+c.id+"_p").css({top:c.frame.y*a.mobileweb.device.aspectHratio+"px",left:c.frame.x*a.mobileweb.device.aspectWratio+"px"});void 0!=c.padding&&(a("#"+c.id).css({"padding-top":c.padding.top*a.mobileweb.device.aspectHratio,"padding-bottom":c.padding.bottom*a.mobileweb.device.aspectHratio}),a("#"+c.id).css({"padding-left":c.padding.left*
a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio}),a("#"+c.id).css({width:(c.frame.width-(c.padding.left+c.padding.right))*a.mobileweb.device.aspectWratio}),a("#"+c.id).css({height:(c.frame.height-(c.padding.top+c.padding.bottom))*a.mobileweb.device.aspectHratio}));a("#"+c.id).css({position:""});a("#"+c.id).css({"white-space":"pre"});a("#"+c.id).css({"text-decoration":c.textDecoration});a("#"+c.id+"_p > label").css({"line-height":"1"});a("#"+c.id+"_p > label").css({"vertical-align":c.verticalalignment});
if(void 0!=c.verticalalignment)if("middle"==c.verticalalignment){a("#"+c.id).css({position:"absolute"});a("#"+c.id).css({left:"0px"});g=c.padding.bottom*a.mobileweb.device.aspectHratio;var h=c.padding.top*a.mobileweb.device.aspectHratio,k=c.frame.height*a.mobileweb.device.aspectHratio;a("#"+c.id+"_p > label").css({top:0});a("#"+c.id+"_p > label").css({"line-height":k-h-g+"px"})}else a("#"+c.id).css({position:"absolute"}),a("#"+c.id).css({left:"0px",top:"0px"}),"bottom"==c.verticalalignment&&(g=c.frame.height*
a.mobileweb.device.aspectHratio-c.font.size*a.mobileweb.device.aspectHratio,a("#"+c.id).css({left:"0px",top:g}));a("#"+c.id+"_p").css({filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation="+c.frame.rotation+")","-ms-transform":"rotate("+parseInt(c.frame.rotation)+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation="+c.frame.rotation+")","-moz-transform":"rotate("+ +parseInt(c.frame.rotation)+"deg)","-o-transform":"rotate("+c.frame.rotation+"deg)",transform:"rotate("+
parseInt(c.frame.rotation)+"deg)","-webkit-transform":"rotate("+parseInt(c.frame.rotation)+"deg)"});a("#"+c.id).css({transform:"none"});if(!a.utility("isReverseTransition"))if(""!==c.template?(g=a.utility("getCombinedCSV"),0!=g.length?a.each(g,function(g,h){h.csvResultHeader===c.template.replace("[","").replace("]","")?f.setValue(h.value):f.setValue(a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b))}):(""!==c.value&&(c.value=a.utility("spaceInStringConversion",c.value)),
""!==c.template&&(void 0==d||a.isEmptyObject(d)?-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template?c.value="":c.value=a.utility("tokenizeString",c.template,b):c.value=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b)),f.setValue(-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template?"":c.value))):c.isSystemVariable?(c.value=a.utility("tokenizeString",c.systemVariableValue,b),c.value=a.utility("convertSpecialCharacter",c.value),
c.value=f.setCapitalization(c.value),c.value=f.doTrim(c.value),c.value=void 0!=c.formatType&&""!=c.formatType?a.validate("changeFormat",c,c.value):c.value,a("#"+c.id).text(c.value),a("#"+c.id).val(c.value)):(c.value=f.setCapitalization(c.value),a("#"+c.id).val(c.value),a("#"+c.id).text(c.value)),void 0!=c.globalValue)if("__LAT__"==c.globalValue)a("#__LAT__").on("onchange",function(){c.value=a.mobileweb.__LAT__;a("#"+c.id).text(a.mobileweb.__LAT__)}),a("#__LAT__").trigger("onchange");else if("__LONG__"==
c.globalValue)a("#__LONG__").on("onchange",function(){c.value=a.mobileweb.__LONG__;a("#"+c.id).text(a.mobileweb.__LONG__)}),a("#__LONG__").trigger("onchange");else if("__ADDRESS__"==c.globalValue)a("#__ADDRESS__").on("onchange",function(){c.value=a.mobileweb.__ADDRESS__;a("#"+c.id).text(a.mobileweb.__ADDRESS__)}),a("#__ADDRESS__").trigger("onchange");else if("__COURSE__"==c.globalValue)a("#__COURSE__").on("onchange",function(){c.value=a.mobileweb.__COURSE__;a("#"+c.id).text(a.mobileweb.__COURSE__)}),
a("#__COURSE__").trigger("onchange");else if("__MAPZOOM__"==c.globalValue)a("#__MAPZOOM__").on("onchange",function(){c.value=a.mobileweb.__MAPZOOM__;a("#"+c.id).text(a.mobileweb.__MAPZOOM__)}),a("#__MAPZOOM__").trigger("onchange");else if("__ROUTETIME__"==c.globalValue)a("#__ROUTETIME__").on("onchange",function(){c.value=a.mobileweb.__ROUTETIME__;a("#"+c.id).text(a.mobileweb.__ROUTETIME__)}),a("#__ROUTETIME__").trigger("onchange");else if("__ROUTEDISTANCE__"==c.globalValue)a("#__ROUTEDISTANCE__").on("onchange",
function(){c.value=a.mobileweb.__ROUTEDISTANCE__;a("#"+c.id).text(a.mobileweb.__ROUTEDISTANCE__)}),a("#__ROUTEDISTANCE__").trigger("onchange");else if("__CENTERLAT__"==c.globalValue)a("#__CENTERLAT__").on("onchange",function(){c.value=a.mobileweb.__CENTERLAT__;a("#"+c.id).text(a.mobileweb.__CENTERLAT__)}),a("#__CENTERLAT__").trigger("onchange");else if("__CENTERLONG__"==c.globalValue)a("#__CENTERLONG__").on("onchange",function(){c.value=a.mobileweb.__CENTERLONG__;a("#"+c.id).text(a.mobileweb.__CENTERLONG__)}),
a("#__CENTERLONG__").trigger("onchange");else if("__NUMREC__"==c.globalValue)a("#__NUMREC__").on("onchange",function(){c.value=a.mobileweb.__NUMREC__;a("#"+c.id).text(a.mobileweb.__NUMREC__)}),a("#__NUMREC__").trigger("onchange");else{if("__NOW__"==c.globalValue){var l=new Date;a.mobileweb.__NOW__=a.utility("checkGlobalVariable",c.globalValue);0==a("body").find("#__NOW__").length&&a("body").append("<input id='__NOW__' type='text' hidden='true'>"+a.mobileweb.__NOW__+"</input>");a("#__NOW__").on("onchange",
function(){void 0!=c.formatType&&""!=c.formatType?(c.value=a.validate("changeFormat",c,l.toString()),a("#"+c.id).text(a.validate("changeFormat",c,l.toString()))):(c.value=a.mobileweb.__NOW__,a("#"+c.id).text(a.mobileweb.__NOW__))});a("#__NOW__").trigger("onchange")}}else void 0!=c.formatType&&""!=c.formatType&&""==c.template&&(c.value=a.validate("changeFormat",c,c.value),a("#"+c.id).text(c.value));"true"!=c.hidden&&1!=c.hidden||f.setVisibility(!1);!0===c.textShadow?a("#"+c.id).css({"text-shadow":"rgb(80, 78, 78) 3px 3px 5px"}):
a("#"+c.id).css({"text-shadow":"none"});a("#"+c.id+"_p").bind("drag",function(a){});a("#"+c.id).bind("drag",function(a){})};f.applyEvents=function(){a("#"+c.id+"_p").on("focus",function(){a("#"+c.id+"_p").css({outline:"none"})})};f.getValue=function(){return c.value};f.setValue=function(b){c.systemVariableValue=a("#"+c.id).val();c.isSystemVariable=!1;b=a.utility("convertSpecialCharacter",b);b=f.setCapitalization(b);b=f.doTrim(b);void 0!=c.formatType&&""!=c.formatType?(c.value=a.validate("changeFormat",
c,b),a("#"+c.id).text(c.value)):(c.value=b,a("#"+c.id).text(b))};f.setCapitalization=function(a){if(void 0!=c.autoCapitalization&&"None"!=c.autoCapitalization)switch(c.autoCapitalization){case "AllCharacters":a=a.toUpperCase();break;case "Sentences":var b=/(^\s*\w{1}|\.\s*\w{1})/gi;a=a.toLowerCase();a=a.replace(b,function(a){return a.toUpperCase()});break;case "Words":return b=/(?:^|\s)\S/g,a=a.toLowerCase(),a.replace(b,function(a){return a.toUpperCase()})}return a};f.doTrim=function(b){return c.isTrim?
a.trim(b):b};f.setBackgroundColor=function(a){c.background=a};f.getParentUIType=function(){return c.parentUI};f.getParentUIName=function(){return c.parentUIName};f.setVisibility=function(b){!0===b?(c.hidden=!1,a("#"+c.id+"_p").css({visibility:"visible"}),a("#"+f.getId()).css({visibility:"visible"})):(c.hidden=!0,a("#"+c.id+"_p").css({visibility:"hidden"}),a("#"+f.getId()).css({visibility:"hidden"}))};return f}function k(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};f.getHTML=function(){a.utility("isReverseTransition")||
(""!==c.value&&(c.value=a.utility("spaceInStringConversion",c.value)),""!==c.template&&(c.value=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b),-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template&&(c.value="")),-1!=c.link.indexOf("[")&&-1!=c.link.indexOf("]")&&(c.link=a.utility("extractDataFromRecord",d,c.link)),c.value=a.utility("convertSpecialCharacter",a.utility("tokenizeString",c.value)));return 0==c.option?["<a id='",c.id+"_a' href='",c.link,
"' target=_top","><p id ='"+c.id+"_p' tabindex='",c.taborder,"'> <label class='ui-label' id='",c.id,"' name='",c.name,"' >",c.value,"</label></p></a>"].join(""):1==c.option?["<a id='",c.id+"_a' href='",c.link,"' target=_blank","><p id ='"+c.id+"_p' tabindex='",c.taborder,"'> <label class='ui-label' id='",c.id,"' name='",c.name,"' >",c.value,"</label></p></a>"].join(""):2==c.option?["<a id='",c.id+"_a' href='#' onclick=\"window.open('",c.link,"', 'testWindow', 'width=500,height=500');\"><p id ='"+
c.id+"_p' tabindex='",c.taborder,"'> <label class='ui-label' id='",c.id,"' name='",c.name,"' >",c.value,"</label></p></a>"].join(""):["<a id='",c.id+"_a' href='",c.link,"' target=_blank","><p id ='"+c.id+"_p' tabindex='",c.taborder,"'> <label class='ui-label' id='",c.id,"' name='",c.name,"' >",c.value,"</label></p></a>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();f.font.applyCSS();f.padding.applyCSS();"true"==c.hidden&&a("#"+c.id+"_a").css({visibility:"hidden"});var g=0;c.border&&(g=
c.border.borderweight*a.mobileweb.device.aspectHratio,a("#"+c.id+"_p").css({"border-style":"solid"}),a("#"+c.id+"_p").css({"border-width":g+"px"}),a("#"+c.id+"_p").css({"border-color":"rgba("+c.border.bordercolor.red+","+c.border.bordercolor.green+","+c.border.bordercolor.blue+","+c.border.bordercolor.alpha+")"}),a("#"+c.id+"_p").css({margin:"0px"}));c.background&&a("#"+c.id+"_p").css({"background-color":a.attributes("color",c.background).getColorCode()});a("#"+c.id+"_p").css({position:"absolute",
cursor:"pointer",margin:"auto"});a("#"+c.id+"_p").css({"text-align":c.font.align});a("#"+c.id+"_p").css({top:c.frame.y*a.mobileweb.device.aspectHratio+"px",left:c.frame.x*a.mobileweb.device.aspectWratio+"px"});a("#"+c.id+"_p").css({height:c.frame.height*a.mobileweb.device.aspectHratio-2*g+"px",width:c.frame.width*a.mobileweb.device.aspectWratio-2*g+"px"});a("#"+c.id+"_p").css({"line-height":c.frame.height*a.mobileweb.device.aspectHratio-2*g+"px"});a("#"+c.id).css({position:"initial",cursor:"pointer"});
a("#"+c.id).css({"line-height":"1"});a("#"+c.id).css({"text-decoration":c.textDecoration});a("#"+c.id).css({"text-shadow":"rgba(255, 255, 255, 0) 0px 0px 0px"});a("#"+c.id).css({"vertical-align":c.verticalalignment});a("#"+c.id+"_p > label").css({position:"static"});a("#"+c.id+"_p").css({filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation="+c.frame.rotation+")","-ms-transform":"rotate("+parseInt(c.frame.rotation)+"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation="+
c.frame.rotation+")","-moz-transform":"rotate("+ +parseInt(c.frame.rotation)+"deg)","-o-transform":"rotate("+c.frame.rotation+"deg)",transform:"rotate("+parseInt(c.frame.rotation)+"deg)","-webkit-transform":"rotate("+parseInt(c.frame.rotation)+"deg)"});if(!a.utility("isReverseTransition"))if(""!==c.template&&(g=a.utility("getCombinedCSV"),0!=g.length?a.each(g,function(b,g){g.csvResultHeader===c.template.replace("[","").replace("]","")?f.setValue(g.value):f.setValue(a.utility("extractDataFromRecord",
d,c.template))}):(""!==c.value&&(c.value=a.utility("spaceInStringConversion",c.value)),""!==c.template&&(c.value=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b),-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template&&(c.value="")),f.setValue(-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template?"":c.value))),a("#"+c.id+">p").css({"text-decoration":c.textDecoration}),void 0!=c.globalValue)if("__LAT__"==c.globalValue)a("#__LAT__").on("onchange",
function(){c.value=a.mobileweb.__LAT__;a("#"+c.id+"_p > label").text(a.mobileweb.__LAT__)}),a("#__LAT__").trigger("onchange");else if("__LONG__"==c.globalValue)a("#__LONG__").on("onchange",function(){c.value=a.mobileweb.__LONG__;a("#"+c.id+"_p > label").text(a.mobileweb.__LONG__)}),a("#__LONG__").trigger("onchange");else if("__ADDRESS__"==c.globalValue)a("#__ADDRESS__").on("onchange",function(){c.value=a.mobileweb.__ADDRESS__;a("#"+c.id).text(a.mobileweb.__ADDRESS__)}),a("#__ADDRESS__").trigger("onchange");
else if("__CENTERLAT__"==c.globalValue)a("#__CENTERLAT__").on("onchange",function(){c.value=a.mobileweb.__CENTERLAT__;a("#"+c.id+"_p > label").text(a.mobileweb.__CENTERLAT__)}),a("#__CENTERLAT__").trigger("onchange");else if("__CENTERLONG__"==c.globalValue)a("#__CENTERLONG__").on("onchange",function(){c.value=a.mobileweb.__CENTERLONG__;a("#"+c.id+"_p > label").text(a.mobileweb.__CENTERLONG__)}),a("#__CENTERLONG__").trigger("onchange");else if("__NUMREC__"==c.globalValue)a("#__NUMREC__").on("onchange",
function(){c.value=a.mobileweb.__NUMREC__;a("#"+c.id+"_p > label").text(a.mobileweb.__NUMREC__)}),a("#__NUMREC__").trigger("onchange");else{if("__NOW__"==c.globalValue){var h=new Date;a.mobileweb.__NOW__=a.utility("checkGlobalVariable",c.globalValue);0==a("body").find("#__NOW__").length&&a("body").append("<input id='__NOW__' type='text' hidden='true'>"+a.mobileweb.__NOW__+"</input>");a("#__NOW__").on("onchange",function(){void 0!=c.formatType&&""!=c.formatType?(c.value=a.validate("changeFormat",c,
h.toString()),a("#"+c.id+"_p > label").text(a.validate("changeFormat",c,h.toString()))):(c.value=a.mobileweb.__NOW__,a("#"+c.id+"_p > label").text(a.mobileweb.__NOW__))});a("#__NOW__").trigger("onchange")}}else void 0!=c.formatType&&""!=c.formatType&&""==c.template&&(c.value=a.validate("changeFormat",c,c.value),a("#"+c.id+"_p > label").text(c.value));if(parseInt(a("#"+c.id+"_p > label").css("width"))>parseInt(a("#"+c.id+"_p").css("width"))){g=parseInt(a("#"+c.id+"_p").css("width"));g=(parseInt(a("#"+
c.id+"_p > label").css("width"))-(parseInt(a("#"+c.id+"_p > label").css("padding-left"))+parseInt(a("#"+c.id+"_p > label").css("padding-right"))))/g;g=Math.floor(parseInt(a("#"+c.id+"_p > label").css("font-size"))/g);a("#"+c.id+"_p > label").css({"font-size":g+"px"});var k=navigator.userAgent.toLowerCase();-1==k.indexOf("safari")||-1<k.indexOf("chrome")||a("#"+c.id+"_p > label").css({"font-size":g-1+"px"})}};f.applyEvents=function(){};f.getValue=function(){return c.link};f.setValue=function(b){b=
a.utility("convertSpecialCharacter",b);void 0!=c.formatType&&""!=c.formatType?(c.value=a.validate("changeFormat",c,b),a("#"+c.id+"_p > label").text(c.value)):(c.value=b,a("#"+c.id+"_p > label").text(b))};f.setVisibility=function(b){"false"===b?(c.hidden="false",a("#"+c.id+"_a").css({visibility:"visible"})):(c.hidden="true",a("#"+c.id+"_a").css({visibility:"hidden"}))};return f}function d(b,c,d){var f=new l(c);f.getHTML=function(){return["<div id='",c.id,"' name='",c.name,"' class='g-recaptcha' data-sitekey='6LddTacZAAAAAGLJhxjr356WbguGK9jRdluz1sSE' />"].join("")};
f.applyOverrides=function(){f.frame.applyCSS();a("#"+c.id).css({display:"flex","align-items":"center","justify-content":"center"});c.value="";var b=0;window.setTimeout(function(){b++;9<b||0<a(".g-recaptcha").length&&grecaptcha.render(c.id,{sitekey:"6LddTacZAAAAAGLJhxjr356WbguGK9jRdluz1sSE",callback:function(a){a=grecaptcha.getResponse();0<a.length&&(console.log("recaptcha success ..."),c.value=a)},"expired-callback":function(){c.value=""},"error-callback":function(){console.log("recaptcha error ...");
c.value=""}})},1E3)};f.applyEvents=function(){};f.getValue=function(){return c.value};return f}function b(b,c,d){var f=new l(c);f.getHTML=function(){var f="";if(!a.utility("isReverseTransition")){""!==c.template&&(c.value=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b));var g=30*a.mobileweb.device.aspectratio,h=30*a.mobileweb.device.aspectratio;"url"==c.source?(f=a.utility("tokenizeString",c.value).toString(),null!=f.match(/\/\/(?![\s\S]*\/\/)/)&&1<f.match(/\/\/(?![\s\S]*\/\/)/).length&&
(f=f.replace(/\/\/(?![\s\S]*\/\/)/,"/")),c.src=f):"bundle"==c.source?(f=a.utility("getImage",a.utility("tokenizeString",c.value)),c.src=f):"remoteFile"==c.source&&(f=a.utility("getRemoteImage",a.utility("tokenizeString",c.value)),c.src=f)}if("QRview"==c.source)return["<div id='",c.id,"' name='",c.name,"' height='",g,"' width='",h,"'/>"].join("");-1<c.id.indexOf("ui-more-2-")?""==c.value?f=a.utility("getSystemImage","favicon.png",c.viewtype):(f=a.utility("getImage",a.utility("tokenizeString",c.value)),
c.src=f):c.taborder=-1;return["<div id ='"+c.id+"_divImg'><img id='",c.id,"' name='",c.name,"' src='",f,"' style='visibility:hidden' tabindex='",c.taborder,"'/></div>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();c.border&&(a("#"+c.id+"_divImg").css({"border-width":c.border.borderweight+"px"}),a("#"+c.id+"_divImg").css({"border-color":"rgb("+c.border.bordercolor.red+","+c.border.bordercolor.green+","+c.border.bordercolor.blue+")"}),a("#"+c.id+"_divImg").css({"border-style":"solid"}),
a("#"+c.id+"_divImg").css({height:c.frame.height*a.mobileweb.device.aspectHratio-2*c.border.borderweight+"px",width:c.frame.width*a.mobileweb.device.aspectWratio-2*c.border.borderweight+"px"}),a("#"+c.id+"_divImg").css({left:a("#"+c.id).css("left"),top:a("#"+c.id).css("top")}),a("#"+c.id+"_divImg").css({position:"absolute",overflow:"hidden",display:"flex","align-items":"center","justify-content":"center"}),a("#"+c.id).css({position:"initial",margin:"auto"}),"QRview"!=c.source&&"AspectFit"==c.scalemode?
(a("#"+c.id).css({height:"",width:""}),a("#"+c.id).css({"max-height":c.frame.height*a.mobileweb.device.aspectratio-2*c.border.borderweight+"px","max-width":c.frame.width*a.mobileweb.device.aspectratio-2*c.border.borderweight+"px"})):a("#"+c.id).css({height:c.frame.height*a.mobileweb.device.aspectHratio-2*c.border.borderweight+"px",width:c.frame.width*a.mobileweb.device.aspectWratio-2*c.border.borderweight+"px"}));if(2>=parseInt(c.frame.height)){var g=parseInt(c.frame.height)+"px";a("#"+c.id+"_divImg").css({height:g});
a("#"+c.id).css({height:g})}if(!a.utility("isReverseTransition")&&(""!==c.template?void 0==c.source||""==c.source?(g=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b),-1!=g.indexOf(".")&&-1==g.indexOf("http")?(a("#"+c.id).attr("src",a.utility("getImage",g)),c.src=a.utility("getImage",g)):-1!=g.indexOf("http")?(a("#"+c.id).attr("src",g),c.src=g):(a("#"+c.id).attr("src",a.utility("getRemoteImage",g)),c.src=a.utility("getRemoteImage",g))):"url"==c.source?(g=a.utility("tokenizeString",
a.utility("extractDataFromRecord",d,c.template),b),g=a.utility("tokenizeString",g).toString(),-1==g.indexOf("http")&&(g="/"===g.charAt(0)?a.mobileweb.baseurl+g:a.mobileweb.baseurl+"/"+g),a("#"+c.id).attr("src",g),c.src=g):"remoteFile"==c.source?(g=c.template.replace("[","").replace("]",""),void 0!=d?void 0!=d[g]&&""!=d[g]?c.src=a.utility("getRemoteImage",a.utility("extractDataFromRecord",d,c.template)):(c.src=a.utility("tokenizeString",c.template,b),-1==c.src.indexOf("data:image")&&(c.src=a.utility("getRemoteImage",
a.utility("tokenizeString",c.template,b)))):(c.src=a.utility("tokenizeString",c.template,b),-1==c.src.indexOf("data:image")&&(c.src=a.utility("getRemoteImage",a.utility("tokenizeString",c.template,b)))),a("#"+c.id).attr("src",c.src)):"bundle"==c.source?(g=c.template.replace("[","").replace("]",""),-1!=c.template.indexOf(".png")&&(g=c.template.replace("[","").replace("]","").replace(".png","")),void 0!=d&&void 0!=d[g]&&""!=d[g]?void 0!=d[g]&&""!=d[g]?c.src=a.utility("getImage",a.utility("extractDataFromRecord",
d,c.template)):(c.src=a.utility("tokenizeString",c.template,b),-1==c.src.indexOf("data:image")&&(c.src=a.utility("getImage",a.utility("tokenizeString",c.template,b)))):(c.src=a.utility("tokenizeString",c.template,b),-1==c.src.indexOf("data:image")&&(c.src=a.utility("getImage",a.utility("tokenizeString",c.template,b)))),a("#"+c.id).attr("src",c.src)):void 0!=d?(c.src=a.utility("extractDataFromRecord",d,c.template),a("#"+c.id).attr("src",c.src)):(a("#"+c.id).attr("src",a.utility("tokenizeString",c.template,
b)),c.src=a.utility("tokenizeString",c.template)):"url"==c.source?(src=a.utility("tokenizeString",c.value).toString(),null!=src.match(/\/\/(?![\s\S]*\/\/)/)&&1<src.match(/\/\/(?![\s\S]*\/\/)/).length&&(src=src.replace(/\/\/(?![\s\S]*\/\/)/,"/")),c.src=src):"remoteFile"==c.source?(src=a.utility("getRemoteImage",a.utility("tokenizeString",c.value,b)),c.src=src):"bundle"==c.source?(src=a.utility("getImage",a.utility("tokenizeString",c.value,b)),c.src=src):-1==c.id.indexOf("ui-more-2-")&&(src=a.utility("extractDataFromRecord",
d,c.value))&&(c.src=src),"QRview"==c.source&&(a("#"+c.id).css({position:"absolute",overflow:"hidden",display:"flex","align-items":"center","justify-content":"center"}),a("#"+c.id).css({padding:"2px"}),a("#"+c.id).empty(),(g=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.qrstring),b))&&"null"!=g))){var h=a("#"+c.id).css("width").replace("px",""),k=a("#"+c.id).css("height").replace("px","");h=parseInt(h)<parseInt(k)?h:k;a("#"+c.id).qrcode({text:g,width:h,height:h});a("#"+c.id+" > canvas").css({margin:"auto"});
a("#"+c.id+" > canvas").get(0).id=c.id+"_canvas"}a("#"+c.id).attr("src",c.src);a("#"+c.id).css("pointer-events","none");"true"==c.hidden?(a("#"+c.id).css({visibility:"hidden"}),a("#"+c.id+"_divImg").css({visibility:"hidden"})):(a("#"+c.id).css({visibility:"visible"}),a("#"+c.id+"_divImg").css({visibility:"visible"}));c.draggable&&(a("#"+c.id).addClass("ui-widget-content"),a("#"+c.id).draggable({containment:"parent"}));-1<c.id.indexOf("ui-more-2-")?a("#"+c.id).css({position:"sticky"}):"QRview"!=c.source&&
a("#"+c.id).css({position:"static"});1<window.devicePixelRatio&&a("#"+c.id+"_divImg").css({overflow:"initial"});"AspectFit"==c.scalemode&&a("#"+c.id+"_divImg").css({display:"flex"})};f.applyEvents=function(){a("#"+c.id).bind("dragstart",function(a){});a("#"+c.id).bind("drag",function(a){});a("#"+c.id).on("dragstop",function(a){});a("#"+c.id).on("error",function(){})};f.getValue=function(){return c.src};f.setValue=function(a){c.value=a;c.src=a};f.getSource=function(){return c.source};f.setSource=function(a){c.source=
a};f.setImageName=function(a){c.value=a};f.getImageName=function(){return c.value};f.getTemplate=function(){return c.template};f.setTemplate=function(a){c.template=a};return f}function h(b,c,d){var f=new l(c);a.utility("containsGlobalVariable",c.value)&&(c.systemVariableValue=c.value,c.isSystemVariable=!0);f.getTemplate=function(){return c.template};var g="true"==c.readonly?"readonly":"",h="true"==c.readonly?"disabled":"";f.getHTML=function(){a.utility("isReverseTransition")||(""!==c.template&&(c.value=
a.utility("tokenizeString",c.template,b),-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template&&(c.value="")),c.value=a.utility("convertSpecialCharacter",a.utility("tokenizeString",c.value)));return["<input id='",c.id,"' name='",c.name,"' value='",c.value,"'",g," type='","true"===c.secure?"password":"text","'",h," placeholder='",c.placeholder,"' tabindex='",c.taborder,"'/>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();f.font.applyCSS();f.border.applyCSS();f.padding.applyCSS();
f.background.setColor();"true"!=c.hidden&&1!=c.hidden||a("#"+c.id).css({visibility:"hidden"});"true"==c.readonly&&a("#"+c.id).css({"z-index":"0"});isNaN(parseInt(c.taborder))||a("#"+c.id).attr("tabindex",parseInt(c.taborder)+1);/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Windows Phone/i.test(navigator.userAgent)&&void 0!=a("#"+c.id).get(0)&&(a("#"+c.id).get(0).type="password");a("#"+c.id).css({"border-radius":"0px",margin:"0px"});if("top"==c.verticalalignment){a("#"+c.id).css({"vertical-align":"top"});
var g=a("#"+c.id).css("height"),h=a("#"+c.id).css("font-size"),k=c.padding.top*a.mobileweb.device.aspectHratio,l=parseInt(g)-parseInt(h)-k;a("#"+c.id).css({"padding-top":k,"padding-bottom":l,"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio})}else"bottom"==c.verticalalignment?(a("#"+c.id).css({"vertical-align":"bottom"}),g=a("#"+c.id).css("height"),h=a("#"+c.id).css("font-size"),l=c.padding.bottom*a.mobileweb.device.aspectHratio,
k=parseInt(g)-parseInt(h)-l,a("#"+c.id).css({"padding-top":k,"padding-bottom":l,"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio})):a("#"+c.id).css({"vertical-align":"-100%"});void 0!=c.cornerRadius&&a("#"+c.id).css({"border-radius":c.cornerRadius+"px"});"true"==c.readonly&&"0"==c.border.borderweight&&a("#"+c.id).removeClass("ui-shadow-inset");if(a.utility("isReverseTransition"))void 0!==c.secure&&"false"!==c.secure||void 0==
a("#"+c.id).get(0)||(a("#"+c.id).get(0).type="text");else if(""!==c.template?(g=a.utility("getCombinedCSV"),0!=g.length?a.each(g,function(a,b){b.csvResultHeader===c.template.replace("[","").replace("]","")?f.setValue(b.value):f.setValue(-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template?"":c.value)}):void 0!=d?f.setValue(a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b)):f.setValue(-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==
c.template?"":c.value)):c.isSystemVariable?(void 0!==c.secure&&"false"!==c.secure||void 0==a("#"+c.id).get(0)||(a("#"+c.id).get(0).type="text"),c.value=a.utility("tokenizeString",c.systemVariableValue,b),c.value=a.utility("convertSpecialCharacter",c.value),c.value=f.setCapitalization(c.value),c.value=f.doTrim(c.value),c.value=void 0!=c.formatType||""!=c.formatType?a.validate("changeFormat",c,c.value):param,a("#"+c.id).val(c.value)):f.setValue(a.utility("tokenizeString",c.value,b)),void 0!=c.globalValue)if("__LAT__"==
c.globalValue)a("#__LAT__").on("onchange",function(){c.value=a.mobileweb.__LAT__;a("#"+c.id).val(a.mobileweb.__LAT__)}),a("#__LAT__").trigger("onchange");else if("__LONG__"==c.globalValue)a("#__LONG__").on("onchange",function(){c.value=a.mobileweb.__LONG__;a("#"+c.id).val(a.mobileweb.__LONG__)}),a("#__LONG__").trigger("onchange");else if("__ALT__"==c.globalValue)a("#__ALT__").on("onchange",function(){c.value=a.mobileweb.__ALT__;a("#"+c.id).val(a.mobileweb.__ALT__)}),a("#__ALT__").trigger("onchange");
else if("__MAPZOOM__"==c.globalValue)a("#__MAPZOOM__").on("onchange",function(){c.value=a.mobileweb.__MAPZOOM__;a("#"+c.id).val(a.mobileweb.__MAPZOOM__)}),a("#__MAPZOOM__").trigger("onchange");else if("__ADDRESS__"==c.globalValue)a("#__ADDRESS__").on("onchange",function(){c.value=a.mobileweb.__ADDRESS__;a("#"+c.id).val(a.mobileweb.__ADDRESS__)}),a("#__ADDRESS__").trigger("onchange");else if("__COURSE__"==c.globalValue)a("#__COURSE__").on("onchange",function(){c.value=a.mobileweb.__COURSE__;a("#"+
c.id).val(a.mobileweb.__COURSE__)}),a("#__COURSE__").trigger("onchange");else if("__ROUTETIME__"==c.globalValue)a("#__ROUTETIME__").on("onchange",function(){c.value=a.mobileweb.__ROUTETIME__;a("#"+c.id).val(a.mobileweb.__ROUTETIME__)}),a("#__ROUTETIME__").trigger("onchange");else if("__ROUTEDISTANCE__"==c.globalValue)a("#__ROUTEDISTANCE__").on("onchange",function(){c.value=a.mobileweb.__ROUTEDISTANCE__;a("#"+c.id).val(a.mobileweb.__ROUTEDISTANCE__)}),a("#__ROUTEDISTANCE__").trigger("onchange");else if("__CENTERLAT__"==
c.globalValue)a("#__CENTERLAT__").on("onchange",function(){c.value=a.mobileweb.__CENTERLAT__;("#"+c.id).text(a.mobileweb.__CENTERLAT__)}),a("#__CENTERLAT__").trigger("onchange");else if("__CENTERLONG__"==c.globalValue)a("#__CENTERLONG__").on("onchange",function(){c.value=a.mobileweb.__CENTERLONG__;("#"+c.id).text(a.mobileweb.__CENTERLONG__)}),a("#__CENTERLONG__").trigger("onchange");else if("__NUMREC__"==c.globalValue)a("#__NUMREC__").on("onchange",function(){c.value=a.mobileweb.__NUMREC__;a("#"+
c.id).val(a.mobileweb.__NUMREC__)}),a("#__NUMREC__").trigger("onchange");else if("__NOW__"==c.globalValue){var n=new Date;a.mobileweb.__NOW__=a.utility("checkGlobalVariable",c.globalValue);0==a("body").find("#__NOW__").length&&a("body").append("<input id='__NOW__' type='text' hidden='true'>"+a.mobileweb.__NOW__+"</input>");a("#__NOW__").on("onchange",function(){void 0!=c.formatType&&""!=c.formatType?("DateTime"==c.formatType&&n.setSeconds(0),c.value=a.validate("changeFormat",c,n.toString()),a("#"+
c.id).val(a.validate("changeFormat",c,n.toString()))):(c.value=a.mobileweb.__NOW__,a("#"+c.id).val(a.mobileweb.__NOW__))});a("#__NOW__").trigger("onchange")}"TextField"===c.viewtype&&(g=a("<style>input::-webkit-input-placeholder{text-shadow:0px 1px 1px #FFFFFF;color:rgba("+c.font.color.red+","+c.font.color.blue+","+c.font.color.green+",.5);}</style>"),a("html > head").append(g));void 0!=c.keyboardType&&""!=c.keyboardType&&"Default"!=c.keyboardType&&"HW"!=c.keyboardType&&"Flic"!=c.keyboardType&&"Flick"!=
c.keyboardType&&a.utility("showCustomKeyboard",c.id,c.keyboardType);g=!1;void 0!=c.inputFormatType&&""!=c.inputFormatType&&-1!=c.inputFormatType.indexOf("9")&&(g=!0);c.charlimit&&-1!=parseInt(c.charlimit)&&(g||a("#"+c.id).attr("maxlength",c.charlimit));a("#"+c.id).css({opacity:"1"})};f.applyEvents=function(){a("#"+c.id).on("keypress input",function(b){if(void 0===c.secure||"false"===c.secure)a("#"+c.id).get(0).type="text";if(-1!=c.inputFormatType.indexOf("@@")&&-1!=c.inputFormatType.indexOf("REGEXP_LIKE")){var d=
"keypress"==b.type;if(d){var f=b.keyCode||b.which;character=void 0!=b.key?b.key:String.fromCharCode(f)}else character=b.originalEvent.data,"insertFromPaste"==b.originalEvent.inputType&&(character=a("#"+c.id).val());if(character&&"Enter"!=character){if("'"==character||"\\"==character)character="\\"+character;b=character;if(d){var g=this.selectionStart;b=this.selectionEnd;b=c.value.slice(0,g)+character+c.value.slice(b)}b=a.validate("validateRegexInput",c.inputFormatType.replace("["+c.name+"]",b));if("boolean"==
typeof b){if(!b)return a("#"+c.id).val(c.value),b}else if(b)return a("#"+c.id).val(b),d&&(c.value=b,this.selectionEnd=this.selectionStart=g+character.length),!d}else d||(a("#"+c.id).val(b.target.value),c.value=b.target.value);return!1}if(8!=b.keyCode&&void 0!=c.inputFormatType&&""!=c.inputFormatType&&(d=a("#"+c.id).val(),this.selectionStart==this.selectionEnd&&d.length>=c.inputFormatType.length))return!1});var g=0;a("#"+c.id).on("keyup",function(a,b){var c=0;return function(){var d=this,f=arguments;
clearTimeout(c);c=setTimeout(function(){a.apply(d,f)},b||0)}}(function(b){if(37>b.keyCode||40<b.keyCode){c.systemVariableValue=a("#"+c.id).val();c.isSystemVariable=!1;var h=this.selectionStart,k=this.selectionEnd;c.value=a("#"+c.id).val();c.value=f.setCapitalization(c.value);a("#"+c.id).val(c.value);var n=c.value.toString().length;if(8!=b.keyCode&&void 0!=c.inputFormatType&&""!=c.inputFormatType){b=/(YYYY|MM|DD|HH|MM|SS)/gi;if(void 0!=c.inputFormatType&&""!=c.inputFormatType&&null!=c.inputFormatType.match(b))c.value=
a.validate("validateDateInput",a("#"+c.id).val(),c.inputFormatType),"invalid date"==a.utility("verifyFullDate",c.value)&&(c.value="");else if(-1==c.inputFormatType.indexOf("@@")||-1==c.inputFormatType.indexOf("REGEXP_LIKE"))c.value=a.validate("ChangeInputFormatType",c,a("#"+c.id).val());a("#"+c.id).val(c.value);c.value=f.setCapitalization(c.value);a("#"+c.id).val(c.value);n<c.value.toString().length?(this.selectionStart=h+1,this.selectionEnd=k+1):(this.selectionStart=h,this.selectionEnd=k)}else 0!=
g&&(c.value=a("#"+c.id).val(),c.value=f.setCapitalization(c.value),a("#"+c.id).val(c.value),32==b.keyCode&&(this.selectionStart=h,this.selectionEnd=k),8==b.keyCode&&(this.selectionStart=h,this.selectionEnd=k));g++;d&&""!==c.template&&a.utility("saveDataToRecord",d,c.template,c.value)}},100));a("#"+c.id).on("keyboardChange",function(a){console.log("keyboardChange",a.action)});a("#"+c.id).on("focusout",function(){c.value=a("#"+c.id).val();void 0!=c.inputFormatType&&""!=c.inputFormatType&&(-1==c.inputFormatType.indexOf("@@")||
-1==c.inputFormatType.indexOf("REGEXP_LIKE"))&&c.value.toString().length<c.inputFormatType.toString().length&&(a("#"+c.id).val(""),c.value="",a("#"+c.id).trigger("EditingEndError"))});c.voiceRecognizable&&(a.utility("initSpeechAnalyser",c.id),a("#"+c.id).on("focus",function(){setTimeout(function(){a.utility("startSoundRecording",c.id)},500)}));if(c.events){if(c.events.Keypress)a("#"+c.id).on("keyup",function(){setTimeout(function(){a.utility("setActionRunningStatus",!0);(new a.actions(b,f,c.events.Keypress.slice())).execute()},
200)});c.events.EditingStart&&a("#"+c.id).bind("focusin",function(d){a.utility("setActionRunningStatus",!0);(new a.actions(b,f,c.events.EditingStart.slice())).execute()});if(c.events.EditingEnd)a("#"+c.id).on("focusout",function(){a.utility("setActionRunningStatus",!0);(new a.actions(b,f,c.events.EditingEnd.slice())).execute()});if(c.events.EditingEndError)a("#"+c.id).on("EditingEndError",function(){a.utility("setActionRunningStatus",!0);(new a.actions(b,f,c.events.EditingEndError.slice())).execute()});
if(c.events.VoiceRecognitionEnd)a("#"+c.id).on("VoiceRecognitionEnd",function(){a.utility("setActionRunningStatus",!0);(new a.actions(b,f,c.events.VoiceRecognitionEnd.slice())).execute()})}};f.setCapitalization=function(a){if(void 0!=c.autoCapitalization&&"None"!=c.autoCapitalization)switch(c.autoCapitalization){case "AllCharacters":a=a.toUpperCase();break;case "Sentences":var b=/(^\s*\w{1}|\.\s*\w{1})/gi;a=a.toLowerCase();a=a.replace(b,function(a){return a.toUpperCase()});break;case "Words":return b=
/(?:^|\s)\S/g,a=a.toLowerCase(),a.replace(b,function(a){return a.toUpperCase()})}return a};f.doTrim=function(b){return c.isTrim?a.trim(b):b};f.setValue=function(b,d){void 0!==c.secure&&"false"!==c.secure||void 0==a("#"+c.id).get(0)||(a("#"+c.id).get(0).type="text");c.systemVariableValue=c.value;c.isSystemVariable=!1;b=a.utility("convertSpecialCharacter",b);b=f.setCapitalization(b);b=f.doTrim(b);d&&void 0!=c.inputFormatType&&""!=c.inputFormatType&&(d=/(YYYY|MM|DD|HH|MM|SS)/gi,b=void 0!=c.inputFormatType&&
""!=c.inputFormatType&&null!=c.inputFormatType.match(d)?a.validateInputFormat(b,c.inputFormatType):-1!=c.inputFormatType.indexOf("@@")&&-1!=c.inputFormatType.indexOf("REGEXP_LIKE")?a.validate("validateRegexInput",c.inputFormatType.replace("["+c.name+"]",b)):a.validateInputFormat(b,c.inputFormatType),c.value=b);void 0!=c.formatType&&""!=c.formatType?(b=a.validate("changeFormat",c,b),a("#"+c.id).val(b),c.value=b):(c.value=b,a("#"+c.id).val(b))};f.getValue=function(){return c.value};f.setVisibility=
function(b){!0===b?(c.hidden=!1,a("#"+f.getId()).css({visibility:"visible"})):(c.hidden=!0,a("#"+f.getId()).css({visibility:"hidden"}))};f.propagateReadOnly=function(b){"true"==b?f.setKeyboardType(c.keyboardType):("true"==c.readonly&&"0"==c.border.borderweight&&a("#"+c.id).removeClass("ui-shadow-inset"),void 0!=a("#"+c.id).data().keyboard&&a("#"+c.id).data().keyboard.destroy())};f.setKeyboardType=function(b){"false"!==c.readonly&&!1!==c.readonly||a("#"+c.id).attr("readonly",!1);a("#"+c.id).prop("readonly")||
(c.keyboardType=b,a("#"+c.id).data("keyboardType",b),void 0!=b&&""!=b&&"Default"!=b&&"HW"!=b&&"Flic"!=c.keyboardType&&"Flick"!=c.keyboardType&&(void 0!=a("#"+c.id).data().keyboard&&a("#"+c.id).data().keyboard.destroy(),a.utility("showCustomKeyboard",c.id,b)),"Default"!=b&&"HW"!=b&&"Flic"!=c.keyboardType&&"Flick"!=c.keyboardType)||(a("#"+c.id+"_keyboard").remove(),a("#"+c.id).attr("readonly",!1))};f.setSecure=function(b){c.secure=b;void 0!=a("#"+c.id).get(0)&&(1==b||"true"==b?a("#"+c.id).get(0).type=
"password":a("#"+c.id).get(0).type="text")};return f}function q(b,c,d){var f=new l(c);a.utility("containsGlobalVariable",c.value)&&(c.systemVariableValue=c.value,c.isSystemVariable=!0);f.getTemplate=function(){return c.template};var g="true"==c.readonly?"readonly":"";f.getHTML=function(){!a.utility("isReverseTransition")&&""!==c.template&&(c.value=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b),-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template?
0:c.value)&&(c.value="");return["<input  id='",c.id,"' name='",c.name,"' value='",c.value,"'",g," type='","true"===c.secure?"password":"text","' tabindex='",c.taborder,"' placeholder='",c.placeholder,"'>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();f.font.applyCSS();f.border.applyCSS();f.padding.applyCSS();f.background.setColor();void 0!=c.keyboardType&&""!=c.keyboardType&&"Default"!=c.keyboardType&&"HW"!=c.keyboardType&&"Flic"!=c.keyboardType&&"Flick"!=c.keyboardType&&a.utility("showCustomKeyboard",
c.id,c.keyboardType);"true"!=c.hidden&&1!=c.hidden||a("#"+c.id).css({visibility:"hidden"});isNaN(parseInt(c.taborder))||a("#"+c.id).attr("tabindex",parseInt(c.taborder)+1);a("#"+c.id).css({"border-radius":"0px",margin:"0px","min-height":23*a.mobileweb.device.aspectratio});if("top"==c.verticalalignment){a("#"+c.id).css({"vertical-align":"top"});var g=a("#"+c.id).css("height"),h=a("#"+c.id).css("font-size"),k=c.padding.top*a.mobileweb.device.aspectHratio,l=parseInt(g)-parseInt(h)-k;a("#"+c.id).css({"padding-top":k,
"padding-bottom":l,"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio})}else"bottom"==c.verticalalignment?(a("#"+c.id).css({"vertical-align":"bottom"}),g=a("#"+c.id).css("height"),h=a("#"+c.id).css("font-size"),l=c.padding.bottom*a.mobileweb.device.aspectHratio,k=parseInt(g)-parseInt(h)-l,a("#"+c.id).css({"padding-top":k,"padding-bottom":l,"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*
a.mobileweb.device.aspectWratio})):a("#"+c.id).css({"vertical-align":"-100%"});"true"==c.readonly&&"0"==c.border.borderweight&&a("#"+c.id).removeClass("ui-shadow-inset");void 0!=c.cornerRadius&&a("#"+c.id).css({"border-radius":c.cornerRadius+"px"});if(!a.utility("isReverseTransition")&&(""!==c.template?(g=a.utility("getCombinedCSV"),0!=g.length?a.each(g,function(a,b){b.csvResultHeader===c.template.replace("[","").replace("]","")?f.setValue(b.value):f.setValue(-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&
c.value==c.template?"":c.value?"":c.value)}):void 0!=d?f.setValue(a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b)):f.setValue(-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template?"":c.value?"":c.value)):c.isSystemVariable?(c.value=a.utility("tokenizeString",c.systemVariableValue,b),a("#"+c.id).val(c.value)):f.setValue(a.utility("tokenizeString",c.value,b)),void 0!=c.globalValue))if("__LAT__"==c.globalValue)a("#__LAT__").on("onchange",function(){c.value=
a.mobileweb.__LAT__;a("#"+c.id).val(a.mobileweb.__LAT__)}),a("#__LAT__").trigger("onchange");else if("__LONG__"==c.globalValue)a("#__LONG__").on("onchange",function(){c.value=a.mobileweb.__LONG__;a("#"+c.id).val(a.mobileweb.__LONG__)}),a("#__LONG__").trigger("onchange");else if("__ALT__"==c.globalValue)a("#__ALT__").on("onchange",function(){c.value=a.mobileweb.__ALT__;a("#"+c.id).val(a.mobileweb.__ALT__)}),a("#__ALT__").trigger("onchange");else if("__MAPZOOM__"==c.globalValue)a("#__MAPZOOM__").on("onchange",
function(){c.value=a.mobileweb.__MAPZOOM__;a("#"+c.id).val(a.mobileweb.__MAPZOOM__)}),a("#__MAPZOOM__").trigger("onchange");else if("__COURSE__"==c.globalValue)a("#__COURSE__").on("onchange",function(){c.value=a.mobileweb.__COURSE__;a("#"+c.id).val(a.mobileweb.__COURSE__)}),a("#__COURSE__").trigger("onchange");else if("__CENTERLAT__"==c.globalValue)a("#__CENTERLAT__").on("onchange",function(){c.value=a.mobileweb.__CENTERLAT__;("#"+c.id).text(a.mobileweb.__CENTERLAT__)}),a("#__CENTERLAT__").trigger("onchange");
else if("__CENTERLONG__"==c.globalValue)a("#__CENTERLONG__").on("onchange",function(){c.value=a.mobileweb.__CENTERLONG__;("#"+c.id).text(a.mobileweb.__CENTERLONG__)}),a("#__CENTERLONG__").trigger("onchange");else if("__NUMREC__"==c.globalValue)a("#__NUMREC__").on("onchange",function(){c.value=a.mobileweb.__NUMREC__;a("#"+c.id).val(a.mobileweb.__NUMREC__)}),a("#__NUMREC__").trigger("onchange");else if("__NOW__"==c.globalValue){var m=new Date;a.mobileweb.__NOW__=a.utility("checkGlobalVariable",c.globalValue);
0==a("body").find("#__NOW__").length&&a("body").append("<input id='__NOW__' type='text' hidden='true'>"+a.mobileweb.__NOW__+"</input>");a("#__NOW__").on("onchange",function(){void 0!=c.formatType&&""!=c.formatType?(c.value=a.validate("changeFormat",c,m.toString()),a("#"+c.id).text(a.validate("changeFormat",c,m.toString())),a("#"+c.id).val(a.validate("changeFormat",c,m.toString()))):(c.value=a.mobileweb.__NOW__,a("#"+c.id).text(a.mobileweb.__NOW__),a("#"+c.id).val(a.mobileweb.__NOW__))});a("#__NOW__").trigger("onchange")}g=
!1;void 0!=c.inputFormatType&&""!=c.inputFormatType&&-1!=c.inputFormatType.indexOf("9")&&(g=!0);c.charlimit&&-1!=parseInt(c.charlimit)&&(g||a("#"+c.id).attr("maxlength",c.charlimit))};f.applyEvents=function(){a("#"+c.id).on("keypress input",function(b){if(-1!=c.inputFormatType.indexOf("@@")&&-1!=c.inputFormatType.indexOf("REGEXP_LIKE")){var d="keypress"==b.type;if(d){var f=b.keyCode||b.which;character=void 0!=b.key?b.key:String.fromCharCode(f)}else character=b.originalEvent.data,"insertFromPaste"==
b.originalEvent.inputType&&(character=a("#"+c.id).val());if(character&&"Enter"!=character){if("'"==character||"\\"==character)character="\\"+character;b=character;if(d){var g=this.selectionStart;b=this.selectionEnd;b=c.value.slice(0,g)+character+c.value.slice(b)}b=a.validate("validateRegexInput",c.inputFormatType.replace("["+c.name+"]",b));if("boolean"==typeof b){if(!b)return a("#"+c.id).val(c.value),b}else if(b)return a("#"+c.id).val(b),d&&(c.value=b,this.selectionEnd=this.selectionStart=g+character.length),
!d}return!1}d=b.which||b.keycode;return 43<=d&&58>=d?!0:!1});a("#"+c.id).keyup(function(b){var d=a("#"+c.id).val().toString().charCodeAt(a("#"+c.id).val().toString().length-1);44<=d&&58>=d?(c.systemVariableValue=a("#"+c.id).val(),c.isSystemVariable=!1):a("#"+c.id).val(a("#"+c.id).val().toString().substring(0,a("#"+c.id).val().length-1));c.value=a("#"+c.id).val();void 0!=c.inputFormatType&&""!=c.inputFormatType&&-1!=c.inputFormatType.toString().indexOf("YYYY")?(c.value=a.validate("ChangeDateInputFormatType",
c,a("#"+c.id).val()),a("#"+c.id).val(c.value)):void 0!=c.inputFormatType&&""!=c.inputFormatType?(c.value=a.validate("ChangeInputFormatType",c,a("#"+c.id).val()),a("#"+c.id).val(c.value)):a("#"+c.id).val();if(8!=d&&void 0!=c.inputFormatType&&""!=c.inputFormatType){d=this.selectionStart;var f=this.selectionEnd;null!=c.inputFormatType.match(/(YYYY|MM|DD|HH|MM|SS)/gi)?(c.value=a.validate("validateDateInput",a("#"+c.id).val(),c.inputFormatType),"invalid date"==a.utility("verifyFullDate",c.value)&&(c.value=
""),a("#"+c.id).val(c.value)):-1!=c.inputFormatType.toString().indexOf("YYYY")?(c.value=a.validate("ChangeDateInputFormatType",c,a("#"+c.id).val()),a("#"+c.id).val(c.value)):void 0!=c.inputFormatType&&""!=c.inputFormatType&&8==b.keyCode?(this.selectionStart=d,this.selectionEnd=f):void 0!=c.inputFormatType&&""!=c.inputFormatType?(c.value=a.validate("ChangeInputFormatType",c,a("#"+c.id).val()),a("#"+c.id).val(c.value)):a("#"+c.id).val()}b=a("#"+c.id).val();d=b.split("");parseFloat(c.range.min);f=parseFloat(c.range.max);
if("Invalid"!=c.range.max)if(isNaN(parseFloat(b))){if(-1<c.range.max.indexOf(b)||-1<c.range.min.indexOf(b))a("#"+c.id).val(d.join("")),c.value=a("#"+c.id).val()}else(c.value.length>parseFloat(c.value).toString().length?parseFloat(c.value.replace(/[^\d\.]/g,"")):c.value)<=f||(d.splice(d.length-1),a("#"+c.id).val(d.join("")),c.value=a("#"+c.id).val(),a("#"+c.id).trigger("EditingEndError"))});a("#"+c.id).focusin(function(b){if("0"==c.value||0==parseInt(c.value)){var d=a("#"+c.id).get(0);d.setSelectionRange(0,
1);d.focus()}else a("#"+c.id).get(0),setTimeout(function(b){var c=b.value.length;return function(){if(void 0!==b.setSelectionRange)b.setSelectionRange(c,c);else if(d.createTextRange){var f=d.createTextRange();f.collapse(!0);f.moveEnd("character",c);f.moveStart("character",c);f.select()}else a(b).val(b.value)}}(this),0)});a("#"+c.id).focusout(function(b){b=a("#"+c.id).val();b=b.split("");void 0!=c.inputFormatType&&""!=c.inputFormatType&&-1==c.inputFormatType.indexOf("REGEXP_LIKE")&&b.length<c.inputFormatType.toString().length&&
(a("#"+c.id).val(""),c.value="",a("#"+c.id).trigger("EditingEndError"));b=a("#"+c.id).val();var d=b.split(""),f=parseFloat(c.range.min);_maxlen=c.range.max.length;var g=parseFloat(c.range.max);if("Invalid"!=c.range.max)if(isNaN(parseFloat(b))){if(-1<c.range.max.indexOf(b)||-1<c.range.min.indexOf(b))a("#"+c.id).val(d.join("")),b=c.value=a("#"+c.id).val()}else(c.value.length>parseFloat(c.value).toString().length?parseFloat(c.value.replace(/[^\d\.]/g,"")):c.value)<=g||(d.splice(d.length-(d.length-_maxlen)),
parseFloat(d.join(""))>g?a("#"+c.id).val(g):a("#"+c.id).val(d.join("")),b=c.value=a("#"+c.id).val(),a("#"+c.id).trigger("EditingEndError"));"Invalid"!=c.range.min&&(isNaN(parseFloat(b))?-1<c.range.min.indexOf(b)&&(a("#"+c.id).val(d.join("")),c.value=a("#"+c.id).val()):c.value>=f||(d=d.splice(),c.value=d.join(""),a("#"+c.id).val(d.join(""))))});if(c.events){if(c.events.Keypress)a("#"+c.id).on("keyup",function(){a.utility("setActionRunningStatus",!0);(new a.actions(b,f,c.events.Keypress.slice())).execute()});
c.events.EditingStart&&a("#"+c.id).bind("focusin",function(d){a.utility("setActionRunningStatus",!0);(new a.actions(b,f,c.events.EditingStart.slice())).execute()});if(c.events.EditingEnd)a("#"+c.id).on("focusout",function(){a.utility("setActionRunningStatus",!0);(new a.actions(b,f,c.events.EditingEnd.slice())).execute()});if(c.events.EditingEndError)a("#"+c.id).on("EditingEndError",function(){a.utility("setActionRunningStatus",!0);(new a.actions(b,f,c.events.EditingEndError.slice())).execute()})}};
f.getValue=function(){return c.value};f.setValue=function(b){b=b.replace(/[^0-9.:\-\/:,]/g,"");c.systemVariableValue=c.value;c.isSystemVariable=!1;void 0!=c.formatType&&""!=c.formatType?(c.value=a.validate("changeFormat",c,b),a("#"+c.id).val(c.value)):(c.value=b,a("#"+c.id).val(b));c.value=b};f.setVisibility=function(b){!0===b?(c.hidden=!1,a("#"+f.getId()).css({visibility:"visible"})):(c.hidden=!0,a("#"+f.getId()).css({visibility:"hidden"}))};f.propagateReadOnly=function(b){"true"==b?f.setKeyboardType(c.keyboardType):
("true"==c.readonly&&"0"==c.border.borderweight&&a("#"+c.id).removeClass("ui-shadow-inset"),void 0!=a("#"+c.id).data().keyboard&&a("#"+c.id).data().keyboard.destroy())};f.setKeyboardType=function(b){"false"!==c.readonly&&!1!==c.readonly||a("#"+c.id).attr("readonly",!1);a("#"+c.id).prop("readonly")||(c.keyboardType=b,a("#"+c.id).data("keyboardType",b),void 0!=b&&""!=b&&"Default"!=b&&"HW"!=b&&"Flic"!=c.keyboardType&&"Flick"!=c.keyboardType&&(void 0!=a("#"+c.id).data().keyboard&&a("#"+c.id).data().keyboard.destroy(),
a.utility("showCustomKeyboard",c.id,b)),"Default"!=b&&"HW"!=b&&"Flic"!=c.keyboardType&&"Flick"!=c.keyboardType)||(a("#"+c.id+"_keyboard").remove(),a("#"+c.id).attr("readonly",!1))};f.setSecure=function(b){c.secure=b;void 0!=a("#"+c.id).get(0)&&(1==b||"true"==b?a("#"+c.id).get(0).type="password":a("#"+c.id).get(0).type="text")};return f}function p(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};var g="true"==c.readonly?"readonly":"";f.getHTML=function(){a.utility("isReverseTransition")||
(c.value&&(c.value=a.utility("spaceInStringConversion",c.value)),""!==c.template&&(c.value=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b),-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template?0:c.value)&&(c.value=""),c.value=a.utility("convertSpecialCharacter",a.utility("tokenizeString",c.value)));return["<textarea id='",c.id,"' name='",c.name,"' tabindex='",c.taborder,"' ",g," wrap='virtual'>",c.value,"</textarea>"].join("")};f.applyOverrides=
function(){f.frame.applyCSS();f.font.applyCSS();f.border.applyCSS();f.padding.applyCSS();f.background.setColor();"true"!=c.hidden&&1!=c.hidden||a("#"+c.id).css({visibility:"hidden"});isNaN(parseInt(c.taborder))||a("#"+c.id).attr("tabindex",parseInt(c.taborder)+1);"true"==c.readonly&&a("#"+c.id).attr("readOnly","readOnly");f.setEditable(c.readonly);c.charlimit&&-1!=parseInt(c.charlimit)&&a("#"+c.id).attr("maxlength",c.charlimit);a("#"+c.id).css({resize:"none",margin:"0px","border-radius":"0px",overflow:"hidden"});
a("#"+c.id).css({"text-shadow":"rgba(255, 255, 255, 0) 0px 0px 0px"});a("#"+c.id).css({wordwrap:"break-word","overflow-wrap":"break-word","max-width":c.frame.width*a.mobileweb.device.aspectWratio+"px","max-height":c.frame.height*a.mobileweb.device.aspectHratio+"px"});"false"==c.readonly?(a("#"+c.id).css({"overflow-x":"auto","-webkit-overflow-scrolling":"touch"}),a("#"+c.id).css({"overflow-y":"auto","-webkit-overflow-scrolling":"touch",resize:"none",display:"block"})):(a("#"+c.id).css({"box-shadow":"none",
"-webkit-box-shadow":"none"}),a("#"+c.id).css({overflow:"hidden"}));c.underline&&c.strikeout?a("#"+c.id).css({"text-decoration":"line-through underline"}):c.underline?a("#"+c.id).css({"text-decoration":"underline"}):c.strikeout&&a("#"+c.id).css({"text-decoration":"line-through"});var g=c.verticalalignment;if(g&&0<g.length){var h=1;void 0!=a("#"+c.id)[0]&&(h=a("#"+c.id)[0].rows);if(void 0!=a("#"+c.id)&&0<a("#"+c.id).length){a("#"+c.id).css({"vertical-align":g});var k=h*parseFloat(a("#"+c.id).css("line-height").replace("px",
"")),l=c.frame.height*a.mobileweb.device.aspectHratio,m=c.padding.top*a.mobileweb.device.aspectHratio;h=c.padding.bottom*a.mobileweb.device.aspectHratio;var n=c.font.size*a.mobileweb.device.aspectHratio;"top"==g?a("#"+c.id).css({"padding-top":m,"padding-bottom":h}):"bottom"==g?(g=parseInt(l)-(n+h),a("#"+c.id).css({"padding-top":g,"padding-bottom":h})):(g=(parseFloat(l)-parseFloat(k))/2,g-=m+h,a("#"+c.id).css({"padding-top":g}))}a("#"+c.id).css({"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,
"padding-right":c.padding.right*a.mobileweb.device.aspectWratio});a("#"+c.id+" :focus").css({outline:"1px solid orange"})}void 0!=c.cornerRadius&&a("#"+c.id).css({"border-radius":c.cornerRadius+"px"});a.utility("isReverseTransition")||""===c.template||(h=a.utility("getCombinedCSV"),0!=h.length?a.each(h,function(a,b){b.csvResultHeader===c.template.replace("[","").replace("]","")?f.setValue(b.value):f.setValue(-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template?"":c.value?
"":c.value)}):void 0!=d?f.setValue(a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b)):f.setValue(-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template?"":c.value?"":c.value));c.value=f.setCapitalization(c.value);c.value=f.doTrim(c.value);a("#"+c.id).val(c.value);if(!a.utility("isReverseTransition")&&void 0!=c.globalValue)if("__LAT__"==c.globalValue)a("#__LAT__").on("onchange",function(){c.value=a.mobileweb.__LAT__;a("#"+c.id).val(a.mobileweb.__LAT__)}),
a("#__LAT__").trigger("onchange");else if("__LONG__"==c.globalValue)a("#__LONG__").on("onchange",function(){c.value=a.mobileweb.__LONG__;a("#"+c.id).val(a.mobileweb.__LONG__)}),a("#__LONG__").trigger("onchange");else if("__ALT__"==c.globalValue)a("#__ALT__").on("onchange",function(){c.value=a.mobileweb.__ALT__;a("#"+c.id).val(a.mobileweb.__ALT__)}),a("#__ALT__").trigger("onchange");else if("__MAPZOOM__"==c.globalValue)a("#__MAPZOOM__").on("onchange",function(){c.value=a.mobileweb.__MAPZOOM__;a("#"+
c.id).val(a.mobileweb.__MAPZOOM__)}),a("#__MAPZOOM__").trigger("onchange");else if("__ADDRESS__"==c.globalValue)a("#__ADDRESS__").on("onchange",function(){c.value=a.mobileweb.__ADDRESS__;a("#"+c.id).val(a.mobileweb.__ADDRESS__)}),a("#__ADDRESS__").trigger("onchange");else if("__COURSE__"==c.globalValue)a("#__COURSE__").on("onchange",function(){c.value=a.mobileweb.__COURSE__;a("#"+c.id).val(a.mobileweb.__COURSE__)}),a("#__COURSE__").trigger("onchange");else if("__ROUTETIME__"==c.globalValue)a("#__ROUTETIME__").on("onchange",
function(){c.value=a.mobileweb.__ROUTETIME__;a("#"+c.id).val(a.mobileweb.__ROUTETIME__)}),a("#__ROUTETIME__").trigger("onchange");else if("__ROUTEDISTANCE__"==c.globalValue)a("#__ROUTEDISTANCE__").on("onchange",function(){c.value=a.mobileweb.__ROUTEDISTANCE__;a("#"+c.id).val(a.mobileweb.__ROUTEDISTANCE__)}),a("#__ROUTEDISTANCE__").trigger("onchange");else if("__CENTERLAT__"==c.globalValue)a("#__CENTERLAT__").on("onchange",function(){c.value=a.mobileweb.__CENTERLAT__;("#"+c.id).text(a.mobileweb.__CENTERLAT__)}),
a("#__CENTERLAT__").trigger("onchange");else if("__CENTERLONG__"==c.globalValue)a("#__CENTERLONG__").on("onchange",function(){c.value=a.mobileweb.__CENTERLONG__;("#"+c.id).text(a.mobileweb.__CENTERLONG__)}),a("#__CENTERLONG__").trigger("onchange");else if("__NUMREC__"==c.globalValue)a("#__NUMREC__").on("onchange",function(){c.value=a.mobileweb.__NUMREC__;a("#"+c.id).val(a.mobileweb.__NUMREC__)}),a("#__NUMREC__").trigger("onchange");else if("__NUMREC__"==c.globalValue)a("#__NUMREC__").on("onchange",
function(){c.value=a.mobileweb.__NUMREC__;a("#"+c.id).val(a.mobileweb.__NUMREC__)}),a("#__NUMREC__").trigger("onchange");else if("__NOW__"==c.globalValue){var p=new Date;a.mobileweb.__NOW__=a.utility("checkGlobalVariable",c.globalValue);0==a("body").find("#__NOW__").length&&a("body").append("<input id='__NOW__' type='text' hidden='true'>"+a.mobileweb.__NOW__+"</input>");a("#__NOW__").on("onchange",function(){void 0!=c.formatType||""!=c.formatType?(c.value=a.validate("changeFormat",c,p.toString()),
a("#"+c.id).val(a.validate("changeFormat",c,p.toString()))):(c.value=a.mobileweb.__NOW__,a("#"+c.id).val(a.mobileweb.__NOW__))});a("#__NOW__").trigger("onchange")}if(void 0!=c.refFileHidden&&(!c.refFileHidden||"false"==c.refFileHidden)){-1!=c.refFileURL.indexOf("[")&&(c.refFileURL=a.utility("tokenizeString",c.refFileURL,b));var q=a.mobileweb.baseurl+":8181/mobileweb/mobile/readFile?uri="+c.refFileURL+"&uiName="+c.id;(function(b,c){var d;window.XMLHttpRequest?d=new XMLHttpRequest:window.ActiveXObject&&
(d=new ActiveXObject("Microsoft.XMLHTTP"));d.open("GET",b);d.send();d.onload=function(){c(d.response)};d.onerror=function(){a.utility("sendRequest",q)}})(c.refFileURL,function(b){a("#"+c.id).val(b)})}};f.getValue=function(){return a.utility("convertSpecialCharacter",c.value)};f.setValue=function(b){b=a.utility("spaceInStringConversion",b);b=f.setCapitalization(f.doTrim(b));c.value=b;a("#"+c.id).val(b)};f.setEditable=function(a){c.readonly=a};f.setCapitalization=function(a){if(void 0!=c.autoCapitalization&&
"None"!=c.autoCapitalization)switch(c.autoCapitalization){case "AllCharacters":a=a.toUpperCase();break;case "Sentences":var b=/(^\s*\w{1}|\.\s*\w{1})/gi;a=a.toLowerCase();a=a.replace(b,function(a){return a.toUpperCase()});break;case "Words":return b=/(?:^|\s)\S/g,a=a.toLowerCase(),a.replace(b,function(a){return a.toUpperCase()})}return a};f.doTrim=function(b){return c.isTrim?a.trim(b):b};f.applyEvents=function(){"true"==c.readonly&&(a("#"+c.id).bind("tap",function(b){a("#"+c.id).hide();a(document.elementFromPoint(b.clientX,
b.clientY)).trigger("taphold").trigger("tap");a("#"+c.id).show()}),a("#"+c.id).on("focus",function(){this.blur()}));c.voiceRecognizable&&(a.utility("initSpeechAnalyser",c.id),a("#"+c.id).on("focus",function(){setTimeout(function(){a.utility("startSoundRecording",c.id)},500)}));a("#"+c.id).on("input",function(b){"insertFromPaste"==b.originalEvent.inputType&&(c.value=a("#"+c.id).val())});a("#"+c.id).on("keyup",function(b){c.value=a("#"+c.id).val();c.value=f.setCapitalization(c.value);a("#"+c.id).val(c.value);
d&&""!==c.template&&a.utility("saveDataToRecord",d,c.template,c.value)});a("#"+c.id).on("scroll",function(a){void 0!=b.iscroll&&(b.iscroll.vScroll=!1)});a("#"+c.id).mouseover(function(b){"true"!==c.readonly&&!0!==c.readonly||a("#"+c.id).css({"overflow-y":"auto"})}).mouseout(function(b){"true"!==c.readonly&&!0!==c.readonly||a("#"+c.id).css({overflow:"hidden"})});if(c.events){if(c.events.Keypress)a("#"+c.id).on("keyup",function(){(new a.actions(b,f,c.events.Keypress)).execute()});c.events.EditingStart&&
a("#"+c.id).bind("focusin",function(d){a.utility("setActionRunningStatus",!0);(new a.actions(b,f,c.events.EditingStart.slice())).execute()});if(c.events.EditingEnd)a("#"+c.id).on("focusout",function(){a.utility("setActionRunningStatus",!0);(new a.actions(b,f,c.events.EditingEnd.slice())).execute()})}if(void 0!=c.scrollPosition&&"end"==c.scrollPosition)var g=setInterval(function(){clearInterval(g);a("#"+c.id).scrollTop(a("#"+c.id)[0].scrollHeight)},200)};f.setVisibility=function(b){!0===b?(c.hidden=
!1,a("#"+f.getId()).css({visibility:"visible"})):(c.hidden=!0,a("#"+f.getId()).css({visibility:"hidden"}))};f.propagateReadOnly=function(a){};f.setKeyboardType=function(a){};return f}function m(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};f.getHTML=function(){var b="auto";if("iPad"===a.utility("getDeviceType")||"iPhone"===a.utility("getDeviceType"))b="no";var d=c.src;-1<d.indexOf("youtu")&&(d=d.replace("watch?v=","embed/"),-1<d.indexOf("&")&&(d=d.split("&")[0]));return["<iframe scrolling='",
b,"' id='",c.id,"' name='",c.name,"' src='",d,"'  tabindex='",c.taborder,"'></iframe>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();f.setLineHeight(c.lineheight);c.hidden&&a("#"+c.id).css({visibility:"hidden"});if(c.border){var g=c.border.borderweight*a.mobileweb.device.aspectratio+"px",h="rgba("+c.border.bordercolor.red+","+c.border.bordercolor.green+","+c.border.bordercolor.blue+","+c.border.bordercolor.alpha+")";a("#"+c.id).css({border:g+" solid "+h});a("#"+c.id).css({margin:"0px"})}-1!=
c.src.indexOf("[")&&-1!=c.src.indexOf("]")&&(g=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.src),b),f.setValue(g));setTimeout(function(){var b=a("#"+c.id).contents().find("body");0==b.length?a("#"+c.id).contents().find("body").html("The webpage you are tying to access is taking more time then usual or is preventing it to be displayed on this window."):0==b[0].children.length&&a("#"+c.id).contents().find("body").html("The webpage you are tying to access is taking more time then usual or is preventing it to be displayed on this window.")},
2E4)};f.setLineHeight=function(b){b&&a("#"+c.id).css({"line-height":b+"px"})};f.applyEvents=function(){c.events&&(c.events.OnLoad&&a("#"+c.id).ready(function(){(new a.actions(b,f,c.events.OnLoad.slice())).execute()}),c.events.LoadFail&&a("#"+c.id).load(function(){"error"==a.utility("checkURL",c.src)&&(new a.actions(b,f,c.events.LoadFail.slice())).execute()}),c.events.LoadEnd&&a("#"+c.id).load(function(){"success"==a.utility("checkURL",c.src)&&(new a.actions(b,f,c.events.LoadEnd.slice())).execute()}))};
f.getValue=function(){return""};f.setValue=function(b){a("#"+c.id).attr("src",b)};f.loadContent=function(b){var d='"width":"'+c.frame.width*a.mobileweb.device.aspectWratio*.9+'"',f='"height":"'+c.frame.height*a.mobileweb.device.aspectHratio*.9+'"';-1!=b.indexOf('"width":"90%"')&&(b=b.replace('"width":"90%"',d));-1!=b.indexOf('"height":"90%"')&&(b=b.replace('"height":"90%"',f));a("#"+c.id).attr("srcdoc",b)};return f}function f(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};f.getHTML=
function(){a.utility("isReverseTransition")||c.value&&(c.value=a.utility("spaceInStringConversion",c.value));return["<fieldset id='",c.id,"' style=' visibility:hidden;'> <input id='",c.id,"' name='",c.name,"' type='",c.type,"' value='",c.value,"' class=ui-btn-hidden aria-disabled=false /> </fieldset>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();f.font.applyCSS();f.setLineHeight(c);a.utility("isReverseTransition")||""!==c.template&&f.setValue(a.utility("extractDataFromRecord",d,c.template));
"true"==c.hidden?a("#"+c.id).css({visibility:"hidden"}):a("#"+c.id).css({visibility:"visible"});var b=0;c.border&&(b=c.border.borderweight*a.mobileweb.device.aspectHratio,a("#"+c.id+" div").css({"border-width":b+"px"}),a("#"+c.id+" div").css({"border-color":a.attributes("color",c.border.bordercolor).getColorCode()}),a("#"+c.id+" div").css({"border-style":"solid"}));a("#"+c.id).css({height:c.frame.height*a.mobileweb.device.aspectHratio-2*b+"px",width:c.frame.width*a.mobileweb.device.aspectWratio-2*
b+"px"});a("#"+c.id+" div").css({height:c.frame.height*a.mobileweb.device.aspectHratio-2*b+"px",width:c.frame.width*a.mobileweb.device.aspectWratio-2*b+"px"});c.background&&a("#"+c.id+" div").css({background:a.attributes("color",c.background).getColorCode()});a("#"+c.id+" .ui-btn").css("margin","0");a("#"+c.id+" div > span").css({padding:0});a("#"+c.id+" div > span").css({height:"100%","box-sizing":"border-box"});a("#"+c.id+" div > span > span").css({position:"absolute","line-height":"100%"});a("#"+
c.id+" div > span > span").css({"text-align":c.font.align,"text-decoration":c.textDecoration});c.padding&&(a("#"+c.id).css("width")&&(b=parseFloat(a("#"+c.id).css("width").replace("px",""))-parseFloat((parseInt(c.padding.left)+parseInt(c.padding.right))*a.mobileweb.device.aspectWratio),a("#"+c.id+" div > span > span").css({width:b+"px"})),a("#"+c.id+" div > span > span").css({"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio}),
a("#"+c.id+" div > span > span").css({"padding-top":c.padding.top*a.mobileweb.device.aspectHratio,"padding-bottom":c.padding.bottom*a.mobileweb.device.aspectHratio}));"bottom"==c.verticalalignment?a("#"+c.id+" .ui-btn-text").css({"vertical-align":"-100%"}):a("#"+c.id+" .ui-btn-text").css({"vertical-align":c.verticalalignment});a("#"+c.id+" div > span > span").css({left:"0px"});if("bottom"==c.verticalalignment)a("#"+c.id+" div > span > span").css({top:(c.frame.height-c.padding.bottom-c.font.size*(c.value.toString().length-
c.value.replace("\n","").length+1))*a.mobileweb.device.aspectHratio+"px"});else if("middle"==c.verticalalignment){var g=c.padding.bottom*a.mobileweb.device.aspectHratio,h=c.padding.top*a.mobileweb.device.aspectHratio,k=c.font.size*a.mobileweb.device.aspectHratio,l=(c.frame.height*a.mobileweb.device.aspectHratio-h-g-k)/2,m=0;setTimeout(function(){var b=a("#"+c.id+" div > span > span ").css("height");m=parseInt(b)>k?l+h+g-parseInt(b)/2:l;a("#"+c.id+" div > span > span").css({top:m})},100)}else"top"==
c.verticalalignment&&a("#"+c.id+" div > span > span").css({top:c.padding.top*a.mobileweb.device.aspectHratio+"px"});"WordWrap"==c.font.lineBreakMode?a("#"+c.id+" div > span > span").css({"white-space":"pre-wrap","word-wrap":"break-word"}):a("#"+c.id+" div > span > span").css({"white-space":"pre"})};f.setLineHeight=function(b){b&&a("#"+c.id).css({"line-height":c.frame.height*a.mobileweb.device.aspectHratio+"px"})};f.setBackgroundColor=function(b){a("#"+c.id+">div").css("background",b)};f.getValue=
function(){return""};f.setValue=function(b){c.value=b;a("#"+c.id+" .ui-btn-text").text(b)};f.applyEvents=function(){if(c.events){if(c.events.Tap)if(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Windows Phone/i.test(navigator.userAgent))a("#"+c.id).bind("tap",function(){(new a.actions(b,f,JSON.parse(JSON.stringify(c.events.Tap).slice()))).execute()});else a("#"+c.id).on("click",function(){(new a.actions(b,f,JSON.parse(JSON.stringify(c.events.Tap).slice()))).execute()});if(c.events&&c.events.flickRL)a("#"+
c.id).on("swipeleft",function(){(new a.actions(b,f,c.events.flickRL.slice())).execute()});if(c.events&&c.events.flickLR)a("#"+c.id).on("swiperight",function(){(new a.actions(b,f,c.events.flickLR.slice())).execute()})}};return f}function u(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};f.getHTML=function(){c.taborder=parseInt(c.taborder)+1;!a.utility("isReverseTransition")&&c.value&&(c.value=a.utility("spaceInStringConversion",c.value),c.value=a.utility("convertSpecialCharacter",
a.utility("tokenizeString",c.value)));return"."===c.backgroundimage||""===c.backgroundimage?["<fieldset id='",c.id,"' > <input id='",c.id,"' name='",c.name,"' tabindex='",c.taborder,"' type='",c.type,"' value='",c.value,"' class=ui-btn-hidden aria-disabled=false/></fieldset>"].join(""):["<img height='",c.frame.height*a.mobileweb.device.aspectHratio,"' width='",c.frame.width*a.mobileweb.device.aspectWratio,"' id='",c.id,"'name='",c.name,"'tabindex='",c.taborder,"' src='",a.utility("getImage",c.backgroundimage),
"'  style='visibility:hidden;'></img><label for='",c.id,"'class='ui-btn-text' id='",c.id,"_label' name='",c.name,"'>",c.value,"</label>"].join("")};f.applyOverrides=function(){"."!==c.backgroundimage&&""!==c.backgroundimage||0!=a("#"+c.id).find("div").length||void 0==a("#"+c.id)[0]||(a("#"+c.id)[0].innerHTML='<fieldset id="'+c.id+'"> <div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="null" data-iconpos="null" data-theme="c" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c" aria-disabled="false"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">'+
c.value+'</span></span><input id="'+c.id+'" type="button" value="'+c.value+'" class="ui-btn-hidden" aria-disabled="false"></div> </fieldset>');f.frame.applyCSS();f.font.applyCSS();a.utility("isReverseTransition")||""!==c.template&&f.setValue(a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b));"true"==c.hidden?(a("#"+c.id).css({visibility:"hidden"}),a("#"+c.id+"_label").css({visibility:"hidden"})):(a("#"+c.id).css({visibility:"visible"}),a("#"+c.id+"_label").css({visibility:"visible"}));
c.padding&&(g=parseFloat(c.frame.width*a.mobileweb.device.aspectWratio-2*g+"px")-parseFloat(c.padding.left*a.mobileweb.device.aspectWratio)-parseFloat(c.padding.right*a.mobileweb.device.aspectWratio),a("#"+c.id+" div > span > span ").css({width:g+"px"}),a("#"+c.id+" div > span > span ").css({"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio}),a("#"+c.id+" div > span > span ").css({"padding-top":c.padding.top*a.mobileweb.device.aspectHratio,
"padding-bottom":c.padding.bottom*a.mobileweb.device.aspectHratio}));if("."===c.backgroundimage||""===c.backgroundimage){f.setLineHeight(c);var g=0;c.border&&(g=c.border.borderweight*a.mobileweb.device.aspectHratio,a("#"+c.id+" div").css({"border-width":g+"px"}),a("#"+c.id+" div").css({"border-color":a.attributes("color",c.border.bordercolor).getColorCode()}),a("#"+c.id+" div").css({"border-style":"solid"}));a("#"+c.id).css({height:c.frame.height*a.mobileweb.device.aspectHratio-2*g+"px",width:c.frame.width*
a.mobileweb.device.aspectWratio-2*g+"px"});a("#"+c.id+" div").css({height:c.frame.height*a.mobileweb.device.aspectHratio-2*g+"px",width:c.frame.width*a.mobileweb.device.aspectWratio-2*g+"px"});a("#"+c.id+" .ui-btn").css("margin","0");a("#"+c.id+" .ui-btn-inner").css({padding:"0px"});a("#"+c.id+" .ui-btn-inner").css("white-space","normal !important");a("#"+c.id+" .ui-btn-inner").css("max-height",c.frame.height*a.mobileweb.device.aspectHratio+"px");a("#"+c.id+" .ui-btn-corner-all").css("border-radius",
"0em");a("#"+c.id+" div > span ").css({height:"100%","box-sizing":"border-box"});a("#"+c.id+" > div > input").css("padding","5px");a("#"+c.id+" div > span > span").css({position:"absolute","line-height":"100%"});"WordWrap"==c.font.lineBreakMode?a("#"+c.id+" div > span > span").css({"white-space":"pre-wrap","word-wrap":"break-word"}):a("#"+c.id+" div > span > span").css({"white-space":"pre"});a("#"+c.id+" div > span > span").css({"text-decoration":c.textDecoration,"vertical-align":c.verticalalignment});
"bottom"==c.verticalalignment?a("#"+c.id+" div > span > span").css({bottom:"0px",left:"0px"}):"middle"==c.verticalalignment?(g=(c.frame.height*a.mobileweb.device.aspectHratio-c.padding.top*a.mobileweb.device.aspectHratio-c.padding.bottom*a.mobileweb.device.aspectHratio-c.font.size*a.mobileweb.device.aspectHratio-2*c.border.borderweight*a.mobileweb.device.aspectHratio)/2,a("#"+c.id+" div > span > span").css({top:g,left:"0px"})):"top"==c.verticalalignment&&a("#"+c.id+" div > span > span").css({top:"0px",
left:"0px"});void 0!=c.cornerRadius&&(a("#"+c.id+"> div").css({"border-radius":c.cornerRadius+"px"}),a("#"+c.id+"> div > span").first().css({"border-radius":c.cornerRadius+"px"}))}else-1!=c.backgroundimage.indexOf("[")&&-1!=c.backgroundimage.indexOf("]")&&(g=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.backgroundimage),b),""!=c.src&&c.src!=g?a("#"+c.id).attr("src",a.utility("getImage",c.src)):a("#"+c.id).attr("src",a.utility("getImage",g))),-1!=c.imageontap.indexOf("[")&&-1!=c.imageontap.indexOf("]")&&
a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.imageontap),b),-1!=c.backgroundimageontap.indexOf("[")&&-1!=c.backgroundimageontap.indexOf("]")&&a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.backgroundimageontap),b),f.applyImageButtonCSS()};f.applyImageButtonCSS=function(){a("#"+c.id).css({position:"absolute","z-index":"0"});a("#"+c.id).css({height:c.frame.height*a.mobileweb.device.aspectHratio+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px"});a("#"+
c.id).css({top:c.frame.y*a.mobileweb.device.aspectHratio+"px",left:c.frame.x*a.mobileweb.device.aspectWratio+"px"});a("#"+c.id+"_label").css({position:"absolute","z-index":"0","text-shadow":"none",display:"table-cell"});c.border&&(a("#"+c.id).css({"border-width":c.border.borderweight+"px"}),a("#"+c.id).css({"border-color":a.attributes("color",c.border.bordercolor).getColorCode()}),a("#"+c.id).css({"border-style":"solid"}));void 0!=c.cornerRadius&&a("#"+c.id).css({"border-radius":c.cornerRadius});
a("#"+c.id+"_label").css({height:c.frame.height*a.mobileweb.device.aspectHratio+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px"});a("#"+c.id+"_label").css({"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-top":c.padding.top*a.mobileweb.device.aspectHratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio,"padding-bottom":c.padding.bottom*a.mobileweb.device.aspectHratio});a("#"+c.id+"_label").css({"text-align":c.font.align});a("#"+c.id+"_label").css({color:a.attributes("color",
c.font.color).getColorCode()});a("#"+c.id+"_label").css({"font-weight":"normal","font-size":c.font.size*a.mobileweb.device.aspectHratio+"px"});!0===c.font.weight&&a("#"+c.id+"_label").css({"font-weight":"bold"});if(void 0!=a("#"+c.id)&&0<a("#"+c.id).length)if("bottom"==c.verticalalignment)a("#"+c.id+"_label").css({top:(parseInt(c.frame.y)+(parseInt(c.frame.height)-parseInt(c.padding.bottom))-parseInt(c.font.size))*a.mobileweb.device.aspectHratio+"px",left:c.frame.x*a.mobileweb.device.aspecWtratio+
"px"});else if("middle"==c.verticalalignment){var b=parseInt(c.frame.y)+(parseInt(c.frame.height)-(parseInt(c.padding.top)+parseInt(c.padding.bottom)+parseInt(c.font.size)))/2;a("#"+c.id+"_label").css({top:b*a.mobileweb.device.aspectHratio+"px",left:c.frame.x*a.mobileweb.device.aspectWratio+"px"});b=Math.abs(parseFloat(a("#"+c.id+"_label").css("top").replace("px",""))-parseFloat(a("#"+c.id).css("top").replace("px","")));isNaN(b)||(b=parseFloat(a("#"+c.id+"_label").css("height").replace("px",""))-
b,a("#"+c.id+"_label").css({height:b+"px"}))}else"top"==c.verticalalignment&&(a("#"+c.id+"_label").css({padding:""}),b=c.frame.width*a.mobileweb.device.aspectWratio-c.padding.left*a.mobileweb.device.aspectWratio-c.padding.right*a.mobileweb.device.aspectWratio,a("#"+c.id+"_label").css({width:b+"px"}),b=c.frame.height*a.mobileweb.device.aspectHratio-c.padding.top*a.mobileweb.device.aspectHratio-c.padding.bottom*a.mobileweb.device.aspectHratio,a("#"+c.id+"_label").css({height:b+"px"}),a("#"+c.id+"_label").css({top:(parseInt(c.frame.y)+
parseInt(c.padding.top))*a.mobileweb.device.aspectHratio+"px",left:c.frame.x*a.mobileweb.device.aspectWratio+"px"}));a("#"+c.id+"_label").css({"text-decoration":c.textDecoration})};f.re_createTextButton=function(){var d=document.getElementById(c.id).outerHTML,g="<img id='"+c.id+"'name='"+c.name+"' src='"+a.utility("getImage",c.backgroundimageontap)+"'><label for='"+c.id+"'class='ui-label' id='"+c.id+"_label' name='"+c.name+"'>"+c.value+"</label></img>";document.getElementById(c.id).outerHTML=d.replace(d,
g);f.applyImageButtonCSS();a("#"+c.id).unbind("click");a("#"+c.id+"_label").click(function(){(new a.actions(b,f,c.events.Tap.slice())).execute()});a("#"+c.id).click(function(){(new a.actions(b,f,c.events.Tap)).execute()})};f.getValue=function(){return""};f.setValue=function(b){c.value=b;a("#"+c.id+" .ui-btn-text").text(b);null==document.getElementById(c.id+"_label")?a("#"+c.id+" .ui-btn-text").text(b):a("#"+c.id+"_label").text(b)};f.setSrc=function(a){c.src=a};f.setLineHeight=function(b){b&&a("#"+
c.id).css({"line-height":c.frame.height*a.mobileweb.device.aspectratio+"px"})};f.setHiddenProperty=function(b){"true"==b?(a("#"+c.id).css({visibility:"hidden"}),a("#"+c.id+"_label").css({visibility:"hidden"})):(a("#"+c.id).css({visibility:""}),a("#"+c.id+"_label").css({visibility:""}))};f.applyEvents=function(){if("."===c.backgroundimage||""===c.backgroundimage)if(c.events){if(c.events.Tap)if(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Windows Phone/i.test(navigator.userAgent))a("#"+c.id).off("tap").on("tap",
function(){(new a.actions(b,f,JSON.parse(JSON.stringify(c.events.Tap).slice()))).execute();"."!==c.backgroundimageontap&&""!==c.backgroundimageontap&&f.re_createTextButton()});else a("#"+c.id).off("click").on("click",function(d){(new a.actions(b,f,JSON.parse(JSON.stringify(c.events.Tap).slice()))).execute();"."!==c.backgroundimageontap&&""!==c.backgroundimageontap&&f.re_createTextButton()})}else"."!==c.backgroundimageontap&&f.re_createTextButton();else a("#"+c.id+"_label").bind("taphold",function(){"."!==
c.backgroundimageontap&&a("#"+c.id).attr("src",a.utility("getImage",c.backgroundimageontap))}),a("#"+c.id).bind("taphold",function(){"."!==c.backgroundimageontap&&a("#"+c.id).attr("src",a.utility("getImage",c.backgroundimageontap))}),a("#"+c.id+"_label").click(function(g){if("."!==c.backgroundimageontap)if(-1!=c.backgroundimageontap.indexOf("[")&&-1!=c.backgroundimageontap.indexOf("]")){var h=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.backgroundimageontap),b);a("#"+c.id).attr("src",
a.utility("getImage",h))}else a("#"+c.id).attr("src",a.utility("getImage",c.backgroundimageontap));if(c.events){if(c.events.Tap){h=a(g.target);g.preventDefault();if(!h.data("lockedAt")||300<+new Date-h.data("lockedAt"))(new a.actions(b,f,JSON.parse(JSON.stringify(c.events.Tap).slice()))).execute(),"."!==c.backgroundimage&&setTimeout(function(){if(-1!=c.backgroundimage.indexOf("[")&&-1!=c.backgroundimage.indexOf("]")){var f=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.backgroundimage),
b);a("#"+c.id).attr("src",a.utility("getImage",f))}else a("#"+c.id).attr("src",a.utility("getImage",c.backgroundimage))},1E3);h.data("lockedAt",+new Date)}}else"."!==c.backgroundimage&&setTimeout(function(){if(-1!=c.backgroundimage.indexOf("[")&&-1!=c.backgroundimage.indexOf("]")){var f=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.backgroundimage),b);a("#"+c.id).attr("src",a.utility("getImage",f))}else a("#"+c.id).attr("src",a.utility("getImage",c.backgroundimage))},1E3)}),a("#"+
c.id).click(function(g){if("."!==c.backgroundimageontap)if(-1!=c.backgroundimageontap.indexOf("[")&&-1!=c.backgroundimageontap.indexOf("]")){var h=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.backgroundimageontap),b);a("#"+c.id).attr("src",a.utility("getImage",h))}else a("#"+c.id).attr("src",a.utility("getImage",c.backgroundimageontap));if(c.events){if(c.events.Tap){h=a(g.target);g.preventDefault();if(!h.data("lockedAt")||300<+new Date-h.data("lockedAt"))(new a.actions(b,f,JSON.parse(JSON.stringify(c.events.Tap).slice()))).execute(),
"."!==c.backgroundimage&&setTimeout(function(){if(-1!=c.backgroundimage.indexOf("[")&&-1!=c.backgroundimage.indexOf("]")){var f=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.backgroundimage),b);a("#"+c.id).attr("src",a.utility("getImage",f))}else a("#"+c.id).attr("src",a.utility("getImage",c.backgroundimage))},1E3);h.data("lockedAt",+new Date)}}else"."!==c.backgroundimage&&setTimeout(function(){if(-1!=c.backgroundimage.indexOf("[")&&-1!=c.backgroundimage.indexOf("]")){var f=a.utility("tokenizeString",
a.utility("extractDataFromRecord",d,c.backgroundimage),b);a("#"+c.id).attr("src",a.utility("getImage",f))}else a("#"+c.id).attr("src",a.utility("getImage",c.backgroundimage))},1E3)});a("#"+c.id+"_label").mousedown(function(){0==c.border.borderweight&&a("#"+c.id).css("border","1px solid #ECECEC")}).mouseup(function(){0==c.border.borderweight&&a("#"+c.id).css("border","none")});a("#"+c.id).mousedown(function(){0<a("#"+c.id+"> div").length&&a("#"+c.id+"> div").css("box-shadow","0 0 12px #387bbe");0==
c.border.borderweight&&a("#"+c.id).css("border","1px solid #ECECEC")}).mouseup(function(){setTimeout(function(){0<a("#"+c.id+"> div").length&&a("#"+c.id+"> div").css("box-shadow","none")},300);0==c.border.borderweight&&a("#"+c.id).css("border","none")});a("#"+c.id).focus(function(){a("#"+c.id).css("outline","none");c.tab="";a(window).keyup(function(a){if("Tab"===a.key||9==a.keyCode)c.tab=a.shiftKey?"shifttab":"tab"});setTimeout(function(){"tab"===c.tab||"shifttab"===c.tab?a("#"+c.id).css("box-shadow",
"0 0 12px #387bbe"):0==c.border.borderweight&&a("#"+c.id).css("border","1px solid #ECECEC")},200)}).focusout(function(){a("#"+c.id).css("box-shadow","none")});a("#"+c.id).keypress(function(b){if(13==b.which)return a("#"+c.id).css("box-shadow","none"),a("#"+c.id).click(),!1});a("#"+c.id+"_label").mouseover(function(b){a("#"+c.id).css({cursor:"pointer"});a("#"+c.id+"_label").css({cursor:"pointer"})});c.events&&c.events.flick&&a("#"+c.id).swipe(function(){(new a.actions(b,f,c.events.flick.slice())).execute()});
if(c.events&&c.events.flickRL)a("#"+c.id).on("swipeleft",function(){(new a.actions(b,f,c.events.flickRL.slice())).execute()});if(c.events&&c.events.flickLR)a("#"+c.id).on("swiperight",function(){(new a.actions(b,f,c.events.flickLR.slice())).execute()})};return f}function w(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};var g="OnOrOff";c.text&&(c.text=a.utility("convertSpecialCharacter",a.utility("tokenizeString",c.text)));f.getHTML=function(){c.taborder=parseInt(c.taborder)+1;return["<fieldset id='",
c.id,"' tabindex='",c.taborder,"'> <input ","on"==c.value?"checked = 'checked'":""," id='",c.id+c.name,"' name='",c.name,"' type='",c.type,"' data-role='none' /><div style=' position:absolute; line-height:",c.frame.height*a.mobileweb.device.aspectHratio,"px'><img id='"+c.id+"image'style='vertical-align:top' src='",f.setInitialImage(),"'/></div><div style=' position:absolute; width:",(c.frame.width-c.frame.height)*a.mobileweb.device.aspectWratio,"px; height:",c.frame.height*a.mobileweb.device.aspectHratio,
"px;line-height:",c.frame.height*a.mobileweb.device.aspectHratio,"px'><label style='line-height:normal' id='",c.id+c.type,"' for='",c.id+c.name,"'>",f.setText(c.text)," </label></div></fieldset>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();f.font.applyCSS();"true"==c.hidden&&a("#"+c.id).css({visibility:"hidden"});if(c.border){var g=c.border.borderweight+"px";if("0px"!=g){a("#"+c.id).css({border:g+" solid "+h});a("#"+c.id).css({margin:"0px"});var h="rgba("+c.border.bordercolor.red+","+
c.border.bordercolor.green+","+c.border.bordercolor.blue+","+c.border.bordercolor.alpha+")";a("#"+c.id).css({border:g+" solid "+h});a("#"+c.id).css({margin:"0px"})}}c.background&&a("#"+c.id).css({"background-color":a.attributes("color",c.background).getColorCode()});a("#"+c.id).css({"background-size":"100% 100%","background-repeat":"no-repeat no-repeat"});if(c.template)if(c.valueFormat=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b),"yes"==c.valueFormat||"1"==c.valueFormat||
"on"==c.valueFormat||"true"==c.valueFormat)c.valueFormat="1";else if("no"==c.valueFormat||"0"==c.valueFormat||"off"==c.valueFormat||"false"==c.valueFormat)c.valueFormat="0";f.setValue(c.valueFormat);c.padding&&a("#"+c.id+"> div").css({"line-height":""});f.setLineHeight(c.lineheight);"on"==c.value?(a("#"+c.id+c.name).attr("checked",!0),a("#"+c.id+"image").attr("src",f.setInitialImage(c.onimage))):(a("#"+c.id+c.name).attr("checked",!1),a("#"+c.id+"image").attr("src",f.setInitialImage(c.offimage)));
""==c.offimage&&""==c.onimage||a("#"+c.id+'>[name="'+c.name+'"]').css({display:"none"});a("[for="+c.id+c.name+"]").css({"text-decoration":c.textDecoration});a("[for="+c.id+c.name+"]").css({"font-size":c.font.size});a("#"+c.id+"> div").first().css({top:0,bottom:0,left:0,"max-width":"40px"});a("#"+c.id+"> div").first().css({height:c.frame.height*a.mobileweb.device.aspectHratio,width:c.frame.height*a.mobileweb.device.aspectHratio});a("#"+c.id+"> div > img").first().css({height:"inherit",width:"inherit"});
a("#"+c.id+"> div").last().css({"margin-left":c.frame.height*a.mobileweb.device.aspectHratio});a("#"+c.id+"> div").last().css({height:(c.frame.height-c.padding.top-c.padding.bottom)*a.mobileweb.device.aspectHratio});a("#"+c.id+"> div").last().css({width:c.frame.width*a.mobileweb.device.aspectWratio-c.frame.height*a.mobileweb.device.aspectHratio});a("#"+c.id+"> div").last().css({"padding-top":c.padding.top*a.mobileweb.device.aspectHratio,"padding-bottom":c.padding.bottom*a.mobileweb.device.aspectHratio});
a("#"+c.id+"> div").last().css({"vertical-align":c.verticalalignment});g=parseFloat(a("#"+c.id).css("height"));h=c.padding.top*a.mobileweb.device.aspectHratio;var k=c.padding.bottom*a.mobileweb.device.aspectHratio,l=c.font.size*a.mobileweb.device.aspectHratio;"middle"==c.verticalalignment?(h=(g-h-k-l)/2,a("#"+c.id+"> div").last().css({height:g-h,"line-height":g+"px"})):"bottom"==c.verticalalignment&&(l=g-h-k-l,a("#"+c.id+"> div").last().css({"margin-top":l}),a("#"+c.id+"> div").last().css({height:g-
h-k-l}));a("#"+c.id+"label").css({"line-height":"1.5"});""!=c.text?a("#"+c.id+"> div > label").css({"margin-left":c.padding.left*a.mobileweb.device.aspectWratio,"margin-right":c.padding.right*a.mobileweb.device.aspectWratio}):(g=a("#"+c.id+"> div").first().css("width"),a("#"+c.id).css({width:g}),a("#"+c.id+"> div").last().css({width:"0px"}));a("#"+c.id+"checkbox").css({"line-height":""})};f.setText=function(){return""==c.text?"":c.text};f.setLineHeight=function(b){b&&a("#"+c.id).css({"line-height":b+
"px"})};f.setInitialImage=function(){return"on"==c.value?"checked-44px.png"==c.onimage?a.utility("getSystemImage",c.onimage,c.viewtype):a.utility("getImage",c.onimage):"unchecked-44px.png"==c.offimage?a.utility("getSystemImage",c.offimage,c.viewtype):a.utility("getImage",c.offimage)};f.parseValue=function(a){a=a.toLowerCase();switch(a){case "true":case '"true"':return c.valueFormat="true",g="TrueOrFalse","on";case "false":case '"false"':return c.valueFormat="false",g="TrueOrFalse","off";case "on":return c.valueFormat=
"on",g="OnOrOff","on";case "off":return c.valueFormat="off",g="OnOrOff","off";case "1":return c.valueFormat="1",g="ZeroOrOne","on";case "0":return c.valueFormat="0",g="ZeroOrOne","off";case "yes":case '"yes"':return c.valueFormat="yes",g="YesOrNo","on";case "no":case '"no"':return c.valueFormat="no",g="YesOrNo","off";default:return c.valueFormat="off",g="OnOrOff","off"}};f.setImage=function(b){"checked-44px.png"==b||"unchecked-44px.png"==b?(a("#"+c.id+'>[name="'+c.name+'"]').css({display:"none"}),
a("#"+c.id+"image").attr("src",a.utility("getSystemImage",b,c.viewtype))):(a("#"+c.id+'>[name="'+c.name+'"]').css({display:"none"}),a("#"+c.id+"image").attr("src",a.utility("getImage",b)))};f.applyEvents=function(){a("#"+c.id+"image").bind("click",function(b){a("#"+c.id+c.name).is(":checked")?a("#"+c.id+c.name).attr("checked",!1):a("#"+c.id+c.name).attr("checked",!0);a("#"+c.id+c.name).trigger("change")});a("#"+c.id).keypress(function(b){if(32==b.which)return a("#"+c.id+"image").click(),!1});a("#"+
c.id+c.name).change(function(){a("#"+c.id+c.name).is(":checked")?(f.setImage(c.onimage),c.value="on",c.template="true"):(f.setImage(c.offimage),c.value="off",c.template="false");c.valueFormat="TrueOrFalse"===g?"true"===c.valueFormat?"false":"true":"OnOrOff"===g?"on"===c.valueFormat?"off":"on":"ZeroOrOne"===g?"1"===c.valueFormat?"0":"1":"YesOrNo"===g?"yes"===c.valueFormat?"no":"yes":c.valueFormat});c.events&&(c.events.Tap&&a("#"+c.id+c.name).change(function(){(new a.actions(b,f,c.events.Tap.slice())).execute()}),
c.events.On&&a("#"+c.id+c.name).change(function(){a("#"+c.id+c.name).is(":checked")&&(new a.actions(b,f,c.events.On.slice())).execute()}),c.events.Off&&a("#"+c.id+c.name).change(function(){a("#"+c.id+c.name).is(":checked")||(new a.actions(b,f,c.events.Off.slice())).execute()}))};f.setValue=function(a){""==a?(c.valueFormat=c.value,g="OnOrOff"):c.value=f.parseValue(a)};f.getValue=function(){return c.valueFormat};return f}function y(b,c){var d=new l(c);d.getTemplate=function(){return c.template};d.getHTML=
function(){return"bar"==c.style?["<div id='",c.id,"' name='",c.name,"' class='progress_container_",c.style,"' tabindex='",c.taborder,"' ><div class='current_",c.style,"'></div></div>"].join(""):"circle"==c.style?["<div id='",c.id,"' name='",c.name,"' class='progress progress_container progress_container_",c.style,"' tabindex='",c.taborder,"' ></div>"].join(""):["<div id='",c.id,"' name='",c.name,"' class='progress progress_container progress_container_",c.style,"' tabindex='",c.taborder,"' ><div class='progress progress_current progress_current_",
c.style,"'></div></div>"].join("")};d.applyOverrides=function(){d.frame.applyCSS();c.hidden&&"true"==c.hidden&&a("#"+c.id).css({visibility:"hidden"});var b=a.mobileweb.device.aspectratio;if("bar"==c.style)a("#"+c.id).css({height:c.frame.height*a.mobileweb.device.aspectHratio+"px"}),a("#"+c.id).children("div").css({height:c.frame.height*a.mobileweb.device.aspectHratio+"px"}),a("#"+c.id).children("div").css({"margin-top":"0.5px","margin-bottom":"0.5px"}),c.background||(c.background={red:0,blue:255,
green:51,alpha:.8}),a("#"+c.id).css({"background-color":a.attributes("color",c.background).getColorCode()}),c.fill||(c.fill={red:255,blue:255,green:255,alpha:1}),a("#"+c.id).children("div").css({"background-color":a.attributes("color",c.fill).getColorCode()});else if("circle"==c.style){var f=parseInt(c.radius)*b,g=2*f;a("#"+c.id).css({height:g+"px",width:g+"px"});var h=document.createElement("Canvas");h.setAttribute("id",c.id+"_canvas");h.setAttribute("width",g+"px");h.setAttribute("height",g+"px");
document.getElementById(c.id).appendChild(h);h=h.getContext("2d");h.beginPath();h.arc(f,f,(c.radius-4)*b,0,2*Math.PI);h.strokeStyle=a.attributes("color",c.background).getColorCode();h.lineWidth=8*b;h.stroke();f=document.createElement("LABEL");f.setAttribute("id",c.id+"_lblProgress");h=document.createTextNode("0%");f.appendChild(h);document.getElementById(c.id).appendChild(f);a("#"+c.id+"_lblProgress").insertAfter(document.getElementById(c.id));a("#"+c.id+"_lblProgress").css({position:"absolute",width:g-
16*b+"px"});a("#"+c.id+"_lblProgress").css({top:(parseInt(c.frame.y)-7)*a.mobileweb.device.aspectHratio+parseInt(c.radius)*b+"px",left:(parseInt(c.frame.x)+8)*a.mobileweb.device.aspectWratio+"px"});a("#"+c.id+"_lblProgress").css({"text-align":"center","font-size":14*b+"px",color:c.fill});c.hidden&&"true"==c.hidden&&a("#"+c.id+"_lblProgress").css({visibility:"hidden"})}d.setProgress(c.value)};d.setProgress=function(b){if(null!=a.utility("getSessionData","progressBarObj",c.id)){var d=a.utility("getSessionData",
"progressBarObj",c.id);d=a.parseJSON(d);a.mobileweb.getCurrentPage().getName()==d.page_name&&c.id==d.u_id&&(b=d.targetValue)}d=a.mobileweb.device.aspectratio;if("bar"==c.style)b=c.frame.width*a.mobileweb.device.aspectWratio*100*b/100,a("#"+c.id).children("div").css({width:b+"px"});else if("circle"==c.style&&0!=b){var f=document.getElementById(c.id+"_canvas");null!=f&&(f=f.getContext("2d"),f.beginPath(),1==b?f.arc(c.radius*d,c.radius*d,(c.radius-4)*d,0*Math.PI,2*Math.PI):f.arc(c.radius*d,c.radius*
d,(c.radius-4)*d,1.5*Math.PI,(2*b-.5)*Math.PI),f.strokeStyle=a.attributes("color",c.fill).getColorCode(),f.lineWidth=8*d,f.stroke());b=parseInt(100*b)+"%";a("#"+c.id+"_lblProgress").html(b)}};d.setValue=function(b){if(null!=a.utility("getSessionData","progressBarObj",c.id)){var d=a.utility("getSessionData","progressBarObj",c.id);d=a.parseJSON(d);a.mobileweb.getCurrentPage().getName()==d.page_name&&c.id==d.u_id&&(b=d.targetValue)}d=a.mobileweb.device.aspectratio;if("bar"==c.style)b=c.frame.width*a.mobileweb.device.aspectWratio*
100*b/100,a("#"+c.id).children("div").css({width:b+"px"});else if("circle"==c.style&&0!=b){var f=document.getElementById(c.id+"_canvas");null!=f&&(f=f.getContext("2d"),f.beginPath(),1==b?f.arc(c.radius*d,c.radius*d,(c.radius-4)*d,0*Math.PI,2*Math.PI):f.arc(c.radius*d,c.radius*d,(c.radius-4)*d,1.5*Math.PI,(2*b-.5)*Math.PI),f.strokeStyle=a.attributes("color",c.fill).getColorCode(),f.lineWidth=8*d,f.stroke());b=parseInt(100*b)+"%";a("#"+c.id+"_lblProgress").html(b)}};d.getValue=function(){return c.value};
d.applyEvents=function(){};return d}function A(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};f.getHTML=function(){var f="";"black"==c.barStyle?f="data-theme=a":"blue"==c.barStyle?f="data-theme=b":"silver"==c.barStyle?f="data-theme=c":"white"==c.barStyle&&(f="data-theme=d");c.value&&(c.value=a.utility("spaceInStringConversion",c.value),c.value=void 0!=d?a.utility("convertSpecialCharacter",a.utility("tokenizeString",c.value,b)):a.utility("convertSpecialCharacter",a.utility("tokenizeString",
c.value)));return["<div data-role='fieldcontain' id ='"+c.id+"' > <input type= '"+c.type+"'   id ='"+c.id+"' name ='"+c.name+"' value='"+c.value+"'  placeholder='"+c.placeholder+"' tabindex='"+c.taborder+"' barStyle='"+c.barStyle+"' "+f+" ></div>"]};f.applyOverrides=function(){f.frame.applyCSS();c.hidden&&a("#"+c.id).css({visibility:"hidden"});var b=0;0!=c.border.borderweight&&(b=c.border.borderweight*a.mobileweb.device.aspectHratio);a("#"+c.id+".ui-field-contain").css({margin:"0px",padding:"0px",
"border-width":"0px"});a("#"+c.id+" div").css({overflow:"hidden",height:c.frame.height*a.mobileweb.device.aspectHratio+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px"});a("#"+c.id+".ui-input-text").css({color:a.attributes("color",c.font.color).getColorCode(),"text-shadow":"none","word-break":"break-word"});a("#"+c.id+".ui-input-text").css({"text-align":c.font.align,"font-family":c.font.fontName,"font-size":parseInt(c.font.size*a.mobileweb.device.aspectratio)+"px"});a("#"+c.id+".ui-input-text").css({height:c.frame.height*
a.mobileweb.device.aspectHratio+"px"});a("#"+c.id+".ui-input-text").css({width:"95%","border-width":"0px","margin-left":"5px"});a("#"+c.id+".ui-input-text").css({"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio});a("#"+c.id+".ui-input-text").css({"padding-top":c.padding.top*a.mobileweb.device.aspectHratio,"padding-bottom":c.padding.bottom*a.mobileweb.device.aspectHratio});a("#"+c.id).find("a").css({padding:"0 0 0 0"});a("#"+
c.id+" div").css({"background-color":"white"});"blue"==c.barStyle&&a("#"+c.id+" div").css({"border-color":" #5393c5"});"black"==c.barStyle?color="#3C3C3C":"silver"==c.barStyle?color="#D8D8D8":"white"==c.barStyle?color="#C4C4C4":"blue"==c.barStyle&&(color="#5A7AAF");a("#"+c.id).find("span").css({"background-color":color});var d=a("<style>#"+c.id+" div.ui-icon-searchfield:after{background-color:"+color+"; }</style>");a("html > head").append(d);c.background&&a("#"+c.id+" div").css({"background-color":a.attributes("color",
c.background).getColorCode()});c.border&&(a("#"+c.id+" div").css({"border-width":b+"px"}),a("#"+c.id+" div").css({"border-color":a.attributes("color",c.border.bordercolor).getColorCode()}));if(void 0!=c.verticalalignment)if(a("#"+c.id+".ui-input-text").css({"vertical-align":c.verticalalignment}),a("#"+c.id+".ui-input-text").css({"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio}),a("#"+c.id).css("height"),b=parseInt(c.frame.height)*
a.mobileweb.device.aspectHratio,d=parseInt(c.font.size)*a.mobileweb.device.aspectHratio,"top"==c.verticalalignment){var g=c.padding.top*a.mobileweb.device.aspectHratio,h=parseInt(b)-parseInt(d)-g;a("#"+c.id+".ui-input-text").css({"padding-top":g});d>b?a("#"+c.id+".ui-input-text").css({"padding-bottom":"0px"}):a("#"+c.id+".ui-input-text").css({"padding-bottom":h});a("#"+c.id+".ui-input-text").css({"margin-top":g+"px","margin-bottom":a("#"+c.id+".ui-input-text").css("padding-bottom")})}else"bottom"==
c.verticalalignment?(h=c.padding.bottom*a.mobileweb.device.aspectHratio,g=parseInt(b)-parseInt(d)-h,a("#"+c.id+".ui-input-text").css({"padding-bottom":h}),d>b?a("#"+c.id+".ui-input-text").css({"padding-top":"0px"}):a("#"+c.id+".ui-input-text").css({"padding-top":g})):(b=b-(c.padding.top+c.padding.bottom)*a.mobileweb.device.aspectHratio+"px",a("#"+c.id+".ui-input-text").css({height:b}),a("#"+c.id+".ui-input-text").css({"padding-top":"0px","padding-bottom":"0px"}),a("#"+c.id+".ui-input-text").css({"margin-top":c.padding.top*
a.mobileweb.device.aspectHratio+"px","margin-bottom":c.padding.bottom*a.mobileweb.device.aspectHratio+"px"}));b=a.utility("getSystemImage","icons-18-white.png","Image");a("#"+c.id).find("span").last().css({"background-image":'url("'+b+'")',height:"18px",width:"18px"});a("#"+c.id).find("span").first().css({height:"100%",padding:"0px"});a("#"+c.id+" > div > a").css({top:"50%","margin-right":"5px","margin-left":"5px","margin-top":"-13px","border-radius":"2em"});/iPhone|iPad|iPod/i.test(navigator.userAgent)&&
(b=parseInt(c.frame.height)-(parseInt(c.padding.top)+parseInt(c.padding.bottom)),parseInt(c.font.size)>b&&(a("#"+c.id+".ui-input-text").css({"font-size":b*a.mobileweb.device.aspectratio+"px"}),a("#"+c.id+".ui-input-text").css({height:"100%","margin-top":"0px","margin-bottom":"0px"})))};f.getValue=function(){return c.value};f.setValue=function(a){c.value=a};f.applyEvents=function(){a("#"+c.id).bind("keyup",function(){c.value=a("#"+c.id+" div > input").val()});if(c.events){c.events.EditingStart&&a("#"+
c.id).click(function(){a("#"+c.id).bind("focusin",function(d){(new a.actions(b,f,c.events.EditingStart.slice())).execute()})});if(c.events.EditingEnd)a("#"+c.id).on("focusout",function(){(new a.actions(b,f,c.events.EditingEnd.slice())).execute()});c.events.TextChanged&&a("#"+c.id).bind("keyup",function(){(new a.actions(b,f,JSON.parse(JSON.stringify(c.events.TextChanged).slice()))).execute()});if(c.events.CancelClick)a("#"+c.id).on("click",".ui-input-clear",function(d){(new a.actions(b,f,c.events.CancelClick.slice())).execute()});
if(c.events.SearchClick)a("#"+c.id).on("click","div.ui-input-search",function(){(new a.actions(b,f,c.events.SearchClick.slice())).execute()})}};return f}function G(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};c.switchValue=c.value;var g="on"===c.value?"selected":"";f.getHTML=function(){if(null!=a.utility("getSessionData","selectObject",c.id)){var b=a.utility("getSessionData","selectObject",c.id);selectObj=a.parseJSON(b);a.mobileweb.getCurrentPage().getName()==selectObj.page_name&&
c.id==selectObj.u_id&&(g="true"==selectObj.select?"selected":"")}return["<div id='",c.id,"' class='containing-element' tabindex='",c.taborder,"'> <select id='",c.id,"' name='",c.name,"' data-role='slider'><option value='false'>Off</option> <option value='true' ",g,">On</option></select></div>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();c.hidden&&a("#"+c.id).css({visibility:"hidden"});f.setSizes(c);""!=c.template&&f.setSelected(a.utility("extractDataFromRecord",d,c.template));if(c.border){var b=
c.border.borderweight*a.mobileweb.device.aspectratio+"px";if("0px"!=b){var g="rgba("+c.border.bordercolor.red+","+c.border.bordercolor.green+","+c.border.bordercolor.blue+","+c.border.bordercolor.alpha+")";a("#"+c.id+" div").first().css({border:b+" solid "+g});a("#"+c.id+" div").first().css({margin:"0px"})}}a("#"+c.id).find("a").css({padding:"0px"})};f.setSizes=function(b){a("#"+b.id).css({height:b.frame.height*a.mobileweb.device.aspectHratio,width:b.frame.width*a.mobileweb.device.aspectWratio});
a(".ui-slider-switch").css({width:"100%",height:"100%"});a(".ui-slider-switch").css({top:b.frame.y*a.mobileweb.device.aspectHratio+"px",position:"static"});a("#"+b.id).find("a").css({height:b.frame.height*a.mobileweb.device.aspectHratio})};f.setSelected=function(d){d=f.parseValue(d);a.utility("setSessionData",{page_name:b.name,u_id:c.id,select:d},"selectObject");if("yes"==c.switchValue||"1"==c.switchValue||"on"==c.switchValue||"true"==c.switchValue)c.switchValue="1";else if("no"==c.switchValue||"0"==
c.switchValue||"off"==c.switchValue||"false"==c.switchValue)c.switchValue="0";c.value=d;a("[name='"+c.name+"']").val(c.value).slider("refresh");c.actionFlag&&(a("[name='"+c.name+"']").trigger("change"),f.resetActionFlag())};f.setActionFlag=function(){c.actionFlag=!0};f.resetActionFlag=function(){c.actionFlag=!1};f.parseValue=function(a){a=a.toLowerCase();switch(a){case "true":case '"true"':return c.switchValue="true";case "false":case '"false"':return c.switchValue="false";case "on":return c.switchValue=
"on","true";case "off":return c.switchValue="off","false";case "1":return c.switchValue="1","true";case "0":return c.switchValue="0","false";case "yes":case '"yes"':return c.switchValue="yes","true";case "no":case '"no"':return c.switchValue="no","false";default:return c.switchValue="false"}};f.getValue=function(){return c.switchValue};f.setValue=function(a){f.setSelected(a)};f.applyEvents=function(){a("#"+c.id).change(function(){void 0!==c.actionFlag&&c.actionFlag||("true"==a("[name='"+c.name+"']").val()?
f.setValue("true"):f.setValue("false"));if(""!=c.template){var b=c.template.toString().toLowerCase();"on"===b||"off"===b?"false"===c.value?c.switchValue="off":c.switchValue="on":"yes"===b||"no"===b?"false"===c.value?c.switchValue="no":c.switchValue="yes":"0"===b||"1"===b?"false"===c.value?c.switchValue="0":c.switchValue="1":"false"===c.value?c.switchValue="false":c.switchValue="true";if("yes"==c.switchValue||"1"==c.switchValue||"on"==c.switchValue||"true"==c.switchValue)c.switchValue="1";else if("no"==
c.switchValue||"0"==c.switchValue||"off"==c.switchValue||"false"==c.switchValue)c.switchValue="0"}});c.events&&(c.events.ValueChanged&&a("[name='"+c.name+"']").bind("change",function(){(new a.actions(b,f,c.events.ValueChanged.slice())).execute()}),c.events.On&&a("[name='"+c.name+"']").bind("change",function(){"true"===a("[name='"+c.name+"']").val()&&(new a.actions(b,f,c.events.On.slice())).execute()}),c.events.Off&&a("[name='"+c.name+"']").bind("change",function(){"true"!=a("[name='"+c.name+"']").val()&&
(new a.actions(b,f,c.events.Off.slice())).execute()}))};return f}function E(b,c){var d=new l(c);d.getTemplate=function(){return c.template};d.getHTML=function(){return["<fieldset id='",c.id,"' ><input type='",c.type,"' id='",c.id,"' height='",c.frame.height,"' width='",c.frame.width,"' name='",c.name,"' src='' data-role='none' tabindex='",c.taborder,"' /></fieldset>"].join("")};d.applyOverrides=function(){d.frame.applyCSS();c.hidden&&a("#"+c.id).css({visibility:"hidden"});d.setLineHeight(c.lineheight);
d.setStyle(c.style);a("input#"+c.id).css({height:"100%",width:"100%"})};d.setLineHeight=function(b){b&&a("#"+c.id).css({"line-height":b+"px"})};d.setStyle=function(b){a("#"+c.id).children();"Add"===b||"add"===b?a("#"+c.id).children().attr("src",a.utility("getSystemImage","add.png",c.viewtype)):"Detail"===b?a("#"+c.id).children().attr("src",a.utility("getSystemImage","detail.png",c.viewtype)):"InfoDark"===b?a("#"+c.id).children().attr("src",a.utility("getSystemImage","infodark.png",c.viewtype)):"InfoLight"===
b?a("#"+c.id).children().attr("src",a.utility("getSystemImage","infolight.png",c.viewtype)):"Back"===b&&(a("#"+c.id).children().attr("src",a.utility("getSystemImage","button1.png",c.viewtype)),a("#"+c.id).children().css({transform:"rotate(180deg)"}))};d.getValue=function(){return""};d.applyEvents=function(){a("#"+c.id).bind("click",function(){(new a.actions(b,d,c.events.Tap.slice())).execute()})};return d}function C(b,c){var d=new l(c);d.getTemplate=function(){return c.template};d.getHTML=function(){return["<div id='",
c.id,"' name='",c.name,"' viewtype='",c.viewtype,"' tabindex='",c.taborder,"'></div>"].join("")};d.applyOverrides=function(){d.frame.applyCSS();if("true"==c.start)d.removeImage(),d.setStyle(c.style),d.setBackgroundSize(c.background_size);else if("true"==c.stop||"false"==c.start&&"false"==c.hideswhenstopped&&"false"==c.start)d.setStillImage(c.style),"true"==c.hideswhenstopped&&a("#"+c.id).css({visibility:"hidden"})};d.removeImage=function(){a("#"+c.id+" img").remove()};d.setStyle=function(b){"Gray"==
b?a("#"+c.id).css({background:"url("+a.utility("getSystemImage","indicator-gray.gif","Indicator")+")"}):a("#"+c.id).css({background:"url("+a.utility("getSystemImage","indicator-white.gif","Indicator")+")"})};d.setBackgroundSize=function(b){a("#"+c.id).css({"background-repeat":"no-repeat","background-size":"contain"});a("#"+c.id).css({left:c.frame.x*a.mobileweb.device.aspectWratio+"px",top:c.frame.y*a.mobileweb.device.aspectHratio+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px",height:c.frame.height*
a.mobileweb.device.aspectHratio+"px"})};d.setStillImage=function(b){if("Gray"==b||"White"==b)a("#"+c.id).css({"background-image":"","background-position":"","background-size":""}),0==a("#"+c.id+">img").length&&(a("#"+c.id).prepend('<img src="'+a.utility("getSystemImage","indicator_ui.png","Indicator")+'" />'),a("#"+c.id+">img").css({left:c.frame.x*a.mobileweb.device.aspectWratio+"px",top:c.frame.y*a.mobileweb.device.aspectHratio+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px",height:c.frame.height*
a.mobileweb.device.aspectHratio+"px"}))};d.getValue=function(){return""};d.applyEvents=function(){};return d}function L(b,c){var d=new l(c);d.getTemplate=function(){return c.template};d.getHTML=function(){return["<fieldset id='",c.id,"' name='",c.name,"' tabindex='",c.taborder,"'><input type='",c.type,"' data-highlight='true' value='",c.value,"' min='",c.min,"' max='",c.max,"' /></fieldset>"].join("")};d.applyOverrides=function(){d.frame.applyCSS();d.setLineHeight(c.lineheight);c.hidden&&a("#"+c.id).css({visibility:"hidden"});
a("[name='"+c.name+"'] .ui-slider-input").hide();a("#"+c.id).css({"padding-top":"0px","padding-bottom":"0px","margin-top":"0px","margin-bottom":"0px",border:"none"});a("#"+c.id).children("div").css({top:"0px",width:(c.frame.width-32)*a.mobileweb.device.aspectWratio+"px"});a("#"+c.id).children("div").css({"margin-top":(c.frame.height*a.mobileweb.device.aspectHratio-a("#"+c.id).children("div").height())/2+"px","margin-left":(c.frame.width*a.mobileweb.device.aspectWratio-a("#"+c.id).children("div").width())/
2+"px"});d.background.setColor();a("#"+c.id+">div").css({background:d.setColorFormat(c.trackcolorgradient)});a("#"+c.id+" .ui-btn-active").css({background:d.setColorFormat(c.trackcolor)});a("#"+c.id+">div>a").css({background:d.setColorFormat(c.thumbcolor)});a("#"+c.id).find("a").css({padding:"0px"});if(null!=a.utility("getSessionData","sliderObj",c.id)){var b=a.utility("getSessionData","sliderObj",c.id);b=a.parseJSON(b);a.mobileweb.getCurrentPage().getName()==b.page_name&&c.id==b.u_id&&(a("#"+b.u_id+
">input").attr("value",b.value),a("#"+b.u_id+">input").slider("refresh"))}};d.setLineHeight=function(b){b&&a("#"+c.id).css({"line-height":b+"px"})};d.setColorFormat=function(a){return"rgb("+a.red+","+a.green+","+a.blue+")"};d.getValue=function(){return c.value};d.setValue=function(a){c.value=a};d.applyEvents=function(){if(c.events&&c.events.SliderValueChange)a("#"+c.id).on("slidestop",function(f){d.setValue(a("[name='"+c.name+"'] .ui-slider-input").attr("value"));(new a.actions(b,d,c.events.SliderValueChange.slice())).execute()})};
d.triggerEvent=function(){c.events.SliderValueChange&&(new a.actions(b,d,c.events.SliderValueChange.slice())).execute()};return d}function Q(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};var g="";"true"==c.hidden&&(g="");var h="autoplay"==g?1:0,k=""===c.label?c.value:a.utility("extractDataFromRecord",d,c.label),m=a.utility("extractDataFromRecord",d,k);"url"===c.source&&-1!=m.indexOf("/")&&-1!=m.indexOf(".")&&(m=m.substring(m.lastIndexOf("/")+1,m.lastIndexOf(".")));f.getHTML=function(){if(c.recorder)return["<div id='",
c.id,"'  name='",c.name,"' val="+h+" scrub=0 class='audioPlayer audioPlayer_theme_",c.style,"'  tabindex='",c.taborder,"'><audio id='",c.id,"' preload='metadata' autobuffer><source src='' ></source></audio><div class='audioPlayer_toggle'><div class='audioPlayer_play audioPlayer_play_",c.style,"'></div><div class='audioPlayer_pause hidden'><div class='audioPlayer_pause_block audioPlayer_pause_block_",c.style,"'></div><div class='audioPlayer_pause_block audioPlayer_pause_block2 audioPlayer_pause_block_",
c.style,"'></div></div></div><label class='audioPlayer_time'>--:--</label><div class='audioPlayer_progressbar audioPlayer_progressbar_",c.style,"'><div class='audioPlayer_progress'></div><div class='audioPlayer_search audioPlayer_indicator_out' onmousedown='return false'><div class='audioPlayer_indicator_out audioPlayer_indicator'></div></div></div><marquee class='audioPlayer_title' behavior=scroll direction='left'>"+m+"</marquee><div id='"+c.id+"_recorder'><img src='images/system/ic_media_off_rec.png'></img></div></div>"].join("");
""!==c.template&&(c.src=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b));g="true"==c.autoplay&&""!=c.src?"autoplay":"";return["<div id='",c.id,"'  name='",c.name,"' val="+h+" scrub=0 class='audioPlayer audioPlayer_theme_",c.style,"'  tabindex='",c.taborder,"'><audio "+g+" id='",c.id,"' preload='metadata' autobuffer><source src='",f.getSound(),"' ></source></audio><div class='audioPlayer_toggle'><div class='audioPlayer_play audioPlayer_play_",c.style,"'></div><div class='audioPlayer_pause hidden'><div class='audioPlayer_pause_block audioPlayer_pause_block_",
c.style,"'></div><div class='audioPlayer_pause_block audioPlayer_pause_block2 audioPlayer_pause_block_",c.style,"'></div></div></div><label class='audioPlayer_time'>--:--</label><div class='audioPlayer_progressbar audioPlayer_progressbar_",c.style,"'><div class='audioPlayer_progress'></div><div class='audioPlayer_search audioPlayer_indicator_out' onmousedown='return false'><div class='audioPlayer_indicator_out audioPlayer_indicator'></div></div></div><marquee class='audioPlayer_title' behavior=scroll direction='left'>"+
m+"</marquee></div>"].join("")};f.getSound=function(){return"url"===c.source?a.utility("tokenizeString",c.src,b):"local"===c.source?"filesystem:"+a.mobileweb.baseurl+"/persistent/"+c.src:a.utility("getSound",a.utility("tokenizeString",c.src,b))};f.applyOverrides=function(){f.frame.applyCSS();m=a.utility("extractDataFromRecord",d,k);var b=a.mobileweb.device.aspectratio;a("#"+c.id).css({"font-size":b*c.frame.height*.4333+"px","border-radius":b*c.frame.height*.1+"px","-webkit-border-radius":b*c.frame.height*
.1+"px","padding-top":"0px","padding-bottom":"0px","margin-top":"0px","margin-bottom":"0px",border:"none"});a("#"+c.id+".ui-slider-input").hide();a("#"+c.id).find(".audioPlayer_play").css({"border-bottom-width":b*c.frame.width/34.111+"px","border-left-width":b*c.frame.width/19.1875+"px","border-top-width":b*c.frame.width/34.111+"px"});a("#"+c.id+"_recorder").css({position:"absolute",left:"90%",top:"25%",width:"10%",height:"50%"});a("#"+c.id+"_recorder img").css({width:"50%",height:"100%"});c.recorder&&
(a("#"+c.id).find(".audioPlayer_pause").addClass("hidden"),a("#"+c.id).find(".audioPlayer_play").addClass("hidden"),a("#"+c.id).find(".audioPlayer_progress").addClass("hidden"),a("#"+c.id).find(".audioPlayer_progressbar").addClass("hidden"),a("#"+c.id+"> marquee").addClass("hidden"),a("#"+c.id+"> marquee").css({width:"20%"}))};f.getValue=function(){return c.src};f.setValue=function(b){c.src="url"===c.source?b:"local"===c.source?"filesystem:"+a.mobileweb.baseurl+"/persistent/"+b:a.utility("getSound",
b);"url"===c.source?-1==b.indexOf("[")&&(b=b.substring(b.lastIndexOf("/")+1,b.lastIndexOf(".")),a("#"+c.id+"> marquee").text(b)):a("#"+c.id+"> marquee").text(b);a("#"+c.id+" audio").attr("src",c.src);audio=a("#"+c.id+" audio").get(0);a("#"+c.id).trigger("loadedmetadata");a("#"+c.id).trigger("timeupdate")};var p=!1,q,n="",M=new WebAudioTrack;new WebAudioTrack;f.applyEvents=function(){function d(b,c,d,f){f.pause();a(c).find(".audioPlayer_progress").css("width",d.offsetX);a(c).find(".audioPlayer_indicator_out").css("left",
d.offsetX-parseInt(a(c).find(".audioPlayer_indicator_out").css("width"))/2);a(c).find(".audioPlayer_indicator").css("left","20%");c=parseFloat(a("#"+b).find(".audioPlayer_progressbar").css("width"))/f.duration;f.currentTime=parseFloat(a("#"+b).find(".audioPlayer_progress").css("width"))/c}function h(b){var c=a("#"+b).get(0);0==a(c).attr("val")?(a(c).attr("val",1),a("#"+b+" audio").get(0).play(),n(b)):(a(c).attr("val",0),a("#"+b+" audio").get(0).pause(),k(b))}function n(b){a("#"+b).find(".audioPlayer_play").addClass("hidden");
a("#"+b).find(".audioPlayer_pause").removeClass("hidden")}function k(b){a("#"+b).find(".audioPlayer_pause").addClass("hidden");a("#"+b).find(".audioPlayer_play").removeClass("hidden")}new (window.AudioContext||window.webkitAudioContext);/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Windows Phone/i.test(navigator.userAgent)&&(g="");"autoplay"==g?n(c.id):k(c.id);"true"==c.hidden&&(a("#"+c.id).css({visibility:"hidden"}),a("#"+c.id+" > Label").css({visibility:"hidden"}),n(c.id),"true"==c.autoplay&&a("#"+
c.id+" audio").get(0).play());var l=a("#"+c.id+" audio").get(0);a("#"+c.id).find(".audioPlayer_toggle").click(function(){h(c.id)});a("#"+c.id).find(".audioPlayer_search").bind("vmousedown",function(b){0==a("#"+c.id).attr("scrub")&&a("#"+c.id).attr("scrub",1)});a("#"+c.id).find(".audioPlayer_search").bind("vmousemove",function(a){a.stopPropagation()});a("#"+c.id).find(".audioPlayer_progressbar").bind("vmousemove",function(b){1==a("#"+c.id).attr("scrub")&&d(c.id,this,b,l)});a("#"+c.id).find(".audioPlayer_progressbar").bind("vmouseup",
function(b){0==a("#"+c.id).attr("scrub")?d(c.id,this,b,l):a("#"+c.id).attr("scrub",0);1==a("#"+c.id).attr("val")&&(n(c.id),l.play())});l.addEventListener("timeupdate",function(b){b=l.duration-l.currentTime;if(!isNaN(b)){var d=b/60,f=Math.floor(d),g=b%60,n=Math.floor(g);10>d&&(d="0"+d,f="0"+f);10>g&&(g="0"+g,n="0"+n);var k=parseFloat(a("#"+c.id).find(".audioPlayer_progressbar").css("width"))/l.duration;a("#"+c.id).find(".audioPlayer_time").text()!=d+":"+g?(a("#"+c.id).find(".audioPlayer_progress").css("width",
k*(Math.floor(l.duration)-b)),a("#"+c.id).find(".audioPlayer_indicator_out").css("left",parseFloat(a("#"+c.id).find(".audioPlayer_progress").css("width"))-parseFloat(a("#"+c.id).find(".audioPlayer_indicator_out").css("width"))/2),a("#"+c.id).find(".audioPlayer_indicator").css("left","20%")):"00:00"==a("#"+c.id).find(".audioPlayer_time").text()&&(h(c.id),l.currentTime=0);a("#"+c.id).find(".audioPlayer_time").text(f+":"+n)}});l.addEventListener("loadedmetadata",function(b){if(!isNaN(d)){var d=Math.floor(l.duration-
l.currentTime);b=Math.floor(d/60);d%=60;10>b&&(b="0"+b);10>d&&(d="0"+d);a("#"+c.id).find(".audioPlayer_time").text(b+":"+d)}});a("#"+c.id+"_recorder").bind("click",function(){p?f.stopRecording():0<c.timeout?(f.startRecording(),q=setTimeout(function(){f.stopRecording()},1E3*parseInt(c.timeout))):f.startRecording()});c.events&&(c.events.OnPlay&&l.addEventListener("play",function(){(new a.actions(b,f,c.events.OnPlay.slice())).execute()},!1),c.events.OnPausePlay&&l.addEventListener("pause",function(){0!=
a("#"+c.id+" audio").get(0).currentTime&&(new a.actions(b,f,c.events.OnPausePlay.slice())).execute()},!1),c.events.StopPlay&&l.addEventListener("pause",function(){0==a("#"+c.id+" audio").get(0).currentTime&&(new a.actions(b,f,c.events.StopPlay.slice())).execute()},!1),c.events.PlayEnd&&l.addEventListener("ended",function(){(new a.actions(b,f,c.events.PlayEnd.slice())).execute()},!1))};f.getRecordingName=function(){return c.recordingName};f.initRecording=function(){p?f.stopRecording():0<c.timeout?
(f.startRecording(),q=setTimeout(function(){f.stopRecording()},1E3*parseInt(c.timeout))):f.startRecording()};f.startRecording=function(){p=!0;c.recording=!0;a("#"+c.id).find(".audioPlayer_pause").addClass("hidden");a("#"+c.id).find(".audioPlayer_play").addClass("hidden");a("#"+c.id).find(".audioPlayer_progress").addClass("hidden");a("#"+c.id).find(".audioPlayer_progressbar").addClass("hidden");a("#"+c.id).find(".audioPlayer_progressbar").addClass("hidden");a("#"+c.id+"> marquee").addClass("hidden");
navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;Context=window.AudioContext||window.webkitAudioContext;context=new Context;navigator.getUserMedia({audio:!0},function(d){a("#"+c.id+" img").attr("src","images/system/ic_media_on_rec.png");var g=0,h=0,n=0,k=(n?9<n?n:"0"+n:"00")+":"+(h?9<h?h:"0"+h:"00")+":"+(9<g?g:"0"+g);a("#"+c.id).find(".audioPlayer_time").text(k);var l=setInterval(function(){p?(g++,60<=g&&(g=0,h++,60<=
h&&(h=0,n++)),k=(n?9<n?n:"0"+n:"00")+":"+(h?9<h?h:"0"+h:"00")+":"+(9<g?g:"0"+g),a("#"+c.id).find(".audioPlayer_time").text(k)):clearInterval(l)},1E3);d=navigator.userAgent.toLowerCase();-1!=d.indexOf("safari")&&(d.indexOf("chrome"),M.startRecording());c.events.startRecord&&(new a.actions(b,f,c.events.startRecord.slice())).execute()},function(a){})};f.stopRecording=function(){if(p||c.recording){context.close();p=!1;c.recording=!1;n=c.value;n=""===a.utility("tokenizeString",a.utility("extractDataFromRecord",
d,c.value),b)?c.name+"_"+(new Date).getTime()+".wav":-1!=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.value),b).toString().indexOf(".wav")?a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.value),b):a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.value),b)+".wav";c.recordingName=n;a("#"+c.id).find(".audioPlayer_play").removeClass("hidden");a("#"+c.id).find(".audioPlayer_progress").removeClass("hidden");a("#"+c.id).find(".audioPlayer_progressbar").removeClass("hidden");
a("#"+c.id+"> marquee").removeClass("hidden");a("#"+c.id+"_recorder img").attr("src","images/system/ic_media_off_rec.png");M.stopRecording();var g=setInterval(function(){clearInterval(g);var d=new FileReader;d.addEventListener("loadend",function(){c.src=d.result.toString();c.value=n;a("#"+c.id+"> marquee").text(n);a("#"+c.id+"> marquee").css({width:"20%"});a("#"+c.id+" audio").attr("src",d.result.toString());audio=a("#"+c.id+" audio").get(0);audio.pause();audio.currentTime=0;setTimeout(function(){a("#"+
c.id+" audio").trigger("loadedmetadata");a("#"+c.id+" audio").trigger("timeupdate")},1E3);clearTimeout(q);c.events.stopRecord&&(new a.actions(b,f,c.events.stopRecord.slice())).execute()});d.readAsDataURL(M.blob)},200)}};return f}function W(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};var g="true"==c.autoplay?"autoplay":"",h="controls"==c.controls?"controls":"",k=!1;f.getHTML=function(){""!==c.template&&(c.src=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),
b));var f="bundle"===c.source.toLowerCase()?a.utility("getVideo",a.utility("tokenizeString",c.src,b)):"remoteFile"===c.source?a.utility("getRemoteImage",a.utility("tokenizeString",c.src,b)):a.utility("tokenizeString",c.src,b);return["<video "+g+" "+h+" disablepictureinpicture controlsList='nodownload' id='",c.id,"' name='",c.name,"' poster='",c.poster,"'playsinline style='background:black;' val=0 scrub=0 data-video-file='",c.data_video_file,"'  ><source src='",f,"' type='",c.type,"' ></source>This video is not supported by your browser.</video>"].join("")};
f.applyOverrides=function(){f.frame.applyCSS();c.hidden&&a("#"+c.id).css({visibility:"hidden"});if("VideoBox"===c.viewtype){var b=a("<style>video::-webkit-media-controls-fullscreen-button{ display:block; }video::-webkit-media-controls-volume-slider{ display:none; }video::-webkit-media-controls-mute-button {display:none;}video::-webkit-media-controls-time-remaining-display{display:none;}video::-webkit-media-controls-current-time-display{display:none;}</style>");a("html > head").append(b)}};f.getValue=
function(){return c.src};f.setValue=function(b){"bundle"===c.source.toLowerCase()?c.src=a.utility("getVideo",b):c.src="remoteFile"===c.source?a.utility("getRemoteImage",b):b;a("#"+c.id).attr("src",c.src);a("#"+c.id+" source").attr("src",c.src)};f.setVideoName=function(a){c.value=a};f.stopPlay=function(){(new a.actions(b,f,c.events.StopPlay.slice())).execute()};f.applyEvents=function(){a("#"+c.id+" source").last().on("error",function(){k||(a("#"+c.id+" source")[0].src=a("video source")[0].src.replace("https",
"http"),a("#"+c.id)[0].load(),a("#"+c.id)[0].play(),k=!0)});a("#"+c.id).bind("tap",function(){});a("#"+c.id).bind("touchend",function(){a("#"+c.id).get(0).hasAttribute("controls")&&(a("#"+c.id).get(0).removeAttribute("controls"),a("#"+c.id).get(0).setAttribute("controls","controls"))});c.events&&(c.events.PlayStarts&&document.getElementById(c.id).addEventListener("play",function(){(new a.actions(b,f,c.events.PlayStarts.slice())).execute()},!1),c.events.OnPlayPause&&document.getElementById(c.id).addEventListener("pause",
function(){0!=document.getElementById(c.id).currentTime&&document.getElementById(c.id).currentTime!=document.getElementById(c.id).duration&&(new a.actions(b,f,c.events.OnPlayPause.slice())).execute()},!1),c.events.StopPlay&&document.getElementById(c.id).addEventListener("stop",function(){(new a.actions(b,f,c.events.StopPlay.slice())).execute()},!1),c.events.PlayEnd&&document.getElementById(c.id).addEventListener("ended",function(){(new a.actions(b,f,c.events.PlayEnd.slice())).execute()},!1))};return f}
function J(b,c,d){var f=new l(c),g="trueOrFalse";c.title&&(c.title=a.utility("convertSpecialCharacter",a.utility("tokenizeString",c.title)));f.getTemplate=function(){return c.template};f.getHTML=function(){return["<fieldset id='",c.id,"' val='",c.state,"'> <input id='",c.id,"' name='",c.name,"' type='",c.type,"' value='",c.value,"' src='",c.value?f.setImage(c.selectedimage):f.setImage(c.nonselectedimage),"' width='",c.frame.width*a.mobileweb.device.aspectWratio,"'px height='",c.frame.height*a.mobileweb.device.aspectHratio,
"'px data-role=none/><label for='",c.id,"'>",c.value?c.selectedtitle:c.title,"</label></fieldset>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();f.font.applyCSS();c.togglevalue=c.value.toString();"true"==c.hidden&&a("#"+c.id).css({visibility:"hidden"});if(c.border){var g=c.border.borderweight+"px";if("0px"!=g){var h="rgba("+c.border.bordercolor.red+","+c.border.bordercolor.green+","+c.border.bordercolor.blue+","+c.border.bordercolor.alpha+")";a("#"+c.id).css({border:g+" solid "+h});a("#"+
c.id).css({margin:"0px"})}}a("#"+c.id+"> input").css({height:"inherit"});g=c.frame.height*a.mobileweb.device.aspectratio+"px";"ImageButton_toggle_on.png"==c.selectedimage&&"ImageButton_toggle_off.png"==c.nonselectedimage&&(g="");a("label[for="+c.id+"]").css({position:"absolute",left:"0px",cursor:"pointer",width:"100%","text-align":f.font.align,"line-height":g});""!==c.template&&(g=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b),f.setValue(g));void 0!=c.selectedtitle&&
""!=c.selectedtitle&&(c.selectedtitle=a.utility("convertSpecialCharacter",a.utility("tokenizeString",c.selectedtitle)));a("label[for="+c.id+"]").css({"text-decoration":c.textDecoration});a("label[for="+c.id+"]").css({"vertical-align":c.verticalalignment});"bottom"==c.verticalalignment?a("label[for="+c.id+"]").css({position:"absolute",top:(c.frame.height-c.padding.bottom-c.font.size*(c.togglevalue.length-c.togglevalue.replace("\n","").length+1))*a.mobileweb.device.aspectHratio+"px",left:"0px"}):"middle"==
c.verticalalignment?a("label[for="+c.id+"]").css({position:"absolute",top:(c.frame.height/2-c.font.size*(c.togglevalue.length-c.togglevalue.replace("\n","").length+1)/2)*a.mobileweb.device.aspectHratio+"px",left:"0px"}):"top"==c.verticalalignment&&a("label[for="+c.id+"]").css({position:"absolute",top:c.padding.top*a.mobileweb.device.aspectHratio+"px",left:"0px"});a("#"+c.id).css({overflow:"hidden","white-space":"nowrap"})};f.applyEvents=function(){a("#"+c.id).off("click").on("click",function(){if(-1!=
c.id.indexOf("-tile-")&&(c.id=this.id,""!==c.template)){var g=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b);f.setValue(g)}c.togglevalue=f.antiValue(c.togglevalue);if("yes"==c.togglevalue||"1"==c.togglevalue||"on"==c.togglevalue||"true"==c.togglevalue)c.togglevalue="1";else if("no"==c.togglevalue||"0"==c.togglevalue||"off"==c.togglevalue||"false"==c.togglevalue)c.togglevalue="0";f.toggle("click")});c.events&&c.events.Tap&&a("#"+c.id).click(function(){(new a.actions(b,
c,c.events.Tap.slice())).execute()})};f.toggle=function(d){if("0"===c.togglevalue||0==c.togglevalue||"false"===c.togglevalue||"off"===c.togglevalue||"no"===c.togglevalue)a("label[for="+c.id+"]").text(c.title),a("input#"+c.id).attr("src",f.setImage(c.nonselectedimage)),void 0!=d&&c.events.Off&&(void 0!=b.data.contents&&(b.data.contents.currentRow="toggle"),(new a.actions(b,f,c.events.Off.slice())).execute()),c.value=!1;else if("1"===c.togglevalue||1==c.togglevalue||"true"===c.togglevalue||"on"===c.togglevalue||
"yes"===c.togglevalue)a("label[for="+c.id+"]").text(c.selectedtitle),a("input#"+c.id).attr("src",f.setImage(c.selectedimage)),void 0!=d&&c.events.On&&(void 0!=b.data.contents&&(b.data.contents.currentRow="toggle"),(new a.actions(b,f,c.events.On.slice())).execute()),c.value=!0};f.antiValue=function(a){if("true"===a)return"false";if("on"===a)return"off";if("1"===a)return"0";if("false"===a)return"true";if("off"===a)return"on";if("0"===a)return"1";if("yes"===a)return"no";if("no"===a)return"yes"};f.parseValue=
function(a){a=a.toLowerCase();switch(a){case "true":case '"true"':return g="trueOrFalse","true";case "false":case '"false"':return g="trueOrFalse","false";case "on":return g="onOrOff","true";case "off":return g="onOrOff","false";case "yes":return g="yesOrNo","true";case "no":return g="yesOrNo","false";case "1":return g="zeroOrOne","true";case "0":return g="zeroOrOne","false";default:return"false"}};f.antiParseValue=function(a){a=a.toLowerCase();switch(g){case "trueOrFalse":return"true"===a?"true":
"false";case "yesOrNo":return"true"===a?"yes":"no";case "onOrOff":return"true"===a?"on":"off";case "zeroOrOne":return"true"===a?"1":"0";default:return"false"}};f.getValueType=function(a){if("true"===a||"false"===a)return"trueOrFalse";if("1"===a||"0"===a)return"zeroOrOne";if("on"===a||"off"===a)return"onOrOff";if("yes"===a||"no"===a)return"yesOrNo"};f.setImage=function(b){return"ImageButton_toggle_on.png"==b||"ImageButton_toggle_off.png"==b?a.utility("getSystemImage",b,"ToggleButton"):a.utility("getImage",
b)};f.setValue=function(a,b){if(""!==a){if(b)if(0==a||"false"===a||"off"===a||"0"===a||"no"===a)c.value=!0;else if(1==a||"true"===a||"on"===a||"1"===a||"yes"===a)c.value=!1;var d=f.parseValue(a);g=f.getValueType(a);c.togglevalue=f.antiParseValue(d);if("yes"==c.togglevalue||"1"==c.togglevalue||"on"==c.togglevalue||"true"==c.togglevalue)c.togglevalue="1";else if("no"==c.togglevalue||"0"==c.togglevalue||"off"==c.togglevalue||"false"==c.togglevalue)c.togglevalue="0";f.toggle(b)}};f.getValue=function(){return c.togglevalue};
return f}function R(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};f.getHTML=function(){var a="",b="100%",d="100%";"."==c.backgroundimage&&(a="display:none;");""!=a&&(d=b="100%");return[" <div id='",c.id,"' class='draggable' name='",c.name,"' tabindex='",c.taborder,"'><img name='backgroundimage' class='draggable' style=' position:absolute;",a,"' width='100%' height='100%' /><img name=foregroundimage class='draggable' width='",b,"' height='",d,"'/></div>"].join("")};f.applyOverrides=
function(){f.frame.applyCSS();"true"==c.hidden&&(a("#"+c.id).css({visibility:"hidden"}),a("#"+c.id).css({display:"none"}));!0===c.draggable&&(a("#"+c.id).addClass("ui-widget-content"),a("#"+c.id).draggable({containment:"parent"}));if(c.border){var b=c.border.borderweight+"px";if("0px"!=b){var d="rgba("+c.border.bordercolor.red+","+c.border.bordercolor.green+","+c.border.bordercolor.blue+","+c.border.bordercolor.alpha+")";a("#"+c.id).css({border:b+" solid "+d});a("#"+c.id).css({margin:"0px"})}}"."!=
c.backgroundimage?a("#"+c.id+'>[name="foregroundimage"]').css({position:"absolute"}):a("#"+c.id+'>[name="foregroundimage"]').css({position:"absolute",left:"0%",top:"0%","z-index":"1"});f.setBackgroundImage(c.backgroundimage);f.setForegroundImage(c.src)};f.setBackgroundImage=function(b){backgroundImage=b;"defaultImage.png"==b||"default-image-button-200x100.png"==b?a("#"+c.id+'>[name="backgroundimage"]').attr("src",a.utility("getSystemImage",b,c.viewtype)):"."==b||""==b?f.setBackgroundImage("default-image-button-200x100.png"):
a("#"+c.id+'>[name="backgroundimage"]').attr("src",a.utility("getImage",b))};f.setForegroundImage=function(g){if(""!=c.template)a("#"+c.id+'>[name="foregroundimage"]').attr("src",a.utility("getImage",a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b))),""===c.template.toString().replace(/\]/g,"").replace(/\[/g,"")&&a("#"+c.id+'>[name="foregroundimage"]').attr("src",a.utility("getImage",g));else if("remotedb"===c.source)a("#"+c.id+'>[name="foregroundimage"]').attr("src",
a.utility("getRemoteImage",g));else if("."==g||""==g||-1!=g.indexOf("[")&&-1!=g.indexOf("]"))if(-1!=g.indexOf("[")&&-1!=g.indexOf("]")){var h=a.utility("extractDataFromRecord",d,g);-1==h.indexOf(".")?a("#"+c.id+'>[name="foregroundimage"]').attr("src",a.utility("getRemoteImage",h)):a("#"+c.id+'>[name="foregroundimage"]').attr("src",a.utility("getImage",h));-1==a.utility("getImage",h).indexOf(".png")&&-1==a.utility("getImage",h).indexOf("base64")&&(_pref=g.split("[")[0],_suff=g.split("[")[1].split("]")[1],
0<_pref.length||0<_suff.length)&&(h+=".png",a("#"+c.id+'>[name="foregroundimage"]').attr("src",a.utility("getImage",h)))}else"."!==backgroundImage&&("defaultImage.png"==backgroundImage||"default-image-button-200x100.png"==backgroundImage?a("#"+c.id+'>[name="foregroundimage"]').attr("src",a.utility("getSystemImage",backgroundImage,c.viewtype)):"."!=backgroundImage&&a("#"+c.id+'>[name="foregroundimage"]').attr("src",a.utility("getImage",backgroundImage)));else"defaultImage.png"==backgroundImage||"default-image-button-200x100.png"==
backgroundImage?-1!=g.indexOf("data:image/png;base64")||-1!=g.indexOf("data:image/jpeg;base64")?(a("#"+c.id+'>[name="backgroundimage"]').attr("src",g),a("#"+c.id+'>[name="foregroundimage"]').attr("src",g)):(a("#"+c.id+'>[name="backgroundimage"]').attr("src",a.utility("getImage",g)),a("#"+c.id+'>[name="foregroundimage"]').attr("src",a.utility("getImage",g))):"."==g||""==g?f.setForegroundImage(c.backgroundimage):-1!=g.indexOf("data:image/png;base64")||-1!=g.indexOf("data:image/jpeg;base64")?a("#"+c.id+
'>[name="foregroundimage"]').attr("src",g):a("#"+c.id+'>[name="foregroundimage"]').attr("src",a.utility("getImage",g))};f.setLineHeight=function(b){b&&a("#"+c.id).css({"line-height":b+"px"})};f.getValue=function(){return""};f.setValue=function(a){c.src=a};f.setSource=function(a){c.source=a};f.applyEvents=function(){a("#"+c.id).bind("mouseout",function(){f.setBackgroundImage(c.backgroundimage);f.setForegroundImage(c.src)});a("#"+c.id).bind("taphold",function(){f.setBackgroundImage(c.backgroundimageontap);
f.setForegroundImage(c.imageontap)});var d=!1;a("#"+c.id).bind("tap",function(g){a("#"+c.id).focus();void 0!=g.stopPropogation&&g.stopPropogation();if(d)d=!1,clearTimeout(alreadyclickedTimeout);else if(d=!0,alreadyclickedTimeout=setTimeout(function(){d=!1;f.setBackgroundImage(c.backgroundimage);f.setForegroundImage(c.src)},300),-1!=c.id.indexOf("-tile-")&&(c.id=this.id),f.setBackgroundImage(c.backgroundimageontap),f.setForegroundImage(c.imageontap),c.events&&c.events.Tap){a.utility("setActionRunningStatus",
!0);var h=[];a.extend(h,c.events.Tap);h=JSON.stringify(h).slice();(new a.actions(b,f,JSON.parse(h))).execute();g.preventDefault()}});if(c.events){c.events.flick&&a("#"+c.id).swipe(function(){(new a.actions(b,f,c.events.flick.slice())).execute()});if(c.events.flickRL)a("#"+c.id).on("swipeleft",function(){(new a.actions(b,f,c.events.flickRL.slice())).execute()});if(c.events.flickLR)a("#"+c.id).on("swiperight",function(){(new a.actions(b,f,c.events.flickLR.slice())).execute()});if(c.events.DragStart)a("#"+
c.id).on("dragstart",function(d){(new a.actions(b,f,c.events.DragStart.slice())).execute()});if(c.events.Drag)a("#"+c.id).on("drag",function(d){(new a.actions(b,f,c.events.Drag.slice())).execute()});if(c.events.DragEnd)a("#"+c.id).on("dragstop",function(d){(new a.actions(b,f,c.events.DragEnd.slice())).execute()})}};return f}function B(b,c,d){function f(b){var c="";"DateAndTime"===b.mode?c=void 0!=b.timeformat&&"24 Hour"==b.timeformat?"<tr><td><div id="+b.id+"_21  role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td><td><div id="+
b.id+"_01 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td><td><div id="+b.id+"_11 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td><td><div id="+b.id+"_31 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td><td><div id="+b.id+"_41 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td></tr><tr><td><input type='text' id="+b.id+"_0 readonly /></td><td><input type='text' id="+
b.id+"_1 readonly /></td><td><input type='text' id="+b.id+"_2 readonly /></td><td><input type='text' id="+b.id+"_3 readonly /></td><td><input type='text' id="+b.id+"_4 readonly /></td></tr><tr><td><div id="+b.id+"_22 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' '>-</div></td><td><div id="+b.id+"_02 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' '>-</div></td><td><div id="+b.id+"_12 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >-</div></td><td><div id="+
b.id+"_32 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' '>-</div></td><td><div id="+b.id+"_42 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' '>-</div></td></tr><tr><td colspan='3' style='background-color:#a7a7a7;'><table width='100%'></table></td></tr>":"<tr><td><div id="+b.id+"_21  role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td><td><div id="+b.id+"_01 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td><td><div id="+
b.id+"_11 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td><td><div id="+b.id+"_31 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td><td><div id="+b.id+"_41 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td><td><div id="+b.id+"_51  role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td></tr><tr><td><input type='text' id="+b.id+"_0 readonly /></td><td><input type='text' id="+
b.id+"_1 readonly /></td><td><input type='text' id="+b.id+"_2 readonly /></td><td><input type='text' id="+b.id+"_3 readonly /></td><td><input type='text' id="+b.id+"_4 readonly /></td><td><input type='text' id="+b.id+"_5 readonly /></td></tr><tr><td><div id="+b.id+"_22 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' '>-</div></td><td><div id="+b.id+"_02 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' '>-</div></td><td><div id="+b.id+"_12 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >-</div></td><td><div id="+
b.id+"_32 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' '>-</div></td><td><div id="+b.id+"_42 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' '>-</div></td><td><div id="+b.id+"_52 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' '>-</div></td><td></tr><tr><td colspan='3' style='background-color:#a7a7a7;'><table width='100%'></table></td></tr>":"Time"===b.mode?a("#"+b.id).mdtimepicker({timeFormat:"hh:mm:ss.000",format:"hh:mm:ss",
theme:"blue",readOnly:!0,hourPadding:!1,clearBtn:!1}):c="<tr><td><div id="+b.id+"_21  role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td><td><div id="+b.id+"_01 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td><td><div id="+b.id+"_11 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >+</div></td></tr><tr><td><input type='text' id="+b.id+"_0 readonly /></td><td><input type='text' id="+b.id+"_1 readonly /></td><td><input type='text' id="+
b.id+"_2 readonly /></td></tr><tr><td><div id="+b.id+"_22 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' '>-</div></td><td><div id="+b.id+"_02 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' '>-</div></td><td><div id="+b.id+"_12 role='main' class='ui-content ui-body-a' data-role='content' data-theme='a' >-</div></td></tr><tr><td colspan='3' style='background-color:#a7a7a7;'><table width='100%'></table></td></tr>";return c}var g=new l(c);g.getTemplate=
function(){return c.template};g.getHTML=function(){c.value&&(c.value=a.utility("spaceInStringConversion",c.value));void 0!=c.current&&""!==c.current&&-1!=c.current.indexOf("[")&&-1!=c.current.indexOf("]")?c.value=a.utility("extractDataFromRecord",d,c.current):c.value=a.utility("tokenizeString",c.current,b);c.current=c.value;if(null!=a.utility("getSessionData","dateSelectedObj",c.id)){var g=a.utility("getSessionData","dateSelectedObj",c.id);g=a.parseJSON(g);a.mobileweb.getCurrentPage().getName()==
g.page_name&&c.id==g.u_id&&(c.current=g.dateSelected)}return"Time"===c.mode?["<input type='text' id='",c.id,"' name='",c.name,"' tabindex='",c.taborder,"'style='width:200px;height:50px;'></div>"].join(""):["<div id='",c.id,"' name='",c.name,"' tabindex='",c.taborder,"'><div class='picker-upper'></div><div class='picker-lower'></div><table class='picker' cellpadding='0' cellspacing='0' >"+f(c)+"</table></div>"].join("")};g.applyOverrides=function(){"true"==c.hidden&&a("#"+c.id).css({visibility:"hidden"});
"Time"===c.mode?(f(c),a("#"+c.id).css({margin:"0px"}),a(".mdtimepicker").css({"background-color":""})):(g.frame.applyCSS(),g.setCss(c))};g.setCss=function(b){if("DateAndTime"===b.mode){var c=85*parseFloat(b.frame.width)/100,d=(b.frame.width*a.mobileweb.device.aspectWratio-c*a.mobileweb.device.aspectWratio)/2-10;var f=void 0!=b.timeformat&&"24 Hour"!=b.timeformat?c/6:c/5;a("#"+b.id+" .ui-content").css({"text-align":"center",width:f*a.mobileweb.device.aspectWratio+"px",padding:"10px 0px",margin:"0px 1px"});
a("#"+b.id+" input").css({"text-align":"center",width:f*a.mobileweb.device.aspectWratio+"px",padding:"0px",height:"22px",margin:"1px"})}else"Time"==b.mode?(c=85*parseFloat(b.frame.width)/100,d=(b.frame.width*a.mobileweb.device.aspectWratio-c*a.mobileweb.device.aspectWratio)/2-6,f=void 0!=b.timeformat&&"24 Hour"!=b.timeformat?c/3:c/2,a("#"+b.id+" .ui-content").css({"text-align":"center",width:f*a.mobileweb.device.aspectWratio+"px",padding:"10px 0px",margin:"0px 1px"}),a("#"+b.id+" input").css({"text-align":"center",
width:f*a.mobileweb.device.aspectWratio+"px",padding:"0px",height:"24px",margin:"1px"})):(c=85*parseFloat(b.frame.width)/100,f=c/3,d=(b.frame.width*a.mobileweb.device.aspectWratio-c*a.mobileweb.device.aspectWratio)/2-6,a("#"+b.id+" .ui-content").css({"text-align":"center",width:f*a.mobileweb.device.aspectWratio+"px",padding:"10px 0px",margin:"0px 2px"}),a("#"+b.id+" input").css({"text-align":"center",width:f*a.mobileweb.device.aspectWratio+"px",padding:"0px",height:"24px",margin:"2px"}));a("#"+b.id+
" .picker").css({position:"absolute",top:"50%","margin-top":"-55px",width:c*a.mobileweb.device.aspectWratio});a("#"+b.id+" .picker").css({left:d})};g.setLeftMargin=function(b){b=200<=c.frame.width&&240>c.frame.width?44:240<=c.frame.width&&280>c.frame.width?38:280<=c.frame.width&&320>c.frame.width?33:30;a("#"+c.id+" .picker").css({"margin-left":"-"+b+"%"})};g.getMode=function(){return c.mode};g.setVisibility=function(b){!1===b?"Time"===c.mode?a("#"+c.id).trigger("timechanged"):a("#"+c.id).css({visibility:"hidden"}):
"Time"===c.mode?a("#"+c.id).trigger("click"):a("#"+c.id).css({visibility:"visible"})};g.getValue=function(){return c.value};g.setValue=function(b){c.value=b;b=a.utility("splitAndReturnDate",b);b.setMonth(b.getMonth()-1);a("#"+c.id+"_0").val(dateFormat(b,"yyyy"));a("#"+c.id+"_1").val(a.datePicker("getMonthName",dateFormat(b,"mmm")));a("#"+c.id+"_2").val(dateFormat(b,"dd"));"DateAndTime"==c.mode&&(a("#"+c.id+"_3").val(dateFormat(b,"hh")),a("#"+c.id+"_4").val(dateFormat(b,"MM")),a("#"+c.id+"_5").val(a.datePicker("getPeriodName",
dateFormat(b,"TT"))))};g.applyEvents=function(){if(c.mode){if("Time"===c.mode&&c.events&&c.events.OnChange)a("#"+c.id).mdtimepicker().on("timechanged",function(d){c.value=a("#"+c.id).val();null!=h&&clearTimeout(h);h=setTimeout(function(){(new a.actions(b,g,c.events.OnChange.slice())).execute()},2E3)});var f=new Date;if("Time"==c.mode){var k=function(){"24 Hour"==c.timeformat?a("#"+c.id+"_0").val(dateFormat(f,"HH")):a("#"+c.id+"_0").val(dateFormat(f,"hh"));a("#"+c.id+"_1").val(dateFormat(f,"MM"));
a("#"+c.id+"_2").val(a.datePicker("getPeriodName",dateFormat(f,"TT")));var b=void 0!=c.timeformat&&"12 Hour"===c.timeformat?a("#"+c.id+"_0").val()+":"+a("#"+c.id+"_1").val()+" "+a("#"+c.id+"_2").val():void 0!=c.timeformat&&"24 Hour"===c.timeformat?a("#"+c.id+"_0").val()+":"+a("#"+c.id+"_1").val():a("#"+c.id+"_0").val()+":"+a("#"+c.id+"_1").val()+" "+a("#"+c.id+"_2").val();c.value=b};""!=c.current&&(f=new Date("October 13, 1975 "+c.current));isNaN(f)&&(f=new Date);void 0!=c.timeformat&&"12 Hour"===
c.timeformat?a("#"+c.id+"_0").val(dateFormat(f,"hh")):a("#"+c.id+"_0").val(dateFormat(f,"HH"));a("#"+c.id+"_1").val(dateFormat(f,"MM"));a("#"+c.id+"_2").val(a.datePicker("getPeriodName",dateFormat(f,"TT")));k();a("#"+c.id+"_01").click(function(){f.setHours(f.getHours()+1);k();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_11").click(function(){f.setMinutes(f.getMinutes()+1);k();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",
b.name,c);g.applyEvent(c)});a("#"+c.id+"_21").click(function(){f.setHours(f.getHours()+12);k();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_02").click(function(){f.setHours(f.getHours()-1);k();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_12").click(function(){f.setMinutes(f.getMinutes()-1);k();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",
b.name,c);g.applyEvent(c)});a("#"+c.id+"_22").click(function(){f.setHours(f.getHours()+12);k();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)})}else if("Date"==c.mode){var l=function(){a("#"+c.id+"_0").val(dateFormat(f,"yyyy"));a("#"+c.id+"_1").val(a.datePicker("getMonthName",dateFormat(f,"mmm")));a("#"+c.id+"_2").val(dateFormat(f,"dd"));var d=a("#"+c.id+"_0").val()+"-"+g.getMonthInNumber(a("#"+c.id+"_1").val())+"-"+a("#"+c.id+"_2").val();c.value=
d;a.utility("setSessionData",{page_name:b.name,u_id:c.id,dateSelected:d},"dateSelectedObj")};f=new Date;if(-1!=c.current.indexOf("[")&&-1!=c.current.indexOf("]")){var m=a.utility("extractDataFromRecord",d,c.current);if("undefined"!=m||11<=m.length)m=m.substr(0,10);"undefined"!=m&&""!=m&&(g.setValue(m),f=a.utility("splitAndReturnDate",g.getValue()),f.setMonth(f.getMonth()-1))}else if(""!=c.current){var n=c.current;m=[];-1!=n.indexOf("-")?m=n.split("-"):-1!=n.indexOf("/")&&(m=n.split("/"));n=m[2];var p=
m[1]-1,q=m[0];f=new Date(q,p,n);if(isNaN(f)||4>m[0].length)f=new Date}else a("#"+c.id+"_0").val(dateFormat(f,"yyyy")),a("#"+c.id+"_1").val(a.datePicker("getMonthName",dateFormat(f,"mmm"))),a("#"+c.id+"_2").val(dateFormat(f,"dd"));l();a("#"+c.id+"_01").click(function(){f.setMonth(f.getMonth()+1);l();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_11").click(function(){f.setDate(f.getDate()+1);l();var c=a(this).get(0).id.split("_")[0];
c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_21").click(function(){f.setYear(f.getFullYear()+1);l();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_02").click(function(){f.setMonth(f.getMonth()-1);l();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_12").click(function(){f.setDate(f.getDate()-1);l();var c=a(this).get(0).id.split("_")[0];
c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_22").click(function(){f.setYear(f.getFullYear()-1);l();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)})}else{var r=function(){a("#"+c.id+"_0").val(dateFormat(f,"yyyy"));a("#"+c.id+"_1").val(a.datePicker("getMonthName",dateFormat(f,"mmm")));a("#"+c.id+"_2").val(dateFormat(f,"dd"));"24 Hour"==c.timeformat?a("#"+c.id+"_3").val(dateFormat(f,"HH")):a("#"+c.id+"_3").val(dateFormat(f,
"hh"));a("#"+c.id+"_4").val(dateFormat(f,"MM"));a("#"+c.id+"_5").val(a.datePicker("getPeriodName",dateFormat(f,"TT")));if(void 0!=c.timeformat&&"12 Hour"===c.timeformat){var b=a("#"+c.id+"_0").val()+"-"+g.getMonthInNumber(a("#"+c.id+"_1").val())+"-"+a("#"+c.id+"_2").val()+" "+a("#"+c.id+"_3").val()+":"+a("#"+c.id+"_4").val()+" "+a("#"+c.id+"_5").val();c.value=b}else void 0!=c.timeformat&&"24 Hour"===c.timeformat&&(b=a("#"+c.id+"_0").val()+"-"+g.getMonthInNumber(a("#"+c.id+"_1").val())+"-"+a("#"+c.id+
"_2").val()+" "+a("#"+c.id+"_3").val()+":"+a("#"+c.id+"_4").val(),c.value=b)};f=new Date;if(-1!=c.current.indexOf("[")&&-1!=c.current.indexOf("]"))m=a.utility("extractDataFromRecord",d,c.current),"undefined"!=m&&""!=m&&(g.setValue(a.utility("extractDataFromRecord",d,c.current)),f=a.utility("splitAndReturnDate",g.getValue()),f.setMonth(f.getMonth()-1));else if(""!=c.current){var U=c.current.split(" "),u=q=p=n=m="",v="";u="";2==U.length?(n=U[0],-1!=n.indexOf("-")?m=n.split("-"):-1!=n.indexOf("/")&&
(m=n.split("/")),n=m[2],p=m[1]-1,q=m[0],u=U[1].split(":"),v=u[0],u=u[1],f=new Date(q,p,n,v,u,0)):(n=U[0],-1!=n.indexOf("-")?m=n.split("-"):-1!=n.indexOf("/")&&(m=n.split("/")),n=m[2],p=m[1]-1,q=m[0],u=U[1].split(":"),v=u[0],u=u[1],f=new Date(c.current));if(isNaN(f)||2>U.length)f=new Date}else a("#"+c.id+"_0").val(dateFormat(f,"yyyy")),a("#"+c.id+"_1").val(a.datePicker("getMonthName",dateFormat(f,"mmm"))),a("#"+c.id+"_2").val(dateFormat(f,"dd")),a("#"+c.id+"_3").val(f.getHours()),a("#"+c.id+"_4").val(f.getMinutes()),
a("#"+c.id+"_5").val(f.getSeconds());r();a("#"+c.id+"_01").click(function(){f.setMonth(f.getMonth()+1);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_11").click(function(){f.setDate(f.getDate()+1);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_21").click(function(){f.setYear(f.getFullYear()+1);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",
b.name,c);g.applyEvent(c)});a("#"+c.id+"_31").click(function(){f.setHours(f.getHours()+1);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_41").click(function(){f.setMinutes(f.getMinutes()+1);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_51").click(function(){f.setHours(f.getHours()+12);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",
b.name,c);g.applyEvent(c)});a("#"+c.id+"_02").click(function(){f.setMonth(f.getMonth()-1);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_12").click(function(){f.setDate(f.getDate()-1);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_22").click(function(){f.setYear(f.getFullYear()-1);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",
b.name,c);g.applyEvent(c)});a("#"+c.id+"_32").click(function(){f.setHours(f.getHours()-1);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_42").click(function(){f.setMinutes(f.getMinutes()-1);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",b.name,c);g.applyEvent(c)});a("#"+c.id+"_52").click(function(){f.setHours(f.getHours()-12);r();var c=a(this).get(0).id.split("_")[0];c=a.utility("getUiID_Object_From_Page",
b.name,c);g.applyEvent(c)})}}};var h=null;g.applyEvent=function(c){c.events&&c.events.OnChange&&(null!=h&&clearTimeout(h),h=setTimeout(function(){(new a.actions(b,g,c.events.OnChange.slice())).execute()},2E3))};g.getMonthInNumber=function(a){for(var b="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),c="1\u6708 2\u6708 3\u6708 4\u6708 5\u6708 6\u6708 7\u6708 8\u6708 9\u6708 10\u6708 11\u6708 12\u6708".split(" "),d=-1,f=0;f<b.length;f++)a===b[f]&&(d=++f,10>d&&(d="0"+d));if(-1==d)for(f in c)a===
c[f]&&(d=++f,10>d&&(d="0"+d));return d};g.putInitialZero=function(a){10>a&&(a="0"+a);return a};return g}function S(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};f.getHTML=function(){return["<div id='",c.id,"' set='false' name='",c.name,"' tabindex='",c.taborder,"'><div class='picker-main'>",f.createPickerItems(c),"</div></div>"].join("")};f.createPickerItems=function(c){for(var g="",h="",k=0;6>=k;k++)if(void 0!==c.picker_items["picker"+k]){var l=c.picker_items["picker"+k];for(var m=
0;m<l.length;m++)l[m]=a.utility("convertSpecialCharacter",a.utility("tokenizeString",l[m],b));var n=c.picker_values["picker"+k];var p=c.picker_items_selected["picker"+k];p=a.utility("convertSpecialCharacter",a.utility("tokenizeString",p,b));if(-1!=p.indexOf("[")&&-1!=p.indexOf("]"))p=a.utility("extractDataFromRecord",d,p).split(",")[k-1],-1!=p.indexOf("[")&&-1!=p.indexOf("]")&&(p=""),h=h+p+",",c.picker_items_selected["picker"+k]=n[m];else for(m=0;m<n.length;m++)n[m]==p&&(h=h+n[m]+",",c.picker_items_selected["picker"+
k]=n[m]);g+=f.createPickerHTML(c,l,n,p,"picker"+k)}h=h.substring(0,h.lastIndexOf(","));f.setValue(h);return g};f.createPickerHTML=function(a,b,c,d,f){for(var g="<div id = '"+a.id+f+"' class='pickerDiv'><div id='scroller' class='scrollerDiv'><table class='pickerTable'><tr><td></td></tr><tr><td></td></tr>",h="",k=0;k<c.length;k++)""!=d&&(h="activeRow"),g=c[k]==d?g+"<tr id='"+a.id+f+"_"+k+"' val='"+c[k]+"' class='"+h+"' style='text-align:center;height:30px;'><td>"+b[k]+"</td></tr>":g+"<tr id='"+a.id+
f+"_"+k+"' val='"+c[k]+"' style='text-align:center;height:30px;'><td>"+b[k]+"</td></tr>";return g+"<tr><td></td></tr><tr><td></td></tr></table></div></div>"};f.applyOverrides=function(){f.frame.applyCSS();"true"==c.hidden&&a("#"+c.id).css({visibility:"hidden"});f.setCSSControlGroupItem(c)};f.setCSSControlGroupItem=function(c){var d=0,g=0;for(h in c.pickers_width)d+=1,g+=c.pickers_width[h];d=(c.frame.width-(g+10*(d-1)))/2*a.mobileweb.device.aspectWratio;for(g=0;6>=g;g++){var h="picker"+(g+1);void 0!==
c.picker_items[h]&&(a("#"+c.id+h).css({overflow:"hidden",top:"20px",position:"absolute",left:d+"px"}),d+=a.mobileweb.device.aspectWratio*(c.pickers_width[h]+10),a("#"+c.id+h+" .scrollerDiv").css({"min-width":c.pickers_width[h]*a.mobileweb.device.aspectWratio+"px","max-width":c.pickers_width[h]*a.mobileweb.device.aspectWratio+"px","max-height":a("#"+c.id).height()-40+"px"}),a("#"+c.id+h+" .pickerTable").css({width:"100%",height:"100%"}),a("#"+c.id+h+" .pickerTable tr").css({"text-align":"center",height:(a("#"+
c.id).height()-40)/5+"px"}))}var k="";a.each(c.picker_items,function(d,g){a.each(g,function(g,h){a("#"+c.id+d+"_"+g).bind("tap",function(){var h=this.rowIndex-2;k="";-1==c.picker_items_selected[d].toString().indexOf("[")&&-1==c.picker_items_selected[d].toString().indexOf("]")&&(c.picker_items_selected[d]=c.picker_values[d][g]);a(this).addClass("activeRow").siblings(".activeRow").removeClass("activeRow");if(""!==a(this).get(0).firstChild.innerHTML){for(var n=0;6>=n;n++)void 0!==c.picker_values["picker"+
n]&&(a(this).get(0).id.charAt(a(this).get(0).id.indexOf("picker")+6),a(this).attr("val"),void 0!==a("#"+c.id+"picker"+n).find(".activeRow").get(0)&&(k=k+a("#"+c.id+"picker"+n).find(".activeRow").attr("val")+","));k=k.substring(0,k.lastIndexOf(","));f.setValue(k);""!==k&&void 0!=c.events.picking&&([].push(c.events.picking[h]),(new a.actions(b,f,c.events.picking.slice())).execute())}})})})};f.getValue=function(){return c.value};f.setValue=function(a){c.value=a};f.triggerEvent=function(){c.events&&c.events.picking&&
(new a.actions(b,f,c.events.picking)).execute()};f.applyEvents=function(){for(var a=0;6>=a;a++)void 0!==c.picker_items["picker"+a]&&f.applyScrollEvents(c.id+"picker"+a)};f.applyScrollEvents=function(b){var c;a("#"+b).on("vmouseover",a("#"+b),function(){if(void 0===c){var d=a("#"+b+" .scrollerDiv").get(0);c=new iScroll(d,{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}})};
return f}function N(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};var g=c.id;f.getHTML=function(){for(var d=c.segment_items,f="<table id='"+c.id+"' name='"+c.name+"' height='"+c.frame.height*a.mobileweb.device.aspectHratio+"px' width='"+c.frame.width*a.mobileweb.device.aspectWratio+"px' tabindex='"+c.taborder+"'><tr>",h=0;h<d.length;h++)f="DBTableViewList"===b.type||"RemoteTableViewList"===b.type?f+"<td sel='false' id='"+g+"-"+d[h].id+"' ,align='center' height='100%' width='"+
c.frame.width*a.mobileweb.device.aspectratio/c.segment_items.length+"px' line-height='100%'>":f+"<td sel='false' id='"+d[h].id+"' ,align='center' height='100%' width='"+c.frame.width*a.mobileweb.device.aspectWratio/c.segment_items.length+"px' line-height='100%'>","TextItem"==d[h].type&&(f+=a.utility("convertSpecialCharacter",a.utility("tokenizeString",d[h].name))),f+="</td>";return[f+"</tr></table>"].join("")};f.applyOverrides=function(){c.hidden&&a("#"+c.id).css({visibility:"hidden"});a("#"+c.id).css({height:c.frame.height*
a.mobileweb.device.aspectHratio+"px"});a("#"+c.id).css({"background-color":"black"});void 0!=c.border&&void 0!=c.border.bordercolor&&a("#"+c.id).css({"background-color":a.attributes("color",c.border.bordercolor).getColorCode()});f.setTableFrame(c.segment_items);f.setFontSize(c.font);var d=a.utility("tokenizeString",c.segmentInitialValue,b),g=!1;a.each(c.segment_items,function(b,c){if(c.selected){var d=f.findItemId(c.name);f.setBgColor(a("#"+d),b,"");f.setValue(c.name);g=!0}});g||void 0!=d&&""!=d&&
a.each(c.segment_items,function(b,h){"TextItem"==h.type&&h.name==d&&(f.setBgColor(a("#"+h.id),b,""),f.setValue(c.segment_items[b].name),g=!0)})};f.setTableFrame=function(b){a("#"+c.id).css({position:"absolute",top:c.frame.y*a.mobileweb.device.aspectHratio+"px",left:c.frame.x*a.mobileweb.device.aspectWratio+"px"});a("#"+c.id).css({"border-top-right-radius":"10px","moz-border-radius-topright":"10px","webkit-border-top-right-radius":"10px"});a("#"+c.id).css({"border-top-left-radius":"10px","moz-border-radius-topleft":"10px",
"webkit-border-top-left-radius":"10px"});a("#"+c.id).css({"border-bottom-right-radius":"10px","moz-border-radius-bottomright":"10px","webkit-border-bottom-right-radius":"10px"});a("#"+c.id).css({"border-bottom-left-radius":"10px","moz-border-radius-bottomleft":"10px","webkit-border-bottom-left-radius":"10px"});a("#"+c.id).css({"border-spacing":"1px"});a("#"+c.id).css({filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation="+c.frame.rotation+")","-ms-transform":"rotate("+parseInt(c.frame.rotation)+
"deg)","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation="+c.frame.rotation+")","-moz-transform":"rotate("+ +parseInt(c.frame.rotation)+"deg)","-o-transform":"rotate("+c.frame.rotation+"deg)",transform:"rotate("+parseInt(c.frame.rotation)+"deg)","-webkit-transform":"rotate("+parseInt(c.frame.rotation)+"deg)"});a("#"+c.id).find("td").each(function(){a(this).css({background:"rgba("+c.background.red+","+c.background.green+","+c.background.blue+","+c.background.alpha+")"});a(this).css({"max-width":a(this).attr("width"),
overflow:"hidden","text-overflow":"ellipsis","text-shadow":"none","text-align":"center"})});a("#"+c.id).find("td:first-child").each(function(){a(this).css({"border-bottom-left-radius":"10px","moz-border-radius-bottomleft":"10px","webkit-border-bottom-left-radius":"10px"});a(this).css({"border-top-left-radius":"10px","moz-border-radius-topleft":"10px","webkit-border-top-left-radius":"10px"})});a("#"+c.id).find("td:last-child").each(function(){a(this).css({"border-top-right-radius":"10px","moz-border-radius-topright":"10px",
"webkit-border-top-right-radius":"10px"});a(this).css({"border-bottom-right-radius":"10px","moz-border-radius-bottomright":"10px","webkit-border-bottom-right-radius":"10px"})});for(var d=0;d<b.length;d++)if(c.style&&"Bezeled"==c.style)if(c.id.indexOf("-tile-")){var f="ui-"+c.id.replace("ui-","").replace("tile-","").split("-")[0];a("#"+f+"-"+d).css({"border-style":"groove"});a("#"+c.id).css({"border-spacing":"2px"})}else a("#"+c.id+"-"+d).css({"border-style":"groove"})};f.setFontSize=function(d){d=
c.segment_items;for(var f=0;f<d.length;f++)if("TextItem"==d[f].type)if(a("#"+d[f].id).css({"font-family":d[f].font.fontName}),"Gadget"===c.parentUI)a("#"+d[f].id).css({"font-size":d[f].font.size*a.mobileweb.device.aspectratio+"px",color:a.attributes("color",d[f].font.color).getColorCode()});else if(-1!=c.id.indexOf("tile")){var g=c.id.split("-tile")[0];a("#"+g+"-"+[f]).css({"font-size":d[f].font.size*a.mobileweb.device.aspectratio+"px",color:a.attributes("color",d[f].font.color).getColorCode()})}else a("#"+
c.id+"-"+[f]).css({"font-size":d[f].font.size*a.mobileweb.device.aspectratio+"px",color:a.attributes("color",d[f].font.color).getColorCode()});else"ImageItem"==d[f].type&&("DBTableViewList"===b.type||"RemoteTableViewList"===b.type?(a("#"+c.id+"-"+d[f].id).css({background:'url("'+a.utility("getImage",d[f].src)+'")  no-repeat',"background-size":"contain","background-position":"center"}),a("#"+c.id+"-"+d[f].id).addClass("tempClass")):"Gadget"===c.parentUI?(a("#"+d[f].id).css({background:'url("'+a.utility("getImage",
d[f].src)+'")  no-repeat',"background-size":"contain","background-position":"center"}),a("#"+d[f].id).addClass("tempClass")):(-1!=c.id.indexOf("tile")&&c.id.split("-tile"),a("#"+d[f].id).css({"background-image":'url("'+a.utility("getImage",d[f].src)+'")',"background-size":"contain"}),a("#"+c.id+"-"+d[f].id).addClass("tempClass")));null!=a.utility("getSessionData","segmentSel",c.id)&&(d=a.utility("getSessionData","segmentSel",c.id),segmentSelected=a.parseJSON(d),a.mobileweb.getCurrentPage().getName()==
segmentSelected.page_name&&(d=segmentSelected.index,a("#"+segmentSelected.u_id+"-"+d).css({background:a.attributes("color",c.segment_items[d].onTapTintColor).getColorCode()})))};f.findItemId=function(a){for(var d=c.segment_items,f=0;f<d.length;f++)if("TextItem"===d[f].type&&d[f].name===a)return"DBTableViewList"===b.type||"RemoteTableViewList"===b.type?g+"-"+d[f].id:d[f].id};f.getValue=function(){return void 0!=c.value?c.value:""};f.setValue=function(a){c.value=a;for(var b=c.segment_items,d=0;d<b.length;d++)b[d].selected=
b[d].name==a?!0:!1};f.resetValue=function(){var b=c.segment_items;a("#"+c.id).find("td").each(function(d){b[d].name==c.value&&("TextItem"==b[d].type?(a(this).css({background:""}),a(this).css({"background-color":"rgba("+c.background.red+","+c.background.green+","+c.background.blue+","+c.background.alpha+")"}),a(this).css({color:a.attributes("color",b[d].font.color).getColorCode()})):"ImageItem"==b[d].type&&a(this).css({"background-image":'url("'+a.utility("getImage",c.segment_items[d].src)+'")',"background-size":"contain"}));
b[d].selected=!1;a(this).attr("sel","false")});c.value=""};f.setBgColor=function(b,d,f){var g=b.parent().find("td");if("SetMainValue"===f||"setValue"===f)a("#"+g[d].id).hasClass("tempClass")||(b.attr("id")!=g[d].id?(a("#"+g[d].id).css({background:""}),a("#"+g[d].id).css({"background-color":"rgba("+c.background.red+","+c.background.green+","+c.background.blue+","+c.background.alpha+")"}),"TextItem"==c.segment_items[h].type?a("#"+c.id+"-"+[h]).css({color:a.attributes("color",c.segment_items[h].font.color).getColorCode()}):
"ImageItem"==c.segment_items[h].type&&a("#"+g[d].id).css({"background-image":'url("'+a.utility("getImage",c.segment_items[h].src)+'")',"background-size":"contain"})):"TextItem"==c.segment_items[h].type&&(b.css({background:a.attributes("color",c.segment_items[h].onTapTintColor).getColorCode()}),"Gadget"===c.parentUI?a("#"+c.segment_items[h].id).css({color:a.attributes("color",c.segment_items[h].onTapTextColor).getColorCode()}):-1!=c.id.indexOf("tile")?(d=c.id.split("-tile")[0],a("#"+d+"-"+[h]).css({"font-size":segmentitem[h].font.size*
a.mobileweb.device.aspectratio+"px",color:a.attributes("color",segmentitem[h].font.color).getColorCode()})):a("#"+c.id+"-"+[h]).css({color:a.attributes("color",c.segment_items[h].onTapTextColor).getColorCode()})));else for(var h=0;h<g.length;h++)a("#"+g[h].id).hasClass("tempClass")||(b.attr("id")!=g[h].id?"TextItem"==c.segment_items[h].type?(a("#"+g[h].id).css({background:""}),a("#"+g[h].id).css({"background-color":"rgba("+c.background.red+","+c.background.green+","+c.background.blue+","+c.background.alpha+
")"}),a("#"+c.id+"-"+[h]).css({color:a.attributes("color",c.segment_items[h].font.color).getColorCode()})):"ImageItem"==c.segment_items[h].type&&a("#"+g[h].id).css({"background-image":'url("'+a.utility("getImage",c.segment_items[h].src)+'")',"background-size":"contain"}):"TextItem"==c.segment_items[h].type&&(b.css({background:a.attributes("color",c.segment_items[h].onTapTintColor).getColorCode()}),"Gadget"===c.parentUI?a("#"+c.segment_items[h].id).css({color:a.attributes("color",c.segment_items[h].onTapTextColor).getColorCode()}):
-1!=c.id.indexOf("tile")?(d=c.id.split("-tile")[0],a("#"+d+"-"+[h]).css({"font-size":c.segment_items[h].font.size*a.mobileweb.device.aspectratio+"px",color:a.attributes("color",c.segment_items[h].onTapTextColor).getColorCode()})):a("#"+c.id+"-"+[h]).css({color:a.attributes("color",c.segment_items[h].onTapTextColor).getColorCode()})))};f.resetBgColor=function(b,d,f){var g=b.parent().find("td");"SetMainValue"!==f&&"setValue"!==f||a("#"+g[d].id).hasClass("tempClass")||b.attr("id")!=g[d].id||("TextItem"==
c.segment_items[i].type?(a("#"+g[d].id).css({background:""}),a("#"+g[d].id).css({"background-color":"rgba("+c.background.red+","+c.background.green+","+c.background.blue+","+c.background.alpha+")"})):"ImageItem"==c.segment_items[i].type&&a("#"+g[d].id).css({"background-image":'url("'+a.utility("getImage",c.segment_items[i].src)+'")',"background-size":"contain"}))};f.applyEvents=function(){for(var h=c.segment_items,k=0;k<h.length;k++)"DBTableViewList"===b.type||"RemoteTableViewList"===b.type?(h[k].template&&
""!==h[k].template&&a.utility("extractDataFromRecord",d,h[k].template),a("#"+g+"-"+h[k].id).bind("tap",function(){a("#"+c.id).find("td").each(function(){a(this).attr("sel","false")});a(this).attr("sel","true");var d=a(this).attr("id").substring(a(this).attr("id").lastIndexOf("-")+1);f.setValue(h[d].name);h[d].events.Tap&&(new a.actions(b,f,h[d].events.Tap.slice())).execute();f.setBgColor(a(this),d,"")})):(h[k].template&&""!==h[k].template&&a.utility("extractDataFromRecord",d,h[k].template),a("#"+
h[k].id).bind("tap",function(){a("#"+c.id).find("td").each(function(){a(this).attr("sel","false")});a(this).attr("sel","true");var d=a(this).attr("id").substring(a(this).attr("id").lastIndexOf("-")+1);f.setValue(h[d].name);h[d].events.Tap&&(new a.actions(b,f,h[d].events.Tap.slice())).execute();f.setBgColor(a(this),d,"");d={page_name:b.name,u_id:c.id,segmentSel:a(this).attr("sel"),index:d};a.utility("setSessionData",d,"segmentSel")}))};return f}function V(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};
var g=c.cameraView;f.getHTML=function(){return!navigator.userAgent.match(/android/i)||void 0!=a.browser.chrome&&0!=a.browser.chrome?navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?["<video name="+c.name+" id="+c.id+" width="+c.frame.width+" height = "+c.frame.height+" autoplay muted playsinline></video>"].join(""):["<video name="+c.name+" id="+c.id+" width="+c.frame.width+" height = "+c.frame.height+" autoplay tabindex='"+c.taborder+"'></video>"].join(""):""};f.applyOverrides=function(){function b(a){window.URL=
window.URL||window.webkitURL||window.mozURL||window.msURL;try{void 0!=a&&(h.srcObject=a)}catch(n){h.src=window.URL&&window.URL.createObjectURL(a)||a}}function d(b){f.setCameraErrorFlag(!0);0!=a("body").find("#"+c.id+"_canvas").length||c.hidden||(f.drawCanvas(),a("#"+c.id+"_canvas").attr("width",c.frame.width*a.mobileweb.device.aspectWratio),a("#"+c.id+"_canvas").attr("height",c.frame.height*a.mobileweb.device.aspectHratio),a("#"+c.id+"_canvas").attr("style","top:"+c.frame.y*a.mobileweb.device.aspectHratio+
"px;left:"+c.frame.x*a.mobileweb.device.aspectWratio+"px; position:absolute"))}f.frame.applyCSS();c.hidden&&(a("#"+c.id).css({visibility:"hidden"}),a("#"+c.id+"_canvas").css({visibility:"hidden"}));a("#"+c.id).css({"object-fit":"inherit"});var h=document.getElementById(c.id),k={};void 0!=navigator.mediaDevices&&("undefined"===typeof navigator.mediaDevices.enumerateDevices?a.errorhandler("alertBox","This browser does not support Camera.\n\nTry Chrome."):navigator.mediaDevices.enumerateDevices().then(function(a){a.forEach(function(a){"videoinput"==
a.kind&&"front"===g?k={video:{facingMode:"user"}}:"videoinput"==a.kind&&"rear"===g&&(k={video:{facingMode:{exact:"environment"}}})})}));setTimeout(function(){window.stream&&(h.src=null);if(void 0!=navigator.mediaDevices){if(void 0!=navigator.mediaDevices.getUserMedia){h.srcObject&&h.srcObject.getTracks().forEach(function(a){a.stop()});var g=navigator.mediaDevices.getUserMedia(k);void 0!==g&&g.then(function(a){b(a)}).catch(function(a){d(a)})}}else navigator.getUserMedia?navigator.getUserMedia(k,b,
d):(f.setCameraErrorFlag(!0),0!=a("body").find("#"+c.id+"_canvas").length||c.hidden||(f.drawCanvas(),a("#"+c.id+"_canvas").attr("width",c.frame.width*a.mobileweb.device.aspectWratio),a("#"+c.id+"_canvas").attr("height",c.frame.height*a.mobileweb.device.aspectHratio),a("#"+c.id+"_canvas").attr("style","top:"+c.frame.y*a.mobileweb.device.aspectHratio+"px;left:"+c.frame.x*a.mobileweb.device.aspectWratio+"px; position:absolute")),a("#"+c.id).bind("tap",function(b){a.isEmptyObject(a("#"+c.id+"_camera"))||
(b=document.createElement("input"),b.setAttribute("id",c.id+"_camera"),b.setAttribute("type","file"),b.setAttribute("accept","image/*;capture=camera"),b.setAttribute("width",c.frame.width*a.mobileweb.device.aspectWratio),b.setAttribute("height",c.frame.height*a.mobileweb.device.aspectHratio),b.setAttribute("style","top:"+c.frame.y*a.mobileweb.device.aspectHratio+"px; left:"+c.frame.x*a.mobileweb.device.aspectWratio+"px; visibility: hidden;"),a("#"+c.id).parent().append(b),a("#"+c.id+"_camera").bind("change",
function(b){b=a("#"+c.id+"_camera").get(0).files[0];var d=new FileReader;d.readAsBinaryString(b);d.onload=function(){a("#"+c.id).attr("src","data:image/png;base64,"+window.btoa(d.result))}}));c.hidden&&(a("#"+c.id).css({visibility:"hidden"}),a("#"+c.id+"_canvas").css({visibility:"hidden"}));a("#"+c.id+"_camera").trigger("click")}))},2E3)};f.setSide=function(a){g=a;f.applyOverrides()};f.setValue=function(a){c.value=a};f.getMainValue=function(a){return c.mainValue};f.setMainValue=function(a){c.mainValue=
a;f.setValue(a)};f.getCameraErrorFlag=function(){return c.cameraErrorFlag};f.setCameraErrorFlag=function(a){c.cameraErrorFlag=a};f.drawCanvas=function(){a.errorhandler("alertBox","This device/browser doesn't support camera feature.");var b=document.createElement("img");b.setAttribute("id",c.id+"_canvas");b.setAttribute("src",a.utility("getSystemImage","camera.png",c.viewtype));a("#"+c.id).parent().prepend(b)};f.applyEvents=function(){};f.applyCameraEvents=function(d){c.events&&c.events.OnPicking&&
(new a.actions(b,f,c.events.OnPicking.slice())).execute()};f.pause=function(){};return f}function H(b,c,d){var f=new l(c);f.initialValue=c.initialValue;f.getTemplate=function(){return c.template};a.utility("isReverseTransition")?void 0==b.comboBoxData&&(b.comboBoxData={}):b.comboBoxData={};var g=c.dbparams.where;f.getHTML=function(){c.taborder=parseInt(c.taborder)+1;return["<fieldset id ='"+c.id+"'> <select  id = '"+c.id+"_select' name ='"+c.name+"' tabindex='"+c.taborder+"' data-corners = false data-native-menu = true>",
f.addItem(c),"</select></fieldset>"].join("")};var h="";f.addItem=function(c){h="";if("DB"===c.type)void 0!=c.dbparams.servicename&&""!=c.dbparams.servicename?f.getRemoteDBData(c.dbparams):f.getLocalDBData(c.dbparams);else{var d=a.utility("tokenizeString",c.initialValue,b);a.utility("isReverseTransition")?(d=c.value,a.each(c.combo_options.optionsValue,function(a,b){if(a==d-1||b==d)c.selectedindex=a})):a.each(c.combo_options.optionsValue,function(a,b){if(a==d-1||b==d)c.selectedindex=a});""==d&&(c.selectedindex=
-1);for(var g=0;g<c.combo_options.optionsValue.length;g++)c.combo_options.optionsValue[g]=a.utility("convertSpecialCharacter",a.utility("tokenizeString",c.combo_options.optionsValue[g])),g==c.selectedindex?(c.value=c.combo_options.optionsID[g],h+='<option value="'+c.combo_options.optionsID[g]+'" selected>'+c.combo_options.optionsValue[g]+"</option>"):h+='<option value="'+c.combo_options.optionsID[g]+'">'+c.combo_options.optionsValue[g]+"</option>";return h}};f.getRemoteDBData=function(d){var f=d.fieldname.replace("[",
"").replace("]","");b.comboBoxData[c.id]={isLoaded:!1};c.combo_options={optionsValue:[],optionsID:[]};var h=800;a.utility("isReverseTransition")?h=0:(new a.actions(b,null,[{method:"Select",category:"ComAction",callingMethod:"{'uiobject':{'ui':'comboBox','id':'"+c.id+"','fieldname':'"+f+"','displayText':'"+d.displayText+"'}}",comboBox:!0,params:{servicename:d.servicename,table:d.tablename,where:a.utility("tokenizeString",g,b),order:a.utility("tokenizeString",d.order,b),fields:f}}].slice())).execute();
var k=setInterval(function(){if(void 0!=a.utility("getComboBoxDataLoadingStatus")[c.id]&&!0===a.utility("getComboBoxDataLoadingStatus")[c.id].loadingStatus){clearInterval(k);var d="",g=a.utility("tokenizeString",c.initialValue,b);c.dbparams.displayText.toString().replace("[","").replace("]","");for(var h=0;h<a.utility("getComboBoxDataLoadingStatus")[c.id].data.length;h++){for(var l="",m=c.dbparams.displayText.toString().split("["),p=0;p<m.length;p++)if(-1<m[p].indexOf("]")){var q=m[p].substring(0,
m[p].indexOf("]"));q=a.utility("getComboBoxDataLoadingStatus")[c.id].data[h][q];var r=m[p].substring(m[p].indexOf("]")+1);l+=q+r}else l+=m[p];c.combo_options.optionsValue[h]=l;c.combo_options.optionsID[h]=a.utility("getComboBoxDataLoadingStatus")[c.id].data[h][f];a.utility("getComboBoxDataLoadingStatus")[c.id].data[h][f]==g?(c.value=a.utility("getComboBoxDataLoadingStatus")[c.id].data[h][f],d+='<option value="'+c.combo_options.optionsID[h]+'" selected>'+c.combo_options.optionsValue[h]+"</option>"):
d+='<option value="'+c.combo_options.optionsID[h]+'">'+c.combo_options.optionsValue[h]+"</option>"}a("#"+c.id+"_select").html(d).selectmenu("refresh")}},h)};f.getLocalDBData=function(d){var f=d.fieldname.replace("[","").replace("]","");a.utility("isReverseTransition")?b.comboBoxData[c.id]={isLoaded:!0}:(b.comboBoxData[c.id]={isLoaded:!1},c.combo_options={optionsValue:[],optionsID:[]});var k=document.getElementById(c.id+"_select");if(void 0!=k)if(0<k.length){for(k=0;k<a("#"+c.id+"_select")[0].length;k++)a("#"+
c.id+"_select")[0].remove(k);a("#"+c.id+"_select")[0].innerHTML=""}else a("#"+c.id+"_select").empty();k=100;a.utility("isReverseTransition")?k=0:(new a.actions(b,null,[{method:"Select",category:"DBAction",comboCallingMethod:"{'uiobject':{'ui':'comboBox','id':'"+c.id+"','fieldname':'"+f+"','displayText':'"+d.displayText+"'}}",comboBox:!0,params:{tablename:d.tablename,where:a.utility("tokenizeString",g,b),order:a.utility("tokenizeString",d.order,b),columns:""}}].slice())).execute();var l=0,n=setInterval(function(){10==
l&&clearInterval(n);if(!a.isEmptyObject(b.comboBoxData)&&void 0!=b.comboBoxData[c.id])if(void 0!=b.comboBoxData[c.id].isLoaded&&b.comboBoxData[c.id].isLoaded){h="";!0===c.refresh&&(c.initialValue=c.combo_options.optionsValue[c.selectedindex],c.refresh=!1);for(var d=a.utility("tokenizeString",c.initialValue,b),f=0;f<c.combo_options.optionsValue.length;f++)h=c.combo_options.optionsID[f]==d?h+('<option value="'+c.combo_options.optionsID[f]+'" selected>'+c.combo_options.optionsValue[f]+"</option>"):h+
('<option value="'+c.combo_options.optionsID[f]+'">'+c.combo_options.optionsValue[f]+"</option>");a("#"+c.id+"_select").html(h).selectmenu("refresh");clearInterval(n)}else l+=1},k)};f.applyOverrides=function(){f.frame.applyCSS();c.hidden&&a("#"+c.id).css({visibility:"hidden"});c.border&&(a("#"+c.id+" div > div").css({"border-width":c.border.borderweight*a.mobileweb.device.aspectratio+"px"}),a("#"+c.id+" div > div").css({"border-color":a.attributes("color",c.border.bordercolor).getColorCode()}));c.background&&
(a("#"+c.id+" .ui-btn-inner").css({"background-color":a.attributes("color",c.background).getColorCode()}),1>c.background.alpha&&a("#"+c.id+" div > div").css({background:"none"}));a("#"+c.id+"_select").css({display:"inline-block"});var b=c.frame.height*a.mobileweb.device.aspectHratio,d=c.frame.width*a.mobileweb.device.aspectWratio,g=c.font.size*a.mobileweb.device.aspectHratio;c.border&&(b-=2*c.border.borderweight*a.mobileweb.device.aspectratio,d-=2*c.border.borderweight*a.mobileweb.device.aspectratio);
a("#"+c.id+" div > div").css({height:b+"px",width:d+"px",margin:"0px"});a("#"+c.id+" div > div > span").css({height:b+"px",width:d+"px","line-height":c.frame.height*a.mobileweb.device.aspectHratio+"px",padding:"0px",border:"0px"});a("#"+c.id+" div > div > span :first-child").css({height:"100%",width:(c.frame.width-(c.padding.left+c.padding.right))*a.mobileweb.device.aspectWratio-40+"px"});a("#"+c.id+" div > div > span :first-child").css({left:c.padding.left*a.mobileweb.device.aspectWratio,right:c.padding.right*
a.mobileweb.device.aspectWratio});a("#"+c.id+" div > div > span :first-child").css({"font-weight":"normal","font-family":c.font.fontName,"font-size":g+"px",color:a.attributes("color",c.font.color).getColorCode()});a("#"+c.id+" div > div > span :first-child").css({"text-align":c.font.align,"vertical-align":c.verticalalignment,"line-height":"normal","text-shadow":"none"});a("#"+c.id+"_select").css({"font-weight":"normal","font-family":c.font.fontName,"font-size":g+"px","padding-left":"10px"});if("system"==
c.font.fontName||"Helvetica Neue"==c.font.fontName)a("#"+c.id+" div > div > span :first-child").css({"font-family":'"source_sans_proregular","Arial","Sans Serif"'}),a("#"+c.id+"_select").css({"font-family":'"source_sans_proregular","Arial","Sans Serif"'});a("#"+c.id+" div > a > span").css({height:c.frame.height*a.mobileweb.device.aspectHratio+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px",padding:"0px"});a("#"+c.id+" div > a > span").css({left:c.padding.left*a.mobileweb.device.aspectWratio,
right:c.padding.right*a.mobileweb.device.aspectWratio});a("#"+c.id+" div > a > span").css({"font-weight":"normal","font-family":c.font.fontName,"font-size":g+"px",color:a.attributes("color",c.font.color).getColorCode()});a("#"+c.id+" div > a > span").css({"text-align":c.font.align,"vertical-align":c.verticalalignment,"line-height":"normal","text-shadow":"none"});c.border&&(a("#"+c.id+"_select-button").css({"border-width":c.border.borderweight+"px","border-radius":c.cornerRadius+"px"}),a("#"+c.id+
"_select-button").css({"border-color":a.attributes("color",c.border.bordercolor).getColorCode()}));void 0!=c.cornerRadius&&(a("#"+c.id+"> div > div").css({"border-radius":c.cornerRadius*a.mobileweb.device.aspectratio+"px"}),a("#"+c.id+"_select-button").css({"border-radius":c.cornerRadius*a.mobileweb.device.aspectratio+"px"}));if(void 0!=c.verticalalignment){d=c.padding.top*a.mobileweb.device.aspectHratio;var h=c.padding.bottom*a.mobileweb.device.aspectHratio;"top"==c.verticalalignment?(parseInt(b),
parseInt(g),a("#"+c.id+" div > div > span :first-child").css({"padding-top":d}),a("#"+c.id+" div > a > span > span").css({"padding-top":d})):"bottom"==c.verticalalignment?(d=parseInt(b)-parseInt(g)-h,a("#"+c.id+" div > div > span :first-child").css({"padding-top":d}),a("#"+c.id+" div > a > span > span").css({"padding-top":d})):(b=(parseFloat(b-(d+h))-parseInt(g))/2,b=b+d-h,a("#"+c.id+" div > div > span :first-child").css({"padding-top":b,"padding-bottom":h}),a("#"+c.id+" div > a > span > span").css({"padding-top":d}),
a("#"+c.id+" div > a > span > span.ui-btn-text").css({"padding-top":b,"padding-bottom":h}))}b=a.utility("getSystemImage","icons-18-white.png","Image");a("#"+c.id+" div > div > span > span").last().css({"background-image":'url("'+b+'")'});a(".ui-icon-arrow-d").css({"background-position":"-217px 50%",right:"12px"})};f.setLineHeight=function(b){b&&a("#"+c.id).css({"line-height":b+"px"})};f.applyEvents=function(){void 0!=c.events&&c.events.OnSelect&&a("#"+c.id+"_select").bind("change",function(){c.value=
a("#"+c.id+" option:selected").attr("value");var d=[];a.extend(d,c.events.OnSelect);d=JSON.stringify(d).slice();(new a.actions(b,f,JSON.parse(d))).execute()});a("#"+c.id).bind("change",function(){var b=a("#"+c.id+" option:selected").attr("value");if("DB"===c.type){for(var d=0;d<c.combo_options.optionsValue.length;d++)c.combo_options.optionsID[d]==b&&(c.initialValue=b);a("body").css({"pointer-events":"auto"})}else for(d=0;d<c.combo_options.optionsValue.length;d++)c.combo_options.optionsID[d]==b&&(c.selectedindex=
d);c.value=a("#"+c.id+" option:selected").attr("value")});a("#"+c.id).focus(function(){a("#"+c.id+"_select").css({border:"none"});a("#"+c.id+"_select").trigger("focus")});-1!=navigator.appVersion.indexOf("Mac")&&a("#"+c.id).bind("tap",function(){a("div.ui-selectmenu").css({visibilty:"none",padding:"0px","border-radius":"0px","border-width":"0px","min-width":"0px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px"});var b=setInterval(function(){clearInterval(b);if(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Windows Phone/i.test(navigator.userAgent)){var d=
parseFloat(a("#"+c.id).css("top"))+parseFloat(a("#"+c.id).css("height"));a("div.ui-popup-container").css({position:"relative",top:d-10,left:parseFloat(a("#"+c.id).css("left"))+"px"})}a("div.ui-popup-container").css({position:"relative"});a("a.ui-link-inherit").css({"font-size":"smaller"});a("div.ui-selectmenu").css({visibilty:"visible"})},10)})};f.setValue=function(b){c.value=b;a("#"+c.id+"_select").val(b).trigger("change")};f.getValue=function(){c.value=a("#"+c.id+" option:selected").attr("value");
return c.value};f.setVisibility=function(b){!0===b?(c.hidden=!1,a("#"+f.getId()).css({visibility:"visible"})):(c.hidden=!0,a("#"+f.getId()).css({visibility:"hidden"}))};f.getDBType=function(){return void 0!=c.dbparams.servicename&&""!=c.dbparams.servicename?"remote":"local"};f.refresh=function(a,b){void 0!=f.initialValue&&f.initialValue!=c.initialValue&&(c.initialValue=f.initialValue);g=a;c.dbparams.order=b;c.refresh=!0;f.addItem(c)};return f}function P(b,c,d){var f=new l(c);f.initialValue=c.initialValue;
f.getTemplate=function(){return c.template};a.utility("isReverseTransition")?void 0==b.comboBoxData&&(b.comboBoxData={}):b.comboBoxData={};var g=c.dbparams.where;f.getHTML=function(){c.taborder=parseInt(c.taborder)+1;return["<input id ='"+c.id+"_input' list = '"+c.id+"' tabindex='"+c.taborder+"' ><datalist  id = '"+c.id+"'name ='"+c.name+"'>",f.addItem(c),"</datalist>"].join("")};var h="";f.addItem=function(c){h="";if("DB"===c.type)void 0!=c.dbparams.servicename&&""!=c.dbparams.servicename?f.getRemoteDBData(c.dbparams):
f.getLocalDBData(c.dbparams);else{var d=a.utility("tokenizeString",c.initialValue,b);""==d?c.selectedindex=-1:a.each(c.combo_options.optionsValue,function(a,b){if(a==d-1||b==d)c.selectedindex=a});for(var g=0;g<c.combo_options.optionsValue.length;g++)c.combo_options.optionsValue[g]=a.utility("convertSpecialCharacter",a.utility("tokenizeString",c.combo_options.optionsValue[g])),g==c.selectedindex?(c.value=c.combo_options.optionsID[g],h+='<option data-value="'+c.combo_options.optionsID[g]+'" selected>'+
c.combo_options.optionsValue[g]+"</option>"):h+='<option data-value="'+c.combo_options.optionsID[g]+'">'+c.combo_options.optionsValue[g]+"</option>";return h}};f.getRemoteDBData=function(d){var f=d.fieldname.replace("[","").replace("]","");b.comboBoxData[c.id]={isLoaded:!1};c.combo_options={optionsValue:[],optionsID:[]};(new a.actions(b,null,[{method:"Select",category:"ComAction",callingMethod:"{'uiobject':{'ui':'comboBox','id':'"+c.id+"','fieldname':'"+f+"','displayText':'"+d.displayText+"'}}",comboBox:!0,
params:{servicename:d.servicename,table:d.tablename,where:a.utility("tokenizeString",g,b),order:a.utility("tokenizeString",d.order,b),fields:f}}].slice())).execute();var k=setInterval(function(){if(void 0!=a.utility("getComboBoxDataLoadingStatus")[c.id]&&!0===a.utility("getComboBoxDataLoadingStatus")[c.id].loadingStatus){clearInterval(k);var d=a.utility("tokenizeString",c.initialValue,b),g="";c.dbparams.displayText.toString().replace("[","").replace("]","");for(var l=0;l<a.utility("getComboBoxDataLoadingStatus")[c.id].data.length;l++){for(var m=
"",p=c.dbparams.displayText.toString().split("["),q=0;q<p.length;q++)if(-1<p[q].indexOf("]")){var r=p[q].substring(0,p[q].indexOf("]"));r=a.utility("getComboBoxDataLoadingStatus")[c.id].data[l][r];var u=p[q].substring(p[q].indexOf("]")+1);m+=r+u}else m+=p[q];c.combo_options.optionsValue[l]=m;c.combo_options.optionsID[l]=a.utility("getComboBoxDataLoadingStatus")[c.id].data[l][f];a.utility("getComboBoxDataLoadingStatus")[c.id].data[l][f]==d?(g='<option data-value="'+c.combo_options.optionsID[l]+'" selected>'+
c.combo_options.optionsValue[l]+"</option>",c.value=c.combo_options.optionsValue[l]):h+='<option data-value="'+c.combo_options.optionsID[l]+'">'+c.combo_options.optionsValue[l]+"</option>"}a("#"+c.id).html(g+h);a("#"+c.id+"_input").val(c.value);a("#"+c.id).val(c.value)}},300)};f.getLocalDBData=function(d){var f=d.fieldname.replace("[","").replace("]","");a.utility("isReverseTransition")?b.comboBoxData[c.id]={isLoaded:!0}:(b.comboBoxData[c.id]={isLoaded:!1},c.combo_options={optionsValue:[],optionsID:[]});
var k=300;a.utility("isReverseTransition")?k=0:(new a.actions(b,null,[{method:"Select",category:"DBAction",comboCallingMethod:"{'uiobject':{'ui':'comboBox','id':'"+c.id+"','fieldname':'"+f+"','displayText':'"+d.displayText+"'}}",comboBox:!0,params:{tablename:d.tablename,where:a.utility("tokenizeString",g,b),order:a.utility("tokenizeString",d.order,b),columns:""}}].slice())).execute();var l=0,n=setInterval(function(){10==l&&clearInterval(n);if(!a.isEmptyObject(b.comboBoxData)&&void 0!=b.comboBoxData[c.id])if(void 0!=
b.comboBoxData[c.id].isLoaded&&b.comboBoxData[c.id].isLoaded){for(var d=a.utility("tokenizeString",c.initialValue,b),f="",g=0;g<c.combo_options.optionsValue.length;g++)c.combo_options.optionsID[g]==d?(c.value=d,a("#"+c.id+"_input").val(c.value),f='<option data-value="'+c.combo_options.optionsID[g]+'" selected>'+c.combo_options.optionsValue[g]+"</option>"):h+='<option data-value="'+c.combo_options.optionsID[g]+'">'+c.combo_options.optionsValue[g]+"</option>";a("#"+c.id).html(f+h);clearInterval(n)}else l+=
1},k)};f.applyOverrides=function(){f.frame.applyCSS();c.hidden&&(a("#"+c.id+"_input").css({visibility:"hidden"}),a("#"+c.id).css({visibility:"hidden"}));c.border&&(a("#"+c.id+"_input").css({"border-width":c.border.borderweight+"px"}),a("#"+c.id+"_input").css({"border-color":a.attributes("color",c.border.bordercolor).getColorCode()}));c.background&&(a("#"+c.id+"_input").css({"background-color":a.attributes("color",c.background).getColorCode()}),1>c.background.alpha&&a("#"+c.id+"_input").css({background:"none"}));
var b=c.frame.height*a.mobileweb.device.aspectHratio,d=c.font.size*a.mobileweb.device.aspectHratio;a("#"+c.id+"_input").css({height:c.frame.height*a.mobileweb.device.aspectHratio+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px",padding:"0px"});a("#"+c.id+"_input").css({left:c.frame.x*a.mobileweb.device.aspectWratio});a("#"+c.id+"_input").css({top:c.frame.y*a.mobileweb.device.aspectHratio,position:"absolute",margin:"0px"});a("#"+c.id+"_input").css({"font-weight":"normal","font-family":c.font.fontName,
"font-size":d+"px",color:a.attributes("color",c.font.color).getColorCode()});a("#"+c.id+"_input").css({"text-align":c.font.align,"vertical-align":c.verticalalignment,"line-height":"normal","text-shadow":"none"});a("#"+c.id+"_input").val(c.value);c.border&&(a("#"+c.id+"_input").css({"border-width":c.border.borderweight+"px"}),a("#"+c.id+"_input").css({"border-color":a.attributes("color",c.border.bordercolor).getColorCode()}));c.padding&&a("#"+c.id+"_input").css({"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,
"padding-top":c.padding.top*a.mobileweb.device.aspectHratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio,"padding-bottom":c.padding.bottom*a.mobileweb.device.aspectHratio});if(void 0!=c.verticalalignment){var g=c.padding.top*a.mobileweb.device.aspectHratio,h=c.padding.bottom*a.mobileweb.device.aspectHratio;"top"==c.verticalalignment?(parseInt(b),parseInt(d),a("#"+c.id+"_input").css({"padding-bottom":parseFloat(b/2)-g})):"bottom"==c.verticalalignment?(parseInt(b),parseInt(d),a("#"+
c.id+"_input").css({"padding-top":parseFloat(b/2)-h})):(a("#"+c.id+"_input").css({"padding-top":g}),a("#"+c.id+"_input").css({"padding-bottom":h}))}void 0!=c.cornerRadius&&a("#"+c.id+"_input").css({"border-radius":c.cornerRadius});"middle"==c.font.align&&a("#"+c.id+"_input").css({"text-align":"center"});"center"==c.font.align?(b=48+c.padding.right*a.mobileweb.device.aspectWratio,a("#"+c.id+"_input").css({"padding-right":b})):"right"==c.font.align&&(b=48+c.padding.right*a.mobileweb.device.aspectWratio+
c.padding.left*a.mobileweb.device.aspectWratio,a("#"+c.id+"_input").css({"padding-right":b}));b=c.frame.height*a.mobileweb.device.aspectHratio+"px";d=c.frame.height*a.mobileweb.device.aspectWratio+"px";g=a.utility("getSystemImage","drop-down-box.png","Image");b=a("<style>input::-webkit-calendar-picker-indicator{color:rgba(255,255,255,0);opacity:1;width:"+d+";max-width:40px;height:"+b+";display:block;background:url("+g+") no-repeat rgba(154,154,154,1);background-size:100% 100%;position:absolute;right:-1px;bottom:0%;top:0%;}</style>");
a("html > head").append(b)};f.setLineHeight=function(b){b&&a("#"+c.id).css({"line-height":b+"px"})};f.applyEvents=function(){a("#"+c.id+"_input").on("input",function(b){b=a(this).val();a("#"+c.id+" > option:selected").attr("selected",!1);for(var d=0;d<a("#"+c.id+" > option").length;d++)a("#"+c.id+" > option")[d].value==b&&a("#"+c.id+" > option")[d].setAttribute("selected",!0);if("DB"===c.type)for(d=0;d<c.combo_options.optionsValue.length;d++)c.combo_options.optionsID[d]===b&&(c.initialValue=b);else for(d=
0;d<c.combo_options.optionsValue.length;d++)c.combo_options.optionsID[d]===b&&(c.selectedindex=d);c.value=a(this).val()});a("#"+c.id+"_input").on("tap",function(b){a("#"+c.id+" > option").on("mouseenter",function(a){});a(this).val();c.value=a(this).val()});if(void 0!=c.events&&c.events.OnSelect)a("#"+c.id+"_input").on("change",function(d){c.value=a(this).val();d=[];a.extend(d,c.events.OnSelect);d=JSON.stringify(d).slice();(new a.actions(b,f,JSON.parse(d))).execute()})};f.setValue=function(b){c.value=
b;a("#"+c.id+"_input").val(b).trigger("input")};f.getValue=function(){c.value=a("#"+c.id+"_input").attr("value");return c.value};f.setVisibility=function(b){!0===b?(c.hidden=!1,a("#"+f.getId()).css({visibility:"visible"})):(c.hidden=!0,a("#"+f.getId()).css({visibility:"hidden"}))};f.refresh=function(a){void 0!=f.initialValue&&f.initialValue!=c.initialValue&&(c.initialValue=f.initialValue);g=a;f.addItem(c)};return f}function t(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};var g=
"",h="";"."!=c.normalImage&&(g=a.utility("getImage",c.normalImage));h="."!=c.selectedImage?a.utility("getImage",c.selectedImage):g;c.value=c.fieldname;f.getHTML=function(){""!==c.fieldname&&(c.value=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.fieldname),b),-1!=c.value.indexOf("[")&&-1!=c.fieldname.indexOf("]")&&(c.value=""));""!==c.displayvalue&&(c.displayvalue=a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.displayvalue),b),-1!=c.displayvalue.indexOf("[")&&-1!=
c.displayvalue.indexOf("]")&&(c.displayvalue=""));c.taborder=-1;return["<fieldset  data-role= 'controlgroup' id='",c.id,"'><input type='radio' name='",c.groupName,"' id='",c.id,"' value='",c.value,"'tabindex='",c.taborder,"'/><label for='",c.id,"'>",c.displayvalue,"</label></fieldset>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();f.font.applyCSS();a("fieldset#"+c.id).css({margin:"0px"});a("[name="+c.groupName+" ]").css({visibility:"hidden"});var d=0;c.border&&(0!=c.border.borderweight&&
(d=c.border.borderweight*a.mobileweb.device.aspectHratio),a("#"+c.id).css({border:d+"px solid","border-radius":"0px"}),a("#"+c.id).css({"border-color":a.attributes("color",c.border.bordercolor).getColorCode()}),a("#"+c.id+" >div >div >label ").css({"border-width":d+"px"}),a("#"+c.id+" >div >div >label ").css({"border-color":a.attributes("color",c.border.bordercolor).getColorCode()}));c.background&&a("#"+c.id).css({"background-color":a.attributes("color",c.background).getColorCode()});a("label[for="+
c.id+"]").css({margin:"0px","text-decoration":c.textDecoration});a("#"+c.id).css({height:c.frame.height*a.mobileweb.device.aspectHratio-2*d+"px",width:c.frame.width*a.mobileweb.device.aspectWratio-2*d+"px"});a("#"+c.id+" >div").css({height:c.frame.height*a.mobileweb.device.aspectHratio-2*d+"px"});a("#"+c.id+" >div >div").css({height:c.frame.height*a.mobileweb.device.aspectHratio-2*d+"px"});a("#"+c.id+" >div >div >label  ").css({"vertical-align":c.verticalalignment});a("#"+c.id+" >div >div >label  ").removeClass("ui-btn");
a("#"+c.id+" >div >div >label  ").removeClass("ui-btn-up-c");a("#"+c.id+" >div >div >label  ").removeClass("ui-btn-hover-c");a("#"+c.id+" >div >div >label  ").addClass("ui-radio-off ");a("#"+c.id+" >div >div >label  ").addClass("ui-icon-radio-off");a("#"+c.id+" >div >div >label >span").css({"border-top":"0px","border-color":""});a("#"+c.id+" >div >div >label >span").css({height:c.frame.height*a.mobileweb.device.aspectHratio-2*d+"px","padding-bottom":"0px"});a("#"+c.id+" >div >div >label >span").css({"text-align":c.font.align,
"font-size":c.font.size*a.mobileweb.device.aspectratio+"px",color:a.attributes("color",c.font.color).getColorCode(),"padding-top":"0px"});a("#"+c.id).css({"text-align":""});if(c.selected){a("input:radio[id="+c.id+"]").attr("checked",!0);a("#"+c.id+"> div > div > label").addClass("ui-icon-radio-on ");a("#"+c.id+"> div > div > label").addClass("ui-radio-on");a("[for="+c.id+"]").find(".ui-icon-radio-off").removeClass("ui-icon-radio-off ").addClass("ui-icon-radio-on");a("#"+c.id).attr("checked","checked");
a("#"+c.id+" >div >div>label>span>span:nth-child(2)").css({"background-color":"black"});var k=!1;for(d=0;d<b.children.length;d++)c.viewType===b.children[d].viewType&&c.groupName===b.children[d].groupName&&(k=!0,b.children[d].groupNameData=c.value,b.children[d].selected=!1);if(!k&&void 0!=b.toolbartop)for(d=0;d<b.toolbartop.children.length;d++)c.viewType===b.toolbartop.children[d].viewType&&c.groupName===b.toolbartop.children[d].groupName&&(k=!0,b.toolbartop.children[d].groupNameData=c.value,b.toolbartop.children[d].selected=
!1);if(!k&&void 0!=b.toolbarbottom)for(d=0;d<b.toolbarbottom.children.length;d++)c.viewType===b.toolbarbottom.children[d].viewType&&c.groupName===b.toolbarbottom.children[d].groupName&&(k=!0,b.toolbarbottom.children[d].groupNameData=c.value,b.toolbarbottom.children[d].selected=!1);c.selected=!0;""!=h?(a("#"+c.id+" >div").css({position:"absolute",top:"0px",left:c.frame.width*a.mobileweb.device.aspectWratio*25/100+"px",width:c.frame.width*a.mobileweb.device.aspectWratio*75/100+"px"}),a("#"+c.id+" >div >div >label>span>span:nth-child(2)").remove(),
a("#"+c.id).append("<img src='"+a.utility("getImage",c.selectedImage)+"' height='"+(c.frame.height-2*c.border.borderweight)*a.mobileweb.device.aspectHratio+"px' width='"+c.frame.width*a.mobileweb.device.aspectWratio*25/100+"px'>")):(a("#"+c.id+" >div").css({top:c.frame.y*a.mobileweb.device.aspectHratio+"px",left:c.frame.x*a.mobileweb.device.aspectWratio+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px"}),a("#"+c.id+" >div >div >label>span>span:nth-child(1)").css({"padding-left":c.padding.left*
a.mobileweb.device.aspectWratio+"px","padding-right":c.padding.right*a.mobileweb.device.aspectWratio+"px","padding-top":c.padding.top*a.mobileweb.device.aspectHratio+"px","padding-bottom":c.padding.bottom*a.mobileweb.device.aspectHratio+"px"}))}else{k=!1;for(d=0;d<=b.data.contents.length;d++)void 0!=b.data.contents[d]&&void 0!=b.data.contents[d][c.groupName]&&(k=!0);k||-1==b.type.indexOf("TableView")||void 0!=b.data.pagedata&&a.each(b.data.pagedata,function(a,b){a==c.groupName&&f.setValue(b)})}"middle"===
c.verticalalignment?(d=c.padding.top*a.mobileweb.device.aspectHratio,d=(c.frame.height*a.mobileweb.device.aspectHratio-d-c.padding.bottom*a.mobileweb.device.aspectHratio-c.font.size*a.mobileweb.device.aspectHratio)/2+d,a("#"+c.id+" >div >div >label>span>span:nth-child(1)").css({top:d})):"top"===c.verticalalignment?a("#"+c.id+" >div >div >label>span>span:nth-child(1)").css({top:c.padding.top*a.mobileweb.device.aspectHratio+"px"}):"bottom"===c.verticalalignment&&a("#"+c.id+" >div >div >label>span>span:nth-child(1)").css({top:(c.frame.height-
c.padding.bottom-c.font.size)*a.mobileweb.device.aspectHratio+"px"});a("#"+c.id+" >div >div >label>span>span:nth-child(2)").css({top:c.frame.height*a.mobileweb.device.aspectHratio/2+"px"});""==g||c.selected?c.selected||(a("#"+c.id+" >div").css({top:c.frame.y*a.mobileweb.device.aspectHratio+"px",left:c.frame.x*a.mobileweb.device.aspectWratio+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px"}),a("#"+c.id+" >div >div >label>span>span:nth-child(1)").css({"padding-left":c.padding.left+"px",
"padding-right":c.padding.right+"px","padding-top":c.padding.top+"px","padding-bottom":c.padding.bottom+"px"})):(a("#"+c.id+" >div").css({position:"absolute",top:"0px",left:c.frame.width*a.mobileweb.device.aspectWratio*25/100+"px",width:c.frame.width*a.mobileweb.device.aspectWratio*75/100+"px"}),a("#"+c.id+" >div >div >label>span>span:nth-child(2)").remove(),a("#"+c.id).append("<img src='"+a.utility("getImage",c.normalImage)+"' height='"+(c.frame.height-2*c.border.borderweight)*a.mobileweb.device.aspectHratio+
"px' width='"+c.frame.width*a.mobileweb.device.aspectWratio*25/100+"px'>"));a("#"+c.id+" >div >div >label >span ").css({"padding-left":"40px","padding-right":c.padding.right*a.mobileweb.device.aspectWratio});d=""==g&&""==h?(c.frame.width-c.padding.left)*a.mobileweb.device.aspectWratio-40:c.frame.width*a.mobileweb.device.aspectWratio*75/100-c.border.borderweight*a.mobileweb.device.aspectWratio+"px";a("#"+c.id+" >div >div >label >span ").css({width:d});if(!c.selected||""!=h&&"."!=h)c.selected||""!=
g&&"."!=g||(a("#"+c.id+" input").css({top:"0px",left:"2px","margin-top":"0px"}),l=setInterval(function(){clearInterval(l);var b=parseInt(a("#"+c.id).css("height"))-0;c.hidden?(a("#"+c.id).css({visibility:"hidden"}),a(".ui-radio input").css({visibility:"hidden"})):(a("#"+c.id).css({visibility:"visible"}),a(".ui-radio input").css({visibility:"visible"}),a("#"+c.id+" input").css({height:b+"px",width:b+"px",visibility:"visible",top:0,bottom:0,left:"2px",right:"2px"}));a("#"+c.id+" >div >div >label >span").css({"padding-left":b+
2+"px"})},100),a("#"+c.id+" >div >div >label >span >span:last-child").css({visibility:"hidden"}));else{a("#"+c.id+" input").css({top:"0px",left:"2px","margin-top":"0px"});var l=setInterval(function(){clearInterval(l);var b=parseInt(a("#"+c.id).css("height"))-0;c.hidden?(a("#"+c.id).css({visibility:"hidden"}),a("input#"+c.id).css({visibility:"hidden"})):(a("input#"+c.id).css({visibility:"visible"}),a("#"+c.id+" input").css({height:b+"px",width:b+"px",visibility:"visible",top:0,bottom:0,left:"2px",
right:"2px"}));a("#"+c.id+" >div >div >label >span").css({"padding-left":b+2+"px"})},200);a("#"+c.id+" >div >div >label >span >span:last-child").css({visibility:"hidden"})}c.hidden?a("#"+c.id).css({visibility:"hidden"}):a(".ui-radio input").css({width:"20px",height:"20px"});a("#"+c.id+" >div >div >label >span").css({width:"75%"})};f.getValue=function(){return c.value};f.setValue=function(d){for(var f=a("[name='"+c.groupName+"']"),k=0;k<f.length;k++)void 0!=f[k]&&void 0!=f[k].id&&(""==g||"."==g?a("input:radio[id="+
f[k].id+"]").removeAttr("checked"):(a("[for="+f[k].id+"]").removeClass("ui-icon-radio-on "),a("[for="+f[k].id+"]").removeClass("ui-radio-on "),a("[for="+f[k].id+"]").addClass("ui-radio-off "),a("input:radio[id="+f[k].id+"]").removeAttr("checked"),a("[for="+f[k].id+"]").find(".ui-icon-radio-on").removeClass("ui-icon-radio-on ").addClass("ui-icon-radio-off"),a("#"+f[k].id+" >div >div>label>span>span:nth-child(2)").css({"background-color":""}),a("#"+f[k].id+"> img").attr("src",g))),d===f[k].value&&(""==
h||"."==h?a("input:radio[id="+f[k].id+"]").attr("checked",!0):(a("input:radio[id="+f[k].id+"]").attr("checked",!0),a("#"+f[k].id+"> div > div > label").addClass("ui-icon-radio-on "),a("#"+f[k].id+"> div > div > label").addClass("ui-radio-on"),a("[for="+f[k].id+"]").find(".ui-icon-radio-off").removeClass("ui-icon-radio-off ").addClass("ui-icon-radio-on"),a("#"+f[k].id).attr("checked","checked"),a("#"+f[k].id+" >div >div>label>span>span:nth-child(2)").css({"background-color":"black"}),a("#"+f[k].id+
"> img").attr("src",h),a("#"+c.id+" >div >div >label >span >span:last-child").css({"background-position":"-721px 50%"})));k={};k[c.groupName]=d;a.utility("updatePageData",b,k);f=!1;for(k=0;k<b.children.length;k++)c.viewType===b.children[k].viewType&&c.groupName===b.children[k].groupName&&(b.children[k].groupNameData=d,b.children[k].selected=!1);if(!f&&void 0!=b.toolbartop)for(k=0;k<b.toolbartop.children.length;k++)c.viewType===b.toolbartop.children[k].viewType&&c.groupName===b.toolbartop.children[k].groupName&&
(f=!0,b.toolbartop.children[k].groupNameData=d,b.toolbartop.children[k].selected=!1);if(!f&&void 0!=b.toolbarbottom)for(k=0;k<b.toolbarbottom.children.length;k++)c.viewType===b.toolbarbottom.children[k].viewType&&c.groupName===b.toolbarbottom.children[k].groupName&&(b.toolbarbottom.children[k].groupNameData=d,b.toolbarbottom.children[k].selected=!1);c.selected=!0};f.applyEvents=function(){a("#"+c.id).bind("change",function(b,d){f.setValue(c.value);a("#"+c.id).trigger("selected")});a("#"+c.id+"> img").bind("click",
function(a,b){f.setValue(c.value)});var d=[];a("[name='"+c.groupName+"']").on("keydown",function(b){a("[name='"+c.groupName+"']").each(function(){(d[this.name]=d[this.name]||[]).push(this)});setTimeout(function(){var a=b.target;a=d[a.name]=d[a.name]||[];var c=a.indexOf(b.target);9===b.keyCode&&(c<a.length-1&&!b.shiftKey?(a[c+1].focus(),f.setValue(a[c+1].value)):0<c&&b.shiftKey&&f.setValue(a[c-1].value))})});a("#"+b.name).on("pageshow",function(d,f){if(!a.utility("getActionRunningStatus")&&a.utility("isInitChildren"))for(d=
0;d<b.data.contents.length;d++)void 0!=b.data.contents[d]&&a.each(b.data.contents[d],function(d,f){if(d===c.groupName)if(-1!=b.type.indexOf("RemoteTable")||-1!=b.type.indexOf("DBTable"))for(d=0;d<b.children[0].group.length;d++)for(var n=0;n<b.children[0].group[d].row.length;n++)for(var k=0;k<b.children[0].group[d].row[n].children.length;k++){var l=b.children[0].group[d].row[n].children[k];c.viewType===l.viewType&&l.groupName===c.groupName&&f===l.value?(l.selected=!0,a("input:radio[id="+l.id+"]").attr("checked",
!0),a("#"+l.id+"> div > div > label").addClass("ui-icon-radio-on "),a("#"+l.id+"> div > div > label").addClass("ui-radio-on"),a("[for="+l.id+"]").find(".ui-icon-radio-off").removeClass("ui-icon-radio-off ").addClass("ui-icon-radio-on"),a("#"+l.id).attr("checked","checked"),a("#"+l.id+" >div >div>label>span>span:nth-child(2)").css({"background-color":"black"}),a("#"+l.id).css({"background-image":'url("'+h+'")',"background-repeat":"no-repeat","background-size":"100% 100%"})):c.viewType===l.viewType&&
l.groupName===c.groupName&&(l.selected=!1,a("[for="+l.id+"]").removeClass("ui-icon-radio-on "),a("[for="+l.id+"]").removeClass("ui-radio-on "),a("[for="+l.id+"]").addClass("ui-radio-off "),a("input:radio[id="+l.id+"]").removeAttr("checked"),a("[for="+l.id+"]").find(".ui-icon-radio-on").removeClass("ui-icon-radio-on ").addClass("ui-icon-radio-off"),a("#"+l.id+" >div >div>label>span>span:nth-child(2)").css({"background-color":""}),a("#"+l.id).css({"background-image":'url("'+g+'")',"background-repeat":"no-repeat",
"background-size":"100% 100%"}));b.children[d].groupNameData=f}else for(d=0;d<b.children.length;d++)c.viewtype===b.children[d].viewtype&&b.children[d].groupName===c.groupName&&f===b.children[d].value&&1==b.children[d].selected?(b.children[d].selected=!0,a("input:radio[id="+b.children[d].id+"]").attr("checked",!0),a("#"+b.children[d].id+"> div > div > label").addClass("ui-icon-radio-on "),a("#"+b.children[d].id+"> div > div > label").addClass("ui-radio-on"),a("[for="+b.children[d].id+"]").find(".ui-icon-radio-off").removeClass("ui-icon-radio-off ").addClass("ui-icon-radio-on"),
a("#"+b.children[d].id).attr("checked","checked"),b.children[d].groupNameData=f,a("#"+b.children[d].id+" >div >div>label>span>span:nth-child(2)").css({"background-color":"black"}),a("#"+b.children[d].id).css({"background-image":'url("'+h+'")',"background-repeat":"no-repeat","background-size":"100% 100%"})):c.viewtype===b.children[d].viewtype&&b.children[d].groupName===c.groupName&&(b.children[d].selected=!1,a("[for="+b.children[d].id+"]").removeClass("ui-icon-radio-on "),a("[for="+b.children[d].id+
"]").removeClass("ui-radio-on "),a("[for="+b.children[d].id+"]").addClass("ui-radio-off "),a("input:radio[id="+b.children[d].id+"]").removeAttr("checked"),a("[for="+b.children[d].id+"]").find(".ui-icon-radio-on").removeClass("ui-icon-radio-on ").addClass("ui-icon-radio-off"),b.children[d].groupNameData=f,a("#"+b.children[d].id+" >div >div>label>span>span:nth-child(2)").css({"background-color":""}),a("#"+b.children[d].id).css({"background-image":'url("'+g+'")',"background-repeat":"no-repeat","background-size":"100% 100%"}))})});
if(c.events&&c.events.selected)a("#"+c.id).on("selected",function(){(new a.actions(b,f,c.events.selected.slice())).execute()})};return f}function F(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};b.spotdetails={};f.getHTML=function(){return[" <div id='",c.id,"' name='",c.name,"' type='",c.type,"' tabindex='",c.taborder,"'></div>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();c.hidden&&a("#"+c.id).css({visibility:"hidden"});b.spotdetails[c.id]={isLoaded:!1};a.GMapService("createGoogleMap",
b,c,d)};f.getValue=function(){var d=new google.maps.Map(a.utility("getUiFromObject",b.name,c.name)[0],mapParameters);(new google.maps.Geocoder).geocode({latLng:d.getCenter()},function(b,d){"OK"==d?c.value=b[0].formatted_address:(a.mobileweb.__ERR_CODE__=d,a.GMapService("setMapErrorMessage",d))});return c.value};f.setValue=function(a){c.value=a};f.applyEvents=function(){};return f}function r(b,c,d){for(var f=new l(c),g=[],h=0;h<c.dataArray.length;h++)for(var k=0;k<c.children.length;k++)c.dataArray[h].name===
c.children[k].name&&("text"===c.dataArray[h].property?c.dataArray[h].property="value":"inputFormat"===c.dataArray[h].property&&(c.dataArray[h].property="inputFormatType"),c.children[k][c.dataArray[h].property]=c.dataArray[h].value);for(h=0;h<c.children.length;h++)c.children[h].parentUIName=c.name,c.children[h].id=c.id+"_"+c.children[h].id,void 0!=c.init||c.init||a.each(c.events,function(b,d){b==c.children[h].name&&a.each(Object.keys(d),function(a,b){void 0===c.children[h].events?(c.children[h].events=
{},c.children[h].events[Object.keys(d)[a]]=[]):void 0===c.children[h].events[Object.keys(d)[a]]&&(c.children[h].events[Object.keys(d)[a]]=[]);if(void 0!=Object.keys(d)[a]&&void 0!=d[Object.keys(d)[a]])for(b=0;b<d[Object.keys(d)[a]].length;b++)c.children[h].events[Object.keys(d)[a]].push(d[Object.keys(d)[a]][b])})}),g.push(new a.uichildren(b,[c.children[h]],d));c.init=!0;f.getGadgetCategory=function(){return c.gadgetCategory};f.getChildren=function(){return g};f.getMainObject=function(){if("2"==f.getGadgetCategory())return f;
var b;a.each(g,function(d,f){a.each(f,function(a,d){if(d.getName()===c.mainObjectName)return b=d,!1})});return b};f.getHTML=function(){var b="";a.each(g,function(c,d){a.each(d,function(a,c){b+=c.getHTML()})});return 2==f.getGadgetCategory()?["<div id=",c.id+"_overlay"," class='overlayUI'><fieldset id=",c.id," name='",c.name,"'>",b,"</fieldset></div>"].join(""):["<fieldset id=",c.id," name='",c.name,"'>",b,"</fieldset>"].join("")};f.applyOverrides=function(){a.each(g,function(b,d){a.each(d,function(b,
d){d.applyOverrides();"true"===c.hidden&&a("#"+d.getId()).css({visibility:"hidden"})})});2==f.getGadgetCategory()?(a("#"+c.id+"_overlay").css({position:"absolute",top:0,left:0,width:"100%",height:b.height*a.mobileweb.device.aspectHratio,"background-color":"rgba(0,0,0,.6)","z-index":999}),a("#"+c.id).css({position:"relative",top:c.frame.y*a.mobileweb.device.aspectHratio,left:c.frame.x*a.mobileweb.device.aspectWratio,width:c.frame.width*a.mobileweb.device.aspectWratio,height:c.frame.height*a.mobileweb.device.aspectHratio})):
(c.border&&(a("#"+c.id).css({"border-width":c.border.borderweight*a.mobileweb.device.aspectHratio+"px","border-style":"solid"}),a("#"+c.id).css({"border-color":"rgba("+c.border.bordercolor.red+","+c.border.bordercolor.green+","+c.border.bordercolor.blue+","+c.border.bordercolor.alpha+")"})),a("#"+c.id).css({position:"relative",background:a.attributes("color",c.background).getColorCode()}),a("#"+c.id).css({top:c.frame.y*a.mobileweb.device.aspectHratio+"px",left:c.frame.x*a.mobileweb.device.aspectWratio+
"px",height:c.frame.height*a.mobileweb.device.aspectHratio+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px"}));"true"===c.hidden?(a("#"+c.id).css({visibility:"hidden"}),2==f.getGadgetCategory()&&a("#"+c.id+"_overlay").css({visibility:"hidden"})):(a("#"+c.id).css({visibility:"visible"}),2==f.getGadgetCategory()&&(a("#"+c.id+"_overlay").css({visibility:"visible"}),c.border&&(a("#"+c.id).css({"border-width":c.border.borderweight*a.mobileweb.device.aspectHratio+"px","border-style":"solid"}),
a("#"+c.id).css({"border-color":"rgba("+c.border.bordercolor.red+","+c.border.bordercolor.green+","+c.border.bordercolor.blue+","+c.border.bordercolor.alpha+")"})),c.background&&a("#"+c.id).css({background:a.attributes("color",c.background).getColorCode()})))};f.setVisibility=function(b){"false"!=b?(c.hidden="false",a("#"+f.getId()).css({visibility:"visible"}),2==f.getGadgetCategory()&&a("#"+f.getId()+"_overlay").css({visibility:"visible"}),a.each(c.children,function(b,c){c.hidden="false";a("#"+c.id).css({visibility:"visible"})})):
(c.hidden="true",a("#"+f.getId()).css({visibility:"hidden"}),2==f.getGadgetCategory()&&a("#"+f.getId()+"_overlay").css({visibility:"hidden"}),a.each(c.children,function(b,c){c.hidden="true";a("#"+c.id).css({visibility:"hidden"})}))};f.applyEvents=function(){a.each(g,function(b,c){a.each(c,function(a,b){b.applyEvents()})})};return f}function Y(b,c,d){var f=new l(c);f.getType=function(){return c.type};f.getTitle=function(){return c.title};f.getLegendStyle=function(){return{position:"bottom",textStyle:{fontSize:12}}};
var g,h,k=[];f.setData=function(){g=c.dbparams.itemField.replace("[","").replace("]","");h=c.dbparams.valueField.replace("[","").replace("]","");""==c.dbparams.servicename&&a.mobileweb.localdb.instance.transaction(function(a){a.executeSql(["SELECT "+g+", "+h+" FROM "+c.dbparams.tablename+";"].join(""),[],function(a,b){a=[];for(var c=0;c<b.rows.length;c++){var d={};for(key in b.rows.item(c))key===g?d.item=b.rows.item(c)[key]:d.value=b.rows.item(c)[key];a.push(d)}d=a.length;for(c=0;c<d;c++)b=[],b.push(a[c].item),
b.push(a[c].value),k.push(b);f.setValue()},function(a,b){console.log("Error in the Query..")})})};f.getData=function(){for(var a=[],b=0;b<k.length;b++)a.push(k[b]);return a};f.setValue=function(){void 0!=google.charts?(google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){var b=document.getElementById(c.id),d=f.getData(),k=new google.visualization.DataTable;k.addColumn("string",g);k.addColumn("number",h);k.addRows(d);"pie"==f.getType().toLowerCase()?(d=
{title:f.getTitle(),titleTextStyle:{color:0,fontSize:16},legend:f.getLegendStyle(),chartArea:{left:40,right:40,top:40,bottom:80}},(new google.visualization.PieChart(b)).draw(k,d)):"column"==f.getType().toLowerCase()?(d={title:f.getTitle(),titleTextStyle:{color:0,fontSize:16},legend:f.getLegendStyle(),chartArea:{left:40,right:40,top:40,bottom:80}},(new google.visualization.ColumnChart(b)).draw(k,d)):"bar"==f.getType().toLowerCase()?(d={title:f.getTitle(),titleTextStyle:{color:0,fontSize:16},legend:f.getLegendStyle(),
chartArea:{left:80,right:40,top:40,bottom:80}},(new google.visualization.BarChart(b)).draw(k,d)):"line"==f.getType().toLowerCase()&&(b={title:f.getTitle(),titleTextStyle:{color:0,fontSize:16},legend:f.getLegendStyle(),chartArea:{left:80,right:80,top:80,bottom:80},hAxis:{title:g,minValue:0,baselineColor:"#333333",gridlines:{color:"#9f9f9f"}},vAxis:{title:h,minValue:0,baselineColor:"#333333",gridlines:{color:"#9f9f9f"}},backgroundColor:"#ffffff"},(new google.visualization.LineChart(document.getElementById(c.id))).draw(k,
b),a("text:contains("+b.title+")").attr({y:"25"}))})):console.log("google.charts API not working")};f.getHTML=function(){return["<div id='",c.id,"' name='",c.name,"'></div>"].join("")};f.applyOverrides=function(){a("#"+c.id).css({position:"absolute",left:c.frame.x*a.mobileweb.device.aspectratio+"px",top:c.frame.y*a.mobileweb.device.aspectratio+"px",width:c.frame.width*a.mobileweb.device.aspectratio+"px",height:c.frame.height*a.mobileweb.device.aspectratio+"px"});"true"==c.hidden&&a("#"+c.id).css({visibility:"hidden"});
f.setData()};f.applyEvents=function(){};return f}function T(b,c,d){var f=new l(c);f.getTemplate=function(){return c.template};f.getHTML=function(){a.utility("isReverseTransition")||(c.dbparams.offset=25,c.dbparams.limit=25);var d,f=[];a.each(c.dataArray,function(g,h){g=parseInt(h.rowCount)*parseInt(h.columnCount);for(var n=0;n<g;n++)a.each(h.children,function(a,b){-1!=b.id.indexOf("-tile-")&&(b.id=b.id.substring(0,b.id.indexOf("-tile-")));childid=b.id+"-tile-"+n;b.id=childid}),d=new a.uichildren(b,
h.children,null),f=f.concat(["<div id=",c.id,"-tileblocks-",n,""," class=","tileblocks"," style='visibility:hidden'>"]),f=f.concat(" "+d.getHTML()),f=f.concat(["</div>"])});return c.dbparams.isPagination?["<div id=",c.id," name='",c.name,"'><div id=",c.id,"-pagination></div>",f.join(""),"</div>"].join(""):["<div id=",c.id," name='",c.name,"'>",f.join(""),"</div>"].join("")};f.applyOverrides=function(){if("Vertical"==c.direction){var b=c.frame.height*a.mobileweb.device.aspectHratio+"px";a("#"+c.id).css({height:b,
width:c.frame.width*a.mobileweb.device.aspectWratio+"px"})}else a("#"+c.id).css({height:c.frame.height*a.mobileweb.device.aspectHratio+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px"});a("#"+c.id).css({top:c.frame.y*a.mobileweb.device.aspectHratio+"px",left:c.frame.x*a.mobileweb.device.aspectWratio+"px",position:"absolute"});a("#"+c.id).css({background:a.attributes("color",c.background).getColorCode()});a("#"+c.id).addClass("table");1==c.hidden&&f.setVisibility(!1);f.refresh(c.dbparams.where);
if("Vertical"!=c.direction){var d=-1,g=parseInt(c.dataArray[0].rowCount)*parseInt(c.dataArray[0].columnCount);a("#"+c.id).off("swipeleft").on("swipeleft",function(a){void 0!=f.getRecords()&&(c.swipe="left",a=Math.ceil(parseFloat(f.getRecords().length/g)),-1==d&&(d=0),0!=d?(d--,a=d*g+1,f.updateData(a)):0==d&&c.circular&&(d=a-1,a=d*g+1,f.updateData(a)))});a("#"+c.id).off("swiperight").on("swiperight",function(a){void 0!=f.getRecords()&&(c.swipe="right",a=Math.ceil(parseFloat(f.getRecords().length/g)),
-1==d&&(d=0),d!=a-1?(d++,a=d*g+1,f.updateData(a)):d==a-1&&c.circular&&(d=0,a=d*g+1,f.updateData(a)))})}};f.updateData=function(d){var g=f.getRecords().length,h=parseInt(c.dataArray[0].rowCount)*parseInt(c.dataArray[0].columnCount),k=Math.ceil(parseFloat(g/h)),n=37*a.mobileweb.device.aspectHratio;if(c.dbparams.isPagination){a("#"+c.id+"-pagination").empty();a("#"+c.id+"> div").first().css({bottom:"0px",height:n+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px"});a("#"+c.id+"> div").first().css({"text-align":"center",
position:"absolute"});for(var l=1;l<=k;l++)a("#"+c.id+"> div").first().append(["<span id = ",l," class=dot></span>"].join("")),a("#"+c.id+"> div > span:nth-child("+l+")").css({cursor:"auto"}),l-1==Math.floor(d/h)&&a("#"+c.id+"> div > span:nth-child("+l+")").css({"background-color":"#eee"})}else"Vertical"==c.direction&&25<=g&&a("#showmore").css({visibility:"hidden"});"Vertical"==c.direction&&(h*=k);a("#"+c.id).children(".tileblocks").css({display:"none"});var m=0;k=a("#"+c.id).children(".tileblocks");
0<k.length&&(k=k[0].id,m=parseInt(k.substring(k.lastIndexOf("-")+1)));var p;a.each(c.dataArray,function(n,k){for(var l=0;l<h;l++){a.each(k.children,function(c,f){var g;-1!=f.id.indexOf("-tile-")&&(g=f.id.substring(0,f.id.indexOf("-tile-")));childid=g+"-tile-"+(l+d-1);f.id=childid;a.utility("isReverseTransition")&&""!==f.template&&k.row[l]&&(f.value=a.utility("tokenizeString",a.utility("extractDataFromRecord",k.row[l].data.contents[0],f.template),b))});var q=0;if(l+d-1>=g)break;if(void 0!=k.row[l+
d-1]){n=c.id+"-tileblocks-"+(l+d-1);d>h?(a("#"+c.id+"-tileblocks-"+(l+m)).attr("id",n),q=l+m):l+d-1==m?(a("#"+c.id+"-tileblocks-"+(l+d-1)).attr("id",n),q=l+d-1):0==a("#"+c.id+"-tileblocks-"+(l+m)).length?(a("#"+c.id+"-tileblocks-"+(l+m-h)).attr("id",n),q=l+m-h):(a("#"+c.id+"-tileblocks-"+(l+m)).attr("id",n),q=l+m);var M=a("#"+n).find("*");"left"==c.swipe?(q=l+d-1+h,1==c.circular&&d+h>=g&&(q=l)):"right"==c.swipe&&(q=l+d-1-h,1==c.circular&&1==d&&(q=(Math.ceil(parseFloat(g/h))-1)*h+l));a.each(M,function(b,
c){var f;-1!=c.id.indexOf("-tile-")&&(f=c.id.substring(0,c.id.indexOf("-tile-")));void 0!=f&&(childid=f+"-tile-"+(l+d-1),0==a("#"+f+"-tile-"+q).length&&q>=h&&q>=g&&(q-=h),0<=q&&(b=c.id.replace(f+"-tile-"+q,childid),a("#"+childid+"_label").attr("for",childid),c.id=b))});p=new a.uichildren(b,k.children,k.row[l+d-1].data.contents[0]);f.setTileChildren(p);0==a("#"+n).length&&"Vertical"==c.direction&&(a("#"+c.id).append('<div id="'+n+'" class="tileblocks">'),a("#"+n).append(p.getHTML()));1!=c.hidden&&
"true"!=c.hidden&&(a("#"+c.id+"-tileblocks-"+(l+d-1)).css({visibility:"visible"}),a("#"+c.id+"-tileblocks-"+(l+d-1)).css({display:"block"}));p.getHTML();p.applyOverrides();p.applyEvents()}}});var q=c.dataArray[0].tileHeight*a.mobileweb.device.aspectHratio+"px",r=c.dataArray[0].tileWidth*a.mobileweb.device.aspectWratio+"px";k=c.dataArray[0].columnCount;l=1;l="Vertical"==c.direction?Math.ceil(parseFloat(g/k)):c.dataArray[0].rowCount;"Vertical"!=c.direction&&a("#"+c.id).children(".tileblocks").css({overflow:"overlay"});
a("#"+c.id+"> div").css({height:q,width:r});a("#"+c.id+"> div").css({position:"absolute"});c.dbparams.isPagination&&(a("#"+c.id+"> div").first().css({height:n+"px",width:c.frame.width*a.mobileweb.device.aspectWratio+"px",bottom:"0px",position:"absolute"}),a(".dot").css({"margin-top":(n-parseInt(a(".dot").css("height")))/2}));if("Vertical"!=c.direction)for(n=c.padding.left*a.mobileweb.device.aspectWratio,q=c.dbparams.isPagination?1:0,r=1;r<=k;r++){for(var u=c.padding.top*a.mobileweb.device.aspectHratio,
t=1;t<=l;t++)q++,a("#"+c.id+" > div:nth-child("+q+")").css({left:n}),a("#"+c.id+" > div:nth-child("+q+")").css({top:u}),u=parseInt(u)+c.dataArray[0].tileHeight*a.mobileweb.device.aspectHratio+c.dataArray[0].tileGap*a.mobileweb.device.aspectHratio;n=parseInt(n)+c.dataArray[0].tileWidth*a.mobileweb.device.aspectWratio+c.dataArray[0].tileGap*a.mobileweb.device.aspectWratio}else{u=c.padding.top*a.mobileweb.device.aspectHratio;q=0;for(r=1;r<=l;r++){n=c.padding.left*a.mobileweb.device.aspectWratio;for(t=
1;t<=k;t++)q++,a("#"+c.id+" > div:nth-child("+q+")").css({left:n}),a("#"+c.id+" > div:nth-child("+q+")").css({top:u}),n=parseInt(n)+c.dataArray[0].tileWidth*a.mobileweb.device.aspectWratio+c.dataArray[0].tileGap*a.mobileweb.device.aspectWratio;u=parseInt(u)+c.dataArray[0].tileHeight*a.mobileweb.device.aspectHratio+c.dataArray[0].tileGap*a.mobileweb.device.aspectHratio}a("div#"+c.id+".table").css({"overflow-y":"auto"});a("div#"+c.id+".table").css({"overflow-x":"hidden"});k=a("<style>div#"+c.id+".table::-webkit-scrollbar-track{-webkit-box-shadow: inset 0 0 16px rgba("+
c.background.red+","+c.background.green+","+c.background.blue+",1);border-radius: 10px;background-color: #F5F5F5;}</style>");a("html > head").append(k);k=a("<style>div#"+c.id+".table::-webkit-scrollbar{width: 7px;background-color: #F5F5F5;}</style>");a("html > head").append(k);k=a("<style>div#"+c.id+".table::-webkit-scrollbar-thumb{border-radius: 10px;-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);background-color: #808080;}</style>");a("html > head").append(k)}"Vertical"==c.direction&&null!=a.utility("getSessionData",
"scrollpos_"+c.id,c.id)&&(k=a.utility("getSessionData","scrollpos_"+c.id,c.id),k=a.parseJSON(k),a.mobileweb.getCurrentPage().getName()==k.page_name&&c.id==k.u_id&&a("#"+c.id).scrollTop(k.scrollTop))};f.applyOverrides_old=function(){1==c.hidden&&f.setVisibility(!1);var b=parseInt(c.dataArray[0].rowCount)*parseInt(c.dataArray[0].columnCount);a("#"+c.id).addClass("table");f.refresh(c.dbparams.where);var d=-1;"Vertical"!=c.direction&&(a("#"+c.id).on("swipeleft",function(a){-1==e.target.id.indexOf("-tile-")&&
void 0!=f.getRecords()&&(a=Math.ceil(parseFloat(f.getRecords().length/b)),-1==d&&(d=0),0!=d?(d--,a=d*b+1,f.updateData(a)):0==d&&c.circular&&(d=a-1,a=d*b+1,f.updateData(a)))}),a("#"+c.id).on("swiperight",function(a){-1==e.target.id.indexOf("-tile-")&&void 0!=f.getRecords()&&(a=Math.ceil(parseFloat(f.getRecords().length/b)),-1==d&&(d=0),d!=a-1?(d++,a=d*b+1,f.updateData(a)):d==a-1&&c.circular&&(d=0,a=d*b+1,f.updateData(a)))}))};f.refresh=function(d){c.dbparams.where=a.utility("tokenizeString",d,b);void 0!=
c.dbparams.servicename&&""!=c.dbparams.servicename?(f.getRemoteDBData(c.dbparams),d=a.utility("isReverseTransition")?300:1500):(f.getLocalDBData(c.dbparams),d=300);var g=setInterval(function(){var d=!1;a.utility("isReverseTransition")?d=!0:void 0!=c.dbparams.servicename&&""!=c.dbparams.servicename?a.utility("isBusy")||""==a.utility("getComActionStatus")||"Success"!==a.utility("getComActionStatus")||(d=!0):void 0!=b.data.contents.loaded&&b.data.contents.loaded&&(d=!0);if(d){clearInterval(g);void 0!=
b.data.contents[c.id]&&f.setRecords(b.data.contents[c.id]);d=c.dataArray[0];var h=[];a.each(f.getRecords(),function(a,b){h.push({rownum:a,data:{contents:[b]},children:[]})});d.row=h;f.updateData(1)}},d)};f.getRemoteDBData=function(d){""!=c.dbparams.servicename&&(a.utility("isReverseTransition")||(new a.actions(b,null,[{method:"Select",category:"ComAction",callback:"createRemoteTileList",callbackUI:c.id,parentPage:b.parent,params:{servicename:c.dbparams.servicename,table:c.dbparams.tablename,where:a.utility("tokenizeString",
c.dbparams.where,b),order:a.utility("tokenizeString",c.dbparams.order,b),limit:c.dbparams.limit,fields:""}}])).execute())};f.getLocalDBData=function(d){a.mobileweb.localdb.instance.transaction(function(d){d.executeSql(["SELECT * FROM ",c.dbparams.tablename,""!==c.dbparams.where?[" WHERE ",a.utility("formWhereCondition",c.dbparams.where)].join(""):"",void 0!==c.dbparams.order&&""!==c.dbparams.order?[" ORDER BY ",c.dbparams.order].join(""):""].join(""),[],function(a,d){a=[];for(var f=0;f<d.rows.length;f++){var g=
{};for(key in d.rows.item(f))g[key]=d.rows.item(f)[key];a.push(g)}if(0<a.length){b.data.contents[c.id]=[];for(f=0;f<a.length;f++)b.data.contents[c.id].push(a[f]);b.data.contents.loaded=!0}},function(b,c){a.utility("queryDatabase",!1);console.log("error")})})};var g=[];f.setRecords=function(a){g=a};f.getRecords=function(){return g};var h=[];f.setTileChildren=function(a){h.push(a)};f.getTileChildren=function(){return h};f.setVisibility=function(b){!0===b?(c.hidden=!1,a("#"+f.getId()).children().css({visibility:"visible"}),
a("#"+f.getId()).children().css({display:"block"}),a("#"+f.getId()).css({visibility:"visible"}),a("#"+f.getId()).css({display:"block"})):(c.hidden=!0,a("#"+f.getId()).children().css({visibility:"hidden"}),a("#"+f.getId()).children().css({display:"none"}),a("#"+f.getId()).css({visibility:"hidden"}),a("#"+f.getId()).css({display:"none"}))};f.applyEvents=function(){a("#"+c.id).on("tap",function(d){c.swipe="";if(void 0!=d.target){var f=d.target.id;""==f&&(f=d.target.offsetParent.id);void 0!=f&&"showmorebtn"!=
f&&(d=f.replace("ui-","").replace("tile-","").split("-")[1],isNaN(d)&&void 0!=d&&(d=d.split("_")[0]),isNaN(d)||(b.data.contents[0]=void 0!=b.data.contents[c.id]?a.utility("savePageData",b.children,b.data.contents[c.id][d],b):a.utility("savePageData",b.children,b.data.contents[0][d],b)))}});var d=!1,g=[];a("#"+c.id).on("scroll",function(h){"Vertical"==c.direction&&(void 0!=h.target&&(h.target.scrollHeight<2*(h.target.scrollTop+c.dataArray[0].tileHeight*a.mobileweb.device.aspectratio)?d?g.push(h.target.scrollTop):
(d=!0,c.dbparams.limit=25+c.dbparams.limit,f.refresh(c.dbparams.where),0<g.length&&(a("#"+c.id).scrollTop(g[g.length-1]),g=[])):d=!1,a.utility("setSessionData",{page_name:b.name,u_id:c.id,scrollTop:h.target.scrollTop},"scrollpos_"+c.id)),null!=a.utility("getSessionData","offset","")&&(h=a.utility("getSessionData","offset",""),h=a.parseJSON(h),a.mobileweb.getCurrentPage().getName()==h.page_name&&b.iscroll.scrollTo(h.x)))})};return f}function Z(b,c,d){var f=new l(c),g=null,h=null,k="";c.initialValue=
"";"invalid"!=c.minRange&&""!=c.minRange&&(h=a.utility("tokenizeString",c.minRange,b));"invalid"!=c.maxRange&&""!=c.maxRange&&(g=a.utility("tokenizeString",c.maxRange,b));c.displayFormat="DD-MM-YYYY";var m="yy/mm/dd";"invalid"!=c.displayFormat&&""!=c.displayFormat&&(m=c.displayFormat);c.template="";a.utility("containsGlobalVariable",c.value)?(c.systemVariableValue=c.value,c.isSystemVariable=!0):a.utility("containsGlobalVariable",c.selectedDate)?(c.systemVariableValue=c.selectedDate,c.isSystemVariable=
!0):c.template=c.selectedDate;f.getTemplate=function(){return c.template};f.getHTML=function(){a.utility("isReverseTransition")||(""!==c.template&&(c.value=a.utility("tokenizeString",c.template,b),-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template&&(c.value="")),c.value=a.utility("convertSpecialCharacter",a.utility("tokenizeString",c.value)));return["<input id='",c.id,"' name='",c.name,"' value='",c.value,"' type='","true"===c.secure?"password":"text","' placeholder='",
c.placeholder,"' readonly tabindex='",c.taborder,"'/><input id='",c.id,"_jpEra'/>"].join("")};f.applyOverrides=function(){f.frame.applyCSS();f.font.applyCSS();f.border.applyCSS();f.background.setColor();a("#"+c.id).css({margin:"0px"});"true"!=c.hidden&&1!=c.hidden||a("#"+c.id).css({visibility:"hidden"});isNaN(parseInt(c.taborder))||a("#"+c.id).attr("tabindex",parseInt(c.taborder)+1);c.padding&&(a("#"+c.id).css({"padding-top":c.padding.top*a.mobileweb.device.aspectHratio,"padding-bottom":c.padding.bottom*
a.mobileweb.device.aspectHratio,"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio}),a("#"+c.id+"_jpEra").css({"padding-top":c.padding.top*a.mobileweb.device.aspectHratio,"padding-bottom":c.padding.bottom*a.mobileweb.device.aspectHratio,"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio}));var l=parseInt(a("#"+c.id).css("width"))-(parseInt(a("#"+c.id).css("padding-left"))+
parseInt(a("#"+c.id).css("padding-right"))),p=parseInt(a("#"+c.id).css("height"));a("#"+c.id+"_jpEra").attr("readonly",!0);a("#"+c.id+"_jpEra").removeClass();a("#"+c.id+"_jpEra").css({"text-align":c.font.align});a("#"+c.id+"_jpEra").css({height:p+"px",width:l+"px"});a("#"+c.id+"_jpEra").css({top:parseInt(a("#"+c.id).css("top"))+"px"});a("#"+c.id+"_jpEra").css({left:parseInt(a("#"+c.id).css("left"))+"px",position:"absolute","padding-top":"0px","padding-bottom":"0px"});a("#"+c.id+"_jpEra").css({"font-size":parseInt(a("#"+
c.id).css("font-size"))+"px"});if("top"==c.verticalalignment){a("#"+c.id).css({"vertical-align":"top"});var n=a("#"+c.id).css("height"),q=a("#"+c.id).css("font-size"),r=c.padding.top*a.mobileweb.device.aspectHratio,u=parseInt(n)-parseInt(q)-r;a("#"+c.id).css({"padding-top":r,"padding-bottom":u,"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio});a("#"+c.id+"_jpEra").css({"padding-top":r,"padding-bottom":u,"padding-left":c.padding.left*
a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio})}else"bottom"==c.verticalalignment?(a("#"+c.id).css({"vertical-align":"bottom"}),n=a("#"+c.id).css("height"),q=a("#"+c.id).css("font-size"),u=c.padding.bottom*a.mobileweb.device.aspectHratio,r=parseInt(n)-parseInt(q)-u,a("#"+c.id).css({"padding-top":r,"padding-bottom":u,"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio}),a("#"+
c.id+"_jpEra").css({"padding-top":r,"padding-bottom":u,"padding-left":c.padding.left*a.mobileweb.device.aspectWratio,"padding-right":c.padding.right*a.mobileweb.device.aspectWratio})):(a("#"+c.id).css({"padding-top":"0px","padding-bottom":"0px"}),a("#"+c.id).css({"vertical-align":"-100%"}),a("#"+c.id+"_jpEra").css({"vertical-align":"-100%"}));"center"==c.font.align&&c.showIcon?(n=c.frame.height*a.mobileweb.device.aspectHratio+c.padding.right*a.mobileweb.device.aspectWratio,a("#"+c.id).css({"padding-right":n})):
"right"==c.font.align&&c.showIcon&&(n=c.frame.height*a.mobileweb.device.aspectHratio+c.padding.right*a.mobileweb.device.aspectWratio,a("#"+c.id).css({"padding-right":n}));"calendar"===c.viewtype&&(n=a("<style>input::-webkit-input-placeholder{text-shadow:0px 1px 1px #FFFFFF;color:rgba("+c.font.color.red+","+c.font.color.blue+","+c.font.color.green+",.5);}</style>"),a("html > head").append(n));c.showIcon&&(n=a.utility("getSystemImage","calendar_icon.png",""),"preview"===a.mobileweb.state&&(n=a.mobileweb.baseurl+
"/mobileweb/resources/images/system/calendar_icon.png"),30>=parseFloat(c.frame.height)?a("#"+c.id).css({"background-image":'url("'+n+'")',"background-repeat":"no-repeat","background-position-x":"right","background-position-y":"center"}):a("#"+c.id).css({"background-image":'url("'+n+'")',"background-repeat":"no-repeat","background-position-x":"98%","background-position-y":"center"}),_backgroundHeight=c.frame.height*a.mobileweb.device.aspectHratio+"px",void 0!=c.cornerRadius&&(_backgroundHeight=parseFloat(_backgroundHeight)-
c.cornerRadius*a.mobileweb.device.aspectratio/2+"px"),n="40px",40>parseInt(_backgroundHeight)&&(n=_backgroundHeight),a("#"+c.id).css({"background-size":n+" "+_backgroundHeight}),l-=parseInt(n),a("#"+c.id+"_jpEra").css({width:l}));c.border&&(_borderWeight=c.border.borderweight*a.mobileweb.device.aspectHratio,p-=2*_borderWeight,a("#"+c.id+"_jpEra").css({height:p}),a("#"+c.id+"_jpEra").css({"border-style":"solid",margin:"0px"}),a("#"+c.id+"_jpEra").css({"border-width":_borderWeight+"px"}),a("#"+c.id+
"_jpEra").css({"border-color":"rgba("+c.border.bordercolor.red+","+c.border.bordercolor.green+","+c.border.bordercolor.blue+","+c.border.bordercolor.alpha+")"}));void 0!=c.cornerRadius&&(a("#"+c.id).css({"border-radius":c.cornerRadius*a.mobileweb.device.aspectratio+"px"}),a("#"+c.id+"_jpEra").css({"border-radius":c.cornerRadius*a.mobileweb.device.aspectratio+"px"}));h=f.getRange(h);g=f.getRange(g);"Japanese"==c.type&&void 0!=c.jpEra&&""!=c.jpEra&&f.setJPEra(c.jpEra);if(c.type){var U=document.createElement("script");
U.type="text/javascript";U.src="preview"==a.mobileweb.state?"/mobileweb/resources/js/datepicker-ja.js":"js/datepicker-ja.js";var t=!1;l=document.getElementsByTagName("script");a.each(l,function(a,b){b.src==U.src&&(t=!0)});t||a("head").append(U)}k="Japanese"==c.type?"ja":"";a("#"+c.id).datepicker({dateFormat:m.toLowerCase().replace("yyyy","yy"),changeMonth:!0,changeYear:!0,minDate:h,maxDate:g,yearRange:""+h.getFullYear()+":"+g.getFullYear()});a("#"+c.id).datepicker("option",a.datepicker.regional[k]);
a("#"+c.id).datepicker("option","dateFormat","yy-mm-dd");if(!a.utility("isReverseTransition")&&(""!==c.template?(l=a.utility("getCombinedCSV"),0!=l.length?a.each(l,function(a,b){b.csvResultHeader===c.template.replace("[","").replace("]","")?f.setValue(b.value):f.setValue(-1!=c.template.indexOf("[")&&-1!=c.template.indexOf("]")&&c.value==c.template?"":c.value)}):void 0!=d?f.setValue(a.utility("tokenizeString",a.utility("extractDataFromRecord",d,c.template),b)):f.setValue(-1!=c.template.indexOf("[")&&
-1!=c.template.indexOf("]")&&c.value==c.template?"":c.value)):(c.isSystemVariable&&(void 0!==c.secure&&"false"!==c.secure||void 0==a("#"+c.id).get(0)||(a("#"+c.id).get(0).type="text"),c.value=a.utility("tokenizeString",c.systemVariableValue,b),c.value=a.utility("convertSpecialCharacter",c.value),void 0!=c.displayFormat||""!=c.displayFormat?(c.formatSpecifier=c.displayFormat.toLowerCase().replace("mm","MM"),c.value=a.validate("convertToCustomDateTime",c,c.value)):c.value=param,a("#"+c.id).val(c.value)),
f.setValue(a.utility("tokenizeString",c.value,b))),void 0!=c.globalValue&&"__NOW__"==c.globalValue)){var w=new Date;a.mobileweb.__NOW__=a.utility("checkGlobalVariable",c.globalValue);0==a("body").find("#__NOW__").length&&a("body").append("<input id='__NOW__' type='text' hidden='true'>"+a.mobileweb.__NOW__+"</input>");a("#__NOW__").on("onchange",function(){void 0!=c.formatType&&""!=c.formatType?(c.value=a.validate("changeFormat",c,w.toString()),a("#"+c.id).val(a.validate("changeFormat",c,w.toString()))):
(c.value=a.mobileweb.__NOW__,a("#"+c.id).val(a.mobileweb.__NOW__))});a("#__NOW__").trigger("onchange")}a.utility("isReverseTransition")&&f.setValue(c.value);"Japanese"!=c.type&&a("#"+c.id+"_jpEra").css({display:"none"})};f.applyEvents=function(){a("#"+c.id).on("click",function(){a("#ui-datepicker-div").css({display:"block"});a(".ui-datepicker-title").css({display:"flex"});a(".ui-datepicker-month").css({"font-size":".8em"});a(".ui-datepicker-year").css({"font-size":".8em"});a(".ui-datepicker-title > select").on("change",
function(){a(".ui-datepicker-title").css({display:"flex"});a(".ui-datepicker-month").css({"font-size":".8em"});a(".ui-datepicker-year").css({"font-size":".8em"})});a(".ui-datepicker-next").on("click",function(){a(".ui-datepicker-title").css({display:"flex"});a(".ui-datepicker-month").css({"font-size":".8em"});a(".ui-datepicker-year").css({"font-size":".8em"})});a(".ui-datepicker-prev").on("click",function(){a(".ui-datepicker-title").css({display:"flex"});a(".ui-datepicker-month").css({"font-size":".8em"});
a(".ui-datepicker-year").css({"font-size":".8em"})});f.convertToJPEraDate();f.getJPEraYears()});a(".ui-datepicker-title > select").on("change",function(){a(".ui-datepicker-title").css({display:"flex"});a(".ui-datepicker-month").css({"font-size":".8em"});a(".ui-datepicker-year").css({"font-size":".8em"});f.applyEvents()});a(".ui-datepicker-next").on("click",function(){a(".ui-datepicker-title").css({display:"flex"});a(".ui-datepicker-month").css({"font-size":".8em"});a(".ui-datepicker-year").css({"font-size":".8em"});
f.applyEvents()});a(".ui-datepicker-prev").on("click",function(){a(".ui-datepicker-title").css({display:"flex"});a(".ui-datepicker-month").css({"font-size":".8em"});a(".ui-datepicker-year").css({"font-size":".8em"});f.applyEvents()});f.convertToJPEraDate();f.getJPEraYears();a("#"+c.id+"_jpEra").off("click").on("click",function(){a("#"+c.id).trigger("focus");f.applyEvents();a(".ui-datepicker-title > select").trigger("change")});a("#"+c.id).on("focusout",function(){setTimeout(function(){if(void 0!=
c.changed&&c.changed&&("tab"==c.tab||"shifttab"==c.tab)){c.changed=!1;var b=a(".scroller").get(0).querySelectorAll('a[href], input, img, button, textarea, input[type="text"],input[type="password"],input[type="password"], input[type="radio"], input[type="checkbox"], select'),d=[].slice.call(b);d.sort(function(a,b){return a.tabIndex<b.tabIndex?-1:a.tabIndex>b.tabIndex?1:0});var f=a("#"+c.id).prop("tabindex");a.each(d,function(a,b){f===b.tabIndex&&("tab"==c.tab?d[a+1].focus():d[a-1].focus(),c.tab="")})}},
300)});a("#"+c.id).on("focus",function(){c.tab="";a(window).keyup(function(a){if("Tab"===a.key||9==a.keyCode)c.tab=a.shiftKey?"shifttab":"tab"});var b=setInterval(function(){clearInterval(b);a("#ui-datepicker-div").css({display:"block"})},300)});a("#"+c.id).on("change",function(){c.changed=!0});if(void 0!=c.events&&c.events.OnChange)a("#"+c.id).on("change",function(){c.value=a("#"+c.id).attr("value");f.setValue(c.value);f.convertToJPEraDate();var d=[];a.extend(d,c.events.OnChange);d=JSON.stringify(d).slice();
(new a.actions(b,f,JSON.parse(d))).execute();var g=setInterval(function(){clearInterval(g);a("#ui-datepicker-div").css({display:"none"})},300)})};f.setValue=function(b,d){"Japanese"==c.type?a("#"+c.id+"_jpEra").css({display:"block"}):a("#"+c.id+"_jpEra").css({display:"none"});void 0!==c.secure&&"false"!==c.secure||void 0==a("#"+c.id).get(0)||(a("#"+c.id).get(0).type="text");c.systemVariableValue=c.value;c.isSystemVariable=!1;b=a.utility("convertSpecialCharacter",b);void 0!=c.displayFormat||""!=c.displayFormat?
(c.formatSpecifier=c.displayFormat.toLowerCase().replace("mm","MM"),b=a.validate("convertToCustomDateTime",c,b),a("#"+c.id).val(b),a("#"+c.id+"_jpEra").val(b)):(c.value=b,a("#"+c.id).val(c.value),a("#"+c.id+"_jpEra").val(c.value))};f.getValue=function(){return c.value};f.setVisibility=function(b){!0===b?(c.hidden=!1,a("#"+f.getId()).css({visibility:"visible"})):(c.hidden=!0,a("#"+f.getId()).css({visibility:"hidden"}))};f.getRange=function(a){if("invalid"!=a&&""!=a){if("Invalid Date"==new Date(a)){var b=
new Date;if(!isNaN(parseInt(a))&&4<a.length){var c=parseInt(a);if(-1!=a.indexOf("Months")||-1!=a.indexOf("months"))-1!=a.indexOf("after")?b.setMonth(b.getMonth()+c):-1!=a.indexOf("before")&&b.setMonth(b.getMonth()-c);else if(-1!=a.indexOf("Days")||-1!=a.indexOf("days"))-1!=a.indexOf("after")?b.setDate(b.getDate()+c):-1!=a.indexOf("before")&&b.setDate(b.getDate()-c)}else 4==a.length&&b.setFullYear(parseInt(a))}else b=new Date(a);return b}};f.setMinRange=function(b){c.minRange=b;h=f.getRange(c.minRange);
a("#"+c.id).datepicker("option","minDate",h);a("#"+c.id).datepicker("option","yearRange",""+h.getFullYear()+":"+g.getFullYear())};f.setMaxRange=function(b){c.maxRange=b;g=f.getRange(c.maxRange);a("#"+c.id).datepicker("option","maxDate",g);a("#"+c.id).datepicker("option","yearRange",""+h.getFullYear()+":"+g.getFullYear())};f.setJPEra=function(b){c.jpEra=b;var d=f.getJPEraData();a.each(d,function(a,c){if(b==c.jp||b==c.en)""==c.max&&(c.max=new Date),f.setMinRange(c.min),f.setMaxRange(c.max)})};f.getJPEraData=
function(){return[{jp:"\u660e\u6cbb",en:"Meiji",min:"1900-01-01",max:"1912-07-29",jpStart:33},{jp:"\u5927\u6b63",en:"Taisho",min:"1912-07-30",max:"1926-12-24",jpStart:1},{jp:"\u662d\u548c",en:"Showa",min:"1926-12-25",max:"1989-01-07",jpStart:1},{jp:"\u5e73\u6210",en:"Heisei",min:"1989-01-08",max:"2019-04-30",jpStart:1},{jp:"\u4ee4\u548c",en:"Reiwa",min:"2019-05-01",max:"",jpStart:1}]};f.getJPEraYears=function(){if("Japanese"==c.type)if(void 0!=c.jpEra&&""!=c.jpEra&&"Custom"!=c.jpEra){var b=c.jpEra,
d=f.getJPEraData(),g;a.each(d,function(a,c){if(b==c.jp||b==c.en)g=a});if(g.toString()&&-1<g){var h=d[g];""==h.max&&(h.max=(new Date).getFullYear());if(d=a("select.ui-datepicker-year"))d=a(d).children().get(),0<d.length&&a.each(d,function(b,c){b=h.jp+(h.jpStart+b)+"\u5e74";a(c).html(b)})}}else if(d=a("select.ui-datepicker-year"))d=a(d).children().get(),0<d.length&&a.each(d,function(b,c){b=c.value;a(c).html(b)})};f.setCalendarType=function(b){a("#ui-datepicker-div").css({display:"none"});c.type=b;k=
"Japanese"==b?"ja":"";a("#"+c.id).datepicker("option",a.datepicker.regional[k]);f.convertToJPEraDate(!0)};f.convertToJPEraDate=function(b){if("Japanese"==c.type){if(new Date(c.value)<h||new Date(c.value)>g)c.value=g;b=new Date;""!=c.value&&(b=new Date(c.value));b=b.toLocaleDateString("ja-JP-u-ca-japanese",{era:"long",year:"numeric",month:"long",day:"numeric"});""==c.value&&(b="");void 0!=c.jpEra&&""!=c.jpEra&&"Custom"!=c.jpEra?(a("#"+c.id+"_jpEra").css({display:"block"}),a("#"+c.id+"_jpEra").val(b)):
"Custom"==c.jpEra&&(a("#"+c.id+"_jpEra").css({display:"block"}),b=b.replace(b.split("\u5e74")[0],c.value.split("/")[0]),a("#"+c.id+"_jpEra").val(b))}else a("#"+c.id+"_jpEra").css({display:"none"})};return f}function da(b,c,d){var f=new l(c);f.children=void 0!=b.data.contents[0]?new a.uichildren(b,c.dataArray[0].children,b.data.contents[0]):new a.uichildren(b,c.dataArray[0].children);var g="";c.showheader&&(c.pageOverlayHeader.showclose?("bundle"==c.pageOverlayHeader.closeIcon.srcLocation?closeIconSrc=
a.utility("getImage",a.utility("tokenizeString",c.pageOverlayHeader.closeIcon.src)):"remoteFile"==c.pageOverlayHeader.closeIcon.srcLocation?closeIconSrc=a.utility("getRemoteImage",a.utility("tokenizeString",c.pageOverlayHeader.closeIcon.src)):"url"==c.pageOverlayHeader.closeIcon.srcLocation&&(closeIconSrc=a.utility("tokenizeString",c.pageOverlayHeader.closeIcon.src).toString(),null!=closeIconSrc.match(/\/\/(?![\s\S]*\/\/)/)&&1<closeIconSrc.match(/\/\/(?![\s\S]*\/\/)/).length&&(closeIconSrc=closeIconSrc.replace(/\/\/(?![\s\S]*\/\/)/,
"/"))),""==closeIconSrc&&(closeIconSrc=a.utility("getSystemImage","close-button_dialog.png",""),"preview"===a.mobileweb.state&&(closeIconSrc=a.mobileweb.baseurl+"/mobileweb/resources/images/system/toolbar-items/default/close-button_dialog.png")),g=["<div id=",c.id,'_heading style="float:left;margin-left: 10px;margin-top: 5px;margin-bottom: 5px;">',c.pageOverlayHeader.heading,'</div><div  style="width:20px;float:right;margin-right: 10px;margin-top: 5px;margin-bottom: 5px;text-align: right;"><img id=',
c.id,'_close src = "'+closeIconSrc+'" width="20px" height:"40px" style = "display:block;">',"</div>"].join("")):g=["<div>",c.pageOverlayHeader.heading,"</div>"].join(""));var h="",k="";if(c.showfooter){h=c.pageOverlayFooter.actionButtons;var m=c.pageOverlayFooter.actionbuttonwidth*a.mobileweb.device.aspectWratio+"px",p=c.pageOverlayFooter.actionbuttonheight*a.mobileweb.device.aspectHratio+"px",q=(parseFloat(c.pageOverlayFooter.footerheight)*a.mobileweb.device.aspectHratio-parseFloat(p))/2+"px",n=
"rgba("+c.pageOverlayFooter.actionButtonsTintColor.red+","+c.pageOverlayFooter.actionButtonsTintColor.green+","+c.pageOverlayFooter.actionButtonsTintColor.blue+","+c.pageOverlayFooter.actionButtonsTintColor.alpha+")",M="rgba("+c.pageOverlayFooter.actionButtonsColor.red+","+c.pageOverlayFooter.actionButtonsColor.green+","+c.pageOverlayFooter.actionButtonsColor.blue+","+c.pageOverlayFooter.actionButtonsColor.alpha+")";a.each(h,function(a){k=k+"<a id='"+c.id+"_"+h[a].id+"'style=\"margin-left:2.5%;z-index:2001;margin-right:2.5%;border-radius:4px;font-family:system;position:absolute;margin-top:0px;margin-bottom:0px;color:"+
M+";background:"+n+";bottom:"+q+";width:"+m+";height:"+p+";\" data-role='button' rel='close' >"+h[a].title+"</a>"})}f.getHTML=function(){return["<div id=",c.id," name=",c.name,' class="dialog"><div id=',c.id,"_pageOverlayHeader>",g,'</div><div id="dialog_',c.id,'"><div id="pageOverlayContent">',f.children.getHTML(),"</div></div><div id=",c.id,"_pageOverlayFooter>",k,"</div></div>"].join("")};f.applyOverrides=function(){a("#"+c.id).css({visibility:"hidden"});a("#"+c.id).css({display:"none"});a.each(f.children,
function(b,d){c.showheader&&(d.frame.getFrame().y=parseFloat(d.frame.getFrame().y)+30);d.applyOverrides();a("#"+d.getId()).css({visibility:"hidden"});"TextButton"===d.getViewType()&&a("#"+d.getId()+"_label").css({visibility:"hidden"})});c.backgroundColor&&a("#"+c.id).css({"background-color":a.attributes("color",c.backgroundColor).getColorCode()});c.cornerRadius&&a("#"+c.id).css({"border-radius":c.cornerRadius*a.mobileweb.device.aspectHratio+"px"});c.borderColor&&(a("#"+c.id).css({"border-style":"solid"}),
a("#"+c.id).css({"border-width":c.borderWidth+"px"}),a("#"+c.id).css({"border-color":"rgba("+c.borderColor.red+","+c.borderColor.green+","+c.borderColor.blue+","+c.borderColor.alpha+")"}));var d=b.isSidebarFixed&&"ScrollView"!==b.type?(parseFloat(b.width)-(parseFloat(b.toolbarleft.frame.width)+parseFloat(c.padding.left)+parseFloat(c.padding.right)))*a.mobileweb.device.aspectWratio:(parseFloat(b.width)-(parseFloat(c.padding.left)+parseFloat(c.padding.right)))*a.mobileweb.device.aspectWratio;a("#pageOverlayContent").css({height:c.dataArray[0].contentHeight*
a.mobileweb.device.aspectHratio+"px",width:d});a("#pageOverlayContent").css({top:"inherit"});a("#dialog_"+c.id).css({height:c.dataArray[0].contentHeight*a.mobileweb.device.aspectHratio+"px",width:d});a(".ui-btn-text").css({"font-family":"Arial, Helvetica, sans-serif"});c.showheader&&(a("#"+c.id+"_pageOverlayHeader").css({height:c.pageOverlayHeader.headerheight*a.mobileweb.device.aspectHratio+"px","z-index":"2001",width:d}),a("#"+c.id+"_heading").css({"font-size":c.pageOverlayHeader.headerfont.size*
a.mobileweb.device.aspectratio+"px","font-family":c.pageOverlayHeader.headerfont.fontName,"font-weight":"bold"}),a("#"+c.id+"_heading").css({color:"rgba("+c.pageOverlayHeader.headerfont.color.red+","+c.pageOverlayHeader.headerfont.color.green+","+c.pageOverlayHeader.headerfont.color.blue+","+c.pageOverlayHeader.headerfont.color.alpha+")"}));c.showfooter&&(a(".ui-btn-text").css({"font-size":12*a.mobileweb.device.aspectratio+"px","font-weight":"100","font-family":"Arial, Helvetica, sans-serif"}),a(".ui-btn-inner").css({padding:"5px"}),
a("#"+c.id+"_pageOverlayFooter").css({height:c.pageOverlayFooter.footerheight*a.mobileweb.device.aspectHratio+"px",width:d}),a("#"+c.id+"_pageOverlayFooter").css({top:c.dataArray[0].contentHeight*a.mobileweb.device.aspectHratio+"px"}));a("#"+c.id).css({padding:"0px",width:d})};f.applyEvents=function(){a("#"+c.id+"_close").on("tap",function(){a("#"+c.id).css({visibility:"hidden"});setTimeout(function(){a("#"+c.id).css({display:"none"})},500);a.each(f.children,function(b,c){a("#"+c.getId()).css({visibility:"hidden"});
"TextButton"===c.getViewType()&&a("#"+c.getId()+"_label").css({visibility:"hidden"})});a.unblockUI()});a.each(h,function(d){a("#"+c.id+"_"+h[d].id).click(function(){a("#"+c.id).css({visibility:"hidden"});a.unblockUI();a.each(f.children,function(b,c){a("#"+c.getId()).css({visibility:"hidden"});"TextButton"===c.getViewType()&&a("#"+c.getId()+"_label").css({visibility:"hidden"})});void 0!=h[d].events.Tap&&(new a.actions(b,f,h[d].events.Tap)).execute()});return!0});a.each(f.children,function(a,b){b.applyEvents()})};
return f}a.uichildren=function(l,c,I,v){var D=[];a.each(c,function(c,v){switch(v.viewtype){case "Label":D.push(new g(l,v,I));break;case "LinkLabel":D.push(new k(l,v,I));break;case "Image":if("QRview"==v.source){var x=document.createElement("script"),K=document.createElement("script");x.type="text/javascript";K.type="text/javascript";"preview"==a.mobileweb.state?(x.src="/mobileweb/resources/js/qrlib/qrgen.js",K.src="/mobileweb/resources/js/qrlib/jquery.qrgen.js"):(x.src="js/qrlib/qrgen.js",K.src="js/qrlib/jquery.qrgen.js");
var O=!1;c=document.getElementsByTagName("script");a.each(c,function(a,b){if(b.src==x.src||b.src==K.src)O=!0});O||(a("head").append(x),a("head").append(K),x.onload=D.push(new b(l,v,I)))}else"reCaptcha"==v.source?(c=document.createElement("script"),c.src="https://www.google.com/recaptcha/api.js",a("head").append(c),c.onload=setTimeout(function(){D.push(new d(l,v,I))},50)):D.push(new b(l,v,I));break;case "TextField":D.push(new h(l,v,I));break;case "NumericField":D.push(new q(l,v,I));break;case "TextArea":D.push(new p(l,
v,I));break;case "WebView":D.push(new m(l,v,I));break;case "SearchBar":D.push(new A(l,v,I));break;case "RoundButton":D.push(new f(l,v,I));break;case "TextButton":D.push(new u(l,v,I));break;case "ImageButton":D.push(new R(l,v,I));break;case "ToggleButton":D.push(new J(l,v,I));break;case "CheckBox":D.push(new w(l,v,I));break;case "Radio":D.push(new t(l,v,I));break;case "Segment":D.push(new N(l,v,I));break;case "SwitchBar":D.push(new G(l,v,I));break;case "SystemButton":D.push(new E(l,v,I));break;case "Camera":D.push(new V(l,
v,I));break;case "SoundBox":D.push(new Q(l,v,I));break;case "VideoBox":D.push(new W(l,v,I));break;case "GoogleMap":D.push(new F(l,v,I));break;case "Picker":D.push(new S(l,v,I));break;case "DatePicker":c=document.createElement("script");c.type="text/javascript";c.src="preview"==a.mobileweb.state?"/mobileweb/resources/js/datepicker.js":"js/datepicker.js";a("head").append(c);c.onload=D.push(new B(l,v,I));break;case "Slider":D.push(new L(l,v,I));break;case "ComboBox":void 0!=v.editable&&v.editable?D.push(new P(l,
v,I)):D.push(new H(l,v,I));break;case "TileList":D.push(new T(l,v,I));break;case "ProgressBar":D.push(new y(l,v,I));break;case "Indicator":D.push(new C(l,v,I));break;case "Gadget":D.push(new r(l,v,I));break;case "Chart":D.push(new Y(l,v,I));break;case "Calendar":D.push(new Z(l,v,I));break;case "Dialog":D.push(new da(l,v,I));break;case "RemoteTableViewList":case "RemoteTableView":case "DBTableView":case "DBTableViewList":case "TableViewList":case "TableViewListTab":case "TableView":0<l.children.length&&
"simplegrid"==l.children[0].style?(c=document.createElement("script"),c.type="text/javascript",c.src="preview"==a.mobileweb.state?"/mobileweb/resources/js/mobileweb-ui-grid.js":"js/mobileweb-ui-grid.js",a("head").append(c),c.onload=D.push(new a.uiGrid(l,v))):0<l.children.length&&"tabulargrid"==l.children[0].style?(c=document.createElement("script"),c.type="text/javascript",c.src="preview"==a.mobileweb.state?"/mobileweb/resources/js/mobileweb-ui-tabular-grid.js":"js/mobileweb-ui-tabular-grid.js",a("head").append(c),
c.onload=D.push(new a.uiTabularGrid(l,v))):l.sidebarTableview?(x=document.createElement("script"),x.type="text/javascript",x.src="preview"==a.mobileweb.state?"/mobileweb/resources/js/mobileweb-sidebar-table.js":"js/mobileweb-sidebar-table.js",O=!1,c=document.getElementsByTagName("script"),a.each(c,function(a,b){b.src==x.src&&(O=!0)}),O||a("head").append(x),x.onload=D.push(new a.sidebartable(l,v))):l.children[0].accordion&&void 0!=l.data.groupby&&""!=l.data.groupby?0!=l.data.contents.length&&(x=document.createElement("script"),
x.type="text/javascript",x.src="preview"==a.mobileweb.state?"/mobileweb/resources/js/mobileweb-accordion-table.js":"js/mobileweb-accordion-table.js",O=!1,c=document.getElementsByTagName("script"),a.each(c,function(a,b){b.src==x.src&&(O=!0)}),O||a("head").append(x),x.onload=D.push(new a.accordiontable(l,v))):D.push(new a.uitable(l,v));break;default:a.utility("isBootingForFirstTime")&&(setTimeout(function(){a.errorhandler("alertBox","\u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u201c\u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u201a\u00c2\u00ae\u00c3\u0192\u00c2\u00a8\u00c3\u201a\u00c2\u00a1\u00c3\u201a\u00c2\u00a8\u00c3\u0192\u00c2\u00a7\u00c3\u201a\u00c2\u00a4\u00c3\u201a\u00c2\u00ba\u00c3\u0192\u00c2\u00a9\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u201a\u00c2\u00a8\u00c3\u0192\u00c2\u00a5\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u201c\u00c3\u00af\u00c2\u00bf\u00c2\u00bd : "+
v.viewtype+" \u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u201a\u00c2\u00af\u00c3\u0192\u00c2\u00a3\u00c3\u00a2\u00e2\u20ac\u0161\u00c2\u00ac\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u0192\u00c2\u00a7\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u201a\u00c2\u00be\u00c3\u0192\u00c2\u00a5\u00c3\u2026\u00e2\u20ac\u0153\u00c3\u201a\u00c2\u00a8\u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u201a\u00c2\u00aeAppExe \u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u201a\u00c2\u00ae MobileWeb \u00c3\u0192\u00c2\u00a3\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u201a\u00c2\u00a2\u00c3\u0192\u00c2\u00a3\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u20ac\ufffd\u00c3\u0192\u00c2\u00a3\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u201a\u00c2\u00aa\u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u201a\u00c2\u00a7\u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u201a\u00c2\u00af\u00c3\u0192\u00c2\u00a3\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u201a\u00c2\u00b5\u00c3\u0192\u00c2\u00a3\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u0192\u00c2\u00a3\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u201a\u00c2\u00bc\u00c3\u0192\u00c2\u00a3\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u2039\u00e2\u20ac\u00a0\u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u00a2\u00e2\u201a\u00ac\u00e2\u20ac\ufffd\u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u201a\u00c2\u00a6\u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00be\u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u201a\u00c2\u00be\u00c3\u0192\u00c2\u00a3\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u00a2\u00e2\u201a\u00ac\u00c2\u00ba\u00c3\u0192\u00c2\u00a3\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u201c\u00c3\u0192\u00c2\u00a3\u00c3\u00a2\u00e2\u20ac\u0161\u00c2\u00ac\u00c3\u00a2\u00e2\u201a\u00ac\u00c5\u00a1",
"This UI parts : "+v.viewtype+" is not supported on current MobileWeb app in AppExe.")},4E3),a.utility("setBootingForFirstTime",!1))}});D.getHTML=function(){var b=[];a.each(this,function(a,c){b.push(this.getHTML())});return b.join("")};D.applyOverrides=function(){a.each(this,function(a,b){b.applyOverrides()})};D.applyEvents=function(){a.each(this,function(a,b){b.applyEvents()})};void 0!=v&&v(D);a.utility("initChildren",!0);return D}})(jQuery);var recLength=0,recBuffers=[],sampleRate,numChannels;this.onmessage=function(a){switch(a.data.command){case "init":init(a.data.config);break;case "record":record(a.data.buffer);break;case "exportWAV":exportWAV(a.data.type);break;case "getBuffer":getBuffer();break;case "clear":clear()}};function init(a){sampleRate=a.sampleRate;numChannels=a.numChannels;initBuffers()}function record(a){for(var l=0;l<numChannels;l++)recBuffers[l].push(a[l]);recLength+=a[0].length}
function exportWAV(a){console.log(a);for(var l=[],g=0;g<numChannels;g++)l.push(mergeBuffers(recBuffers[g],recLength));l=2===numChannels?interleave(l[0],l[1]):l[0];l=encodeWAV(l);a=new Blob([l],{type:a});this.postMessage(a)}function getBuffer(){for(var a=[],l=0;l<numChannels;l++)a.push(mergeBuffers(recBuffers[l],recLength));this.postMessage(a)}function clear(){recLength=0;recBuffers=[]}function initBuffers(){for(var a=0;a<numChannels;a++)recBuffers[a]=[]}
function mergeBuffers(a,l){l=new Float32Array(l);for(var g=0,k=0;k<a.length;k++)l.set(a[k],g),g+=a[k].length;return l}function interleave(a,l){for(var g=a.length+l.length,k=new Float32Array(g),d=0,b=0;d<g;)k[d++]=a[b],k[d++]=l[b],b++;return k}function floatTo16BitPCM(a,l,g){for(var k=0;k<g.length;k++,l+=2){var d=Math.max(-1,Math.min(1,g[k]));a.setInt16(l,0>d?32768*d:32767*d,!0)}}function writeString(a,l,g){for(var k=0;k<g.length;k++)a.setUint8(l+k,g.charCodeAt(k))}
function encodeWAV(a){var l=new ArrayBuffer(44+2*a.length);l=new DataView(l);writeString(l,0,"RIFF");l.setUint32(4,36+2*a.length,!0);writeString(l,8,"WAVE");writeString(l,12,"fmt ");l.setUint32(16,16,!0);l.setUint16(20,1,!0);l.setUint16(22,numChannels,!0);l.setUint32(24,sampleRate,!0);l.setUint32(28,4*sampleRate,!0);l.setUint16(32,2*numChannels,!0);l.setUint16(34,16,!0);writeString(l,36,"data");l.setUint32(40,2*a.length,!0);floatTo16BitPCM(l,44,a);return l};!function(a){function l(a,b){if(!(1<a.originalEvent.touches.length)){a.preventDefault();var d=a.originalEvent.changedTouches[0],g=document.createEvent("MouseEvents");g.initMouseEvent(b,!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null);a.target.dispatchEvent(g)}}if(a.support.touch="ontouchend"in document,a.support.touch){var g,k=a.ui.mouse.prototype,d=k._mouseInit,b=k._mouseDestroy;k._touchStart=function(a){!g&&this._mouseCapture(a.originalEvent.changedTouches[0])&&(g=!0,this._touchMoved=
!1,l(a,"mouseover"),l(a,"mousemove"),l(a,"mousedown"))};k._touchMove=function(a){g&&(this._touchMoved=!0,l(a,"mousemove"))};k._touchEnd=function(a){g&&(l(a,"mouseup"),l(a,"mouseout"),this._touchMoved||l(a,"click"),g=!1)};k._mouseInit=function(){this.element.bind({touchstart:a.proxy(this,"_touchStart"),touchmove:a.proxy(this,"_touchMove"),touchend:a.proxy(this,"_touchEnd")});d.call(this)};k._mouseDestroy=function(){this.element.unbind({touchstart:a.proxy(this,"_touchStart"),touchmove:a.proxy(this,
"_touchMove"),touchend:a.proxy(this,"_touchEnd")});b.call(this)}}}(jQuery);var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,l=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,g=/[^-+\dA-Z]/g,k=function(a,b){a=String(a);for(b=b||2;a.length<b;)a="0"+a;return a};return function(d,b,h){var q=dateFormat;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(d)||/\d/.test(d)||(b=d,d=void 0);d=d?new Date(d):new Date;if(isNaN(d))throw SyntaxError("invalid date");
b=String(q.masks[b]||b||q.masks["default"]);"UTC:"==b.slice(0,4)&&(b=b.slice(4),h=!0);var p=h?"getUTC":"get",m=d[p+"Date"](),f=d[p+"Day"](),u=d[p+"Month"](),w=d[p+"FullYear"](),y=d[p+"Hours"](),A=d[p+"Minutes"](),G=d[p+"Seconds"]();p=d[p+"Milliseconds"]();var E=h?0:d.getTimezoneOffset(),C={d:m,dd:k(m),ddd:q.i18n.dayNames[f],dddd:q.i18n.dayNames[f+7],m:u+1,mm:k(u+1),mmm:q.i18n.monthNames[u],mmmm:q.i18n.monthNames[u+12],yy:String(w).slice(2),yyyy:w,h:y%12||12,hh:k(y%12||12),H:y,HH:k(y),M:A,MM:k(A),
s:G,ss:k(G),l:k(p,3),L:k(99<p?Math.round(p/10):p),t:12>y?"a":"p",tt:12>y?"am":"pm",T:12>y?"A":"P",TT:12>y?"AM":"PM",Z:h?"UTC":(String(d).match(l)||[""]).pop().replace(g,""),o:(0<E?"-":"+")+k(100*Math.floor(Math.abs(E)/60)+Math.abs(E)%60,4),S:["th","st","nd","rd"][3<m%10?0:(10!=m%100-m%10)*m%10]};return b.replace(a,function(a){return a in C?C[a]:a.slice(1,a.length-1)})}}();
dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};
Date.prototype.format=function(a,l){return dateFormat(this,a,l)};(function(a){var l=function(a,k){var d=k||{};k=d.bufferLen||4096;var b=d.numChannels||2;this.context=a.context;this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,k,b,b);var g=new Worker(d.workerPath||"js/RecordWorker.js");void 0!=g&&g.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:b}});var l=!1,p;this.node.onaudioprocess=function(a){if(l){for(var d=[],h=0;h<b;h++)d.push(a.inputBuffer.getChannelData(h));void 0!=g&&
g.postMessage({command:"record",buffer:d})}};this.configure=function(a){for(var b in a)a.hasOwnProperty(b)&&(d[b]=a[b])};this.record=function(){l=!0};this.stop=function(){l=!1};this.clear=function(){g.postMessage({command:"clear"});g.terminate();g=void 0};this.getBuffer=function(a){p=a||d.callback;g.postMessage({command:"getBuffer"})};this.exportWAV=function(a,b){p=a||d.callback;console.log(g);b=b||d.type||"audio/wav";if(!p)throw Error("Callback not set");g.postMessage({command:"exportWAV",type:b})};
g.onmessage=function(a){console.log(a);p(a.data)};a.connect(this.node);this.node.connect(this.context.destination)};l.forceDownload=function(g,k){var d=(a.URL||a.webkitURL).createObjectURL(g);g=a.document.createElement("a");g.href=d;g.download=k||"output.wav";k=document.createEvent("Event");k.initEvent("click",!0,!0);g.dispatchEvent(k)};a.Recorder=l})(window);(function(a){a.REPLACE=function(a,g,k){return a.replace(new RegExp(g,"g"),k)};a.LOWER=function(a){return a.toLowerCase()};a.UPPER=function(a){return a.toUpperCase()};a.CHR=function(a){return String.fromCharCode(a)};a.ASCII=function(a){return a.charCodeAt(0)};a.substr=function(a,g,k){return a.substr(parseInt(g)-1,k)};a.SUBSTR=function(a,g,k){return parseInt(g)+parseInt(k)>a.length?"":a.substr(parseInt(g),parseInt(k))};a.CONCAT=function(){return Array.prototype.slice.call(arguments).join("")};a.TRANSLATE=
function(a,g,k){return a};a.CHARINDEX=function(a,g){return a.indexOf(g)};a.REGEXP_LIKE=function(a,g){g.replace("regex(","").replace(g.charAt(g.lastIndexOf(")")),"");return(new RegExp(g.substring(0,g.length-1).replace("regex(",""))).test(a)};a.EXEC_REGEXP_LIKE=function(a,g){return(new RegExp(g.substring(0,g.length-1).replace("regex(",""))).exec(a)};a.RPAD=function(a,g,k){a=a.concat(k);g=Array(parseInt(g));var d=g.length;if(a.length==d)return a;if(a.length<d){g=a.split("");for(var b=0;b<d;b++)if(""==
g[b]||void 0==g[b])for(a=0;a<k.length;a++)b<d&&(g[b]=k[a],b+=1,a==k.length-1&&--b)}else for(b=0;b<d;b++)g[b]=a[b];return g.join("")};a.STRINGLENGTH=function(a){return a.length};a.TRIM=function(a,g){if(void 0!=g)if(" "!=g&&""!=g){for(var k=a.split(""),d=0;d<k.length;d++)if(k[d]==g)k[d]="";else{a=k.join("");break}k=a.split("");for(d=k.length-1;0<=d;d--)if(k[d]==g)k[d]="";else{a=k.join("");break}}else if(" "==g)return a.trim();return a};a.LTRIM=function(a,g){if(void 0!=g&&""!=g)for(var k=a.split(""),
d=0;d<k.length;d++)if(-1<g.indexOf(k[d]))k[d]="";else{a=k.join("");break}return a};a.RTRIM=function(a,g){if(void 0!=g&&""!=g)for(var k=a.split(""),d=k.length-1;0<=d;d--)if(-1<g.indexOf(k[d]))k[d]="";else{a=k.join("");break}return a};a.LEFT=function(a,g){return 0<parseInt(g)&&a.length>=parseInt(g)?a.substr(0,parseInt(g)):""};a.RIGHT=function(a,g){return 0<parseInt(g)&&a.length>=parseInt(g)?a.substr(a.length-parseInt(g),parseInt(g)):""};a.YEAR=function(a){try{var g=navigator.userAgent.toLowerCase();
-1==g.indexOf("safari")||-1<g.indexOf("chrome")||(a=a.replace(/-/g,"/"));var k=new Date(a);return"Invalid Date"==k?a:k.getFullYear()}catch(d){return a}};a.DAY=function(a){try{var g=navigator.userAgent.toLowerCase();-1==g.indexOf("safari")||-1<g.indexOf("chrome")||(a=a.replace(/-/g,"/"));var k=new Date(a);return"Invalid Date"==k?a:k.getDate()}catch(d){return a}};a.MONTH=function(a){try{var g=navigator.userAgent.toLowerCase();-1==g.indexOf("safari")||-1<g.indexOf("chrome")||(a=a.replace(/-/g,"/"));
var k=new Date(a);return"Invalid Date"==k?a:k.getMonth()+1}catch(d){return a}};a.HOUR=function(l){try{var g=navigator.userAgent.toLowerCase();-1==g.indexOf("safari")||-1<g.indexOf("chrome")||(l=l.replace(/-/g,"/"));var k=new Date(l);if("Invalid Date"==k){var d=a.validateTime(l);return"Invalid Time"==d?l:d.hh}return k.getHours()}catch(b){return l}};a.MINUTE=function(l){try{var g=navigator.userAgent.toLowerCase();-1==g.indexOf("safari")||-1<g.indexOf("chrome")||(l=l.replace(/-/g,"/"));var k=new Date(l);
if("Invalid Date"==k){var d=a.validateTime(l);return"Invalid Time"==d?l:d.mm}return k.getMinutes()}catch(b){return l}};a.SECOND=function(l){try{var g=navigator.userAgent.toLowerCase();-1==g.indexOf("safari")||-1<g.indexOf("chrome")||(l=l.replace(/-/g,"/"));var k=new Date(l);if("Invalid Date"==k){var d=a.validateTime(l);return"Invalid Time"==d?l:d.ss}return k.getSeconds()}catch(b){return l}};a.DATEFROMPARTS=function(a,g,k){try{g=isNaN(parseInt(g.toString()))?-1:parseInt(g.toString())-1;var d=new Date(a,
g,k);return"Invalid Date"===d?"Invalid Date":d.getFullYear()+"-"+(1==(d.getMonth()+1).toString().length?"0"+(d.getMonth()+1):d.getMonth()+1)+"-"+(1==d.getDate().toString().length?"0"+d.getDate():d.getDate())}catch(b){return"Invalid Date"}};a.TIMEFROMPARTS=function(a,g,k){try{var d=new Date,b=d.getYear()+1900,h=d.getMonth(),l=d.getDate(),p=new Date(b,h,l,a,g,k);return"Invalid Date"===p?"Invalid Date":p.getTime()}catch(m){return"Invalid Date"}};a.DOW=function(a){try{var g=new Date(a);return"Invalid Date"===
g?"":g.getDay()}catch(k){return a}};a.WOM=function(a){try{var g=new Date(a);if("Invalid Date"===g)return"";var k=new Date(g.getFullYear(),g.getMonth(),1);return Math.ceil((g.getDate()-(7-k.getDay()))/7)+1}catch(d){return""}};a.PREV_DATE=function(a){try{var g=new Date(a);if("Invalid Date"===g)return"Invalid Date";var k=new Date(g);k.setDate(g.getDate()-1);var d=k.getMonth()+1,b=k.getFullYear()+"-"+(1==d.toString().length?"0"+d:d)+"-"+(1==k.getDate().toString().length?"0"+k.getDate():k.getDate());return-1!=
a.indexOf(":")?b+a.substring(a.indexOf(" ")):b}catch(h){return"Invalid Date"}};a.NEXT_DATE=function(a){try{var g=new Date(a);if("Invalid Date"===g)return"Invalid Date";var k=new Date(g);k.setDate(g.getDate()+1);var d=k.getMonth()+1,b=k.getFullYear()+"-"+(1==d.toString().length?"0"+d:d)+"-"+(1==k.getDate().toString().length?"0"+k.getDate():k.getDate());return-1!=a.indexOf(":")?b+a.substring(a.indexOf(" ")):b}catch(h){return"Invalid Date"}};a.DATEDIFF=function(a,g,k){try{var d=new Date(g);if("Invalid Date"===
d)return"Invalid Start Date";var b=new Date(k);if("Invalid Date"===b)return"Invalid End Date";g=b-d;if(isNaN(g))return NaN;k=6048E5;switch(a){case "milliseconds":case "time":return g;case "seconds":return Math.round(g/1E3);case "minutes":return Math.round(g/6E4);case "hours":return Math.round(g/36E5);case "days":case "date":return Math.round(g/864E5);case "months":return b.getFullYear(),d.getFullYear(),b.getMonth(),d.getMonth(),b.getDate()<d.getDate()&&_months--,_months;case "years":return b.getFullYear()-
d.getFullYear();case "weeks":return Math.round(g/k);default:return g}}catch(h){return""}};a.WEEK=function(a){try{var g=new Date(a);if("Invalid Date"===g)return"";var k=new Date(g.getFullYear(),0,1);return Math.ceil(((g-k)/864E5+k.getDay()+1)/7)}catch(d){return a}};a.WOY=function(a){try{var g=new Date(a);if("Invalid Date"===g)return"";g.setHours(0,0,0,0);g.setDate(g.getDate()+3-(g.getDay()+6)%7);var k=new Date(g.getFullYear(),0,4);return 1+Math.round(((g.getTime()-k.getTime())/864E5-3+(k.getDay()+
6)%7)/7)}catch(d){return a}};a.FLOOR=function(a){try{return Math.floor(a)}catch(g){return""}};a.MOD=function(a,g){return a%g};a.HASH=function(a,g,k){try{if(void 0==g||""==g)g="SHA-256";if(void 0==k||""==k)k="BASE64";if(window.crypto&&crypto.subtle&&window.TextEncoder){var d=function(a,b,d){return crypto.subtle.digest(b,a).then(function(a){return"BASE64"==d?[].map.call(new Uint8Array(a),function(a){return("00"+a.toString(16)).slice(-2)}).join(""):btoa((new Uint8Array(a)).reduce(function(a,b){return a+
String.fromCharCode(b)},""))})},b=(new TextEncoder("utf-8")).encode(a);return(new Promise(function(a,l){setTimeout(function(){a(d(b,g,k))},10)})).then(function(a){return a})}return a}catch(h){return""}}})(jQuery);/*
 jQuery UI Virtual Keyboard v1.30.1 */
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof module&&"object"===typeof module.exports?module.exports=a(require("jquery")):a(jQuery)})(function(a){var l=a.keyboard=function(g,k){var d,b=this;b.version="1.30.1";b.$el=a(g);b.el=g;b.$el.data("keyboard",b);b.init=function(){b.initialized=!1;b.isTextArea="textarea"===b.el.nodeName.toLowerCase();b.isInput="input"===b.el.nodeName.toLowerCase();b.isContentEditable=!b.isTextArea&&!b.isInput&&b.el.isContentEditable;
var g=l.css,q=l.events;if(b.isInput&&0>a.inArray((b.el.type||"").toLowerCase(),l.supportedInputTypes))throw new TypeError('Input of type "'+b.el.type+'" is not supported; use type text, search, URL, tel or password');b.settings=k||{};if(k&&k.position){var p=a.extend({},k.position);k.position=null}b.options=d=a.extend(!0,{},l.defaultOptions,k);p&&(d.position=p,k.position=p);b.el.active=!0;b.namespace=".keyboard"+Math.random().toString(16).slice(2);b.extensionNamespace=[];b.shiftActive=b.altActive=
b.metaActive=b.sets=b.capsLock=!1;b.rows=["","-shift","-alt","-alt-shift"];b.inPlaceholder=b.$el.attr("placeholder")||"";b.watermark=l.watermark&&""!==b.inPlaceholder;b.repeatTime=1E3/(d.repeatRate||20);d.preventDoubleEventTime=d.preventDoubleEventTime||100;b.isOpen=!1;b.wheel="function"===typeof a.fn.mousewheel;b.escapeRegex=/[-\/\\^$*+?.()|[\]{}]/g;p=l.keyCodes;b.alwaysAllowed=[p.capsLock,p.pageUp,p.pageDown,p.end,p.home,p.left,p.up,p.right,p.down,p.insert,p.delete];b.$keyboard=[];b.enabled=!0;
b.checkCaret=d.lockInput||l.checkCaretSupport();b.isContentEditable&&(d.usePreview=!1);b.last={start:0,end:0,key:"",val:"",preVal:"",layout:"",virtual:!0,keyset:[!1,!1,!1],wheel_$Keys:[],wheelIndex:0,wheelLayers:[]};b.temp=["",0,0];a.each([q.kbInit,q.kbBeforeVisible,q.kbVisible,q.kbHidden,q.inputCanceled,q.inputAccepted,q.kbBeforeClose,q.inputRestricted],function(a,g){"function"===typeof d[g]&&b.$el.bind(g+b.namespace+"callbacks",d[g])});d.alwaysOpen&&(d.stayOpen=!0);p=a(document);b.el.ownerDocument!==
document&&(p=p.add(b.el.ownerDocument));var m="keyup checkkeyboard mousedown touchstart ";d.closeByClickEvent&&(m+="click ");p.bind(m.split(" ").join(b.namespace+" "),function(a){clearTimeout(b.timer3);b.timer3=setTimeout(function(){b.checkClose(a)},1)});b.$el.addClass(g.input+" "+d.css.input).attr({"aria-haspopup":"true",role:"textbox"});if(d.lockInput||b.el.readOnly)d.lockInput=!0,b.$el.addClass(g.locked).attr({readonly:"readonly"});b.isUnavailable()&&b.$el.addClass(g.noKeyboard);d.openOn&&b.bindFocus();
b.watermark||""!==b.getValue(b.$el)||""===b.inPlaceholder||""===b.$el.attr("placeholder")||(b.$el.addClass(g.placeholder),b.setValue(b.inPlaceholder,b.$el));b.$el.trigger(q.kbInit,[b,b.el]);d.alwaysOpen&&b.reveal();b.initialized=!0};b.toggle=function(){if(b.hasKeyboard()){var a=b.$keyboard.find("."+l.css.keyToggle),d=!b.enabled;b.preview.readonly=d||b.options.lockInput;b.$keyboard.toggleClass(l.css.keyDisabled,d).find("."+l.css.keyButton).not(a).attr("aria-disabled",d).each(function(){this.disabled=
d});a.toggleClass(l.css.keyDisabled,d);d&&b.typing_options&&(b.typing_options.text="");return b}};b.setCurrent=function(){var d=l.css,g=a("."+d.isCurrent),k=g.data("keyboard");a.isEmptyObject(k)||k.el===b.el||k.close(k.options.autoAccept?"true":!1);g.removeClass(d.isCurrent);a("."+d.hasFocus).removeClass(d.hasFocus);b.$el.addClass(d.isCurrent);b.$keyboard.addClass(d.hasFocus);b.isCurrent(!0);b.isOpen=!0};b.isUnavailable=function(){return b.$el.is(":disabled")||!b.options.activeOnReadonly&&b.$el.attr("readonly")&&
!b.$el.hasClass(l.css.locked)};b.isCurrent=function(a){var d=l.currentKeyboard||!1;a?d=l.currentKeyboard=b.el:!1===a&&d===b.el&&(d=l.currentKeyboard="");return d===b.el};b.hasKeyboard=function(){return b.$keyboard&&0<b.$keyboard.length};b.isVisible=function(){return b.hasKeyboard()?b.$keyboard.is(":visible"):!1};b.setFocus=function(){var a=b.$preview||b.$el;d.noFocus||a.focus();b.isContentEditable?l.setEditableCaret(a,b.last.start,b.last.end):l.caret(a,b.last)};b.focusOn=function(){b&&b.el.active&&
(b.isVisible()?b.setCurrent():(clearTimeout(b.timer),b.reveal()))};b.redraw=function(a){a&&(b.options.layout=a);b.$keyboard.length&&(b.last.preVal=""+b.last.val,b.saveLastChange(),b.setValue(b.last.val,b.$el),b.removeKeyboard(),b.shiftActive=b.altActive=b.metaActive=!1);b.isOpen=d.alwaysOpen;b.reveal(!0);return b};b.reveal=function(g){var h=b.isOpen;var k=l.css;b.opening=!h;a("."+k.keyboard).not("."+k.alwaysOpen).each(function(){var b=a(this).data("keyboard");a.isEmptyObject(b)||b.close(b.options.autoAccept?
"true":!1)});if(!b.isUnavailable()){b.$el.removeClass(k.noKeyboard);d.openOn&&b.$el.unbind(a.trim((d.openOn+" ").split(/\s+/).join(b.namespace+" ")));b.$keyboard&&(!b.$keyboard||b.$keyboard.length&&!a.contains(b.el.ownerDocument.body,b.$keyboard[0]))||b.startup();b.watermark||b.getValue()!==b.inPlaceholder||(b.$el.removeClass(k.placeholder),b.setValue("",b.$el));b.originalContent=b.isContentEditable?b.$el.html():b.getValue(b.$el);b.el===b.preview||b.isContentEditable||b.setValue(b.originalContent);
d.acceptValid&&d.checkValidOnInit&&b.checkValid();d.resetDefault&&(b.shiftActive=b.altActive=b.metaActive=!1);b.showSet();b.isVisible()||b.$el.trigger(l.events.kbBeforeVisible,[b,b.el]);(b.initialized||d.initialFocus||!d.initialFocus&&b.$el.hasClass(l.css.initialFocus))&&b.setCurrent();b.toggle();b.$keyboard.show();d.usePreview&&l.msie&&("undefined"===typeof b.width&&(b.$preview.hide(),b.width=Math.ceil(b.$keyboard.width()),b.$preview.show()),b.$preview.width(b.width));b.checkDecimal();b.lineHeight=
parseInt(b.$preview.css("lineHeight"),10)||parseInt(b.$preview.css("font-size"),10)+4;d.caretToEnd&&(k=b.isContentEditable?l.getEditableLength(b.el):b.originalContent.length,b.saveCaret(k,k));l.allie&&(0===b.last.end&&0<b.last.start&&(b.last.end=b.last.start),0>b.last.start&&(b.last.start=b.last.end=b.originalContent.length));if(h||g)return l.caret(b.$preview,b.last),b.opening=!1,b;b.timer2=setTimeout(function(){b.opening=!1;/(number|email)/i.test(b.el.type)||d.caretToEnd||b.saveCaret(void 0,void 0,
b.$el);(d.initialFocus||b.$el.hasClass(l.css.initialFocus))&&l.caret(b.$preview,b.last);b.last.eventTime=(new Date).getTime();b.$el.trigger(l.events.kbVisible,[b,b.el]);b.timer=setTimeout(function(){b&&b.saveCaret()},200)},10);return b}};b.updateLanguage=function(){var g=l.layouts,k=d.language||g[d.layout]&&g[d.layout].lang&&g[d.layout].lang||[d.language||"en"],p=l.language;k="[object Array]"===Object.prototype.toString.call(k)?k[0]:k;b.language=k;k=k.split("-")[0];d.display=a.extend(!0,{},p.en.display,
p[k]&&p[k].display||{},b.settings.display);d.combos=a.extend(!0,{},p.en.combos,p[k]&&p[k].combos||{},b.settings.combos);d.wheelMessage=p[k]&&p[k].wheelMessage||p.en.wheelMessage;d.rtl=g[d.layout]&&g[d.layout].rtl||p[k]&&p[k].rtl||!1;p[k]&&p[k].comboRegex&&(b.regex=p[k].comboRegex);b.decimal=/^\./.test(d.display.dec);b.$el.toggleClass("rtl",d.rtl).css("direction",d.rtl?"rtl":"")};b.startup=function(){var g=l.css;(d.alwaysOpen||d.userClosed)&&b.$preview||b.makePreview();if(!b.hasKeyboard()){"custom"===
d.layout&&(d.layoutHash="custom"+b.customHash());b.layout="custom"===d.layout?d.layoutHash:d.layout;b.last.layout=b.layout;b.updateLanguage();"undefined"===typeof l.builtLayouts[b.layout]&&("function"===typeof d.create?b.$keyboard=d.create(b):b.$keyboard.length||b.buildKeyboard(b.layout,!0));b.$keyboard=l.builtLayouts[b.layout].$keyboard.clone();b.$keyboard.data("keyboard",b);if(""!==(b.el.id||"")){var k=a.mobileweb.getCurrentPage().getName();b.$keyboard.attr("id",b.el.id+l.css.idSuffix);b.$keyboard.css({width:a(".scroller").css("width")});
b.$keyboard.css({height:"max-content","overflow-y":"hidden"});"BaseView"==a.mobileweb.getCurrentPage().getViewType()?b.$keyboard.css({left:a(".scroller").css("left")}):b.$keyboard.css({left:a("#iscroll_"+k).css("left")});b.$keyboard.css({"border-radius":"0px",background:"black",padding:"0px",top:"auto"});var p=setInterval(function(){clearInterval(p);var d=0,f=a("#"+b.el.id).parents(),g=!1,h=!1;a.each(f,function(a,b){-1!=b.id.indexOf("_toolbarBottom")&&(g=!0)});a.each(f,function(a,b){-1!=b.id.indexOf("leftToolBar")&&
(h=!0)});parseInt(b.el.style.top)+parseInt(b.el.style.height)>=document.documentElement.clientHeight-parseInt(b.$keyboard.css("height"))&&!h?(d+=a.mobileweb.getCurrentPage().statusbar.height,a.mobileweb.getCurrentPage().header.isHidden()||(d+=a.mobileweb.getCurrentPage().header.height),a.mobileweb.getCurrentPage().toolbartop.isHidden()||(d+=a.mobileweb.getCurrentPage().toolbartop.height,0==a.mobileweb.getCurrentPage().toolbartop.height&&(d+=parseInt(a("#"+a.mobileweb.getCurrentPage().getName()+"_toolbarTop").css("height")))),
d-=parseInt(b.$keyboard.css("height")),a.mobileweb.getCurrentPage().footer.isHidden()||(d+=a.mobileweb.getCurrentPage().footer.height),a.mobileweb.getCurrentPage().toolbarbottom.isHidden()||(d+=a.mobileweb.getCurrentPage().toolbarbottom.height),a("#iscroll_"+k).css({top:d+"px"})):(d=parseInt(b.$keyboard.css("height")),parseInt(a("#"+k+"_toolbarBottom").css("top"))+parseInt(a("#"+k+"_toolbarBottom").css("height"))>=document.documentElement.clientHeight-parseInt(b.$keyboard.css("height"))&&g&&(a.mobileweb.getCurrentPage().footer.isHidden()||
(d-=a.mobileweb.getCurrentPage().footer.height),a.mobileweb.getCurrentPage().toolbarbottom.isHidden()||parseInt(a("#"+k+"_toolbarBottom").css("height"))>d&&(d=parseInt(a("#"+k+"_toolbarBottom").css("height"))-d),a("#"+k+"_toolbarBottom").css({top:parseInt(a("#"+k+"_toolbarBottom").css("top"))-d+"px"})),parseInt(b.el.style.top)+parseInt(b.el.style.height)>=document.documentElement.clientHeight-parseInt(b.$keyboard.css("height"))&&h&&(d=parseInt(b.$keyboard.css("height")),a.mobileweb.getCurrentPage().footer.isHidden()||
(d-=a.mobileweb.getCurrentPage().footer.height),a.mobileweb.getCurrentPage().toolbarbottom.isHidden()||parseInt(a("#"+k+"_toolbarBottom").css("height"))>d&&(d=parseInt(a("#"+k+"_toolbarBottom").css("height"))-d),a("#leftToolBar").css({top:parseInt(a("#leftToolBar").css("top"))-d+"px"})))},100)}b.makePreview()}b.$keyboard.attr("data-"+g.keyboard+"-layout",d.layout).attr("data-"+g.keyboard+"-language",b.language);b.$decBtn=b.$keyboard.find("."+g.keyPrefix+"dec");(d.enterNavigation||b.isTextArea)&&b.alwaysAllowed.push(l.keyCodes.enter);
0<a("#"+b.$keyboard[0].id).length&&a("#"+b.$keyboard[0].id).remove();b.bindKeyboard();b.$keyboard.appendTo(d.appendLocally?b.$el.parent():d.appendTo||"body");b.bindKeys();d.reposition&&a.ui&&a.ui.position&&"body"===d.appendTo&&a(window).bind("resize"+b.namespace,function(){})};b.reposition=function(){b.position=a.isEmptyObject(d.position)?!1:d.position;a.ui&&a.ui.position&&b.position&&(b.position.of=b.position.of||b.$el.data("keyboardPosition")||b.$el,b.position.collision=b.position.collision||"flipfit flipfit",
b.position.at=d.usePreview?d.position.at:d.position.at2,b.isVisible()&&b.$keyboard.position(b.position));return b};b.makePreview=function(){if(d.usePreview){var g,k=l.css;b.$preview=b.$el.clone(!1).data("keyboard",b).removeClass(k.placeholder+" "+k.input).addClass(k.preview+" "+d.css.input).attr("tabindex","-1").show();b.preview=b.$preview[0];var p=/^(data-|id|aria-haspopup)/i;var m=b.$preview.get(0).attributes;for(g=m.length-1;0<=g;g--){var f=m[g]&&m[g].name;p.test(f)&&b.preview.removeAttribute(f)}a("<div />").addClass(k.wrapper).append(b.$preview).prependTo(b.$keyboard)}else b.$preview=
b.$el,b.preview=b.el};b.caret=function(d,g){d=l.caret(b.$preview,d,g);return d instanceof a?(b.saveCaret(d.start,d.end),b):d};b.saveCaret=function(a,d,g){b.isCurrent()&&(g="undefined"===typeof a?l.caret(g||b.$preview):l.caret(g||b.$preview,a,d),b.last.start="undefined"===typeof a?g.start:a,b.last.end="undefined"===typeof d?g.end:d)};b.saveLastChange=function(a){b.last.val=a||b.getValue(b.$preview||b.$el);b.isContentEditable&&(b.last.elms=b.el.cloneNode(!0))};b.setScroll=function(){if(!b.isContentEditable&&
b.last.virtual){var a=b.last.val.substring(0,Math.max(b.last.start,b.last.end));b.$previewCopy||(b.$previewCopy=b.$preview.clone().removeAttr("id").css({position:"absolute",left:0,zIndex:-10,visibility:"hidden"}).addClass(l.css.inputClone),b.$previewCopy[0].disabled=!0,b.isTextArea||b.$previewCopy.css({"white-space":"pre",width:0}),d.usePreview?b.$preview.after(b.$previewCopy):b.$keyboard.prepend(b.$previewCopy));if(b.isTextArea)b.$previewCopy.height(b.lineHeight).val(a),b.preview.scrollTop=b.lineHeight*
(Math.floor(b.$previewCopy[0].scrollHeight/b.lineHeight)-1);else{b.$previewCopy.val(a.replace(/\s/g,"\u00a0"));var g=/c/i.test(d.scrollAdjustment)?b.preview.clientWidth/2:d.scrollAdjustment;a=b.$previewCopy[0].scrollWidth-1;"undefined"===typeof b.last.scrollWidth&&(b.last.scrollWidth=a,b.last.direction=!0);var k=b.last.scrollWidth===a?b.last.direction:b.last.scrollWidth<a;var m=b.preview.clientWidth-g;b.preview.scrollLeft=k?a<m?0:a-m:a>=b.preview.scrollWidth-m?b.preview.scrollWidth-g:0<a-g?a-g:0;
b.last.scrollWidth=a;b.last.direction=k}}};b.bindFocus=function(){d.openOn&&b&&b.el.active&&(b.$el.bind(d.openOn+b.namespace,function(){var d=a("#"+b.$el[0].id).data("keyboardType");"Default"!=d&&"HW"!=d&&"Flic"!=d&&"Flick"!=d&&b.focusOn()}),a(":focus")[0]===b.el&&b.$el.blur())};b.bindKeyboard=function(){var g,k=l.keyCodes,p=l.builtLayouts[b.layout],m=b.namespace+"keybindings";b.$preview.unbind(b.namespace).bind("click"+m+" touchstart"+m,function(){d.alwaysOpen&&!b.isCurrent()&&b.reveal();b.timer2=
setTimeout(function(){b&&b.saveCaret()},150)}).bind("keypress"+m,function(f){if(d.lockInput)return!1;if(b.isCurrent()){var h=f.charCode||f.which,m=h>=k.A&&h<=k.Z,q=h>=k.a&&h<=k.z,A=b.last.key=String.fromCharCode(h);if(!(h<k.space)){b.last.virtual=!1;b.last.event=f;b.last.$key=[];b.checkCaret&&b.saveCaret();h!==k.capsLock&&(m||q)&&(b.capsLock=m&&!f.shiftKey||q&&f.shiftKey,b.capsLock&&!b.shiftActive&&(b.shiftActive=!0,b.showSet()));if(d.restrictInput){if((f.which===k.backSpace||0===f.which)&&a.inArray(f.keyCode,
b.alwaysAllowed))return;-1===a.inArray(A,p.acceptedKeys)&&(f.preventDefault(),g=a.extend({},f),g.type=l.events.inputRestricted,b.$el.trigger(g,[b,b.el]))}else if((f.ctrlKey||f.metaKey)&&(f.which===k.A||f.which===k.C||f.which===k.V||f.which>=k.X&&f.which<=k.Z))return;p.hasMappedKeys&&p.mappedKeys.hasOwnProperty(A)&&(b.last.key=p.mappedKeys[A],b.insertText(b.last.key),f.preventDefault());"function"===typeof d.beforeInsert&&(b.insertText(b.last.key),f.preventDefault());b.checkMaxLength()}}}).bind("keyup"+
m,function(f){if(b.isCurrent()){b.last.virtual=!1;switch(f.which){case k.tab:if(b.tab&&!d.lockInput){if(b.shiftActive=f.shiftKey,f=l.keyaction.tab(b),b.tab=!1,!f)return!1}else f.preventDefault();break;case k.escape:return d.ignoreEsc||b.close(d.autoAccept&&d.autoAcceptOnEsc?"true":!1),!1}clearTimeout(b.throttled);b.throttled=setTimeout(function(){b&&b.isVisible()&&b.checkCombos()},100);b.checkMaxLength();b.last.preVal=""+b.last.val;b.saveLastChange();f=a.Event(l.events.kbChange);f.action=b.last.key;
b.$el.trigger(f,[b,b.el]);if("function"===typeof d.change)return f.type=l.events.inputChange,d.change(f,b,b.el),!1;d.acceptValid&&d.autoAcceptOnValid&&"function"===typeof d.validate&&d.validate(b,b.getValue(b.$preview))&&(b.$preview.blur(),b.accept())}}).bind("keydown"+m,function(a){b.last.keyPress=a.which;d.alwaysOpen&&!b.isCurrent()&&b.reveal();if(a.which===k.tab)return b.tab=!0,!1;if(d.lockInput||a.timeStamp===b.last.timeStamp)return!d.lockInput;b.last.timeStamp=a.timeStamp;b.last.virtual=!1;switch(a.which){case k.backSpace:l.keyaction.bksp(b,
null,a);a.preventDefault();break;case k.enter:l.keyaction.enter(b,null,a);break;case k.capsLock:b.shiftActive=b.capsLock=!b.capsLock;b.showSet();break;case k.V:if(a.ctrlKey||a.metaKey)d.preventPaste?a.preventDefault():b.checkCombos()}}).bind(["mouseup","touchend",""].join(m+" "),function(){b.last.virtual=!0;b.saveCaret()});b.$keyboard.bind(["mousedown","click","touchstart",""].join(b.namespace+" "),function(d){d.stopPropagation();b.isCurrent()||(b.reveal(),a(b.el.ownerDocument).trigger("checkkeyboard"+
b.namespace));b.setFocus()});d.preventPaste&&(b.$preview.bind("contextmenu"+b.namespace,function(a){a.preventDefault()}),b.$el.bind("contextmenu"+b.namespace,function(a){a.preventDefault()}))};b.bindButton=function(d,g){var h="."+l.css.keyButton,k=function(b){b.stopPropagation();b.$target=a(this).closest("."+l.css.keyboard+", ."+l.css.input);g.call(this,b)};if(a.fn.on)b.$keyboard.on(d,h,k);else a.fn.delegate&&b.$keyboard.delegate(h,d,k);return b};b.unbindButton=function(d){a.fn.off?b.$keyboard.off(d):
a.fn.undelegate&&b.$keyboard.undelegate("."+l.css.keyButton,d);return b};b.bindKeys=function(){var g=l.css;b.unbindButton(b.namespace+" "+b.namespace+"kb").bindButton(["mouseenter","mouseleave","touchstart",""].join(b.namespace+" "),function(g){!d.alwaysOpen&&!d.userClosed||"mouseleave"===g.type||b.isCurrent()||(b.reveal(),b.setFocus());if(b.isCurrent()&&!this.disabled){var h=b.last,k=a(this),f=g.type;if(d.useWheel&&b.wheel){g=b.getLayers(k);var l=(g.length?g.map(function(){return a(this).attr("data-value")||
""}).get():"")||[k.text()];h.wheel_$Keys=g;h.wheelLayers=l;h.wheelIndex=a.inArray(k.attr("data-value"),l)}"mouseenter"!==f&&"touchstart"!==f||"password"===b.el.type||k.hasClass(d.css.buttonDisabled)||(k.addClass(d.css.buttonHover),d.useWheel&&b.wheel&&k.attr("title",function(a,g){return b.wheel&&""===g&&b.sets&&1<l.length&&"touchstart"!==f?d.wheelMessage:g}));"mouseleave"===f&&(k.removeClass("password"===b.el.type?"":d.css.buttonHover),d.useWheel&&b.wheel&&(h.wheelIndex=0,h.wheelLayers=[],h.wheel_$Keys=
[],k.attr("title",function(a,b){return b===d.wheelMessage?"":b}).html(k.attr("data-html"))))}}).bindButton(d.keyBinding.split(" ").join(b.namespace+" ")+b.namespace+" "+l.events.kbRepeater,function(h){"mousedown"===h.type?b.$el.trigger("keypress"):"touchstart"===h.type&&b.$el.trigger("keypress");h.preventDefault();if(!b.$keyboard.is(":visible")||this.disabled)return!1;var k=b.last,m=a(this),f=(new Date).getTime();d.useWheel&&b.wheel&&(m=k.wheel_$Keys.length&&-1<k.wheelIndex?k.wheel_$Keys.eq(k.wheelIndex):
m);var q=m.attr("data-action");if(!(f-(k.eventTime||0)<d.preventDoubleEventTime)){k.eventTime=f;k.event=h;k.virtual=!0;k.$key=m;k.key=m.attr("data-value");k.keyPress="";b.setFocus();/^meta/.test(q)&&(q="meta");if(q===k.key&&"string"===typeof l.keyaction[q])k.key=q=l.keyaction[q];else if(q in l.keyaction&&"function"===typeof l.keyaction[q]){if(!1===l.keyaction[q](b,this,h))return!1;q=null}if(!b.hasKeyboard())return!1;"undefined"!==typeof q&&null!==q&&(k.key=a(this).hasClass(g.keyAction)?q:k.key,b.insertText(k.key),
b.capsLock||d.stickyShift||h.shiftKey||(b.shiftActive=!1,b.showSet(m.attr("data-name"))));l.caret(b.$preview,k);b.checkCombos();h=a.extend({},h,a.Event(l.events.kbChange));h.target=b.el;h.action=k.key;b.$el.trigger(h,[b,b.el]);k.preVal=""+k.val;b.saveLastChange();if("function"===typeof d.change)return h.type=l.events.inputChange,d.change(h,b,b.el),!1}}).bindButton("mouseup"+b.namespace+" "+["mouseleave","touchend","touchmove","touchcancel",""].join(b.namespace+"kb "),function(g){b.last.virtual=!0;
var h=a(this);if("touchmove"===g.type){var k=h.offset();k.right=k.left+h.outerWidth();k.bottom=k.top+h.outerHeight();if(g.originalEvent.touches[0].pageX>=k.left&&g.originalEvent.touches[0].pageX<k.right&&g.originalEvent.touches[0].pageY>=k.top&&g.originalEvent.touches[0].pageY<k.bottom)return!0}else/(mouseleave|touchend|touchcancel)/i.test(g.type)?("touchend"===g.type&&b.$el.trigger("keyup"),h.removeClass(d.css.buttonHover)):(!d.noFocus&&b.isCurrent()&&b.isVisible()&&b.$preview.focus(),b.checkCaret&&
l.caret(b.$preview,b.last));b.mouseRepeat=[!1,""];clearTimeout(b.repeater);d.acceptValid&&d.autoAcceptOnValid&&"function"===typeof d.validate&&d.validate(b,b.getValue())&&(b.$preview.blur(),b.accept());return!1}).bindButton("click"+b.namespace,function(a){"click"===a.type&&b.$el.trigger("keyup");return!1}).bindButton("mousewheel"+b.namespace,b.throttleEvent(function(h,k){var l=a(this);if(l&&!l.hasClass(g.keyAction)&&b.last.wheel_$Keys[0]===this&&d.useWheel&&b.wheel)return k=k||h.deltaY,h=b.last.wheelLayers||
[],1<h.length?(k=b.last.wheelIndex+(0<k?-1:1),k>h.length-1&&(k=0),0>k&&(k=h.length-1)):k=0,b.last.wheelIndex=k,l.html(h[k]),!1},30)).bindButton(["mousedown","touchstart",""].join(b.namespace+"kb "),function(){var h=a(this);if(h&&(!h.hasClass(g.keyAction)||h.is("."+g.keyPrefix+["tab","bksp","space","enter"].join(",."+g.keyPrefix))))return 0!==d.repeatRate&&(b.mouseRepeat=[!0,h],setTimeout(function(){b&&b.mouseRepeat[0]&&b.mouseRepeat[1]===h&&!h[0].disabled&&b.repeatKey(h)},d.repeatDelay)),!1})};b.throttleEvent=
function(a,b){var d;return function(){d||(a.apply(this,arguments),d=!0,setTimeout(function(){d=!1},b))}};b.execCommand=function(a,g){b.el.ownerDocument.execCommand(a,!1,g);b.el.normalize();d.reposition&&b.reposition()};b.getValue=function(a){a=a||b.$preview;return a[b.isContentEditable?"text":"val"]()};b.setValue=function(a,d){d=d||b.$preview;b.isContentEditable?a!==d.text()&&(l.replaceContent(d,a),b.saveCaret()):d.val(a);return b};b.insertText=function(a){if(!b.$preview)return b;"function"===typeof d.beforeInsert&&
(a=d.beforeInsert(b.last.event,b,b.el,a));if("undefined"===typeof a||!1===a)return b.last.key="",b;if(b.isContentEditable)return b.insertContentEditable(a);var g=!1,h="\b"===a,k=b.getValue(),f=l.caret(b.$preview);var u=k.length;f.end<f.start&&(f.end=f.start);f.start>u&&(f.end=f.start=u);b.isTextArea&&l.msie&&"\n"===k.substring(f.start,f.start+1)&&(f.start+=1,f.end+=1);u=f.start;"{d}"===a&&(a="",f.end+=1);h&&(a="",g=h&&u===f.end&&0<u);k=k.substring(0,u-(g?1:0))+a+k.substring(f.end);u+=g?-1:a.length;
b.setValue(k);b.saveCaret(u,u);b.setScroll();return b};b.insertContentEditable=function(a){b.$preview.focus();b.execCommand("insertText",a);b.saveCaret();return b};b.checkMaxLength=function(){if(b.$preview){var a=b.getValue();var g=b.isContentEditable?l.getEditableLength(b.el):a.length;if(!1!==d.maxLength&&g>d.maxLength){g=l.caret(b.$preview).start;var k=Math.min(g,d.maxLength);d.maxInsert||(a=b.last.val,k=g-1);b.setValue(a.substring(0,d.maxLength));b.saveCaret(k,k)}b.$decBtn.length&&b.checkDecimal();
return b}};b.repeatKey=function(a){a.trigger(l.events.kbRepeater);b.mouseRepeat[0]&&(b.repeater=setTimeout(function(){b&&b.repeatKey(a)},b.repeatTime))};b.getKeySet=function(){var a=[];b.altActive&&a.push("alt");b.shiftActive&&a.push("shift");b.metaActive&&a.push(b.metaActive);return a.length?a.join("+"):"normal"};b.showKeySet=function(a){"string"===typeof a?(b.last.keyset=[b.shiftActive,b.altActive,b.metaActive],b.shiftActive=/shift/i.test(a),b.altActive=/alt/i.test(a),/\bmeta/.test(a)?(b.metaActive=
!0,b.showSet(a.match(/\bmeta[\w-]+/i)[0])):(b.metaActive=!1,b.showSet())):b.showSet(a);return b};b.showSet=function(a){if(b.hasKeyboard()){d=b.options;var g=l.css,h="."+g.keyPrefix,k=d.css.buttonActive,f="",u=(b.shiftActive?1:0)+(b.altActive?2:0);b.shiftActive||(b.capsLock=!1);if(b.metaActive){if(b.shiftActive&&(a=(a||"").replace("-shift","")),b.altActive&&(a=(a||"").replace("-alt","")),f=/^meta/i.test(a)?a:"",""===f?f=!0===b.metaActive?"":b.metaActive:b.metaActive=f,!d.stickyShift&&b.last.keyset[2]!==
b.metaActive||(b.shiftActive||b.altActive)&&!b.$keyboard.find("."+g.keySet+"-"+f+b.rows[u]).length)b.shiftActive=b.altActive=!1}else!d.stickyShift&&b.last.keyset[2]!==b.metaActive&&b.shiftActive&&(b.shiftActive=b.altActive=!1);u=(b.shiftActive?1:0)+(b.altActive?2:0);f=0!==u||b.metaActive?""===f?"":"-"+f:"-normal";b.$keyboard.find("."+g.keySet+f+b.rows[u]).length?(b.$keyboard.find(h+"alt,"+h+"shift,."+g.keyAction+"[class*=meta]").removeClass(k).end().find(h+"alt").toggleClass(k,b.altActive).end().find(h+
"shift").toggleClass(k,b.shiftActive).end().find(h+"lock").toggleClass(k,b.capsLock).end().find("."+g.keySet).hide().end().find("."+(g.keyAction+h+f).replace("--","-")).addClass(k),b.$keyboard.find("."+g.keySet+f+b.rows[u])[0].style.display="inline-block",b.metaActive&&b.$keyboard.find(h+b.metaActive).toggleClass(k,!1!==b.metaActive),b.last.keyset=[b.shiftActive,b.altActive,b.metaActive],b.$el.trigger(l.events.kbKeysetChange,[b,b.el]),d.reposition&&b.reposition()):(b.shiftActive=b.last.keyset[0],
b.altActive=b.last.keyset[1],b.metaActive=b.last.keyset[2])}};b.checkCombos=function(){if(!(b.isVisible()||b.hasKeyboard()&&b.$keyboard.hasClass(l.css.hasFocus)))return b.getValue(b.$preview||b.$el);var h=b.getValue();var k=l.caret(b.$preview),p=l.builtLayouts[b.layout],m=b.isContentEditable?l.getEditableLength(b.el):h.length,f=m;if(""===h)return d.acceptValid&&b.checkValid(),h;k.end<k.start&&(k.end=k.start);k.start>f&&(k.end=k.start=f);l.msie&&"\n"===h.substring(k.start,k.start+1)&&(k.start+=1,k.end+=
1);if(d.useCombos)if(l.msie)h=h.replace(b.regex,function(a,b,f){return d.combos.hasOwnProperty(b)?d.combos[b][f]||a:a});else if(b.$preview.length){var u=k.start-(0<=k.start-2?2:0);l.caret(b.$preview,u,k.end);u=l.caret(b.$preview);h=function(a){return(a||"").replace(b.regex,function(a,b,f){return d.combos.hasOwnProperty(b)?d.combos[b][f]||a:a})};var w=h(u.text);u&&u.replaceStr&&w!==u.text&&(b.isContentEditable?l.replaceContent(g,h):b.setValue(u.replaceStr(w)));h=b.getValue()}d.restrictInput&&""!==
h&&(u=p.acceptedKeys.length,u=p.acceptedKeysRegex,u||(w=a.map(p.acceptedKeys,function(a){return a.replace(b.escapeRegex,"\\$&")}),-1<b.alwaysAllowed.indexOf(l.keyCodes.enter)&&w.push("\\n"),u=p.acceptedKeysRegex=new RegExp("("+w.join("|")+")","g")),(w=h.match(u))?h=w.join(""):(h="",f=0));k.start+=m-f;k.end+=m-f;b.setValue(h);b.saveCaret(k.start,k.end);b.setScroll();b.checkMaxLength();d.acceptValid&&b.checkValid();return h};b.checkValid=function(){var a=l.css,g=b.$keyboard.find("."+a.keyPrefix+"accept"),
k=!0;"function"===typeof d.validate&&(k=d.validate(b,b.getValue(),!1));g.toggleClass(a.inputInvalid,!k).toggleClass(a.inputValid,k).attr("title",g.attr("data-title")+" ("+d.display[k?"valid":"invalid"]+")")};b.checkDecimal=function(){b.decimal&&/\./g.test(b.preview.value)||!b.decimal&&/,/g.test(b.preview.value)?b.$decBtn.attr({disabled:"disabled","aria-disabled":"true"}).removeClass(d.css.buttonHover).addClass(d.css.buttonDisabled):b.$decBtn.removeAttr("disabled").attr({"aria-disabled":"false"}).addClass(d.css.buttonDefault).removeClass(d.css.buttonDisabled)};
b.getLayers=function(b){var d=l.css,g=b.attr("data-pos");return b.closest("."+d.keyboard).find('button[data-pos="'+g+'"]').filter(function(){return""!==a(this).find("."+d.keyText).text()}).add(b)};b.switchInput=function(g,k){if("function"===typeof d.switchInput)d.switchInput(b,g,k);else{b.$keyboard.length&&b.$keyboard.hide();var h=!1,l=a("button, input, select, textarea, a, [contenteditable]").filter(":visible").not(":disabled");g=l.index(b.$el)+(g?1:-1);b.$keyboard.length&&b.$keyboard.show();g>l.length-
1&&(h=d.stopAtEnd,g=0);0>g&&(h=d.stopAtEnd,g=l.length-1);if(!h){k=b.close(k);if(!k)return;(k=l.eq(g).data("keyboard"))&&k.options.openOn.length?k.focusOn():l.eq(g).focus()}}return!1};b.close=function(a){if(b.isOpen&&b.$keyboard.length){clearTimeout(b.throttled);var g=l.css,h=l.events,k=a?b.checkCombos():b.originalContent;if(a&&"function"===typeof d.validate&&!d.validate(b,k,!0)&&(k=b.originalContent,a=!1,d.cancelClose))return;b.isCurrent(!1);b.isOpen=d.alwaysOpen||d.userClosed;b.isContentEditable&&
!a?b.$el.html(k):b.setValue(k,b.$el);b.$el.removeClass(g.isCurrent+" "+g.inputAutoAccepted).addClass(a?!0===a?"":g.inputAutoAccepted:"").trigger(h.inputChange);d.alwaysOpen||b.$el.trigger(h.kbBeforeClose,[b,b.el,a||!1]);l.caret(b.$preview,b.last);b.$el.trigger(a?h.inputAccepted:h.inputCanceled,[b,b.el]).trigger(d.alwaysOpen?h.kbInactive:h.kbHidden,[b,b.el]).blur();b&&(b.last.eventTime=(new Date).getTime(),d.alwaysOpen||d.userClosed&&"true"===a||!b.$keyboard.length||(b.removeKeyboard(),b.timer=setTimeout(function(){b&&
b.bindFocus()},200)),b.watermark||""!==b.el.value||""===b.inPlaceholder||(b.$el.addClass(g.placeholder),b.setValue(b.inPlaceholder,b.$el)))}return!!a};b.accept=function(){return b.close(!0)};b.checkClose=function(g){if(!b.opening){var h=a.keyboard.css,k=g.$target||a(g.target).closest("."+l.css.keyboard+", ."+l.css.input);k.length||(k=a(g.target));k.length&&k.hasClass(h.keyboard)?(k=k.data("keyboard"),k!==b&&!k.$el.hasClass(h.isCurrent)&&k.options.openOn&&g.type===d.openOn&&k.focusOn()):b.escClose(g,
k)}};b.escCloseCallback={keepOpen:function(){return!b.isOpen}};b.escClose=function(g,k){if(b.isOpen){if(g&&"keyup"===g.type)return g.which!==l.keyCodes.escape||d.ignoreEsc?"":b.close(d.autoAccept&&d.autoAcceptOnEsc?"true":!1);var h=!1,m=k.length&&k||a(g.target);a.each(b.escCloseCallback,function(a,b){"function"===typeof b&&(h=h||b(m))});h||!(!b.isCurrent()&&b.isOpen||b.isOpen&&m[0]!==b.el)||(d.stayOpen||d.userClosed)&&!m.hasClass(l.css.input)||(l.allie&&g.preventDefault(),d.closeByClickEvent?(k=m[0]&&
m[0].nodeName.toLowerCase(),"input"!==k&&"textarea"!==k&&"click"!==g.type||b.close(d.autoAccept?"true":!1)):b.close(d.autoAccept?"true":!1))}};b.keyBtn=a("<button />").attr({role:"button",type:"button","aria-disabled":"false",tabindex:"-1"}).addClass(l.css.keyButton);b.processName=function(a){var b=(a||"").replace(/[^a-z0-9-_]/gi,"");var d=b.length,g=[];if(1<d&&a===b)return a;if(d=a.length){for(b=0;b<d;b++){var f=a[b];g.push(/[a-z0-9-_]/i.test(f)?/[-_]/.test(f)&&0!==b?"":f:(0===b?"":"-")+f.charCodeAt(0))}return g.join("")}return a};
b.processKeys=function(b){var d=b.indexOf("</");var g={name:b,map:"",title:""};if(-1<d)return g;var h=b.split(/:(?!\/\/)/);/\(.+\)/.test(h[0])||/^:\(.+\)/.test(b)||/\([(:)]\)/.test(b)?/\([(:)]\)/.test(b)?(d=h[0].match(/([^(]+)\((.+)\)/))&&d.length?(g.name=d[1],g.map=d[2],g.title=1<h.length?h.slice(1).join(":"):""):(g.name=b.match(/([^(]+)/)[0],":"===g.name&&(h=h.slice(1)),null===d&&(g.map=":",h=h.slice(2)),g.title=h.length?h.join(":"):""):(g.map=b.match(/\(([^()]+?)\)/)[1],b=b.replace(/\(([^()]+)\)/,
""),d=b.split(":"),""===d[0]?(g.name=":",h=h.slice(1)):g.name=d[0],g.title=1<h.length?h.slice(1).join(":"):""):(""!==b&&""===h[0]?(g.name=":",h=h.slice(1)):g.name=h[0],g.title=1<h.length?h.slice(1).join(":"):"");g.title=a.trim(g.title).replace(/_/g," ");return g};b.addKey=function(a,g,k){var h={},f=b.processKeys(k?a:g),p=l.css;!k&&d.display[f.name]?(g=b.processKeys(d.display[f.name]),g.action=b.processKeys(a).name):(g=f,g.action=f.name);h.name=b.processName(f.name);""!==g.name&&(""!==g.map?(l.builtLayouts[b.layout].mappedKeys[g.map]=
g.name,l.builtLayouts[b.layout].acceptedKeys.push(g.name)):k&&l.builtLayouts[b.layout].acceptedKeys.push(g.name));a=k?""===h.name?"":p.keyPrefix+h.name:p.keyAction+" "+p.keyPrefix+g.action;a+=(2<g.name.length?" "+p.keyWide:"")+" "+d.css.buttonDefault;h.html='<span class="'+p.keyText+'">'+g.name+"</span>";h.$key=b.keyBtn.clone().attr({"data-value":k?g.name:g.action,"data-name":g.action,"data-pos":b.temp[1]+","+b.temp[2],"data-action":g.action,"data-html":h.html}).addClass(a).html(h.html).appendTo(b.temp[0]);
g.map&&h.$key.attr("data-mapped",g.map);(g.title||f.title)&&h.$key.attr({"data-title":f.title||g.title,title:f.title||g.title});"function"===typeof d.buildKey&&(h=d.buildKey(b,h),k=h.$key.html(),h.$key.attr("data-html",k));return h.$key};b.customHash=function(a){var b=[];var g=[];a="undefined"===typeof a?d.customLayout:a;for(h in a)a.hasOwnProperty(h)&&b.push(a[h]);g=g.concat.apply(g,b).join(" ");var h=0;var f=g.length;if(0===f)return h;for(a=0;a<f;a++)b=g.charCodeAt(a),h=(h<<5)-h+b,h&=h;return h};
b.buildKeyboard=function(g,k){a.isEmptyObject(d.display)&&b.updateLanguage();var h,m,f,q=l.css,w=0,y=l.builtLayouts[g||b.layout||d.layout]={mappedKeys:{},acceptedKeys:[]},A=y.acceptedKeys=d.restrictInclude?(""+d.restrictInclude).split(/\s+/)||[]:[];var G=q.keyboard+" "+d.css.popup+" "+d.css.container+(d.alwaysOpen||d.userClosed?" "+q.alwaysOpen:"");var E=a("<div />").addClass(G).attr({role:"textbox"}).hide();G=a.inArray("{space}",A);-1<G&&(A[G]=" ");k&&"custom"===d.layout||!l.layouts.hasOwnProperty(d.layout)?
(d.layout="custom",G=l.layouts.custom=d.customLayout||{normal:["{cancel}"]}):G=l.layouts[k?d.layout:g||b.layout||d.layout];a.each(G,function(d,g){if(""!==d&&!/^(name|lang|rtl)$/i.test(d))for("default"===d&&(d="normal"),w++,m=a("<div />").attr("name",d).addClass(q.keySet+" "+q.keySet+"-"+d).appendTo(E).toggle("normal"===d),h=0;h<g.length;h++)f=a.trim(g[h]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g,"{$1:$2}"),b.buildRow(m,h,f.split(/\s+/),A),m.find("."+q.keyButton+",."+q.keySpacer).filter(":last").after('<br class="'+
q.endRow+'"/>')});1<w&&(b.sets=!0);y.hasMappedKeys=!a.isEmptyObject(y.mappedKeys);return y.$keyboard=E};b.buildRow=function(g,k,p,m){var f,h=l.css;for(f=0;f<p.length;f++){b.temp=[g,k,f];var q=!1;if(0!==p[f].length)if(/^\{\S+\}$/.test(p[f])){var y=p[f].match(/^\{(\S+)\}$/)[1];/!!/.test(y)&&(y=y.replace("!!",""),q=!0);if(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i.test(y)){var A=parseFloat(y.replace(/,/,".").match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0);a('<span class="'+h.keyText+'"></span>').width(y.match(/px/i)?
A+"px":2*A+"em").addClass(h.keySpacer).appendTo(g)}if(/^empty(:((\d+)?([\.|,]\d+)?)(em|px)?)?$/i.test(y))A=/:/.test(y)?parseFloat(y.replace(/,/,".").match(/^empty:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0):"",b.addKey(""," ",!0).addClass(d.css.buttonDisabled+" "+d.css.buttonEmpty).attr("aria-disabled",!0).width(A?y.match("px")?A+"px":2*A+"em":"");else if(/^0(:((\d+)?([\.|,]\d+)?)(em|px)?)?$/i.test(y))A=/:/.test(y)?parseFloat(y.replace(/,/,".").match(/^0:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1]||0):"",b.addKey("0",
" ",!0).attr("aria-disabled",!0).width(A?y.match("px")?A+"px":2*A+"em":"");else if(/^meta[\w-]+:?(\w+)?/i.test(y))b.addKey(y.split(":")[0],y).addClass(h.keyHasActive);else switch(A=y.split(":"),A[0].toLowerCase()){case "a":case "accept":b.addKey("accept",y).addClass(d.css.buttonAction+" "+h.keyAction);break;case "alt":case "altgr":b.addKey("alt",y).addClass(h.keyHasActive);break;case "b":case "bksp":b.addKey("bksp",y);break;case "c":case "cancel":b.addKey("cancel",y).addClass(d.css.buttonAction+" "+
h.keyAction);break;case "combo":b.addKey("combo",y).addClass(h.keyHasActive).attr("title",function(a,b){return b+" "+d.display[d.useCombos?"active":"disabled"]}).toggleClass(d.css.buttonActive,d.useCombos);break;case "dec":m.push(b.decimal?".":",");b.addKey("dec",y);break;case "e":case "enter":b.addKey("accept",y).addClass(d.css.buttonAction+" "+h.keyAction);break;case "lock":b.addKey("lock",y).addClass(h.keyHasActive);break;case "s":case "shift":b.addKey("shift",y).addClass(h.keyHasActive);break;
case "sign":m.push("-");b.addKey("sign",y);break;case "space":m.push(" ");b.addKey("space",y);break;case "t":case "tab":b.addKey("tab",y);break;default:l.keyaction.hasOwnProperty(A[0])&&b.addKey(A[0],y).toggleClass(d.css.buttonAction+" "+h.keyAction,q)}}else q=p[f],b.addKey(q,q,!0)}};b.removeBindings=function(d){a(document).unbind(d);b.el.ownerDocument!==document&&a(b.el.ownerDocument).unbind(d);a(window).unbind(d);b.$el.unbind(d)};b.removeKeyboard=function(){var g=a.mobileweb.getCurrentPage().getName(),
k=a("#"+b.el.id).parents(),l=!1,m=!1,f=0;a.each(k,function(a,b){-1!=b.id.indexOf("_toolbarBottom")&&(l=!0)});a.each(k,function(a,b){-1!=b.id.indexOf("leftToolBar")&&(m=!0)});l?(f=parseInt(b.$keyboard.css("height")),a.mobileweb.getCurrentPage().footer.isHidden()||(f-=a.mobileweb.getCurrentPage().footer.height),a.mobileweb.getCurrentPage().toolbarbottom.isHidden()||parseInt(a("#"+g+"_toolbarBottom").css("height"))>f&&(f=parseInt(a("#"+g+"_toolbarBottom").css("height"))-f),a("#"+g+"_toolbarBottom").css({top:parseInt(a("#"+
g+"_toolbarBottom").css("top"))+f+"px"})):m?(f+=a.mobileweb.getCurrentPage().statusbar.height,a("#leftToolBar").css({top:f+"px"})):(a.utility("getObject",a.mobileweb.pages,"name",g).statusbarhidden||(f+=a.mobileweb.getCurrentPage().statusbar.height),a.mobileweb.getCurrentPage().header.isHidden()||(f+=a.mobileweb.getCurrentPage().header.height),a.mobileweb.getCurrentPage().toolbartop.isHidden()||(f+=a.mobileweb.getCurrentPage().toolbartop.height,0==a.mobileweb.getCurrentPage().toolbartop.height&&(f+=
parseInt(a("#"+a.mobileweb.getCurrentPage().getName()+"_toolbarTop").css("height")))),a("#iscroll_"+g).css({top:f+"px"}));b.$decBtn=[];d.usePreview&&b.$preview.removeData("keyboard");b.$preview.unbind(b.namespace+"keybindings");b.preview=null;b.$preview=null;b.$previewCopy=null;b.$keyboard.removeData("keyboard");b.$keyboard.remove();b.$keyboard=[];b.isOpen=!1;b.isCurrent(!1)};b.destroy=function(a){var g=l.css;var h=b.extensionNamespace.length,k=[g.input,g.locked,g.placeholder,g.noKeyboard,g.alwaysOpen,
d.css.input,g.isCurrent].join(" ");clearTimeout(b.timer);clearTimeout(b.timer2);clearTimeout(b.timer3);b.$keyboard.length&&b.removeKeyboard();b.options.openOn&&b.removeBindings(b.options.openOn);b.removeBindings(b.namespace);b.removeBindings(b.namespace+"callbacks");for(g=0;g<h;g++)b.removeBindings(b.extensionNamespace[g]);b.el.active=!1;b.$el.removeClass(k).removeAttr("aria-haspopup").removeAttr("role").removeData("keyboard");b=null;"function"===typeof a&&a()};b.init()};l.keyCodes={backSpace:8,tab:9,
enter:13,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,A:65,Z:90,V:86,C:67,X:88,a:97,z:122};l.css={idSuffix:"_keyboard",initialFocus:"keyboard-init-focus",input:"ui-keyboard-input",inputClone:"ui-keyboard-preview-clone",wrapper:"ui-keyboard-preview-wrapper",preview:"ui-keyboard-preview",keyboard:"ui-keyboard",keySet:"ui-keyboard-keyset",keyButton:"ui-keyboard-button",keyWide:"ui-keyboard-widekey",keyPrefix:"ui-keyboard-",keyText:"ui-keyboard-text",
keyHasActive:"ui-keyboard-hasactivestate",keyAction:"ui-keyboard-actionkey",keySpacer:"ui-keyboard-spacer",keyToggle:"ui-keyboard-toggle",keyDisabled:"ui-keyboard-disabled",divWrapperCE:"ui-keyboard-div-wrapper",locked:"ui-keyboard-lockedinput",alwaysOpen:"ui-keyboard-always-open",noKeyboard:"ui-keyboard-nokeyboard",placeholder:"ui-keyboard-placeholder",hasFocus:"ui-keyboard-has-focus",isCurrent:"ui-keyboard-input-current",inputValid:"ui-keyboard-valid-input",inputInvalid:"ui-keyboard-invalid-input",
inputAutoAccepted:"ui-keyboard-autoaccepted",endRow:"ui-keyboard-button-endrow"};l.events={kbChange:"keyboardChange",kbBeforeClose:"beforeClose",kbBeforeVisible:"beforeVisible",kbVisible:"visible",kbInit:"initialized",kbInactive:"inactive",kbHidden:"hidden",kbRepeater:"repeater",kbKeysetChange:"keysetChange",inputAccepted:"accepted",inputCanceled:"canceled",inputChange:"change",inputRestricted:"restricted"};l.keyaction={accept:function(a){a.close(!0);return!1},alt:function(a){a.altActive=!a.altActive;
a.showSet()},bksp:function(a){a.isContentEditable?(a.execCommand("delete"),a.saveCaret()):a.insertText("\b")},cancel:function(a){a.close();return!1},clear:function(a){a.$preview[a.isContentEditable?"text":"val"]("");a.$decBtn.length&&a.checkDecimal()},combo:function(a){var g=a.options,d=!g.useCombos,b=a.$keyboard.find("."+l.css.keyPrefix+"combo");g.useCombos=d;b.toggleClass(g.css.buttonActive,d).attr("title",b.attr("data-title")+" ("+g.display[d?"active":"disabled"]+")");d&&a.checkCombos();return!1},
dec:function(a){a.insertText(a.decimal?".":",")},del:function(a){a.isContentEditable?a.execCommand("forwardDelete"):a.insertText("{d}")},"default":function(a){a.shiftActive=a.altActive=a.metaActive=!1;a.showSet()},enter:function(g,k,d){k=g.options;if(d.shiftKey)return k.enterNavigation?g.switchInput(!d[k.enterMod],!0):g.close(!0);if(k.enterNavigation&&(!g.isTextArea||d[k.enterMod]))return g.switchInput(!d[k.enterMod],k.autoAccept?"true":!1);g.isTextArea&&a(d.target).closest("button").length&&g.insertText((l.msie?
" ":"")+"\n");g.isContentEditable&&!k.enterNavigation&&(g.execCommand("insertHTML",'<div><br class="'+l.css.divWrapperCE+'"></div>'),setTimeout(function(){l.keyaction.right(g);g.saveCaret()},0))},lock:function(a){a.last.keyset[0]=a.shiftActive=a.capsLock=!a.capsLock;a.showSet()},left:function(a){var g=l.caret(a.$preview);0<=g.start-1&&(a.last.start=a.last.end=g.start-1,l.caret(a.$preview,a.last),a.setScroll())},meta:function(g,k){k=a(k);g.metaActive=!k.hasClass(g.options.css.buttonActive);g.showSet(k.attr("data-name"))},
next:function(a){a.switchInput(!0,a.options.autoAccept);return!1},normal:function(a){a.shiftActive=a.altActive=a.metaActive=!1;a.showSet()},prev:function(a){a.switchInput(!1,a.options.autoAccept);return!1},right:function(a){var g=l.caret(a.$preview),d=a.isContentEditable?l.getEditableLength(a.el):a.getValue().length;g.end+1<=d&&(a.last.start=a.last.end=g.end+1,l.caret(a.$preview,a.last),a.setScroll())},shift:function(a){a.last.keyset[0]=a.shiftActive=!a.shiftActive;a.showSet()},sign:function(a){if(/^[+-]?\d*\.?\d*$/.test(a.getValue())){var g=
l.caret(a.$preview);var d=a.getValue();var b=a.isContentEditable?l.getEditableLength(a.el):d.length;a.setValue(-1*d);d=b-d.length;a.last.start=g.start+d;a.last.end=g.end+d;l.caret(a.$preview,a.last);a.setScroll()}},space:function(a){a.insertText(" ")},tab:function(a){var g=a.options;if(!a.isTextArea){if(g.tabNavigation)return a.switchInput(!a.shiftActive,!0);if(a.isInput)return!1}a.insertText("\t")},toggle:function(a){a.enabled=!a.enabled;a.toggle()},NBSP:"\u00a0",ZWSP:"\u200b",ZWNJ:"\u200c",ZWJ:"\u200d",
LRM:"\u200e",RLM:"\u200f"};l.builtLayouts={};l.layouts={alpha:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} a b c d e f g h i j [ ] \\","k l m n o p q r s ; ' {enter}","{shift} t u v w x y z , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} A B C D E F G H I J { } |",'K L M N O P Q R S : " {enter}',"{shift} T U V W X Y Z < > ? {shift}","{accept} {space} {cancel}"]},qwerty:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\",
"a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {space} {cancel}"]},international:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}",
"{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["~ \u00a1 \u00b2 \u00b3 \u00a4 \u20ac \u00bc \u00bd \u00be \u2018 \u2019 \u00a5 \u00d7 {bksp}","{tab} \u00e4 \u00e5 \u00e9 \u00ae \u00fe \u00fc \u00fa \u00ed \u00f3 \u00f6 \u00ab \u00bb \u00ac","\u00e1 \u00df \u00f0 f g h j k \u00f8 \u00b6 \u00b4 {enter}","{shift} \u00e6 x \u00a9 v b \u00f1 \u00b5 \u00e7 > \u00bf {shift}","{accept} {alt} {space} {alt} {cancel}"],
"alt-shift":["~ \u00b9 \u00b2 \u00b3 \u00a3 \u20ac \u00bc \u00bd \u00be \u2018 \u2019 \u00a5 \u00f7 {bksp}","{tab} \u00c4 \u00c5 \u00c9 \u00ae \u00de \u00dc \u00da \u00cd \u00d3 \u00d6 \u00ab \u00bb \u00a6","\u00c4 \u00a7 \u00d0 F G H J K \u00d8 \u00b0 \u00a8 {enter}","{shift} \u00c6 X \u00a2 V B \u00d1 \u00b5 \u00c7 . \u00bf {shift}","{accept} {alt} {space} {alt} {cancel}"]},colemak:{normal:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w f p g j l u y ; [ ] \\","{bksp} a r s t d h n e i o ' {enter}",
"{shift} z x c v b k m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W F P G J L U Y : { } |",'{bksp} A R S T D H N E I O " {enter}',"{shift} Z X C V B K M < > ? {shift}","{accept} {space} {cancel}"]},dvorak:{normal:["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}","{tab} ' , . p y f g c r l / = \\","a o e u i d h t n s - {enter}","{shift} ; q j k x b m w v z {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) { } {bksp}",'{tab} " < > P Y F G C R L ? + |',
"A O E U I D H T N S _ {enter}","{shift} : Q J K X B M W V Z {shift}","{accept} {space} {cancel}"]},num:{normal:"= ( ) {b};{clear} / * -;7 8 9 +;4 5 6 {sign};1 2 3 %;0 {dec} {a} {c}".split(";")}};l.language={en:{display:{a:"\u2714:Accept (Shift+Enter)",accept:"Accept:Accept (Shift+Enter)",alt:"Alt:\u2325 AltGr",b:"\u232b:Backspace",bksp:"Bksp:Backspace",c:"\u2716:Cancel (Esc)",cancel:"Cancel:Cancel (Esc)",clear:"C:Clear",combo:"\u00f6:Toggle Combo Keys",dec:".:Decimal",e:"\u23ce:Enter",empty:"\u00a0",
enter:"Enter:Enter \u23ce",left:"\u2190",lock:"Lock:\u21ea Caps Lock",next:"Next \u21e8",prev:"\u21e6 Prev",right:"\u2192",s:"\u21e7:Shift",shift:"Shift:Shift",sign:"\u00b1:Change Sign",space:"\u00a0:Space",t:"\u21e5:Tab",tab:"\u21e5 Tab:Tab",toggle:" ",valid:"valid",invalid:"invalid",active:"active",disabled:"disabled"},wheelMessage:"Use mousewheel to see other keys",comboRegex:/([`'~\^"ao])([a-z])/mig,combos:{"`":{a:"\u00e0",A:"\u00c0",e:"\u00e8",E:"\u00c8",i:"\u00ec",I:"\u00cc",o:"\u00f2",O:"\u00d2",
u:"\u00f9",U:"\u00d9",y:"\u1ef3",Y:"\u1ef2"},"'":{a:"\u00e1",A:"\u00c1",e:"\u00e9",E:"\u00c9",i:"\u00ed",I:"\u00cd",o:"\u00f3",O:"\u00d3",u:"\u00fa",U:"\u00da",y:"\u00fd",Y:"\u00dd"},'"':{a:"\u00e4",A:"\u00c4",e:"\u00eb",E:"\u00cb",i:"\u00ef",I:"\u00cf",o:"\u00f6",O:"\u00d6",u:"\u00fc",U:"\u00dc",y:"\u00ff",Y:"\u0178"},"^":{a:"\u00e2",A:"\u00c2",e:"\u00ea",E:"\u00ca",i:"\u00ee",I:"\u00ce",o:"\u00f4",O:"\u00d4",u:"\u00fb",U:"\u00db",y:"\u0177",Y:"\u0176"},"~":{a:"\u00e3",A:"\u00c3",e:"\u1ebd",E:"\u1ebc",
i:"\u0129",I:"\u0128",o:"\u00f5",O:"\u00d5",u:"\u0169",U:"\u0168",y:"\u1ef9",Y:"\u1ef8",n:"\u00f1",N:"\u00d1"}}}};l.defaultOptions={language:null,rtl:!1,layout:"qwerty",customLayout:null,position:{of:null,my:"center top",at:"center top",at2:"center bottom"},reposition:!0,usePreview:!0,alwaysOpen:!1,initialFocus:!0,noFocus:!1,stayOpen:!1,userClosed:!1,ignoreEsc:!1,closeByClickEvent:!1,css:{input:"ui-widget-content ui-corner-all",container:"ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",
popup:"",buttonDefault:"ui-state-default ui-corner-all",buttonHover:"ui-state-hover",buttonAction:"ui-state-active",buttonActive:"ui-state-active",buttonDisabled:"ui-state-disabled",buttonEmpty:"ui-keyboard-empty"},autoAccept:!1,autoAcceptOnEsc:!1,lockInput:!1,restrictInput:!1,restrictInclude:"",acceptValid:!1,autoAcceptOnValid:!1,checkValidOnInit:!0,cancelClose:!0,tabNavigation:!1,enterNavigation:!1,enterMod:"altKey",stopAtEnd:!0,appendLocally:!1,appendTo:"body",wrapBRs:!0,stickyShift:!0,preventPaste:!1,
caretToEnd:!1,scrollAdjustment:10,maxLength:!1,maxInsert:!0,repeatDelay:500,repeatRate:20,resetDefault:!0,openOn:"focus",activeOnReadonly:!1,keyBinding:"mousedown touchstart",useWheel:!0,useCombos:!0,validate:function(){return!0}};l.supportedInputTypes="text search url tel password number".split(" ");l.comboRegex=/([`'~\^"ao])([a-z])/mig;l.currentKeyboard="";a('\x3c!--[if lte IE 8]><script>jQuery("body").addClass("oldie");\x3c/script><![endif]--\x3e\x3c!--[if IE]><script>jQuery("body").addClass("ie");\x3c/script><![endif]--\x3e').appendTo("body").remove();
l.msie=a("body").hasClass("oldie");l.allie=a("body").hasClass("ie");l.watermark="undefined"!==typeof document.createElement("input").placeholder;l.checkCaretSupport=function(){if("boolean"!==typeof l.checkCaret){var g=a('<div style="height:0px;width:0px;overflow:hidden;position:fixed;top:0;left:-100px;"><input type="text" value="testing"/></div>').prependTo("body");l.caret(g.find("input"),3,3);l.checkCaret=3!==l.caret(g.find("input").hide().show()).start;g.remove()}return l.checkCaret};l.caret=function(a,
k,d){if(!a||!a.length||a.is(":hidden")||"hidden"===a.css("visibility"))return{};var b=a.data("keyboard"),g=b&&b.options.noFocus;b=/(textarea|input)/i.test(a[0].nodeName);g||a.focus();if("undefined"!==typeof k){if("object"===typeof k&&"start"in k&&"end"in k){var q=k.start;var p=k.end}else"undefined"===typeof d&&(d=k);"number"===typeof k&&"number"===typeof d?(q=k,p=d):"start"===k?q=p=0:"string"===typeof k&&(q=p="end");return b?a.caret(q,p,g):l.setEditableCaret(a,q,p)}k=b?a.caret():l.getEditableCaret(a[0]);
q=k.start;p=k.end;var m=b&&a[0].value||a.text()||"";return{start:q,end:p,text:m.substring(q,p),replaceStr:function(a){return m.substring(0,q)+a+m.substring(p,m.length)}}};l.isTextNode=function(a){return a&&3===a.nodeType};l.isBlock=function(a,k){var d=a.ownerDocument.defaultView;return k&&1===k.nodeType&&k!==a&&"block"===d.getComputedStyle(k).display?1:0};l.wrapBRs=function(g){var k=a(g).find("br:not(."+l.css.divWrapperCE+")");k.length&&a.each(k,function(d,b){d=b.parentNode.childNodes.length;(1!==
d||1===d&&!l.isBlock(g,b.parentNode))&&a(b).addClass(l.css.divWrapperCE).wrap("<div>")})};l.getEditableCaret=function(g){function k(b,h){function f(a){a&&(G+=a,p+=d&&d.replaceCR||"\n")}for(var k,m,p="",q=!1,G=0,E=a.makeArray(g.childNodes);!q&&E.length;){k=E.shift();k===b&&(q=!0);m=l.isBlock(g,k.previousSibling);f(m);if(l.isTextNode(k)){if(G+=q?h:k.length,p+=k.textContent,q)break}else!q&&k.childNodes&&(E=a.makeArray(k.childNodes).concat(E));m=l.isTextNode(k.previousSibling)&&l.isBlock(g,k);f(m)}return{position:G,
text:p}}g=a(g)[0];if(!g.isContentEditable)return{};var d=(a(g).data("keyboard")||{}).options;var b=g.ownerDocument.getSelection().getRangeAt(0);var h=k(b.startContainer,b.startOffset);var q=h.position;!1!==d.wrapBRs&&l.wrapBRs(g);b.endContainer===b.startContainer&&b.endOffset===b.startOffset?(b=q,h=""):(h=k(b.endContainer,b.endOffset),b=h.position,h=h.text.substring(q,b));return{start:q,end:b,text:h}};l.getEditableLength=function(a){a=l.setEditableCaret(a,"getMax");return"number"===typeof a?a:null};
l.setEditableCaret=function(g,k,d){function b(b){function d(a){m+=a?p&&p.replaceCR||"\n":"";return 0<a}function f(a){var d=u+a;w=y;y+=a;return 0<=b-d?(u=d,0>=b-u):0>=b-d}"end"===b?b=g.innerHTML.length:0>b&&(b=0);for(var h,k,m="",q=!1,u=0,w=0,y=0,B=a.makeArray(g.childNodes);!q&&B.length;)if(h=B.shift(),k=l.isBlock(g,h.previousSibling),d(k)&&f(k)&&(q=!0),k=l.isTextNode(h.previousSibling)&&l.isBlock(g,h),d(k)&&f(k)&&(q=!0),l.isTextNode(h)){if(m+=h.textContent,f(h.length))return k=0===b-u&&1<=u-w?h.length:
b-u,{node:h,offset:k,position:b,text:m}}else!q&&h.childNodes&&(B=a.makeArray(h.childNodes).concat(B));return B.length?{node:h,offset:b-u,position:b,text:m}:{node:h,offset:h&&h.length||0,position:y,text:m}}g=a(g)[0];if(!g.isContentEditable)return{};var h=g.ownerDocument,q=h.createRange();h=h.getSelection();var p=(a(g).data("keyboard")||{}).options,m=k,f=d,u="",w=b("getMax"===k?"end":k);if(w.node){m=w.position;if("getMax"===k)return m;q.setStart(w.node,w.offset);"undefined"!==typeof d&&d!==k&&(w=b(d));
w.node&&(f=w.position,q.setEnd(w.node,w.offset),u=m===f?"":w.text.substring(m,f));h.removeAllRanges();h.addRange(q)}return{start:m,end:f,text:u}};l.replaceContent=function(g,k){g=a(g)[0];for(var d,b,h=typeof k,q=l.getEditableCaret(g).start,p=0,m=[g];d=m.pop();)if(l.isTextNode(d))"function"===h?q>=p&&q<=p+d.length&&(d.textContent=k(d.textContent)):"string"===h&&(b=k.substring(p,p+d.length),b!==d.textContent&&(d.textContent=b)),p+=d.length;else if(d&&d.childNodes)for(b=d.childNodes.length;b--;)m.push(d.childNodes[b]);
b=l.getEditableCaret(g);l.setEditableCaret(g,b.start,b.start)};a.fn.keyboard=function(g){return this.each(function(){a(this).data("keyboard")||new a.keyboard(this,g)})};a.fn.getkeyboard=function(){return this.data("keyboard")};a.fn.caret=function(a,k,d){if("undefined"===typeof this[0]||this.is(":hidden")||"hidden"===this.css("visibility")||!/(INPUT|TEXTAREA)/i.test(this[0].nodeName))return this;var b=this[0];var g=b.ownerDocument.selection;var l=b.scrollTop;var p=!1,m=!0;try{p="selectionStart"in b}catch(u){m=
!1}if(m&&"undefined"!==typeof a)return/(email|number)/i.test(b.type)||(p?(b.selectionStart=a,b.selectionEnd=k):(g=b.createTextRange(),g.collapse(!0),g.moveStart("character",a),g.moveEnd("character",k-a),g.select())),d||!this.is(":visible")&&"hidden"===this.css("visibility")||b.focus(),b.scrollTop=l,this;/(email|number)/i.test(b.type)?a=k=this.val().length:p?(a=b.selectionStart,k=b.selectionEnd):g?"TEXTAREA"===b.nodeName.toUpperCase()?(l=this.val(),d=g.createRange(),g=d.duplicate(),g.moveToElementText(b),
g.setEndPoint("EndToEnd",d),a=g.text.replace(/\r/g,"\n").length,k=a+d.text.replace(/\r/g,"\n").length):(l=this.val().replace(/\r/g,"\n"),d=g.createRange().duplicate(),d.moveEnd("character",l.length),a=""===d.text?l.length:l.lastIndexOf(d.text),d=g.createRange().duplicate(),d.moveStart("character",-l.length),k=d.text.length):a=k=(b.value||"").length;var f=b.value||"";return{start:a,end:k,text:f.substring(a,k),replace:function(b){return f.substring(0,a)+b+f.substring(k,f.length)}}};return l});(function(a){var l={init:function(g){void 0==l.keys?(l.keys={Monday:"\u6708\u66dc\u65e5",Mon:"\u6708",Tuesday:"\u706b\u66dc\u65e5",Tues:"\u706b",Wednesday:"\u6c34\u66dc\u65e5",Wed:"\u6c34",Thrusday:"\u6728\u66dc\u65e5",Thrus:"\u6728",Friday:"\u91d1\u66dc\u65e5",Fri:"\u91d1",Saturday:"\u571f\u66dc\u65e5",Sat:"\u571f",Sunday:"\u65e5\u66dc\u65e5",Sun:"\u65e5",Jan:"1\u6708",Feb:"2\u6708",Mar:"3\u6708",Apr:"4\u6708",May:"5\u6708",Jun:"6\u6708",Jul:"7\u6708",Aug:"8\u6708",Sep:"9\u6708",Oct:"10\u6708",Nov:"11\u6708",
Dec:"12\u6708",AM:"AM",PM:"PM"},a.extend(l.keys,g)):a.error("[CRIT] Cannot make multiple instances of jQuery.datePicker");return this},getMonthName:function(g){return"ja"!=a.utility("detectBrowserLanguage")?g:a.datePicker("translateDateKey",g)},getPeriodName:function(g){return"ja"!=a.utility("detectBrowserLanguage")?g:a.datePicker("translateDateKey",g)},translateDateKey:function(a){return l.keys[a]}};a.datePicker=function(g){if(l[g])return void 0==l.keys&&l.init(),l[g].apply(this,Array.prototype.slice.call(arguments,
1));if("object"!==typeof g&&g)a.error("Method "+g+" does not exist on jQuery.datePicker");else return l.init.apply(this,arguments)}})(jQuery);(function(){function a(d){function b(){for(var b in a.prototype)"function"===typeof a.prototype[b]&&(g[b]=g[b].bind(g))}d=d||{};var g=this;(function(){g.context=window.currentAudioContext;g.sampleRate=g.context.sampleRate;g.bufferSize=d.bufferSize||4096;g.numberOfAudioChannels=d.numberOfAudioChannels||1;g.volume=1;g.leftChannel=[];g.rightChannel=[];g.isRecording=!1;g.isPlaying=!1;g.recordingLength=0;g.isPaused=!1;g.isAudioProcessStarted=!1;g.microphoneStream=d.microphoneStream;g.initCallback=function(){};
b()})();return this}function l(a,b){var d=g(function(a,b){function d(a,b,d){b=Math.round(b/d*a.length);d=[];var f=Number((a.length-1)/(b-1));d[0]=a[0];for(var g=1;g<b-1;g++){var h=g*f,k=Number(Math.floor(h)).toFixed(),l=Number(Math.ceil(h)).toFixed(),m=a[k];d[g]=m+(a[l]-m)*(h-k)}d[b-1]=a[a.length-1];return d}function f(a,b){b=new Float64Array(b);for(var d=0,f=a.length,g=0;g<f;g++){var h=a[g];b.set(h,d);d+=h.length}return b}function g(a,b){for(var d=a.length+b.length,f=new Float64Array(d),g=0,h=0;h<
d;)f[h++]=a[g],f[h++]=b[g],g++;return f}function h(a,b,d){for(var f=d.length,g=0;g<f;g++)a.setUint8(b+g,d.charCodeAt(g))}var k=a.numberOfAudioChannels,l=a.leftBuffers.slice(0),p=a.rightBuffers.slice(0),q=a.sampleRate,C=a.internalInterleavedLength;a=a.desiredSampRate;2===k&&(l=f(l,C),p=f(p,C),a&&(l=d(l,a,q),p=d(p,a,q)));1===k&&(l=f(l,C),a&&(l=d(l,a,q)));a&&(q=a);var L;2===k&&(L=g(l,p));1===k&&(L=l);l=L.length;p=new ArrayBuffer(44+2*l);C=new DataView(p);h(C,0,"RIFF");C.setUint32(4,44+2*l,!0);h(C,8,
"WAVE");h(C,12,"fmt ");C.setUint32(16,16,!0);C.setUint16(20,1,!0);C.setUint16(22,k,!0);C.setUint32(24,q,!0);C.setUint32(28,2*q,!0);C.setUint16(32,2*k,!0);C.setUint16(34,16,!0);h(C,36,"data");C.setUint32(40,2*l,!0);k=44;for(q=0;q<l;q++)C.setInt16(k,32767*L[q],!0),k+=2;if(b)return b({buffer:p,view:C});postMessage({buffer:p,view:C})});d.onmessage=function(a){b(a.data.buffer,a.data.view);URL.revokeObjectURL(d.workerURL)};d.postMessage(a)}function g(a){a=URL.createObjectURL(new Blob([a.toString(),";this.onmessage =  function (e) {"+
a.name+"(e.data);}"],{type:"application/javascript"}));var b=new Worker(a);b.workerURL=a;return b}"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports=a:"function"===typeof define&&define.amd?define([],function(){return a}):window.WebAudioTrack=a;var k=document.createElement("script");k.src="https://webrtchacks.github.io/adapter/adapter-latest.js";document.head.appendChild(k);k=window.AudioContext||window.webkitAudioContext;window.currentAudioContext||(window.currentAudioContext=
new k);a.prototype={loadUrl:function(a){var b=new XMLHttpRequest;b.open("GET",a,!0);b.responseType="arraybuffer";return new Promise(function(d,g){b.onload=function(){this._decodeAudio(b.response,function(){console.log("Audio data loaded: "+a);d();this.isAudioDataLoaded=!0;if(this.onAudioDataLoaded)this.onAudioDataLoaded()})}.bind(this);b.send()}.bind(this))},play:function(){this.stop();console.log("Playing stream");this.gainNode=this.context.createGain();this.gainNode.connect(this.context.destination);
this.source=this.context.createBufferSource();this.source.buffer=this.audioData;this.source.connect(this.gainNode);this.gainNode.gain.setValueAtTime(this.volume,currentAudioContext.currentTime+1E-4);this.isPlaying=!0;return new Promise(function(a,b){this.source.onended=function(){this.isPlaying=!1;a()}.bind(this);this.source.start()}.bind(this))},stop:function(){this.isPlaying&&(this.source.stop(),this.isPlaying=!1)},setVolume:function(a){this.volume=a;return this},startRecording:function(a){a&&(this.initCallback=
a);this.isCaptureInProgress=!0;if(this.microphoneStream)return this._resetMicrophoneStream(),this._onMicrophoneCaptured(),this;this._setMicrophoneStream().then(this._onMicrophoneCaptured).catch(console.log);return this},stopRecording:function(a){if(this.isCaptureInProgress)this.isCaptureInProgress=!1;else return this.isRecording=!1,this.microphoneSource.disconnect(),this.jsAudioNode.disconnect(),l({sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels,internalInterleavedLength:this.recordingLength,
leftBuffers:this.leftChannel,rightBuffers:1===this.numberOfAudioChannels?[]:this.rightChannel},function(b,d){this.blob=new Blob([d],{type:"audio/wav"});this.audioData=this._decodeAudio(b,function(){a&&a();this._clearRecordedData()}.bind(this))}.bind(this)),this},appendAudioFromTrack:function(a){var b=this.audioData;a=a.audioData;if(b)if(a){for(var d=Math.min(b.numberOfChannels,a.numberOfChannels),g=this.context.createBuffer(d,b.length+a.length,b.sampleRate),k=0;k<d;k++){var l=g.getChannelData(k);
l.set(b.getChannelData(k),0);l.set(a.getChannelData(k),b.length)}this.audioData=g}else b&&(this.audioData=b);else a&&(this.audioData=a)},appendAudioFromUrl:function(d){var b=new a;b.loadUrl(d,function(){this.appendAudioFromTrack(b)}.bind(this))},getRecordingTime:function(){return this.recordingLength/this.sampleRate},getBlobSrc:function(){return URL.createObjectURL(this.blob)},_setupProcessor:function(){this.jsAudioNode=this.context[this.context.createJavaScriptNode?"createJavaScriptNode":"createScriptProcessor"](this.bufferSize,
this.numberOfAudioChannels,this.numberOfAudioChannels);this.jsAudioNode.connect(this.context.destination)},_decodeAudio:function(a,b){this.context.decodeAudioData(a,function(a){this.audioData=a;b&&b()}.bind(this))},_onMicrophoneCaptured:function(){this.isCaptureInProgress&&(this.recordingLength=0,this._setupProcessor(),this.microphoneSource=this.context.createMediaStreamSource(this.microphoneStream),this.microphoneSource.connect(this.jsAudioNode),this.jsAudioNode.onaudioprocess=this._onAudioProcess.bind(this),
this.isRecording=!0,this.isCaptureInProgress=!1)},_onAudioProcess:function(a){if(!this.isPaused&&(!1===this._isMediaStreamActive()&&console.log("MediaStream seems stopped."),this.isRecording)){this.isAudioProcessStarted||(this.isAudioProcessStarted=!0,this.initCallback());var b=a.inputBuffer.getChannelData(0);this.leftChannel.push(new Float32Array(b));2===this.numberOfAudioChannels&&(a=a.inputBuffer.getChannelData(1),this.rightChannel.push(new Float32Array(a)));this.recordingLength+=this.bufferSize}},
_clearRecordedData:function(){this.leftChannel=[];this.rightChannel=[];this.isPaused=this.isRecording=this.isAudioProcessStarted=!1},_isMediaStreamActive:function(){return this.microphoneStream.active},_setMicrophoneStream:function(){return navigator.mediaDevices.getUserMedia({audio:!0}).then(function(a){this.microphoneStream=a}.bind(this)).catch(console.log)},_resetMicrophoneStream:function(){this.microphoneStream=this.microphoneStream.clone()}}})();(function(){function a(a){function g(d,f){var g=d==window,h=f&&void 0!==f.message?f.message:void 0;f=a.extend({},a.blockUI.defaults,f||{});if(!f.ignoreIfBlocked||!a(d).data("blockUI.isBlocked")){f.overlayCSS=a.extend({},a.blockUI.defaults.overlayCSS,f.overlayCSS||{});var q=a.extend({},a.blockUI.defaults.css,f.css||{});f.onOverlayClick&&(f.overlayCSS.cursor="pointer");var C=a.extend({},a.blockUI.defaults.themedCSS,f.themedCSS||{});h=void 0===h?f.message:h;g&&A&&k(window,{fadeOut:0});if(h&&"string"!=
typeof h&&(h.parentNode||h.jquery)){var E=h.jquery?h[0]:h,B={};a(d).data("blockUI.history",B);B.el=E;B.parent=E.parentNode;B.display=E.style.display;B.position=E.style.position;B.parent&&B.parent.removeChild(E)}a(d).data("blockUI.onUnblock",f.onUnblock);B=f.baseZ;var S=u||f.forceIframe?a('<iframe class="blockUI" style="z-index:'+B++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+f.iframeSrc+'"></iframe>'):a('<div class="blockUI" style="display:none"></div>');
E=f.theme?a('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+B++ +';display:none"></div>'):a('<div class="blockUI blockOverlay" style="z-index:'+B++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');f.theme&&g?(B='<div class="blockUI '+f.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(B+10)+';display:none;position:fixed">',f.title&&(B+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+
(f.title||"&nbsp;")+"</div>"),B+='<div class="ui-widget-content ui-dialog-content"></div></div>'):f.theme?(B='<div class="blockUI '+f.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(B+10)+';display:none;position:absolute">',f.title&&(B+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(f.title||"&nbsp;")+"</div>"),B+='<div class="ui-widget-content ui-dialog-content"></div></div>'):B=g?'<div class="blockUI '+f.blockMsgClass+' blockPage" style="z-index:'+
(B+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+f.blockMsgClass+' blockElement" style="z-index:'+(B+10)+';display:none;position:absolute"></div>';B=a(B);h&&(f.theme?(B.css(C),B.addClass("ui-widget-content")):B.css(q));f.theme||E.css(f.overlayCSS);E.css("position",g?"fixed":"absolute");(u||f.forceIframe)&&S.css("opacity",0);q=[S,E,B];var N=g?a("body"):a(d);a.each(q,function(){this.appendTo(N)});f.theme&&f.draggable&&a.fn.draggable&&B.draggable({handle:".ui-dialog-titlebar",cancel:"li"});
C=y&&(!a.support.boxModel||0<a("object,embed",g?null:d).length);if(w||C){g&&f.allowBodyStretch&&a.support.boxModel&&a("html,body").css("height","100%");if((w||!a.support.boxModel)&&!g){C=parseInt(a.css(d,"borderTopWidth"),10)||0;var V=parseInt(a.css(d,"borderLeftWidth"),10)||0,H=C?"(0 - "+C+")":0,P=V?"(0 - "+V+")":0}a.each(q,function(a,b){b=b[0].style;b.position="absolute";2>a?(g?b.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+
f.quirksmodeOffsetHack+') + "px"'):b.setExpression("height",'this.parentNode.offsetHeight + "px"'),g?b.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):b.setExpression("width",'this.parentNode.offsetWidth + "px"'),P&&b.setExpression("left",P),H&&b.setExpression("top",H)):f.centerY?(g&&b.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),
b.marginTop=0):!f.centerY&&g&&(a=f.css&&f.css.top?parseInt(f.css.top,10):0,b.setExpression("top","((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+a+') + "px"'))})}h&&(f.theme?B.find(".ui-widget-content").append(h):B.append(h),(h.jquery||h.nodeType)&&a(h).show());(u||f.forceIframe)&&f.showOverlay&&S.show();if(f.fadeIn)q=f.onBlock?f.onBlock:m,S=f.showOverlay&&!h?q:m,q=h?q:m,f.showOverlay&&E._fadeIn(f.fadeIn,S),h&&B._fadeIn(f.fadeIn,q);else if(f.showOverlay&&
E.show(),h&&B.show(),f.onBlock)f.onBlock();b(1,d,f);g?(A=B[0],G=a(":input:enabled:visible",A),f.focusInput&&setTimeout(l,20)):p(B[0],f.centerX,f.centerY);f.timeout&&(h=setTimeout(function(){g?a.unblockUI(f):a(d).unblock(f)},f.timeout),a(d).data("blockUI.timeout",h))}}function k(f,g){var h=f==window,k=a(f),l=k.data("blockUI.history"),m=k.data("blockUI.timeout");m&&(clearTimeout(m),k.removeData("blockUI.timeout"));g=a.extend({},a.blockUI.defaults,g||{});b(0,f,g);null===g.onUnblock&&(g.onUnblock=k.data("blockUI.onUnblock"),
k.removeData("blockUI.onUnblock"));var p=h?a("body").children().filter(".blockUI").add("body > .blockUI"):k.find(">.blockUI");g.cursorReset&&(1<p.length&&(p[1].style.cursor=g.cursorReset),2<p.length&&(p[2].style.cursor=g.cursorReset));h&&(A=G=null);g.fadeOut?(p.fadeOut(g.fadeOut),setTimeout(function(){d(p,l,g,f)},g.fadeOut)):d(p,l,g,f)}function d(b,d,f,g){var h=a(g);b.each(function(a,b){this.parentNode&&this.parentNode.removeChild(this)});d&&d.el&&(d.el.style.display=d.display,d.el.style.position=
d.position,d.parent&&d.parent.appendChild(d.el),h.removeData("blockUI.history"));h.data("blockUI.static")&&h.css("position","static");if("function"==typeof f.onUnblock)f.onUnblock(g,f);b=a(document.body);d=b.width();f=b[0].style.width;b.width(d-1).width(d);b[0].style.width=f}function b(b,d,f){var g=d==window;d=a(d);if(b||(!g||A)&&(g||d.data("blockUI.isBlocked")))d.data("blockUI.isBlocked",b),!f.bindEvents||b&&!f.showOverlay||(b?a(document).bind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",
f,h):a(document).unbind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",h))}function h(b){if(b.keyCode&&9==b.keyCode&&A&&b.data.constrainTabKey){var d=G,f=b.shiftKey&&b.target===d[0];if(!b.shiftKey&&b.target===d[d.length-1]||f)return setTimeout(function(){l(f)},10),!1}d=b.data;b=a(b.target);if(b.hasClass("blockOverlay")&&d.onOverlayClick)d.onOverlayClick();return 0<b.parents("div."+d.blockMsgClass).length?!0:0===b.parents().children().filter("div.blockUI").length}function l(a){G&&
(a=G[!0===a?G.length-1:0])&&a.focus()}function p(b,d,f){var g=b.parentNode,h=b.style,k=(g.offsetWidth-b.offsetWidth)/2-(parseInt(a.css(g,"borderLeftWidth"),10)||0);b=(g.offsetHeight-b.offsetHeight)/2-(parseInt(a.css(g,"borderTopWidth"),10)||0);d&&(h.left=0<k?k+"px":"0");f&&(h.top=0<b?b+"px":"0")}a.fn._fadeIn=a.fn.fadeIn;var m=a.noop||function(){},f,u=/MSIE/.test(navigator.userAgent),w=/MSIE 6.0/.test(navigator.userAgent),y=a.isFunction(document.createElement("div").style.setExpression);a.blockUI=
function(a){var b=document.activeElement;-1!=b.id.indexOf("ui")||-1!=b.id.indexOf("page")||""==b.id?f==b.id&&""!=f||g(window,a):"button"!=b.id&&"button"!=b.type||g(window,a);if(-1!=b.id.indexOf("ui-")||""==b.id)f=b.id};a.unblockUI=function(b){k(window,b);void 0!=f&&""!=f&&-1!=f.indexOf("ui-")&&a("#"+f).focus();f=""};a.growlUI=function(b,d,f,g){var h=a('<div class="growlUI"></div>');b&&h.append("<h1>"+b+"</h1>");d&&h.append("<h2>"+d+"</h2>");void 0===f&&(f=3E3);a.blockUI({message:h,fadeIn:700,fadeOut:1E3,
centerY:!1,timeout:f,showOverlay:!1,onUnblock:g,css:a.blockUI.defaults.growlCSS})};a.fn.block=function(b){var d=a.extend({},a.blockUI.defaults,b||{});this.each(function(){var b=a(this);d.ignoreIfBlocked&&b.data("blockUI.isBlocked")||b.unblock({fadeOut:0})});return this.each(function(){"static"==a.css(this,"position")&&(this.style.position="relative",a(this).data("blockUI.static",!0));this.style.zoom=1;g(this,b)})};a.fn.unblock=function(a){return this.each(function(){k(this,a)})};a.blockUI.version=
2.55;a.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.9,cursor:"default",color:"#fff",backgroundColor:"#000",
"-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1E3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var A=null,G=[]}"function"===typeof define&&define.amd&&
define.amd.jQuery?define(["jquery"],a):a(jQuery)})();jQuery.fn.extend({everyTime:function(a,l,g,k,d){return this.each(function(){jQuery.timer.add(this,a,l,g,k,d)})},oneTime:function(a,l,g){return this.each(function(){jQuery.timer.add(this,a,l,g,1)})},stopTime:function(a,l){return this.each(function(){jQuery.timer.remove(this,a,l)})}});
jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1E3,das:1E4,hs:1E5,ks:1E6},timeParse:function(a){if(void 0==a||null==a)return null;var l=this.regex.exec(jQuery.trim(a.toString()));return l[2]?parseInt(l[1],10)*(this.powers[l[2]]||1):a},add:function(a,l,g,k,d,b){var h=0;jQuery.isFunction(g)&&(d||(d=k),k=g,g=l);l=jQuery.timer.timeParse(l);if(!("number"!=typeof l||isNaN(l)||0>=l)){d&&d.constructor!=Number&&(b=!!d,d=0);d=d||0;b=b||!1;a.$timers||(a.$timers=
{});a.$timers[g]||(a.$timers[g]={});k.$timerID=k.$timerID||this.guid++;var q=function(){b&&this.inProgress||(this.inProgress=!0,(++h>d&&0!==d||!1===k.call(a,h))&&jQuery.timer.remove(a,g,k),this.inProgress=!1)};q.$timerID=k.$timerID;a.$timers[g][k.$timerID]||(a.$timers[g][k.$timerID]=window.setInterval(q,l));this.global[g]||(this.global[g]=[]);this.global[g].push(a)}},remove:function(a,l,g){var k=a.$timers;if(k){if(!l)for(l in k)this.remove(a,l,g);else if(k[l]){if(g)g.$timerID&&(window.clearInterval(k[l][g.$timerID]),
delete k[l][g.$timerID]);else for(g in k[l])window.clearInterval(k[l][g]),delete k[l][g];for(d in k[l])break;if(!d){var d=null;delete k[l]}}for(d in k)break;d||(a.$timers=null)}}}});if(jQuery.browser.msie)jQuery(window).one("unload",function(){var a=jQuery.timer.global,l;for(l in a)for(var g=a[l],k=g.length;--k;)jQuery.timer.remove(g[k],l)});(function(a){function l(b){return{frame:a.attributes("frame",b),font:a.attributes("font",b),border:a.attributes("border",b),padding:a.attributes("padding",b),background:a.attributes("background",b),getName:function(){return b.name},getId:function(){return b.name},getViewType:function(){return b.type}}}function g(b){var d=b.sectionX,g=b.sectionY,k=b.sectionwidth,l={height:0},f=b.toolbartop;void 0!=f&&(f.hidden||(l.children=new a.uichildren(b,f.children,null)));l.getHTML=function(){if(a.isEmptyObject(f))return"";
if(!f.hidden)return['<div id="'+b.name+'_toolbarTop">',l.children.getHTML(),"</div>"].join("")};l.applyOverrides=function(){a.isEmptyObject(f)||f.hidden||(l.children.applyOverrides(),a("#"+b.name+"_toolbarTop").css({position:"absolute",background:a.attributes("color",f.backgroundColor).getColorCode(),"background-repeat":"repeat"}),a("#"+b.name+"_toolbarTop").css({top:g*a.mobileweb.device.aspectHratio,height:f.frame.height*a.mobileweb.device.aspectHratio}),a("#"+b.name+"_toolbarTop").css({left:d*a.mobileweb.device.aspectWratio,
width:k*a.mobileweb.device.aspectWratio}))};l.applyEvents=function(){a.isEmptyObject(f)||f.hidden||l.children.applyEvents()};l.isHidden=function(){return f.hidden};l.getHeight=function(){return f.hidden?0:f.frame.height};return l}function k(b){var d=b.sectionX,g=b.sectionY,k=b.sectionwidth,l={height:0},f=b.toolbarbottom;a.isEmptyObject(f)||f.hidden||(l.children=new a.uichildren(b,f.children,null));l.getHTML=function(){if(a.isEmptyObject(f))return"";if(!f.hidden)return['<div id="'+b.name+'_toolbarBottom">',
l.children.getHTML(),"</div>"].join("")};l.applyOverrides=function(){if(!a.isEmptyObject(f)&&!f.hidden){l.children.applyOverrides();a("#"+b.name+"_toolbarBottom").css({position:"absolute",background:a.attributes("color",f.backgroundColor).getColorCode(),"background-repeat":"repeat"});var h=parseInt(g)+parseInt(b.sectionheight)-parseInt(f.frame.height);a("#"+b.name+"_toolbarBottom").css({top:h*a.mobileweb.device.aspectHratio+"px"});a("#"+b.name+"_toolbarBottom").css({left:d*a.mobileweb.device.aspectWratio,
width:k*a.mobileweb.device.aspectWratio,height:f.frame.height*a.mobileweb.device.aspectHratio})}};l.applyEvents=function(){a.isEmptyObject(f)||f.hidden||l.children.applyEvents()};l.isHidden=function(){return f.hidden};l.getHeight=function(){return f.hidden?0:f.frame.height};return l}var d={};a.splitviewChildScaleRatio=function(b){var d=0;b.statusbarhidden||(d+=20);void 0==b.header||b.header.hidden||(d=""!=b.header.prompt?d+77:d+44);void 0==b.footer||b.footer.hidden||(d+=49);a.mobileweb.device.aspectHratio=
(document.documentElement.clientHeight-d)/(b.height-d)};a.uiSplitViewPageContainer=function(b,g){var h=[];b.data.innerPagesCount=0;a.each(g,function(g,k){switch(k.type){case "BaseView":k.pagedef=b;h.push(a.uiBaseViewForSV(b,k));b.data.isSaved=!1;b.data.innerPagesCount+=1;b.pageCreated=!0;break;case "ScrollView":k.pagedef=b;h.push(a.uiScrollViewForSV(b,k));b.data.isSaved=!1;b.data.innerPagesCount+=1;b.pageCreated=!0;break;case "TableView":k.pagedef=b;h.push(a.uiTableViewForSV(a.createTableViewRows(k)));
b.data.isSaved=!1;b.data.innerPagesCount+=1;b.pageCreated=!0;break;case "TableViewList":k.pagedef=b;h.push(a.uiTableViewListForSV(a.createTableViewListPageRows(k)));b.data.isSaved=!1;b.data.innerPagesCount+=1;b.pageCreated=!0;break;case "DBTableView":a.fetchLocalDBRecords(k);k.pagedef=b;var f=setInterval(function(){void 0!=k.data.isRecordSaved&&k.data.isRecordSaved&&(clearInterval(f),k.data.isRecordSaved=!1,k.data.contents[0]=k.data.contents[0][0],h.push(a.uiDBTableViewForSV(a.createLocalTableViewRows(k))),
b.data.isSaved=!0,b.data.innerPagesCount+=1)},300);break;case "DBTableViewList":var l=a.utility("clone",k);a.fetchLocalDBRecords(l);l.pagedef=b;f=setInterval(function(){void 0!=l.data.isSaved&&l.data.isSaved&&(clearInterval(f),h.push(a.uiDBTableViewListForSV(a.createDBListViewPageRows(l))),b.data.isSaved=!0,b.data.innerPagesCount+=1)},300);break;case "RemoteTableView":a.fetchRemoteDBRecords(k,b.name,"createRemoteViewPageRows");var m=setInterval(function(){a.isEmptyObject(k)||(clearInterval(m),k.pagedef=
b,h.push(a.uiRemoteTableViewForSV(a.createRemoteTableViewRows(k))),b.data.isSaved=!0,b.data.innerPagesCount+=1)},300);break;case "RemoteTableViewList":var p=a.utility("clone",k),q=p.name;a.fetchRemoteDBRecords(p,b.name,"createDBListViewPageRows");a.utility("isReverseTransition")?(p.pagedef=b,h.push(a.uiRemoteDBTableViewListForSV(a.createRemoteDBListViewPageRows(p))),b.data.isSaved=!0,b.data.innerPagesCount+=1):m=setInterval(function(){if(d[q]||1200==m)clearInterval(m),p.pagedef=b,h.push(a.uiRemoteDBTableViewListForSV(a.createRemoteDBListViewPageRows(p))),
b.data.isSaved=!0,b.data.innerPagesCount+=1},300);break;default:b.data.isSaved=!0}});h.getHTML=function(){"preview"!==a.mobileweb.state&&a.splitviewChildScaleRatio(b);var d=[];a.each(this,function(a,b){d.push(this.getHTML())});return d.join("")};h.applyOverrides=function(){a.each(this,function(a,b){b.applyOverrides()})};h.applyEvents=function(){a.each(this,function(a,b){b.applyEvents()})};return h};a.uiBaseViewForSV=function(b,d){var h=new l(d),p=new g(d),m=new k(d),f={};void 0!=b.data.contents&&
(a.extend(f,b.data.contents[0]),a.extend(f,d.data.contents[0]));h.getHTML=function(){d.childrenUI=new a.uichildren(d,d.children,f);a.isEmptyObject(f)?d.childrenUI=new a.uichildren(d,d.children,d.data.contents[0]):d.childrenUI=new a.uichildren(d,d.children,f);var b=d.sectionheight-parseFloat(p.getHeight())-parseFloat(m.getHeight());return['<div id="'+d.name+'_div">',p.getHTML(),'<section  id="'+d.name+'_section" style="height:',b*a.mobileweb.device.aspectHratio,"px;width:",d.sectionwidth*a.mobileweb.device.aspectWratio,
"px;top:",(parseFloat(p.getHeight())+parseFloat(d.sectionY))*a.mobileweb.device.aspectHratio,"px;left:",d.sectionX*a.mobileweb.device.aspectWratio,'px;">',d.childrenUI.getHTML(),"</section>",m.getHTML(),"</div>"].join("")};h.applyOverrides=function(){p.applyOverrides();a("#"+d.name+"_section").css({background:a.attributes("color",d.backgroundColor).getColorCode()});a("#"+d.name+"_section").css({position:"absolute"});void 0!=d.childrenUI&&d.childrenUI.applyOverrides();m.applyOverrides();if(-1==d.parent.lastIndexOf(b.name)||
""!=d.parent.split(b.name)[1])d.transitType="transitInView",a("#"+d.name+"_div").css("display","none")};h.applyEvents=function(){p.applyEvents();void 0!=d.childrenUI&&d.childrenUI.applyEvents();m.applyEvents();var b=setInterval(function(){if(!a.utility("getActionRunningStatus")){clearInterval(b);var f=a.utility("getObject",a.mobileweb.pages,"name",d.name);void 0!=f.events&&void 0!=f.events.AfterViewPage&&0<f.events.AfterViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(f,null,
f.events.AfterViewPage.slice())).execute())}},500)};h.getValue=function(){};h.setValue=function(a){};h.children=d.childrenUI;0<a("#"+d.name+"_div").length&&void 0!=d.isgrandChild&&d.isgrandChild&&a("#"+d.name+"_div").css("display","none");return h};a.uiScrollViewForSV=function(b,d){var h=new l(d),p=new g(d),m=new k(d),f={};void 0!=b.data.contents&&(a.extend(f,b.data.contents[0]),a.extend(f,d.data.contents[0]));h.getHTML=function(){a.isEmptyObject(f)?d.childrenUI=new a.uichildren(d,d.children,d.data.contents[0]):
d.childrenUI=new a.uichildren(d,d.children,f);var b=d.sectionheight-parseFloat(p.getHeight())-parseFloat(m.getHeight());return['<div id="'+d.name+'_div">',p.getHTML(),'<section  id="'+d.name+'_section"  class="scrollSection" style="height:',b*a.mobileweb.device.aspectHratio,"px;width:",d.sectionwidth*a.mobileweb.device.aspectWratio,"px;top:",(parseFloat(p.getHeight())+parseFloat(d.sectionY))*a.mobileweb.device.aspectHratio,"px;left:",d.sectionX*a.mobileweb.device.aspectWratio,'px;">','<div id="'+
d.name+'" style="height:',d.height*a.mobileweb.device.aspectHratio,"px;width:",d.width*a.mobileweb.device.aspectWratio,"px;top:",parseFloat(d.y)*a.mobileweb.device.aspectHratio,"px;left:",d.x*a.mobileweb.device.aspectWratio,'px;">',d.childrenUI.getHTML(),"</div></section>",m.getHTML(),"</div>"].join("")};h.applyOverrides=function(){p.applyOverrides();a("#"+d.name+"_section").css({position:"absolute",overflow:"hidden"});a("#"+d.name).css({background:a.attributes("color",d.backgroundColor).getColorCode()});
a("#"+d.name).css({position:"absolute",overflow:"hidden"});void 0!=d.childrenUI&&d.childrenUI.applyOverrides();m.applyOverrides();if(-1==d.parent.lastIndexOf(b.name)||""!=d.parent.split(b.name)[1])d.transitType="transitInView",a("#"+d.name+"_div").css("display","none")};h.applyEvents=function(){p.applyEvents();void 0!=d.childrenUI&&d.childrenUI.applyEvents();m.applyEvents();var b=setInterval(function(){if(!a.utility("getActionRunningStatus")){clearInterval(b);var f=a.utility("getObject",a.mobileweb.pages,
"name",d.name);void 0!=f.events&&void 0!=f.events.AfterViewPage&&0<f.events.AfterViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(f,null,f.events.AfterViewPage.slice())).execute())}},500);h.applyScrollEvents(d.name+"_div")};h.applyScrollEvents=function(b){var d;a("#"+b).on("vmouseover",a("#"+b),function(){if(void 0===d){var f=a("#"+b+" .scrollSection").get(0);d=new iScroll(f,{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=
b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}})};h.getValue=function(){};h.setValue=function(a){};h.children=d.childrenUI;0<a("#"+d.name+"_div").length&&void 0!=d.isgrandChild&&d.isgrandChild&&a("#"+d.name+"_div").css("display","none");return h};a.uiDBTableViewListForSV=function(b,d){b.width=b.sectionwidth;var h=b.pagedef,p=new l(b),m=new g(b),f=new k(b);b.childrenUI=new a.uichildren(b,b.children,b.data.contents[0]);p.getHTML=function(){var d=b.sectionheight-parseFloat(m.getHeight())-
parseFloat(f.getHeight());return['<div id= "'+b.name+'_div">',m.getHTML(),'<section class="scrollSectionDB" id="'+b.name+'_section" style="height:',d*a.mobileweb.device.aspectHratio,"px;width:",b.sectionwidth*a.mobileweb.device.aspectWratio,"px;top:",(parseFloat(b.sectionY)+parseFloat(m.getHeight()))*a.mobileweb.device.aspectHratio,"px;left:",b.sectionX*a.mobileweb.device.aspectWratio,'px;">',b.childrenUI.getHTML(),"</section>",f.getHTML(),"</div>"].join("")};p.applyOverrides=function(){m.applyOverrides();
a("#"+b.name+"_section").css({position:"absolute","overflow-scrolling":"touch","overflow-Y":"hidden","overflow-X":"hidden"});void 0!=b.childrenUI&&b.childrenUI.applyOverrides();f.applyOverrides();b.lockReleased=!0;if(-1==b.parent.lastIndexOf(h.name)||""!=b.parent.split(h.name)[1])b.transitType="transitInView",a("#"+b.name+"_div").css("display","none")};p.applyEvents=function(){m.applyEvents();void 0!=b.childrenUI&&b.childrenUI.applyEvents();f.applyEvents();var d=setInterval(function(){p.applyScrollEvents(b.name+
"_div");if(!a.utility("getActionRunningStatus")){clearInterval(d);var f=a.utility("getObject",a.mobileweb.pages,"name",b.name);void 0!=f.events&&void 0!=f.events.AfterViewPage&&0<f.events.AfterViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(f,null,f.events.AfterViewPage.slice())).execute())}},1E3)};p.applyScrollEvents=function(b){var d;a("#"+b).on("vmouseover",a("#"+b),function(){if(void 0===d){var f=a("#"+b+" .scrollSectionDB").get(0);if(void 0!=f){var g=a("#"+b+" .scrollSectionDB").children();
void 0!=g&&1==g.length&&(d=new iScroll(f,{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}}))}}})};p.getValue=function(){};p.setValue=function(a){};p.children=b.childrenUI;0<a("#"+b.name+"_div").length&&void 0!=b.isgrandChild&&b.isgrandChild&&a("#"+b.name+"_div").css("display","none");void 0!=d&&d(p);return p};a.uiRemoteDBTableViewListForSV=function(b,d){b.width=b.sectionwidth;
var h=b.pagedef,p=new l(b),m=new g(b),f=new k(b);b.childrenUI=new a.uichildren(b,b.children,b.data.contents[0]);p.getHTML=function(){var d=b.sectionheight-parseFloat(m.getHeight())-parseFloat(f.getHeight());return['<div id= "'+b.name+'_div">',m.getHTML(),'<section class="scrollSectionDB" id="'+b.name+'_section" style="height:',d*a.mobileweb.device.aspectHratio,"px;width:",b.sectionwidth*a.mobileweb.device.aspectWratio,"px;top:",(parseFloat(b.sectionY)+parseFloat(m.getHeight()))*a.mobileweb.device.aspectHratio,
"px;left:",b.sectionX*a.mobileweb.device.aspectWratio,'px;">',b.childrenUI.getHTML(),"</section>",f.getHTML(),"</div>"].join("")};p.applyOverrides=function(){m.applyOverrides();a("#"+b.name+"_section").css({position:"absolute","overflow-scrolling":"touch","overflow-Y":"hidden","overflow-X":"hidden"});void 0!=b.childrenUI&&b.childrenUI.applyOverrides();f.applyOverrides();if(-1==b.parent.lastIndexOf(h.name)||""!=b.parent.split(h.name)[1])b.transitType="transitInView",a("#"+b.name+"_div").css("display",
"none")};p.applyEvents=function(){m.applyEvents();void 0!=b.childrenUI&&b.childrenUI.applyEvents();f.applyEvents();var d=setInterval(function(){if(!a.utility("getActionRunningStatus")){clearInterval(d);var f=a.utility("getObject",a.mobileweb.pages,"name",b.name);void 0!=f.events&&void 0!=f.events.AfterViewPage&&0<f.events.AfterViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(f,null,f.events.AfterViewPage.slice())).execute())}},1E3);p.applyScrollEvents(b.name+"_div")};p.applyScrollEvents=
function(b){var d;a("#"+b).on("vmouseover",a("#"+b),function(){if(void 0===d){var f=a("#"+b+" .scrollSectionDB").get(0);d=new iScroll(f,{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}})};p.getValue=function(){};p.setValue=function(a){};p.children=b.childrenUI;0<a("#"+b.name+"_div").length&&void 0!=b.isgrandChild&&b.isgrandChild&&a("#"+b.name+"_div").css("display",
"none");void 0!=d&&d(p);return p};a.uiTableViewListForSV=function(b,d){b.width=b.sectionwidth;var h=b.pagedef,p=new l(b),m=new g(b),f=new k(b);b.childrenUI=new a.uichildren(b,b.children,b.data.contents[0]);p.getHTML=function(){var d=b.sectionheight-parseFloat(m.getHeight())-parseFloat(f.getHeight());return['<div id= "'+b.name+'_div">',m.getHTML(),'<section class="scrollSectionDB" id="'+b.name+'_section" style="height:',d*a.mobileweb.device.aspectHratio,"px;width:",b.sectionwidth*a.mobileweb.device.aspectWratio,
"px;top:",(parseFloat(b.sectionY)+parseFloat(m.getHeight()))*a.mobileweb.device.aspectHratio,"px;left:",b.sectionX*a.mobileweb.device.aspectWratio,'px;">',b.childrenUI.getHTML(),"</section>",f.getHTML(),"</div>"].join("")};p.applyOverrides=function(){m.applyOverrides();a("#"+b.name+"_section").css({position:"absolute","overflow-scrolling":"touch","overflow-Y":"hidden","overflow-X":"hidden"});void 0!=b.childrenUI&&b.childrenUI.applyOverrides();f.applyOverrides();if(-1==b.parent.lastIndexOf(h.name)||
""!=b.parent.split(h.name)[1])b.transitType="transitInView",a("#"+b.name+"_div").css("display","none")};p.applyEvents=function(){m.applyEvents();void 0!=b.childrenUI&&b.childrenUI.applyEvents();f.applyEvents();var d=setInterval(function(){if(!a.utility("getActionRunningStatus")){clearInterval(d);var f=a.utility("getObject",a.mobileweb.pages,"name",b.name);void 0!=f.events&&void 0!=f.events.AfterViewPage&&0<f.events.AfterViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(f,null,
f.events.AfterViewPage.slice())).execute())}},1E3);p.applyScrollEvents(b.name+"_div")};p.applyScrollEvents=function(b){var d;a("#"+b).on("vmouseover",a("#"+b),function(){if(void 0===d){var f=a("#"+b+" .scrollSectionDB").get(0);d=new iScroll(f,{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}})};p.getValue=function(){};p.setValue=function(a){};p.children=b.childrenUI;
0<a("#"+b.name+"_div").length&&void 0!=b.isgrandChild&&b.isgrandChild&&a("#"+b.name+"_div").css("display","none");void 0!=d&&d(p);return p};a.uiRemoteTableViewForSV=function(b,d){b.width=b.sectionwidth;var h=b.pagedef,p=new l(b),m=new g(b),f=new k(b);b.childrenUI=new a.uichildren(b,b.children,b.data.contents[0]);p.getHTML=function(){var d=b.sectionheight-parseFloat(m.getHeight())-parseFloat(f.getHeight());return['<div id= "'+b.name+'_div">',m.getHTML(),'<section class="scrollSectionDB" id="'+b.name+
'_section" style="height:',d*a.mobileweb.device.aspectHratio,"px;width:",b.sectionwidth*a.mobileweb.device.aspectWratio,"px;top:",(parseFloat(b.sectionY)+parseFloat(m.getHeight()))*a.mobileweb.device.aspectHratio,"px;left:",b.sectionX*a.mobileweb.device.aspectWratio,'px;">',b.childrenUI.getHTML(),"</section>",f.getHTML(),"</div>"].join("")};p.applyOverrides=function(){m.applyOverrides();a("#"+b.name+"_section").css({position:"absolute","overflow-scrolling":"touch","overflow-Y":"hidden","overflow-X":"hidden"});
void 0!=b.childrenUI&&b.childrenUI.applyOverrides();f.applyOverrides();if(-1==b.parent.lastIndexOf(h.name)||""!=b.parent.split(h.name)[1])b.transitType="transitInView",a("#"+b.name+"_div").css("display","none")};p.applyEvents=function(){m.applyEvents();void 0!=b.childrenUI&&b.childrenUI.applyEvents();f.applyEvents();var d=setInterval(function(){if(!a.utility("getActionRunningStatus")){clearInterval(d);var f=a.utility("getObject",a.mobileweb.pages,"name",b.name);void 0!=f.events&&void 0!=f.events.AfterViewPage&&
0<f.events.AfterViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(f,null,f.events.AfterViewPage.slice())).execute())}},1E3);p.applyScrollEvents(b.name+"_div")};p.applyScrollEvents=function(b){var d;a("#"+b).on("vmouseover",a("#"+b),function(){if(void 0===d){var f=a("#"+b+" .scrollSectionDB").get(0);d=new iScroll(f,{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}})};
p.getValue=function(){};p.setValue=function(a){};p.children=b.childrenUI;0<a("#"+b.name+"_div").length&&void 0!=b.isgrandChild&&b.isgrandChild&&a("#"+b.name+"_div").css("display","none");void 0!=d&&d(p);return p};a.uiDBTableViewForSV=function(b,d){b.width=b.sectionwidth;var h=b.pagedef,p=new l(b),m=new g(b),f=new k(b);b.childrenUI=new a.uichildren(b,b.children,b.data.contents[0]);p.getHTML=function(){var d=b.sectionheight-parseFloat(m.getHeight())-parseFloat(f.getHeight());return['<div id= "'+b.name+
'_div">',m.getHTML(),'<section class="scrollSectionDB" id="'+b.name+'_section" style="height:',d*a.mobileweb.device.aspectHratio,"px;width:",b.sectionwidth*a.mobileweb.device.aspectWratio,"px;top:",(parseFloat(b.sectionY)+parseFloat(m.getHeight()))*a.mobileweb.device.aspectHratio,"px;left:",b.sectionX*a.mobileweb.device.aspectWratio,'px;">',b.childrenUI.getHTML(),"</section>",f.getHTML(),"</div>"].join("")};p.applyOverrides=function(){m.applyOverrides();a("#"+b.name+"_section").css({position:"absolute",
"overflow-scrolling":"touch","overflow-Y":"hidden","overflow-X":"hidden"});void 0!=b.childrenUI&&b.childrenUI.applyOverrides();f.applyOverrides();if(-1==b.parent.lastIndexOf(h.name)||""!=b.parent.split(h.name)[1])b.transitType="transitInView",a("#"+b.name+"_div").css("display","none")};p.applyEvents=function(){m.applyEvents();void 0!=b.childrenUI&&b.childrenUI.applyEvents();f.applyEvents();var d=setInterval(function(){if(!a.utility("getActionRunningStatus")){clearInterval(d);var f=a.utility("getObject",
a.mobileweb.pages,"name",b.name);void 0!=f.events&&void 0!=f.events.AfterViewPage&&0<f.events.AfterViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(f,null,f.events.AfterViewPage.slice())).execute())}},1E3);p.applyScrollEvents(b.name+"_div")};p.applyScrollEvents=function(b){var d;a("#"+b).on("vmouseover",a("#"+b),function(){if(void 0===d){var f=a("#"+b+" .scrollSectionDB").get(0);d=new iScroll(f,{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=
b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}})};p.getValue=function(){};p.setValue=function(a){};p.children=b.childrenUI;0<a("#"+b.name+"_div").length&&void 0!=b.isgrandChild&&b.isgrandChild&&a("#"+b.name+"_div").css("display","none");void 0!=d&&d(p);return p};a.uiTableViewForSV=function(b,d){b.width=b.sectionwidth;var h=b.pagedef,p=new l(b),m=new g(b),f=new k(b);b.childrenUI=new a.uichildren(b,b.children,b.data.contents[0]);p.getHTML=function(){var d=
b.sectionheight-parseFloat(m.getHeight())-parseFloat(f.getHeight());return['<div id= "'+b.name+'_div">',m.getHTML(),'<section class="scrollSectionDB" id="'+b.name+'_section" style="height:',d*a.mobileweb.device.aspectHratio,"px;width:",b.sectionwidth*a.mobileweb.device.aspectWratio,"px;top:",(parseFloat(b.sectionY)+parseFloat(m.getHeight()))*a.mobileweb.device.aspectHratio,"px;left:",b.sectionX*a.mobileweb.device.aspectWratio,'px;">',b.childrenUI.getHTML(),"</section>",f.getHTML(),"</div>"].join("")};
p.applyOverrides=function(){m.applyOverrides();a("#"+b.name+"_section").css({position:"absolute","overflow-scrolling":"touch","overflow-Y":"hidden","overflow-X":"hidden"});void 0!=b.childrenUI&&b.childrenUI.applyOverrides();f.applyOverrides();if(-1==b.parent.lastIndexOf(h.name)||""!=b.parent.split(h.name)[1])b.transitType="transitInView",a("#"+b.name+"_div").css("display","none")};p.applyEvents=function(){m.applyEvents();void 0!=b.childrenUI&&b.childrenUI.applyEvents();f.applyEvents();var d=setInterval(function(){if(!a.utility("getActionRunningStatus")){clearInterval(d);
var f=a.utility("getObject",a.mobileweb.pages,"name",b.name);void 0!=f.events&&void 0!=f.events.AfterViewPage&&0<f.events.AfterViewPage.length&&(a.utility("setActionRunningStatus",!0),(new a.actions(f,null,f.events.AfterViewPage.slice())).execute())}},1E3);p.applyScrollEvents(b.name+"_div")};p.applyScrollEvents=function(b){var d;a("#"+b).on("vmouseover",a("#"+b),function(){if(void 0===d){var f=a("#"+b+" .scrollSectionDB").get(0);d=new iScroll(f,{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=
a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})}})};p.getValue=function(){};p.setValue=function(a){};p.children=b.childrenUI;0<a("#"+b.name+"_div").length&&void 0!=b.isgrandChild&&b.isgrandChild&&a("#"+b.name+"_div").css("display","none");void 0!=d&&d(p);return p};a.createDBListViewPageRows=function(b,d){var g=b.children[0].group[0],h=b.children[0].id,k=[],f=[];f=void 0!=b.data.contents[0]&&b.data.contents[0].constructor==
Object?b.data.contents:b.data.contents[0];void 0!=f&&a.each(f,function(d,f){var l={rownum:d,rowsize:g.template.rowsize,icon:g.template.icon,data:{contents:[f]},events:g.template.events,children:[]};switch(b.children[0].style){case "default":l.children.push({id:h+"-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}});""!==g.template.image&&(l.children[0].frame.x=50,l.children.push({id:h+
"-group-0-img-"+d,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "subtitle":l.children.push({id:h+"-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:7,width:250,height:20},font:{size:16,align:"left",color:{name:"black"}}},{id:h+"-group-0-sub-"+d,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:250,height:20},font:{size:12,align:"left",color:{name:"gray"}}});
""!==g.template.image&&(l.children[0].frame.x=50,l.children[1].frame.x=50,l.children.push({id:h+"-group-0-img-"+d,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":l.children.push({id:h+"-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}},{id:h+"-group-0-sub-"+d,name:"",value:"",template:g.template.subtext,viewtype:"Label",
frame:{x:b.width-185,y:16,width:150,height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}});break;case "contactform":l.children.push({id:h+"-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:17,width:.4*(b.width-40),height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}},{id:h+"-group-0-sub-"+d,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:.4*(b.width-40)+20,y:17,width:.6*(b.width-40),height:20},font:{size:16,
align:"left",color:{name:"black"}}});break;case "custom":a.each(g.template.children,function(b,f){l.children.push(a.utility("clone",f));l.children[b].id=[f.id,"-",d,"-",b].join("")})}k.push(l)});b.children[0].group[0].row=k;void 0!=d&&d(b);return b};a.createRemoteDBListViewPageRows=function(b,d){var g=b.children[0].group[0],h=b.children[0].id,k=[],f=[];f=void 0!=b.data.contents[0]&&b.data.contents[0].constructor==Object?b.data.contents:b.data.contents[0];void 0!=f&&0<f.length&&a.each(f,function(d,
f){var l={rownum:d,rowsize:g.template.rowsize,backgroundColor:g.template.backgroundColor,oddRowBackgroundColor:g.template.oddRowBackgroundColor,evenRowBackgroundColor:g.template.evenRowBackgroundColor,oddRowBackgroundImage:g.template.oddRowBackgroundImage,evenRowBackgroundImage:g.template.evenRowBackgroundImage,icon:g.template.icon,data:{contents:[f]},events:g.template.events,children:[]};switch(b.children[0].style){case "default":l.children.push({id:h+"-group-0-main-"+d,name:"",value:"",template:g.template.maintext,
viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}});""!==g.template.image&&(l.children[0].frame.x=50,l.children.push({id:h+"-group-0-img-"+d,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "subtitle":l.children.push({id:h+"-group-0-main-"+d,name:g.template.maintext.toString().replace("[","").replace("]","")+"-"+d,value:"",template:g.template.maintext,
viewtype:"Label",frame:{x:10,y:7,width:250,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:h+"-group-0-sub-"+d,name:g.template.subtext.toString().replace("[","").replace("]","")+"-"+d,value:"",template:g.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:250,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"left",color:{name:"gray"}}});""!==g.template.image&&(l.children[0].frame.x=50,l.children[1].frame.x=50,l.children.push({id:h+
"-group-0-img-"+d,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":l.children.push({id:h+"-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}},{id:h+"-group-0-sub-"+d,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:b.width-185,y:16,width:150,height:20},
padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"right",color:{name:"SteelBlue"}}});break;case "contactform":l.children.push({id:h+"-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:17,width:.4*(b.width-40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:12,align:"right",color:{name:"SteelBlue"}}},{id:h+"-group-0-sub-"+d,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:.4*(b.width-40)+20,y:17,width:.6*(b.width-
40),height:20},padding:{top:5,bottom:5,left:5,right:5},font:{size:16,align:"left",color:{name:"black"}}});break;case "custom":a.each(g.template.children,function(b,f){l.children.push(a.utility("clone",f));l.children[b].id=[f.id,"-",d,"-",b].join("")})}k.push(l)});b.children[0].group[0].row=k;void 0!=d&&d(b);return b};a.createTableViewListPageRows=function(b){var d=b.children[0].group[0],g=[];a.each(b.children[0].group[0].template,function(h,k){var f={rownum:h,rowsize:d.template[h].rowsize,icon:d.template[h].icon,
data:{contents:[b.data.contents[0]]},events:d.template[h].events,children:[]};switch(b.children[0].style){case "default":f.children.push({id:"ui-group-0-main-"+h,name:"",value:"",template:d.template[h].maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}});""!==d.template[h].image&&(f.children[0].frame.x=50,f.children.push({id:"ui-group-0-img-"+h,value:"",template:d.template[h].image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));
break;case "subtitle":f.children.push({id:"ui-group-0-main-"+h,name:d.template[h].maintext.toString().replace("[","").replace("]","")+"-"+h,value:"",template:d.template[h].maintext,viewtype:"Label",frame:{x:10,y:7,width:250,height:20},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-group-0-sub-"+h,name:d.template[h].subtext.toString().replace("[","").replace("]","")+"-"+h,value:"",template:d.template[h].subtext,viewtype:"Label",frame:{x:10,y:22,width:150,height:20},font:{size:12,align:"left",
color:{name:"gray"}}});""!==d.template[h].image&&(f.children[0].frame.x=50,f.children[1].frame.x=50,f.children.push({id:"ui-group-0-img-"+h,value:"",template:d.template[h].image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":f.children.push({id:"ui-group-0-main-"+h,name:"",value:"",template:d.template[h].maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-group-0-sub-"+h,name:"",value:"",
template:d.template[h].subtext,viewtype:"Label",frame:{x:b.width-185,y:16,width:150,height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}});break;case "contactform":f.children.push({id:"ui-group-0-main-"+h,name:"",value:"",template:d.template[h].maintext,viewtype:"Label",frame:{x:10,y:17,width:.4*(pagedef.width-40),height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}},{id:"ui-group-0-sub-"+h,name:"",value:"",template:d.template[h].subtext,viewtype:"Label",frame:{x:.4*(b.width-
40)+20,y:17,width:.6*(b.width-40),height:20},font:{size:16,align:"left",color:{name:"black"}}});break;case "custom":a.each(d.template[h].children,function(b,d){f.children.push(a.utility("clone",d));f.children[b].id=["ui-group-0-",h,"-",b].join("")})}g.push(f)});b.children[0].group[0].row=g;return b};a.createRemoteTableViewRows=function(b,d){a.each(b.children[0].group,function(d,g){var h=[];a.each(g.row,function(a,g){g.data.contents=b.data.contents;"custom"!==b.children[0].style&&(g.children=[]);switch(b.children[0].style){case "default":g.children.push({id:"ui-defgroup-"+
d+"-main-"+a,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}});""!==g.template.image&&(g.children[0].frame.x=50,g.children.push({id:"ui-defgroup-"+d+"-img-"+a,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "subtitle":g.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:g.template.maintext.toString().replace("[","").replace("]","")+"-"+
a,value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:7,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-defgroup-"+d+"-sub-"+a,name:g.template.subtext.toString().replace("[","").replace("]","")+"-"+a,value:"",template:g.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:150,height:20},font:{size:12,align:"left",color:{name:"gray"}}});""!==g.template.image&&(g.children[0].frame.x=50,g.children[1].frame.x=50,g.children.push({id:"ui-defgroup-"+d+
"-img-"+a,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":g.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}});"Grouped"===b.children[0].tablestyle?g.children.push({id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:b.width-210,
y:16,width:150,height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}}):g.children.push({id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:b.width-185,y:16,width:150,height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}});break;case "contactform":g.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:17,width:.4*(b.width-40),height:20},font:{size:12,align:"right",
color:{name:"SteelBlue"}}},{id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:.4*(b.width-40)+20,y:17,width:.6*(b.width-40),height:20},font:{size:16,align:"left",color:{name:"black"}}})}h.push(g)});b.children[0].group[0].row=h});void 0!=d&&d(b);return b};a.createLocalTableViewRows=function(b,d){a.each(b.children[0].group,function(d,g){var h=[];a.each(g.row,function(a,g){g.data.contents=b.data.contents;"custom"!==b.children[0].style&&(g.children=[]);
switch(b.children[0].style){case "default":g.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}});""!==g.template.image&&(g.children[0].frame.x=50,g.children.push({id:"ui-defgroup-"+d+"-img-"+a,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "subtitle":g.children.push({id:"ui-defgroup-"+d+"-main-"+
a,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:7,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:150,height:20},font:{size:12,align:"left",color:{name:"gray"}}});""!==g.template.image&&(g.children[0].frame.x=50,g.children[1].frame.x=50,g.children.push({id:"ui-defgroup-"+d+"-img-"+a,value:"",template:g.template.image,name:"",viewtype:"Image",
frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":g.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}});"Grouped"===b.children[0].tablestyle?g.children.push({id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:b.width-210,y:16,width:150,height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}}):
g.children.push({id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:b.width-185,y:16,width:150,height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}});break;case "contactform":g.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:17,width:.4*(b.width-40),height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}},{id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",
template:g.template.subtext,viewtype:"Label",frame:{x:.4*(b.width-40)+20,y:17,width:.6*(b.width-40),height:20},font:{size:16,align:"left",color:{name:"black"}}})}h.push(g)});b.children[0].group[0].row=h});return b};a.createTableViewRows=function(b,d){a.each(b.children[0].group,function(d,g){var h=[];a.each(g.row,function(a,g){g.data.contents=b.data.contents;"custom"!==b.children[0].style&&(g.children=[]);switch(b.children[0].style){case "default":g.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"",
value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}});""!==g.template.image&&(g.children[0].frame.x=50,g.children.push({id:"ui-defgroup-"+d+"-img-"+a,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "subtitle":g.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:7,width:150,height:20},
font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:150,height:20},font:{size:12,align:"left",color:{name:"gray"}}});""!==g.template.image&&(g.children[0].frame.x=50,g.children[1].frame.x=50,g.children.push({id:"ui-defgroup-"+d+"-img-"+a,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":g.children.push({id:"ui-defgroup-"+
d+"-main-"+a,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:b.width-185,y:16,width:150,height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}});break;case "contactform":g.children.push({id:"ui-defgroup-"+d+"-main-"+a,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,
y:17,width:.4*(b.width-40),height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}},{id:"ui-defgroup-"+d+"-sub-"+a,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:.4*(b.width-40)+20,y:17,width:.6*(b.width-40),height:20},font:{size:16,align:"left",color:{name:"black"}}})}h.push(g)});b.children[0].group[0].row=h});return b};a.fetchLocalDBRecords=function(b,d){a.utility("queryDatabase",!0);setTimeout(function(){a.mobileweb.localdb.instance.transaction(function(g){g.executeSql(["SELECT * FROM ",
b.data.tablename,""!==b.data.wherecond?[" WHERE ",b.data.wherecond].join(""):"",void 0!==b.data.order&&""!==b.data.order?[" ORDER BY ",b.data.order].join(""):""].join(""),[],function(g,h){g=[];for(var f=0;f<h.rows.length;f++){var k={};for(key in h.rows.item(f))k[key]=h.rows.item(f)[key];g.push(k)}b.data.contents.splice(0,b.data.contents.length);b.data.contents.push(g);b.data.updated=!0;a.utility("queryDatabase",!1);"DBTableView"===b.type?b.data.isRecordSaved=!0:b.data.isSaved=!0;void 0!=d&&d()},function(d,
g){a.utility("queryDatabase",!1);b.data.isSaved=!0})})},500)};a.fetchRemoteDBRecords=function(b,d,g){(new a.actions(b,null,[{method:"Select",category:"ComAction",callback:g,parentPage:d,params:{servicename:b.data.servicename,table:b.data.tablename,where:b.data.wherecond,order:b.data.order,fields:""}}])).execute()};a.setRemoteDBListViewPage=function(a,g){d[g]=!0};a.setRemoteViewPage=function(a){}})(jQuery);(function(a,l){a.fn.bootpag=function(g){function k(g,k){k=parseInt(k,10);var l=0==h.maxVisible?1:h.maxVisible,f=1==h.maxVisible?0:1,p=Math.floor((k-1)/l)*l;g=g.find("li");h.page=k=0>k?0:k>h.total?h.total:k;g.removeClass(h.activeClass);var q=1>k-1?1:h.leaps&&k-1>=h.maxVisible?Math.floor((k-1)/l)*l:k-1;h.firstLastUse&&g.first().toggleClass(h.disabledClass,1===k);l=g.first();h.firstLastUse&&(l=l.next());l.toggleClass(h.disabledClass,1===k).attr("data-lp",q).find("a").attr("href",d(q));f=1==h.maxVisible?
0:1;q=k+1>h.total?h.total:h.leaps&&k+1<h.total-h.maxVisible?p+h.maxVisible+f:k+1;l=g.last();h.firstLastUse&&(l=l.prev());l.toggleClass(h.disabledClass,k===h.total).attr("data-lp",q).find("a").attr("href",d(q));g.last().toggleClass(h.disabledClass,k===h.total);l=g.filter("[data-lp="+k+"]");f="."+[h.nextClass,h.prevClass,h.firstClass,h.lastClass].join(",.");if(!l.not(f).length){var y=k<=p?-h.maxVisible:0;g.not(f).each(function(b){q=b+1+p+y;a(this).attr("data-lp",q).toggle(q<=h.total).find("a").html(q).attr("href",
d(q))});l=g.filter("[data-lp="+k+"]")}l.not(f).addClass(h.activeClass);b.data("settings",h)}function d(a){return h.href.replace(h.hrefVariable,a)}var b=this,h=a.extend({total:0,page:1,maxVisible:null,leaps:!0,href:"javascript:void(0);",hrefVariable:"{{number}}",next:"&raquo;",prev:"&laquo;",firstLastUse:!1,first:'<span aria-hidden="true">&larr;</span>',last:'<span aria-hidden="true">&rarr;</span>',wrapClass:"pagination",activeClass:"active",disabledClass:"disabled",nextClass:"next",prevClass:"prev",
lastClass:"last",firstClass:"first"},b.data("settings")||{},g||{});if(0>=h.total)return this;a.isNumeric(h.maxVisible)||h.maxVisible||(h.maxVisible=parseInt(h.total,10));b.data("settings",h);return this.each(function(){var g,l=a(this);var m=['<ul class="',h.wrapClass,' bootpag">'];h.firstLastUse&&(m=m.concat(['<li data-lp="1" class="',h.firstClass,'"><a href="',d(1),'">',h.first,"</a></li>"]));h.prev&&(m=m.concat(['<li data-lp="1" class="',h.prevClass,'"><a href="',d(1),'">',h.prev,"</a></li>"]));
for(g=1;g<=Math.min(h.total,h.maxVisible);g++)m=m.concat(['<li data-lp="',g,'"><a href="',d(g),'">',g,"</a></li>"]);h.next&&(g=h.leaps&&h.total>h.maxVisible?Math.min(h.maxVisible+1,h.total):2,m=m.concat(['<li data-lp="',g,'" class="',h.nextClass,'"><a href="',d(g),'">',h.next,"</a></li>"]));h.firstLastUse&&(m=m.concat(['<li data-lp="',h.total,'" class="last"><a href="',d(h.total),'">',h.last,"</a></li>"]));m.push("</ul>");l.find("ul.bootpag").remove();l.append(m.join(""));m=l.find("ul.bootpag");l.find("li").click(function(){var d=
a(this);if(!d.hasClass(h.disabledClass)&&!d.hasClass(h.activeClass)){var g=parseInt(d.attr("data-lp"),10);b.find("ul.bootpag").each(function(){k(a(this),g)});b.trigger("page",g)}});k(m,h.page)})}})(jQuery,window);(function(a){var l={pageheight:"",pagewidth:"",pagetop:"",pageleft:""},g=[],k=[],d=[],b=[],h=[],q=[],p=[],m=[],f=[],u=[],w="",y=!1,A=!1,G=[],E={},C=[],L=[],Q=!1,W={},J=!1,R,B=!1,S=0,N=null,V=null,H=null,P=null,t,F,r=!1,Y=[],T=[],Z,da=!1,K,c={targetPage:"",flag:!1},I=!1,v="8080",D=!0,O,x="",z={init:function(b){void 0==z.data?(z.data={showlogs:!1,showLoading:!1,initData:!0,initServer:!0,initImg:!0,isQuerying:!1,initChild:!1,bootingForFirstTime:!1,appBootingFirstTime:!0},a.extend(z.data,b)):a.error("[CRIT] Cannot make multiple instances of jQuery.utility");
return this},verifyFullDate:function(b){if(-1!=b.indexOf("-")){var c=b.split("-");if(3==c.length&&(2==c[2].length||3==c[2].length)){var d=new Date(c[0],c[1]-1,c[2]);if(d.getFullYear()!=c[0]||d.getMonth()!=c[1]-1||d.getDate()!=c[2])return a.errorhandler("alertBox","Input date "+b+" is not valid."),"invalid date"}}else if(-1!=b.indexOf("/")&&(c=b.split("/"),3==c.length&&(2==c[2].length||3==c[2].length)&&(d=new Date(c[0],c[1]-1,c[2]),d.getFullYear()!=c[0]||d.getMonth()!=c[1]-1||d.getDate()!=c[2])))return a.errorhandler("alertBox",
"Input date "+b+" is not valid."),"invalid date"},setBootingForFirstTime:function(a){z.data.bootingForFirstTime=a},isBootingForFirstTime:function(){return z.data.bootingForFirstTime},setAppBootingForFirstTime:function(a){z.data.appBootingFirstTime=a},isAppBootingForFirstTime:function(){return z.data.appBootingFirstTime},setServerPort:function(a){v=a},getServerPort:function(){return v},setLatestLocaldbSchema:function(a){u.push(a)},getLatestLocaldbSchema:function(a){return u},hidelogs:function(){z.data.showlogs=
!1},showlogs:function(b){z.data.showlogs=!0;a.utility("log","[WARN] Logging turned ON. Turn this OFF on production")},log:function(a){z.data.showlogs&&console.log(a)},intializeTabStackLengthAndTabs:function(){var b=a.mobileweb.tabs.length;5==a.mobileweb.tabs.length&&void 0!==a.mobileweb.tabs[4].tabs&&(b--,a.each(a.mobileweb.tabs[4].tabs,function(a,c){b++}));p.length=b;a.each(a.mobileweb.tabs,function(b,c){if(4<=b)if(void 0!==a.mobileweb.tabs[4].tabs)a.each(a.mobileweb.tabs[4].tabs,function(a,c){var d=
[];d[0]=c.page;p[b+a]=d});else{var d=[];d[0]=a.mobileweb.tabs[4].page;p[b]=d}else d=[],d[0]=c.page,p[b]=d})},insertTabInformation:function(b,c){a.each(p,function(a,d){for(var f in d)if(d[f]==b){d=p[a];d[d.length]=c;p[a]=d;break}})},updateTabStacks:function(a,b){p[a]=b},getTabStack:function(){return p},getDeviceOrientation:function(a){switch(a){case 180:return"portrait-down";case -90:return"landscape-right";case 90:return"landscape-left";default:return"portrait-up"}},getObject:function(b,c,d){var f=
{};f=a.grep(b,function(a,b){return a[c]===d})[0];if(a.isEmptyObject(f))for(var g in b)"SplitView"===b[g].type&&a.each(b[g].children,function(a,b){b[c]===d&&(f=b)});if(a.isEmptyObject(f))for(g in b)"PageScrollView"===b[g].type&&a.each(b[g].children,function(a,b){b[c]===d&&(f=b)});return f},getUID:function(){var a=1,b=new Date,c=b.getMilliseconds()+"";return++b+c+(1E4===++a?1:a)},clone:function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor(),c;for(c in a)a.hasOwnProperty(c)&&(b[c]=
a[c]);return b},setbasicPageDef:function(b){k=[];var c=b.children;"DBTableView"==b.type||"RemoteTableView"==b.type?a.each(b.children[0].group,function(b,c){a.each(c.row,function(b,c){a.each(c.children,function(a,b){switch(b.viewtype){case "TextField":case "TextArea":case "Label":""==b.template&&k.push({uiname:b.name,value:b.value,viewtype:b.viewtype,id:b.id})}})})}):a.each(c,function(a,b){switch(b.viewtype){case "TextField":case "TextArea":case "Label":k.push({uiname:b.name,value:b.value,viewtype:b.viewtype,
id:b.id})}})},getbasicPageDef:function(){return k},setPageWhereCond:function(a,b){var c=!1;if(0<d.length){for(var f in d)f.pagename===a&&(c=!0);c||d.push({pagename:a,wherecond:b})}else d.push({pagename:a,wherecond:b})},getPageWhereCond:function(a){for(var b in d)if(d[b].pagename===a)return d[b].wherecond},setPageFrame:function(a){l.pageheight=a.height;l.pagetop=a.y;l.pagewidth=a.width;l.pageleft=a.x;return""},getPageFrame:function(a){return l},getRegisteredActions:function(){return g},removeTrigerredActions:function(b){g=
jQuery.grep(g,function(b,c){return b.action.params.targetpage!==a.mobileweb.getCurrentPage().getName()})},setRegisteredActions:function(a){g.push(a)},setPageLoadingFlag:function(a){J=a},getPageLoadingFlag:function(){return J},regiterViewSuccess:function(b,c,d){a.utility("setRegisteredActions",{pagedef:b,ui:c,action:d,target:{}})},setCombinedCSV:function(a){q.push(a)},getCombinedCSV:function(){return q},setRemoteDBRecords:function(a){G=a},getRemoteDBRecords:function(){return G},addNewTimer:function(a){var b=
{};b[a]=!0;return f.push(b)},getUiFromObject:function(b,c){return a("[name="+c+"]")},getTimers:function(){return f},removeTimers:function(a){for(var b in f)if(void 0!=f[b][a]&&f[b][a]){f[b]={};break}},setComActionStatus:function(a){w=a},getComActionStatus:function(){return w},setRemoteNumStatus:function(a){x=a},getRemoteNumStatus:function(){return x},setActionRunningStatus:function(a){y=a},getActionRunningStatus:function(){return y},setreSettingDataStatus:function(a){A=a},getreSettingDataStatus:function(){return A},
setParentPage:function(a){C.push(a)},getParentPage:function(){return C.pop()},getTabPage:function(){return Y},setTabPage:function(b){var c=!1;a.each(Y,function(a,d){d.page==b&&(c=d.tabFlag=!0)});c||Y.push({page:b,tabFlag:!1})},getTabPageData:function(a){for(var b=0;b<T.length;b++)if(T[b].pageId==a)return T[b].pageObj},setTabPageData:function(b,c){var d=!1;a.each(T,function(a,f){f.pageId==b&&(f.pageObj=c,d=!0)});d||T.push({pageId:b,pageObj:c})},updateTabPageDataArray:function(a){for(var b=0;b<T.length;b++)T[b].pageId==
a&&T.splice(b)},getSpecificParentPage:function(a){for(var b=C.length;0<b&&a!==C[b-1].getName();b--)C.pop();return C.pop()},getSpecificParentPagedef:function(a){for(var b=C.length;0<b;b--)if(a===C[b-1].getName())return C[b-1];return{}},setParentPagedef:function(a){L.push(a)},getParentPagedef:function(){return L.pop()},isParentPageHierarchy:function(a){for(var b=C.length;0<b;b--)if(a===C[b-1].getName())return!0;return!1},setReverseTransition:function(a){Q=a},isReverseTransition:function(){return Q},
registerPagedefData:function(a){W=a},getCurrentPagedef:function(){return W},spaceInStringConversion:function(a){return void 0!=a&&"number"!=typeof a&&(void 0!==a||""!==a&&0<a.length)?a.toString().replace(/'nl9'/g,"\n"):a},extractValueFromSquareBracket:function(a){if(-1!=a.indexOf("[")){var b=a.substring(1,a.indexOf("]"));a=a.replace(a,b)}return a},getURLParameterValue:function(a){var b=location.hash.split("?");if(1>=b.length)return"";b=b[1].split("&");for(var c="",d=0;d<b.length;d++){var f=b[d].split("=");
if(f[0]==a){c=f[1];break}}c=unescape(c);c.replace(/\+/g," ");return c},getDeviceType:function(){var a=navigator.userAgent;return a.match(/iPhone|iPod/i)?"iPhone":a.match(/iPad/i)?"iPad":a.match(/Android/i)?"Android":a.match(/BlackBerry/i)?"BlackBerry":a.match(/IEMobile/i)?"Windows Phone":a.match(/Macintosh|Win|Linux/i)?"Desktop":"Untested Device"},isBusy:function(){var a=!(z.data.initData&&z.data.initServer&&z.data.initImg&&!z.data.isQuerying);a?z.showLoadingIndicator(!0):z.showLoadingIndicator(!1);
return a},initData:function(a){z.data.initData=a},initServer:function(a){z.data.initServer=a},initChildren:function(a){z.data.initChild=a},isInitChildren:function(){return z.data.initChild},isInitData:function(){return z.data.initData},queryDatabase:function(a){z.data.isQuerying=a},setIndexedDBFlag:function(a){da=a},getIndexedDBFlag:function(){return da},setIndexedDBResult:function(a){K=a},getIndexedDBResult:function(){return K},setDelayedChangeCondition:function(a,b){c.flag=a;c.targetPage=b},getDelayedChangeCondition:function(a){return a===
c.targetPage?c.flag:!1},setResetEvent:function(a){I=a},getResetEvent:function(){return I},initCall:function(){if(""==a.utility("appendDeviceInfo")||null==a.utility("appendDeviceInfo")){var b={projectid:a.mobileweb.pid,ProjectName:a.mobileweb.projectname,Title:a.mobileweb.title,projectstate:"preview"===a.mobileweb.state?"development":a.mobileweb.applicationState,version:a.mobileweb.version,os:"mw",did:a.utility("getUID")};b=[z.getCommServerDomain(),'init?jsonp=registerDeviceInfo&callbackdata={"ver":"2"}&cache=',
Math.random(),"&dataset=",JSON.stringify(b)].join("");z.sendRequest(b)}},registerDeviceInfo:function(b){if("ACK"===b.ret){if(b.retdic.ak){if("8080"==z.getServerPort()){var c=new Date;c.setTime(c.getTime()+432E5);document.cookie=a.mobileweb.pid+"_ak="+b.retdic.ak+"; samesite=strict; secure"}else console.log("removing AK from cookie..."),document.cookie=a.mobileweb.pid+"_ak;  expires=Thu, 01 Jan 1970 00:00:01 GMT; samesite=strict; secure",sessionStorage.setItem(a.mobileweb.pid+"_ak",b.retdic.ak);z.data.ak=
b.retdic.ak}b.retdic.sk&&(a.cookie(projdata.pid+"_sk",b.retdic.sk,{expires:14}),z.data.sk=b.retdic.sk)}else void 0!=a.mobileweb.release&&a.mobileweb.release?a.errorhandler("previewAlertBox","We apologize for your inconvenience. Please reload the application. If issue still persist, kindly contact support team.",""):a.errorhandler("previewAlertBox","[WARNING] System security issue has been triggered. We apologize for your inconvenience. Kindly contact Mobilous MCS Team with the user-name and project-id for a quick resolution of the issue.",
"\u30b7\u30b9\u30c6\u30e0\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u306b\u306f\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u756a\u53f7\u3068\u3068\u3082\u306b\u3001\u30e2\u30d3\u30e9\u30b9\u306eMCS\u62c5\u5f53\u306b\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\u3002\u3054\u4e0d\u4fbf\u3092\u304a\u304b\u3051\u3057\u3066\u7533\u3057\u8a33\u3054\u3056\u3044\u307e\u305b\u3093\u3002"),
console.log("[ERROR] Failed to get AK and SK from Server.");z.initServer(!0)},appendDeviceInfo:function(){var b=[];if("8080"==z.getServerPort())a.cookie(a.mobileweb.pid+"_ak")?a.merge(b,["&ak=",a.cookie(a.mobileweb.pid+"_ak")]):z.data.ak&&a.merge(b,["&ak=",z.data.ak]),a.cookie(a.mobileweb.pid+"_sk")?a.merge(b,["&sk=",a.cookie(a.mobileweb.pid+"_sk")]):z.data.sk&&a.merge(b,["&sk=",z.data.sk]);else{var c=sessionStorage.getItem(a.mobileweb.pid+"_ak");c?a.merge(b,["&ak=",c]):z.data.ak&&a.merge(b,["&ak=",
z.data.ak]);document.cookie=a.mobileweb.pid+"_ak;  expires=Thu, 01 Jan 1970 00:00:01 GMT; samesite=strict; secure";document.cookie=a.mobileweb.pid+"_ak;  expires=Thu, 01 Jan 1970 00:00:01 GMT; secure";document.cookie=a.mobileweb.pid+"_ak;  expires=Thu, 01 Jan 1970 00:00:01 GMT;"}return b.join("")},createIndexedDBTable:function(a,b){b=indexedDB.open("IndexedDB",b);b.onsuccess=function(a){Z=a.target.result};b.onupgradeneeded=function(b){b=b.target.result;b.objectStoreNames.contains(a)||b.createObjectStore(a,
{keyPath:"id",autoIncrement:!0})};b.onerror=function(a){}},addDataToIndexedDBTable:function(a,b){var c=setInterval(function(){void 0!=Z&&(clearInterval(c),Z.transaction([a],"readwrite").objectStore(a).add(b))},300)},getDataFromIndexedDBTable:function(b,c){var d=[],f=setInterval(function(){if(void 0!=Z){clearInterval(f);var g=Z.transaction([b],"readwrite").objectStore(b).getAll();g.onsuccess=function(){d=g.result;a.utility("setIndexedDBFlag",!0);a.utility("setIndexedDBResult",d[0][c])}}},300)},clearDataFromIndexedDBTable:function(b){if(a.utility("getIndexedDBFlag"))var c=
setInterval(function(){void 0!=Z&&(clearInterval(c),Z.transaction([b],"readwrite").objectStore(b).clear().onsuccess=function(a){console.log(b," deleted.")})},100)},createDatabase:function(a,b){return openDatabase(a,"1.0","Appexe DB",1048576*b)},dropTable:function(a,b){a.transaction(function(a){a.executeSql("DROP TABLE "+b)})},createTable:function(b,c,d){var f=[],g=[];a.each(c.fields,function(a,b){a=[b.name,b.type];b.pk&&g.push(b.name);"INTEGER"===b.type&&b.autoinc&&a.push("PRIMARY KEY AUTOINCREMENT");
b.pk&&a.push("NOT NULL");b.defaultValue&&a.push("DEFAULT '"+b.defaultValue+"'");f.push(a.join(" "))});var h="";1<g.length?h=["CREATE TABLE IF NOT EXISTS ",c.tablename,"(",f.join(),", UNIQUE(",g.join(","),"))"].join(""):(f=[],a.each(c.fields,function(a,b){a=[b.name,b.type];b.pk&&a.push("PRIMARY KEY");"INTEGER"===b.type&&b.autoinc&&a.push("AUTOINCREMENT");b.pk&&a.push("NOT NULL");b.defaultValue&&a.push("DEFAULT '"+b.defaultValue+"'");f.push(a.join(" "))}),h=["CREATE TABLE IF NOT EXISTS ",c.tablename,
"(",f.join(),")"].join(""));b.transaction(function(a){a.executeSql(h,[],function(a,b){void 0!=d&&d()},function(a,b){console.log("Error >> CREATE Table "+c.tablename+". \nDetails: "+b.message);void 0!=d&&d()})})},createView:function(a,b){a.transaction(function(a){a.executeSql(b.script,[],function(a,b){console.log(b)},function(a,b){console.log(b)})})},createTrigger:function(b,c){b.transaction(function(a){a.executeSql("DROP TRIGGER IF EXISTS "+c.triggername,[],function(a){console.log("Trigger drop success")},
function(a){console.log("Trigger drop fail: >> "+a)})});a.utility("runTrigger",c.script)},isDatabaseExists:function(b,c){var d=0;a.each(a.mobileweb.localdb.schema,function(c,f){b.transaction(function(b){b.executeSql(["SELECT name FROM sqlite_master WHERE type='table' AND name='"+f.tablename+"';"].join(""),[],function(b,g){1>g.rows.length?(d++,a.utility("createTable",a.mobileweb.localdb.instance,f),a.utility("setLatestLocaldbSchema",f)):"spotdetail"==f.tablename&&(a.utility("dropTable",a.mobileweb.localdb.instance,
"spotdetail"),a.utility("createTable",a.mobileweb.localdb.instance,f),a.utility("setLatestLocaldbSchema",f));c==a.mobileweb.localdb.schema.length-1&&(d==a.mobileweb.localdb.schema.length?(a.each(a.mobileweb.localdbView.schema,function(b,c){a.utility("createView",a.mobileweb.localdb.instance,c)}),a.mobileweb.localdbTrigger&&a.each(a.mobileweb.localdbTrigger.schema,function(b,c){a.utility("createTrigger",a.mobileweb.localdb.instance,c)}),a.utility("requestData",!0)):a.utility("updateRequestedData",
!0))},function(a,b){console.log("Error in the Query..")})})})},insertIntoLocalDB:function(b,c){a.mobileweb.localdb.instance.transaction(function(d){for(var f=0;f<c.length;f++){var g=[],h=[],k=[],n;for(n in c[f])g.push(n),k.push(c[f][n]),h.push("?");d.executeSql(["INSERT INTO ",b," (",g.join(),") VALUES (",h.join(),")"].join(""),k,function(b,d){if(f==c.length-1)return a.utility("showLoadingIndicator",!1),!0;g=[];h=[];k=[]},function(d,g){a.utility("showLoadingIndicator",!1);return a.errorhandler("previewAlertBox",
"Error occured while inserting record("+c[f]+') in "'+b+'" ')})}})},handleLocalDBError:function(b,c){a.mobileweb.__ERR_CODE__=b;b=c.substring(c.indexOf("(")+1,c.indexOf(")"));b=b.replace(parseInt(b),"");a.mobileweb.__ERR_MSG__=b},runTrigger:function(b){try{a.mobileweb.localdb.instance.transaction(function(a){a.executeSql(b)},function(a){console.log(b);console.log("Trigger success: >> "+a)},function(a){console.log("runTrigger error: >> "+a)})}catch(M){console.log(M)}},showLoadingIndicator:function(a){a?
z.showLoading||(z.showLoading=!0):z.showLoading=!1},checkAKdata:function(){if("8080"==z.getServerPort()){if(a.cookie(a.mobileweb.pid+"_ak"))return!0}else if(sessionStorage.getItem(a.mobileweb.pid+"_ak"))return!0;return!1},requestData:function(b){var c={state:a.mobileweb.state,title:a.mobileweb.title,version:a.mobileweb.version};a.mobileweb.localization&&(c.localization=a.mobileweb.localization);b&&(c.schema=[],a.each(a.mobileweb.localdb.schema,function(a,b){a={};for(var d in b)"fields"!==d&&(a[d]=
b[d]);c.schema.push(a)}));if(c.localization||c.schema)"8080"==z.getServerPort()?(b=[a.mobileweb.baseurl,"/mobileweb/mobile/",a.mobileweb.user,"/",a.mobileweb.pid,"/getserverdata?request=",JSON.stringify(c)].join(""),z.sendRequest(b)):z.getLocalDbData(c);a.mobileweb.serveracc&&!z.checkAKdata()?z.initCall():z.initServer(!0)},updateRequestedData:function(b){b={state:a.mobileweb.state,title:a.mobileweb.title,version:a.mobileweb.version,schema:a.utility("getLatestLocaldbSchema")};0!=b.schema.length?"8080"==
z.getServerPort()?(b=[a.mobileweb.baseurl,"/mobileweb/mobile/",a.mobileweb.user,"/",a.mobileweb.pid,"/getserverdata?request=",JSON.stringify(b)].join(""),z.sendRequest(b)):z.getLocalDbData(b):(z.showLoadingIndicator(!0),z.initData(!0));a.mobileweb.serveracc&&!z.checkAKdata()?z.initCall():z.initServer(!0)},getLocalDbData:function(b){a.each(b.schema,function(c,d){if(""!=d.filename){var f=a.mobileweb.baseurl+":8181/appexe/api/download/database/"+a.mobileweb.pid+"/"+d.filename;void 0!=a.mobileweb.release&&
a.mobileweb.release&&(f=a.mobileweb.baseurl+":8181/resources/database/"+d.filename);var g=[];a.ajax({type:"POST",url:f,crossDomain:!0,dataType:"text",success:function(a){a=a.split(/\r\n|\n/);for(var b=a[0].split(","),c=b.length,d=1;d<a.length-1;d++){for(var f={},h=a[d].split(","),k=0;k<c;k++)f[b[k]]=h[k];g.push(f)}},error:function(a){console.log(a)}});setTimeout(function(){b.schema[c].value=g;b.schema[c].status=!0},500)}});setTimeout(function(){b.status=!0;a.utility("processServerData",b)},1E3)},
processServerData:function(b){a.each(b.schema,function(b,c){c.status&&a.utility("insertIntoLocalDB",c.tablename,c.value)});b.localization&&b.localization.status&&a.each(a.mobileweb.pages,function(c,d){a.each(d.children,function(a,c){a=b.localization.value;switch(c.viewtype){case "Label":a[c.name]&&(c.value=a[c.name]);break;case "RoundButton":a[c.name]&&(c.value=a[c.name])}})});b.trigger&&a.each(b.trigger,function(b,c){a.utility("runTrigger",c.script)});z.initData(!0)},sendRequest:function(a){z.showLoadingIndicator(!0);
var b=document.createElement("script");b.setAttribute("src",a);document.getElementsByTagName("head")[0].appendChild(b)},getCommServerDomainForExternalService:function(){return"8080"==z.getServerPort()?[a.mobileweb.baseurl,":8080/commapi/extsvc/authenticate"].join(""):[a.mobileweb.baseurl,"/commapi/extsvc/authenticate"].join("")},sendJSONRequest:function(b,c,d){z.log("[LINK] "+b);z.showLoadingIndicator(!0);b="8080"==z.getServerPort()?a.mobileweb.baseurl+":8080/mobileweb/mobile/extsvc?uri="+b:b;a.getJSON(b,
function(b){"ACK"==(b.authURL?JSON.parse(b.authURL):b).ret&&(new a.actions(d,null,[{method:"Select",category:"ComAction",callingMethod:"externalService",params:{servicename:c.params.servicename,table:c.params.table,where:-1!=a.utility("tokenizeString",c.params.where,d).indexOf("null")?"":a.utility("tokenizeString",c.params.where),order:a.utility("tokenizeString",c.params.order,d),fields:""},events:c.events}])).execute()})},getCommServerDomain:function(){return"8080"==z.getServerPort()?[a.mobileweb.baseurl,
"/commapi/comaction/"].join(""):[a.mobileweb.baseurl,":8181/commapi/comaction/"].join("")},sendPOSTRequest:function(b,c){"8080"==z.getServerPort()?(z.log("[LINK] "+b),z.showLoadingIndicator(!0),a.ajax({url:a.utility("getCommServerDomain")+"llcommpost",type:"POST",data:b,contentType:"application/x-www-form-urlencoded",cache:!1,success:function(a){console.log("---- Success : POST request for ComAction : "+c+" ----")},error:function(a){console.log("---- Error : POST request for ComAction : "+c+" ----")}})):
a.utility("processRequestData",b,c)},processRequestData:function(b,c){var d={};b.split("&").forEach(function(a){a&&(0==a.indexOf("dataset")?d.dataset=decodeURIComponent(a.replace("dataset=","")):0==a.indexOf("callbackdata")?d.callbackdata=decodeURIComponent(a.replace("callbackdata=","")):(a=a.split("="),d[a[0]]=decodeURIComponent(a[1])))});window.crypto&&crypto.subtle&&window.TextEncoder?a.utility("processRequestEncryption",d,c):a.utility("encryptPOSTRequest",d,c)},encryptPOSTRequest:function(b,c){var d=
a.utility("getCommServerDomain")+"llcommpost";a.ajax({url:d,type:"POST",data:b,contentType:"application/x-www-form-urlencoded",cache:!1,crossDomain:!0,dataType:"text",async:!0,success:function(b){console.log("---- Success : POST request for ComAction : "+c+" ----");a.utility("processResponseData",b,c)},error:function(b,d,f){console.log("---- Error : POST request for ComAction : "+c+" ----");"remotesyncdb"==c&&(a.utility("setComActionStatus","SynchError"),a.utility("queryDatabase",!1))},beforeSend:function(a,
b){z.showLoadingIndicator(!0)},complete:function(a,b){z.showLoadingIndicator(!1)}})},processResponseData:function(b,c){if("object"!=typeof b&&"string"==typeof b){var d=b.substring(0,b.indexOf("{")-1).replace("$.utility(","").replace("'","").replace("'","");b=b.substring(b.indexOf("{"),b.lastIndexOf("}")+1);b=JSON.parse(b);d&&""!=d&&a.utility(d,b);"remotesyncdb"==c&&("ACK"==b.ret?a.utility("setComActionStatus","SynchSuccess"):a.utility("setComActionStatus","SynchError"),a.utility("queryDatabase",!1))}},
processRequestEncryption:function(b,c){var d=b.project_id+b.llcommand+b.command+b.ak+b.os+b.version;a.utility("getEncryptDigest",d).then(function(f){var g=window.crypto.getRandomValues(new Uint8Array(16)),h=btoa((new Uint8Array(g)).reduce(function(a,b){return a+String.fromCharCode(b)},"")),k=window.crypto.getRandomValues(new Uint8Array(16)),n=btoa((new Uint8Array(k)).reduce(function(a,b){return a+String.fromCharCode(b)},""));a.utility("processEncryption",b.dataset,d,g,k).then(function(l){l&&(l=btoa((new Uint8Array(l)).reduce(function(a,
b){return a+String.fromCharCode(b)},"")),b.dataset=h+f+"mw:"+n+f+"mw:"+l,a.utility("processEncryption",b.callbackdata,d,g,k).then(function(d){d&&(d=btoa((new Uint8Array(d)).reduce(function(a,b){return a+String.fromCharCode(b)},"")),b.callbackdata=n+"cb:"+h+"cb:"+d);a.utility("encryptPOSTRequest",b,c)}))})})},getEncryptDigest:function(a){a=(new TextEncoder("utf-8")).encode(a);return crypto.subtle.digest("SHA-256",a).then(function(a){var b=[];a=new DataView(a);for(var c=0;c<a.byteLength;c+=4){var d=
("00000000"+a.getUint32(c).toString(16)).slice(-8);b.push(d)}return b.join("")})},processEncryption:function(a,b,c,d){b=(new TextEncoder("utf-8")).encode(b);var f=(new TextEncoder("utf-8")).encode(a),g={name:"PBKDF2",salt:c,iterations:1024,hash:"SHA-256"},h={name:"AES-CBC",length:256},k=["encrypt","decrypt"],n={name:"AES-CBC",length:256,iv:d};return window.crypto.subtle.importKey("raw",b,{name:"PBKDF2"},!1,["deriveKey"]).then(function(a){return window.crypto.subtle.deriveKey(g,a,h,!1,k)}).then(function(a){return window.crypto.subtle.encrypt(n,
a,f)}).then(function(a){return a}).catch(function(a){console.log("Encryption Error: "+a.message)})},fileSrctoBlob:function(a){var b=atob(a.split(",")[1]);a=a.split(",")[0].split(":")[1].split(";")[0];for(var c=new ArrayBuffer(b.length),d=new DataView(c),f=0;f<b.length;f++)d.setUint8(f,b.charCodeAt(f));return new Blob([c],{type:a})},processTextFileData:function(b){a("#"+b.targetId)[0].value=b.textData;z.showLoadingIndicator(!1)},extractDataFromRecord:function(a,b,c){void 0!=a&&a.constructor===Array&&
0<a.length&&void 0!=a[0]&&a[0].constructor===Array&&0<a[0].length&&(a=a[0]);if(void 0!=b){var d=b.split("["),f;for(f in d)if(-1!==d[f].toString().indexOf("]")){var g=d[f].substring(0,d[f].indexOf("]"));if(a)if(void 0!=a[g]){if(""==a[g]||a[g])b=b.replace("["+g+"]",a[g]);null===a[g]&&(b=b.replace("["+g+"]",""))}else void 0!=c&&c||(b=b.replace("["+g+"]",""))}}return"null"===b?"":b},setMultipleAlertArray:function(a){b.push(a)},delMultipleAlertArray:function(){b=jQuery.grep(b,function(a,b){return 0!=b})},
getMultipleAlertArray:function(){return b},saveDataToRecord:function(a,b,c){for(var d=b.split("["),f=0;f<d.length;f++)if(-1!==d[f].indexOf("]")){var g=d[f].substring(0,d[f].indexOf("]"));a&&void 0!=a[g]&&(a[g]=c)}return b},getImage:function(b){return""===b?b:("preview"===a.mobileweb.state?[a.mobileweb.baseurl,"/appexe/api/download/image/",a.mobileweb.pid,"/",b]:["resources/image/",b]).join("")},getRemoteImage:function(b){return""===b?b:[a.mobileweb.baseurl,"/images/",b].join("")},checkURL:function(a){return/^(http|https):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9-]+.)*[a-zA-Z0-9-]+.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\+&amp;%$#=~_-]+))*$/.test(a)?
"success":"error"},getSystemImage:function(b,c){return""===b?b:"Image"===c||"ToggleButton"===c||"CheckBox"===c||"ImageButton"===c||"Indicator"===c||"NavigationBar"===c||"SystemButton"===c||"GoogleMap"===c||"Row"===c||"Camera"===c?("preview"===a.mobileweb.state?["/mobileweb/resources/images/system/",b]:["images/system/",b]).join(""):("preview"===a.mobileweb.state?[a.mobileweb.baseurl,"/mobileweb/",a.mobileweb.user,"/images/system/",b]:["images/system/toolbar-items/default/",b]).join("")},getSystemImageToolBarItem:function(b,
c){if("blackopaque"==b||"blacktranslucent"==b)b="black";""==b&&(b="custom");return("preview"===a.mobileweb.state?["/mobileweb/resources/images/system/toolbar-items/",b,"/",c]:["images/system/toolbar-items/",b,"/",c]).join("")},getNavTheme:function(a,b){var c="";""!=b&&(c="-prompt");""==a&&(a="custom");return z.getSystemImage("navbar-"+a+c+".png","NavigationBar")},getVideo:function(b){return""===b?b:b.search("http")||"-1"==b.search("https")?("preview"===a.mobileweb.state?[a.mobileweb.baseurl,":8181/appexe/api/download/video/",
a.mobileweb.pid,"/",b]:["resources/video/",b]).join(""):b},getSound:function(b){return""===b?b:b.search("http")||"-1"==b.search("https")?("preview"===a.mobileweb.state?[a.mobileweb.baseurl,"/appexe/api/download/bgm/",a.mobileweb.pid,"/",b]:["resources/bgm/",b]).join(""):b},getSoundEffect:function(b,c){if(""===b)return b;if(-1!=b.indexOf("[")&&-1!=b.indexOf("]")){var d=b.indexOf("["),f=b.indexOf("]");d=b.substring(d,f)+"]";c=a.utility("tokenizeString",d,c);c=a.utility("convertSpecialCharacter",a.utility("tokenizeString",
c));b=b.replace(d,c)}return"-1"==b.search("http")||"-1"==b.search("https")?("preview"===a.mobileweb.state?[a.mobileweb.baseurl,"/appexe/api/download/soundeffect/",a.mobileweb.pid,"/",b]:["resources/soundeffect/",b]).join(""):b},getColumns:function(b,c,d,f){"[object Array]"===Object.prototype.toString.call(d)?a.each(d,function(d,g){"DBTableViewList"===g.viewtype||"RemoteTableViewList"===g.viewtype?(c.push(ba(b,"DBTableViewList"===g.viewtype?a.mobileweb.localdb.schema:a.mobileweb.comdb.schema)),z.getColumns("",
c,g.group[0].template,f)):"DBTableView"===g.viewtype||"RemoteTableView"===g.viewtype?(c.push(ba(b,"DBTableView"===g.viewtype?a.mobileweb.localdb.schema:a.mobileweb.comdb.schema)),a.each(g.group,function(b,d){a.each(d.row,function(a,b){"custom"===g.style?z.getColumns("",c,b.children,f):z.getColumns("",c,b.template,f)})})):void 0!==g.template&&""!==g.template&&aa(c,g.template,f)}):(d.maintext&&""!==d.maintext&&aa(c,d.maintext,f),d.subtext&&""!==d.subtext&&aa(c,d.subtext,f),d.image&&""!==d.image&&aa(c,
d.image,f),d.children&&0<=d.children.length&&z.getColumns("",c,d.children,f));return 0<=c.length?c:!1},formWhereCondition:function(b,c){return a.utility("tokenizeString",b,c)},tokenizeString:function(b,c,d){b=a.utility("checkGlobalVariable",b);if(void 0!=b){b=b.toString();if(-1!=b.indexOf("@@")||-1!=b.indexOf(/@@/gi))b=a.utility("tokenizeFunction",b,c);if(void 0!=b)for(var f=b.toString().split("["),g=0;g<f.length;g++)if(-1!=f[g].toString().indexOf("]")){var h=f[g].toString().indexOf("]"),k="["+f[g].substring(0,
h)+"]";h=void 0!=d&&"Gadget"==d.actionParentUI?a.utility("CheckAndGetUIElementValue",a("[name='"+d.actionParentUIName+"']").find("[name='"+f[g].substring(0,h)+"']"),f[g].substring(0,h),c):a.utility("CheckAndGetUIElementValue",a("[name='"+f[g].substring(0,h)+"']"),f[g].substring(0,h),c);b=b.replace(k,h)}}else b="";return b},tokenizeFunction:function(b,c){if(-1!=b.indexOf("REGEXP_LIKE")){var d=b.replace("@@REGEXP_LIKE(","");d=d.split(",")[0].replace("[","").replace("]","").replace("'","").replace("'",
"");c=a.utility("CheckAndGetUIElementValue",a("[name='"+d+"']"),d,c);b=b.replace("@@","");b=eval("$."+b.replace("["+d+"]",c))}else if(-1!=b.indexOf("HASH"))d=b.replace("@@HASH(",""),d=d.split(",")[0].replace("[","").replace("]","").replace("'","").replace("'",""),c=a.utility("CheckAndGetUIElementValue",a("[name='"+d+"']"),d,c),b=b.replace("["+d+"]",c);else if(-1!=b.indexOf("('")&&-1!=b.indexOf("','")&&-1!=b.indexOf("')")){c=a.utility("tokenizeString",b.substring(b.indexOf("('")+1,b.lastIndexOf("')")+
1),c,"tokenizeFunction");b=b.replace(b.substring(b.indexOf("('")+1,b.lastIndexOf("')")+1),c);b=b.replace(/\r?\n|\r/g,"nl9");try{d=-1==b.indexOf(" (")?eval("$."+b.substring(2,b.length)):""}catch(ea){}"string"===typeof d&&(d=d.replace(/nl9/g,"'nl9'"));b=d}else if(-1!=b.indexOf("('")&&-1!=b.indexOf("')")&&b.indexOf("('")<b.indexOf("')")){var f=[];if(-1!=b.indexOf("@@")||-1!=b.indexOf(/@@/gi))f=b.toString().trim().split("@@");if(1<f.length)for(d="",b=0;b<f.length;b++){var g=f[b].toString();if(0<g.length){if(-1!=
g.indexOf("('")){var h=a.utility("tokenizeString",g.substring(g.indexOf("('")+1,g.lastIndexOf("')")+1),c,"tokenizeFunction");g=g.replace(g.substring(g.indexOf("('")+1,g.lastIndexOf("')")+1),h);g=g.replace(/\r?\n|\r/g," ");g=g.lastIndexOf("')")==g.length-2?eval("$."+g.substring(0,g.length)):eval("$."+g.substring(0,g.lastIndexOf("')")+2))+g.substring(g.lastIndexOf("')")+2,g.length)}d=d.concat(g)}}else c=a.utility("tokenizeString",b.substring(b.indexOf("('")+1,b.lastIndexOf("')")+1),c,"tokenizeFunction"),
b=b.replace(b.substring(b.indexOf("('")+1,b.lastIndexOf("')")+1),c),d=eval("$."+b.substring(2,b.length));return d}if(void 0!=b)return b.toString()},sanitizeInputValue:function(b){if("string"==typeof b){if(-1<b.toLowerCase().indexOf("<html>")){var c=b.substring(b.indexOf("<html>"),b.indexOf("</html>"));b=b.replace(c,"").replace("<html>","").replace("</html>","")}-1<b.toLowerCase().indexOf("<script>")&&(c=b.substring(b.indexOf("<script>"),b.indexOf("\x3c/script>")),b=b.replace(c,"").replace("<script>",
"").replace("\x3c/script>",""));if(-1<b.indexOf("<")||-1<b.indexOf(">"))a.errorhandler("previewAlertBox","[WARNING] HTML tags are not supported for input values.",""),b=""}return b},getWhereCondition:function(a,b,c){a=ba(a,b);if(a.constructor!=Array&&""!=a)for(var d in c){if(d===a)return a+(" = '"+c[d]+"'")}else for(var f in a)for(d in c)if(d===a[f])return a[f]+=" = '"+c[d]+"' ";return a},getPK:function(a,b){return ba(a,b)},savePageData:function(b,c,d){void 0===c&&(c={});void 0!=d&&"PageScrollView"==
d.parentType&&void 0!=d.pagedef&&(void 0!=d.pagedef.toolbartop&&a.each(d.pagedef.toolbartop.children,function(a,b){"SwitchBar"===b.viewtype?c[b.name]=b.switchValue:"ToggleButton"===b.viewtype?c[b.name]=b.togglevalue:"CheckBox"===b.viewtype?c[b.name]=b.valueFormat:"SoundBox"===b.viewtype||"VideoBox"===b.viewtype||"WebView"===b.viewtype?c[b.name]=b.src:"LinkLabel"===b.viewtype?c[b.name]=b.link:("Radio"===b.viewtype&&(c[b.groupName]=b.groupNameData),c[b.name]=b.value)}),void 0!=d.pagedef.toolbarbottom&&
a.each(d.pagedef.toolbarbottom.children,function(a,b){"SwitchBar"===b.viewtype?c[b.name]=b.switchValue:"ToggleButton"===b.viewtype?c[b.name]=b.togglevalue:"SoundBox"===b.viewtype||"VideoBox"===b.viewtype||"WebView"===b.viewtype?c[b.name]=b.src:"LinkLabel"===b.viewtype?c[b.name]=b.link:"Radio"===b.viewtype?(c[b.groupName]=b.groupNameData,c[b.name]=b.value):c[b.name]="CheckBox"===b.viewtype?b.valueFormat:b.value}),void 0!=d.pagedef.toolbarleft&&a.each(d.pagedef.toolbarleft.children,function(a,b){"SwitchBar"===
b.viewtype?c[b.name]=b.switchValue:"ToggleButton"===b.viewtype?c[b.name]=b.togglevalue:"SoundBox"===b.viewtype||"VideoBox"===b.viewtype||"WebView"===b.viewtype?c[b.name]=b.src:"LinkLabel"===b.viewtype?c[b.name]=b.link:"Radio"===b.viewtype?(c[b.groupName]=b.groupNameData,c[b.name]=b.value):c[b.name]="CheckBox"===b.viewtype?b.valueFormat:b.value}));a.each(b,function(a,b){"SwitchBar"===b.viewtype?c[b.name]=b.switchValue:"ToggleButton"===b.viewtype?c[b.name]=b.togglevalue:"CheckBox"===b.viewtype?c[b.name]=
b.valueFormat:"SoundBox"===b.viewtype||"VideoBox"===b.viewtype||"WebView"===b.viewtype?c[b.name]=b.src:"LinkLabel"===b.viewtype?c[b.name]=b.link:("Radio"===b.viewtype&&(c[b.groupName]=b.groupNameData),c[b.name]=b.value)});void 0!=d&&(void 0!=d.toolbartop&&a.each(d.toolbartop.children,function(a,b){"SwitchBar"===b.viewtype?c[b.name]=b.switchValue:"ToggleButton"===b.viewtype?c[b.name]=b.togglevalue:"CheckBox"===b.viewtype?c[b.name]=b.valueFormat:"SoundBox"===b.viewtype||"VideoBox"===b.viewtype||"WebView"===
b.viewtype?c[b.name]=b.src:"LinkLabel"===b.viewtype?c[b.name]=b.link:("Radio"===b.viewtype&&(c[b.groupName]=b.groupNameData),c[b.name]=b.value)}),void 0!=d.toolbarbottom&&a.each(d.toolbarbottom.children,function(a,b){"SwitchBar"===b.viewtype?c[b.name]=b.switchValue:"ToggleButton"===b.viewtype?c[b.name]=b.togglevalue:"SoundBox"===b.viewtype||"VideoBox"===b.viewtype||"WebView"===b.viewtype?c[b.name]=b.src:"LinkLabel"===b.viewtype?c[b.name]=b.link:"Radio"===b.viewtype?(c[b.groupName]=b.groupNameData,
c[b.name]=b.value):c[b.name]="CheckBox"===b.viewtype?b.valueFormat:b.value}),void 0!=d.toolbarleft&&a.each(d.toolbarleft.children,function(a,b){"SwitchBar"===b.viewtype?c[b.name]=b.switchValue:"ToggleButton"===b.viewtype?c[b.name]=b.togglevalue:"SoundBox"===b.viewtype||"VideoBox"===b.viewtype||"WebView"===b.viewtype?c[b.name]=b.src:"LinkLabel"===b.viewtype?c[b.name]=b.link:"Radio"===b.viewtype?(c[b.groupName]=b.groupNameData,c[b.name]=b.value):c[b.name]="CheckBox"===b.viewtype?b.valueFormat:b.value}));
return c},updateChildrenData:function(b,c,d){a.each(b.children,function(a,f){f.name===c&&(b.children[a].value=d)});void 0!=b&&(void 0!=b.toolbartop&&a.each(b.toolbartop.children,function(a,f){f.name===c&&(b.toolbartop.children[a].value=d)}),void 0!=b.toolbarbottom&&a.each(b.toolbarbottom.children,function(a,f){f.name===c&&(b.toolbarbottom.children[a].value=d)}),void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,f){f.name===c&&(b.toolbarleft.children[a].value=d)}))},updateChildProperty:function(b,
c,d,f){var g="";if(-1!=f.indexOf(".")){var h=f.split(".");f=h[0];g=h[1]}a.each(b.children,function(a,h){h.name===c&&void 0!=b.children[a][f]&&(b.children[a][f][g]=d)});void 0!=b&&(void 0!=b.toolbartop&&a.each(b.toolbartop.children,function(a,h){h.name===c&&void 0!=b.toolbartop.children[a][f]&&(b.toolbartop.children[a][f][g]=d)}),void 0!=b.toolbarbottom&&a.each(b.toolbarbottom.children,function(a,h){h.name===c&&void 0!=b.toolbarbottom.children[a][f]&&(b.toolbarbottom.children[a][f][g]=d)}),void 0!=
b.toolbarleft&&a.each(b.toolbarleft.children,function(a,h){h.name===c&&void 0!=b.toolbarleft.children[a][f]&&(b.toolbarleft.children[a][f][g]=d)}))},updatePageData:function(b,c){if(void 0!=b.data.contents&&0!=b.data.contents.length)if("DBTableViewList"===b.type||"RemoteTableViewList"==b.type){if(void 0!=b.data.contents.currentRow){var d=parseInt(b.data.contents.currentRow);a.each(c,function(a,c){b.data.contents[d][a]=c})}}else a.each(b.data.contents,function(d,f){void 0!=f&&a.each(f,function(f,g){a.each(c,
function(a,c){b.data.contents[d][a]=c})})});else b.data.contents[0]={},a.each(c,function(a,c){b.data.contents[0][a]=c});-1!=b.type.indexOf("TableView")&&void 0!=b.data.pagedata&&a.each(c,function(a,c){b.data.pagedata[a]=c})},registerPNClientId:function(b){"ACK"===b.ret?(console.log("initPNS Successful"),a.utility("registerPNClient",!0)):console.log("initPNS ERROR");z.initServer(!0)},setDBRecords:function(a){m=a},getDBRecords:function(){return m},UploadDBRecords:function(b,c){if("NACK"!=b.ret&&"AK_ERROR"!==
b.retdic.code)if(a.utility("setDBRecords",b.retdic.rows),0==b.retdic.recsize)a.utility("setComActionStatus","SynchError"),a.utility("queryDatabase",!1);else if(c=a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page),void 0!=b.callbackdata.ToService&&""!=b.callbackdata.ToService){var d={};a.each(a.mobileweb.localdb.schema,function(c,f){f.tablename===b.callbackdata.table&&a.each(f.fields,function(a,b){d[""+b.name]="INTEGER"===b.type||"REAL"===b.type?"int":"DATETIME"===b.type?"date":b.type.toLowerCase()})});
var f={tablename:b.callbackdata.ToTable,database:void 0!=a.mobileweb.release&&a.mobileweb.release?"db_"+a.mobileweb.pid+"_release":"db_"+a.mobileweb.pid,servicename:b.callbackdata.ToService,primarykeys:a.utility("getPK",b.callbackdata.table,a.mobileweb.localdb.schema),dbschema:d,records:JSON.parse(JSON.stringify(b.retdic.rows).replace(/:null,/gi,':"",').replace(/:null}/gi,':""}')),forceflag:b.callbackdata.forceFlag,forceUpdate:b.callbackdata.forceUpdate};a.utility("initCall");var g=setInterval(function(){if(""!=
a.utility("appendDeviceInfo")||null!=a.utility("appendDeviceInfo")){clearInterval(g);requestUrl=a.utility("getCommServerDomain")+"syncDB?llcommand=sndmsg"+a.utility("appendDeviceInfo")+"&command=remotesyncdb&project_id="+a.mobileweb.pid+"&version="+a.mobileweb.version+"&os=mw";var b=requestUrl.substring(requestUrl.indexOf("?")+1);if(void 0!=b){var c=JSON.stringify(f);c=c.replace(/[%]/g,"%25").replace(/[&]/g,"%26").replace(/[#]/g,"%23");c=c.replace(/[+]/g,"%2B").replace(/[-]/g,"%2D").replace(/[;]/g,
"%3B");b=b+"&dataset="+c;"8080"==z.getServerPort()?(z.showLoadingIndicator(!0),a.ajax({url:a.utility("getCommServerDomain")+"llcommpost",type:"POST",contentType:"application/x-www-form-urlencoded",data:b,dataType:"json",success:function(b){console.log("---- Success : POST request for Local to Remote Sync ----");"ACK"==b.ret?a.utility("setComActionStatus","SynchSuccess"):a.utility("setComActionStatus","SynchError");a.utility("queryDatabase",!1)},error:function(b){console.log("---- Error : POST request for Local to Remote Sync ----");
a.utility("setComActionStatus","SynchError");a.utility("queryDatabase",!1)}})):a.utility("sendPOSTRequest",b,"remotesyncdb")}}})}else(new a.actions(c,null,[{method:"Select",category:"DBAction",fromTable:b.callbackdata.table,callAnotherServiceFlag:!0,callbackmethod:"SelectNewService",fromDB:b.callbackdata.fromDB,toDB:"localdb",forceFlag:b.callbackdata.forceFlag,forceUpdate:b.callbackdata.forceUpdate,events:b.callbackdata.events,params:{tablename:b.callbackdata.ToTable,where:"",order:"",fields:""}}])).execute();
else z.showLoadingIndicator(!1),a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page),"HLCOMM_ERROR"!=b.retdic.code&&(a.mobileweb.__ERR_CODE__=b.retdic.code,a.mobileweb.__ERR_MSG__=void 0==b.retdic.msg?b.retdic.error_message:b.retdic.msg),a.utility("setComActionStatus","SynchError"),a.utility("queryDatabase",!1)},SelectNewService:function(b,c){var d=[],f=[];if(void 0!=c&&"LocalDB"===c.service){var g=a.utility("getObject",a.mobileweb.pages,"name",c.page);var h="localdb"==c.toDB?a.utility("getPK",
c.table,a.mobileweb.localdb.schema):a.utility("getPK",c.table,a.mobileweb.comdb.schema);h.sort();var k="localdb"==c.fromDB?a.utility("getPK",c.fromTable,a.mobileweb.localdb.schema):a.utility("getPK",c.fromTable,a.mobileweb.comdb.schema);k.sort();var l=[],n=0;0==m.length?a.utility("setComActionStatus","SynchSuccess"):a.mobileweb.localdb.instance.transaction(function(d){a.each(m,function(f,g){delete g.row_index;if(0==b.retdic.rows.length){var l=[],n=[],p=[];a.each(g,function(a,b){l.push(a);n.push(b);
p.push("?")});d.executeSql(["INSERT INTO ",c.table," (",l.join(),") VALUES (",p.join(),")"].join(""),n,function(b,c){m.length-1==f&&a.utility("setComActionStatus","SynchSuccess")},function(b,c){a.utility("setComActionStatus","SynchError")})}else{0==k.length&&(k=h);var q=!0;a.each(b.retdic.rows,function(d,f){q=!0;for(var l=0;l<h.length;l++)q=g[k[l]]==f[h[l]]&&q?!0:!1;q||0!=k.length||(f=z.getObject(a.mobileweb.comdb.schema,"tablename",c.fromTable),void 0!=f&&void 0!=f.view&&(q=f.view));if(q)return b.retdic.rows.splice(d,
1),!1});if(q)if("true"==c.forceFlag||"true"==c.forceUpdate){var r="",t=h.length,M=[];a.each(g,function(a,b){M.push([a+" = '"+b+"'"])});for(var u=0;u<h.length;u++)r=u!=t-1?r+h[u].toString()+"='"+g[h[u].toString()]+"' AND ":r+h[u].toString()+"='"+g[h[u].toString()]+"'";d.executeSql(["UPDATE ",c.table," SET ",M.join()," WHERE ",r].join(""),[],function(b,c){m.length-1==f&&a.utility("setComActionStatus","SynchSuccess")},function(b,c){a.utility("setComActionStatus","SynchError")})}else m.length-1==f&&a.utility("setComActionStatus",
"SynchSuccess");else l=[],n=[],p=[],a.each(g,function(a,b){l.push(a);n.push(b);p.push("?")}),d.executeSql(["INSERT INTO ",c.table," (",l.join(),") VALUES (",p.join(),")"].join(""),n,function(b,c){m.length-1==f&&a.utility("setComActionStatus","SynchSuccess")},function(b,c){a.utility("setComActionStatus","SynchError")})}})})}else if("NACK"!=b.ret&&"AK_ERROR"!==b.retdic.code){g=a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page);h=a.utility("getPK",b.callbackdata.table,a.mobileweb[b.callbackdata.toDB].schema);
k=a.utility("getPK",b.callbackdata.fromTable,a.mobileweb[b.callbackdata.fromDB].schema);l=[];n=0;a.each(m,function(c,f){delete f.row_index;n!=b.retdic.rows.length&&a.each(b.retdic.rows,function(a,b){a=!0;for(var g=0;g<h.length;g++)for(var m=0;m<k.length;m++)k[m]===h[g]&&(a=f[k[m]]==b[h[g]]&&a?!0:!1);a&&(d[d.length]=f,l[n]=c,n++)})});for(var p=l.length-1;0<=p;p--)m.splice(l[p],1);f=m;if("comdb"===b.callbackdata.toDB){var q=!1;a.each(d,function(k,l){if("true"===b.callbackdata.forceFlag||"true"===c.forceUpdate){var n=
"";for(var m=h.length,p=0;p<h.length;p++)if(void 0!=l[h[p]])n=p!=m-1?n+h[p]+"='"+l[h[p]]+"' AND ":n+h[p]+"='"+l[h[p]]+"'";else return q=!0,!1;n={method:"Update",category:"ComAction",flag:!0,params:{rec:{},servicename:"Mobilous",table:b.callbackdata.table,where:n}};n.params.rec=l;0==f.length&&d.length-1==k&&a.utility("setComActionStatus","SynchSuccess");(new a.actions(g,null,[n])).execute()}});q?a.utility("setComActionStatus","SynchError"):a.each(f,function(c,d){var h={method:"Insert",category:"ComAction",
flag:!0,params:{rec:{},servicename:"Mobilous",table:b.callbackdata.table}};h.params.rec=d;h.events={Success:[]};f.length-1==c&&a.utility("setComActionStatus","SynchSuccess");(new a.actions(g,null,[h])).execute()})}else"localdb"===b.callbackdata.toDB&&(a.each(d,function(k,l){if("true"===b.callbackdata.forceFlag||"true"===c.forceUpdate){var n="",m=h.length,p;for(p in h)n=p!=m-1?n+h[p]+"='"+l[h[p]]+"' AND ":n+h[p]+"='"+l[h[p]]+"'";n={method:"Update",category:"DBAction",flag:!0,params:{record:l,tablename:b.callbackdata.table,
where:n}};for(var q in l)n.params.record[q]=l[q];0==f.length&&d.length-1==k&&(n.events={Success:[]},n.events.Success=b.callbackdata.events.Success);(new a.actions(g,null,[n])).execute()}}),a.each(f,function(c,d){var h={method:"Insert",category:"DBAction",flag:!0,params:{record:{},tablename:b.callbackdata.table}};h.params.record=d;f.length-1==c&&(h.events={Success:[]},h.events.Success=b.callbackdata.events.Success);(new a.actions(g,null,[h])).execute()}));z.showLoadingIndicator(!1)}else a.mobileweb.__ERR_CODE__=
b.retdic.code,a.mobileweb.__ERR_MSG__=void 0==b.retdic.msg?b.retdic.error_message:b.retdic.msg;a.utility("queryDatabase",!1)},RemoteProcessContinue:function(b){if("NACK"==b.ret||1!=b.retdic.status)a.mobileweb.__ERR_CODE__=b.retdic.code,a.mobileweb.__ERR_MSG__=void 0==b.retdic.msg?b.retdic.error_message:b.retdic.msg},setRemoteNumResponseReceived:function(a){D=a},getRemoteNumResponseReceived:function(){return D},RemoteSelect:function(b){if("NACK"!=b.ret&&"AK_ERROR"!==b.retdic.code){var c={};if(void 0==
b.callbackdata.callback||"createDBListViewPageRows"!==b.callbackdata.callback&&"reloadDBListViewPageRows"!==b.callbackdata.callback)if(void 0!=b.callbackdata.callback&&"createRemoteViewPageRows"===b.callbackdata.callback)a.each(a.mobileweb.pages,function(d,f){f.name===b.callbackdata.parentPage&&a.each(f.children,function(a,d){d.name===b.callbackdata.page&&(c=d)})}),a.isEmptyObject(c)&&(c=a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page)),b.retdic.rows.transferBaseData={isRecordAlreadyAdded:!1},
c.data.contents[0]=b.retdic.rows,c.data.contents.rows=b.retdic.rows.length,c.data.updated=!0,a.utility("queryDatabase",!1),a.setRemoteViewPage(c.data.contents);else if(void 0!=b.callbackdata.callback&&"createRemoteTileList"===b.callbackdata.callback)a.isEmptyObject(c)&&(c=a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page)),b.retdic.rows.transferBaseData={isRecordAlreadyAdded:!1},c.data.contents[0]=a.extend({},c.data.contents[0],b.retdic.rows),c.data.contents[b.callbackdata.callbackUI]=
b.retdic.rows,c.data.contents.rows=b.retdic.rows.length,c.data.updated=!0,a.utility("queryDatabase",!1),a.utility("setComActionStatus","Success");else if("RemoteNumRecords"===b.callbackdata.callingMethod)void 0==b.retdic.rows&&(b.retdic.rows=[],void 0!=b.retdic.count&&(b.retdic.rows.length=b.retdic.count)),a.mobileweb.__NUMREC__=b.retdic.rows.length,0==a("body").find("#__NUMREC__").length&&a("body").append("<input id='__NUMREC__' type='text' hidden='true'>"+a.mobileweb.__NUMREC__+"</input>"),a("#__NUMREC__").val(a.mobileweb.__NUMREC__),
a.utility("queryDatabase",!1),a.utility("setRemoteNumStatus","Success"),a.utility("setComActionStatus","Success"),z.showLoadingIndicator(!1);else{c=a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page);if(void 0!=b.callbackdata.comboBox&&b.callbackdata.comboBox){var d=JSON.parse(JSON.stringify(b.callbackdata.callingMethod).replace(/"/g,"").replace(/'/g,'"'));E[d.uiobject.id]={};E[d.uiobject.id]={data:b.retdic.rows,loadingStatus:!0};a.utility("setComActionStatus","Success")}else if("RemoteTableViewList"===
c.type)if("changeCondition"===b.callbackdata.callingMethod&&(c.data.contents=[]),void 0!=b.callbackdata.callback&&"loadMoreRecords"===b.callbackdata.callback)c.data.contents=c.data.contents.concat(b.retdic.rows),c.data.contents.loaded=!0,c.data.contents.offset=b.callbackdata.offset,c.data.contents.allRecordsLoaded=25>b.retdic.recsize?!0:!1,c.data.contents.rows=b.retdic.recsize;else{d=!1;if(b.callbackdata.table!=c.data.tablename){if(void 0!=b.retdic){if("0"==b.retdic.recsize&&1>b.retdic.rows.length){a.utility("setComActionStatus",
"Error");a.utility("queryDatabase",!1);return}"1"==b.retdic.recsize&&(d=c.data.contents.currentRow,isNaN(d)||void 0!=c.data.contents&&void 0!=c.data.contents[d]&&(c.data.contents[d]=a.extend({},c.data.contents[d],b.retdic.rows[0])))}d=!0}if(!d)if(c.data.contents.rows=b.retdic.rows.length,a.isEmptyObject(c.data.contents))a.isEmptyObject(c.data.contents)&&(b.retdic.rows.transferBaseData={isRecordAlreadyAdded:!1},c.data.contents=b.retdic.rows,c.data.contents.offset=b.callbackdata.offset,c.data.contents.totalRecords=
b.retdic.recsize);else if(void 0==c.data.contents.transferBaseData){for(var f in b.retdic.rows){var g=0;void 0!=c.data.contents[0]&&a.each(c.data.contents[0],function(c,d){g=0;a.each(b.retdic.rows[f],function(a,b){if(a==c)return g++,!1});0==g&&(b.retdic.rows[f][c]=d)})}b.retdic.rows.transferBaseData={isRecordAlreadyAdded:!0};0!=b.retdic.rows.length?(c.data.contents=b.retdic.rows,a.utility("setRemoteDBRecords",b.retdic.rows)):c.datatransfer||(c.data.contents=[]);c.data.contents.totalRecords=b.retdic.recsize;
c.data.contents.offset=b.callbackdata.offset}else if(!c.data.contents.transferBaseData.isRecordAlreadyAdded){b.retdic.rows.transferBaseData={isRecordAlreadyAdded:!1};if(a.isEmptyObject(c.data.contents))c.data.contents=b.retdic.rows;else if(0==b.retdic.rows.length)c.data.contents=b.retdic.rows;else if(c.data.contents.length>b.retdic.rows.length)for(f in d=c.data.contents[0],c.data.contents=b.retdic.rows,c.data.contents)a.each(d,function(a,b){void 0===c.data.contents[f][a]&&(c.data.contents[f][a]=b)});
else for(f in b.retdic.rows)void 0!=c.data.contents[f]?a.each(b.retdic.rows[f],function(a,b){c.data.contents[f][a]=b}):(c.data.contents[f]={},jQuery.extend(c.data.contents[f],c.data.contents[0]),a.each(b.retdic.rows[f],function(a,b){c.data.contents[f][a]=b}));a.utility("setRemoteDBRecords",b.retdic.rows);c.data.contents.totalRecords=b.retdic.recsize;c.data.contents.offset=b.callbackdata.offset}else if(c.data.contents.transferBaseData.isRecordAlreadyAdded){b.retdic.rows.transferBaseData={isRecordAlreadyAdded:!1};
if(a.isEmptyObject(c.data.contents))c.data.contents=b.retdic.rows;else if(0==b.retdic.rows.length)c.data.contents=b.retdic.rows;else if(c.data.contents.length>b.retdic.rows.length)for(f in d=c.data.contents[0],c.data.contents=b.retdic.rows,c.data.contents)a.each(d,function(a,b){void 0===c.data.contents[f][a]&&(c.data.contents[f][a]=b)});else for(f in b.retdic.rows)void 0!=c.data.contents[f]?a.each(b.retdic.rows[f],function(a,b){c.data.contents[f][a]=b}):(c.data.contents[f]={},jQuery.extend(c.data.contents[f],
c.data.contents[0]),a.each(b.retdic.rows[f],function(a,b){c.data.contents[f][a]=b}));c.data.contents.totalRecords=b.retdic.recsize;c.data.contents.offset=b.callbackdata.offset;a.utility("setRemoteDBRecords",b.retdic.rows);a.utility("setComActionStatus","Success");z.showLoadingIndicator(!1)}"changeCondition"===b.callbackdata.callingMethod?(c.data.contents.pageCallback=b.callbackdata.callback,z.showLoadingIndicator(!1),a.utility("setComActionStatus","Success")):"reload"===b.callbackdata.callingMethod?
(c.data.contents.reload=!0,z.showLoadingIndicator(!1),a.utility("setComActionStatus","Success")):"direct"===b.callbackdata.callingMethod&&(z.showLoadingIndicator(!1),a.utility("setComActionStatus","Success"))}else"RemoteTableView"===c.type?(null!=b.retdic.rows&&(0==c.data.contents.length?c.data.contents[0]=b.retdic.rows[0]:(void 0!=c.reverse&&c.reverse&&jQuery.extend(b.retdic.rows[0],c.data.contents[0]),jQuery.extend(c.data.contents[0],b.retdic.rows[0])),c.reverse=void 0),a.utility("setComActionStatus",
"Success")):(a.utility("setRemoteDBRecords",b.retdic.rows),c.data.contents.rows=b.retdic.recsize,void 0==c.data.contents[0]&&(c.data.contents[0]={}),jQuery.extend(c.data.contents[0],b.retdic.rows[0]),a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page),z.showLoadingIndicator(!1),"ACK"===b.ret?"0"==b.retdic.recsize&&1>b.retdic.rows.length?a.utility("setComActionStatus","Error"):a.utility("setComActionStatus","Success"):a.utility("setComActionStatus","Error"),c.data.contents.offset=b.callbackdata.offset);
c.data.updated=!0;a.utility("queryDatabase",!1)}else a.each(a.mobileweb.pages,function(d,f){f.name===b.callbackdata.parentPage&&a.each(f.children,function(a,d){d.name===b.callbackdata.page&&(c=d)})}),a.isEmptyObject(c)&&(c=a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page)),b.retdic.rows.transferBaseData={isRecordAlreadyAdded:!1},c.data.contents[0]=b.retdic.rows,c.data.contents.rows=b.retdic.rows.length,c.data.updated=!0,a.utility("queryDatabase",!1),a.setRemoteDBListViewPage(c.data.contents,
c.name),"reloadDBListViewPageRows"===b.callbackdata.callback&&(c.data.contentsReloaded=!0)}else z.showLoadingIndicator(!1),"HLCOMM_ERROR"==b.retdic.code&&"preview"===a.mobileweb.state?(a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page),a.utility("setComActionStatus","Error"),a.errorhandler("alertBox",b.retdic.code+" : "+b.retdic.msg,""),a.utility("setComActionStatus","Error")):(a.mobileweb.__ERR_CODE__=b.retdic.code,a.mobileweb.__ERR_MSG__=void 0==b.retdic.msg?b.retdic.error_message:
b.retdic.msg),a.utility("setComActionStatus","Error"),a.utility("queryDatabase",!1)},RemoteSelectActionCallback:function(b){"NACK"!=b.ret&&"AK_ERROR"!==b.retdic.code?(a.utility("setRemoteDBRecords",b.retdic.rows),a.utility("setComActionStatus","Success")):a.utility("setComActionStatus","Error");a.utility("queryDatabase",!1);z.showLoadingIndicator(!1)},PageNumRecords:function(b){"NACK"!==b.ret&&"AK_ERROR"!==b.retdic.code&&(void 0==b.retdic.rows&&(b.retdic.rows=[],void 0!=b.retdic.count&&(b.retdic.rows.length=
b.retdic.count)),O=b.retdic.rows.length,a.mobileweb.__PAGENUMREC__=O,a.utility("queryDatabase",!1),a.utility("setComActionStatus","Success"),z.showLoadingIndicator(!1),console.log(b))},BulkUpload:function(b){if("NACK"!==b.ret&&"AK_ERROR"!==b.retdic.code){if(void 0!=b.callbackdata){var c=a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page);"UploadRecordsToRemoteDB"===b.callbackdata.callingMethod&&(c.data||(c.data={contents:[]}),c.data.contents[0]=a.extend({},c.data.contents[0],b.retdic.rows[0]))}a.utility("setComActionStatus",
"Success")}else z.showLoadingIndicator(!1),"HLCOMM_ERROR"==b.retdic.code&&"preview"===a.mobileweb.state?a.errorhandler("alertBox",b.retdic.code+" : "+b.retdic.msg,""):(a.mobileweb.__ERR_CODE__=b.retdic.code,a.mobileweb.__ERR_MSG__=void 0==b.retdic.msg?b.retdic.error_message:b.retdic.msg),a.utility("setComActionStatus","Error");a.utility("queryDatabase",!1)},setSessionData:function(a,b){void 0===a.u_id&&(a.u_id="");b=b+"_"+a.page_name+"_"+a.u_id;sessionStorage.setItem(b,JSON.stringify(a))},getSessionData:function(b,
c){void 0===c&&(c="");b=b+"_"+a.mobileweb.getCurrentPage().getName()+"_"+c;return t=sessionStorage.getItem(b)},clearSessionData:function(){var a;for(a in sessionStorage)if(sessionStorage.hasOwnProperty(a)&&-1<a.indexOf("_ak")){var b=a;var c=sessionStorage.getItem(a)}sessionStorage.clear();b&&c&&sessionStorage.setItem(b,c)},showCustomKeyboard:function(b,c){a("#"+b).attr("readonly","readonly");var d=[];"Phone"==c?d=["7 8 9 {b}","4 5 6 {empty:2.9}","1 2 3 {empty:2.9}","{0:2.1} - {enter}"]:"Time"==c?
d=["7 8 9 {b}","4 5 6 {empty:2.9}","1 2 3 {empty:2.9}","{0:2.1} : {enter}"]:"Number"==c&&(d=["7 8 9 {b}","4 5 6 {empty:2.9}","1 2 3 {empty:2.9}","{0:2.1} . {enter}"]);0!=d.length&&a("#"+b).keyboard({layout:"custom",customLayout:{normal:d},restrictInput:!0,restrictInclude:"a b c d e f",useCombos:!1,acceptValid:!0,autoAccept:!0,usePreview:!1,validate:function(a,b,c){return 0<=b.length}})},setPNToken:function(b){F=b;a.mobileweb.__CLIENTID__=b},getPNToken:function(){return F},registerPNClient:function(a){r=
a},isPNClientRegisterd:function(){return r},RemoteProcess:function(b){a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page);"ACK"===b.ret?(a.each(a.mobileweb.pages,function(a,c){"RemoteTableViewList"!==c.type&&"RemoteTableView"!==c.type||c.data.tablename!==b.callbackdata.table||(c.data.updated=!1)}),z.showLoadingIndicator(!1),a.utility("setComActionStatus","Success")):(a.mobileweb.__ERR_CODE__=b.retdic.code,a.mobileweb.__ERR_MSG__=void 0==b.retdic.msg?b.retdic.error_message:b.retdic.msg,
z.showLoadingIndicator(!1),-1<b.retdic.code.indexOf("HLCOMM")&&"preview"===a.mobileweb.state&&a.errorhandler("alertBox",a.mobileweb.__ERR_CODE__+" : "+a.mobileweb.__ERR_MSG__,""),a.utility("setComActionStatus","Error"))},AcctRegistry:function(b){z.showLoadingIndicator(!1);"NACK"===b.ret?(console.log("Error authenticating"),a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page),a.utility("setComActionStatus","Error"),a.mobileweb.__ERR_CODE__=b.retdic.code,a.mobileweb.__ERR_MSG__=void 0==
b.retdic.msg?b.retdic.error_message:b.retdic.msg):(console.log("registration ok"),a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page),"ACK"===b.ret?a.utility("setComActionStatus","Success"):a.utility("setComActionStatus","Error"))},AcctLogin:function(b){z.showLoadingIndicator(!1);"NACK"===b.ret?(a.mobileweb.__ERR_CODE__=b.retdic.code,a.mobileweb.__ERR_MSG__=void 0==b.retdic.msg?b.retdic.error_message:b.retdic.msg,console.log("login failed: The username or password you entered is incorrect."),
a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page),a.utility("setComActionStatus","Error")):(console.log("Login Successfully"),a.utility("getObject",a.mobileweb.pages,"name",b.callbackdata.page),"ACK"===b.ret?a.utility("setComActionStatus","Success"):a.utility("setComActionStatus","Error"))},RemoteMaintenance:function(b){z.showLoadingIndicator(!1);"NACK"===b.ret&&(console.log("------------------ Maintenance Downtime Error ------------------"),a.mobileweb.__ERR_CODE__=b.retdic.code,
a.mobileweb.__ERR_MSG__=void 0==b.retdic.msg?b.retdic.error_message:b.retdic.msg,a.utility("setComActionStatus","Error"),a.errorhandler("alertBox",a.mobileweb.__ERR_MSG__,""))},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},containsGlobalVariable:function(a){if(void 0===a)return a;a=a.toString();return-1!=a.indexOf("__NOW__")||-1!=a.indexOf(/__NOW__/gi)||-1!=a.indexOf("__ERR_CODE__")||-1!=a.indexOf(/__ERR_CODE__/gi)||-1!=a.indexOf("__ERR_MSG__")||-1!=a.indexOf(/__ERR_MSG__/gi)||
-1!=a.indexOf("__BASEURL__")||-1!=a.indexOf("[__BASEURL__]")||-1!=a.indexOf("__INSTANCENAME__")||-1!=a.indexOf(/__INSTANCENAME__/gi)||-1!=a.indexOf("__PATH__")||-1!=a.indexOf(/__PATH__/gi)||-1!=a.indexOf("__PROJECTID__")||-1!=a.indexOf(/__PROJECTID__/gi)||-1!=a.indexOf("__PROJECTSTATE__")||-1!=a.indexOf(/__PROJECTSTATE__/gi)||-1!=a.indexOf("__LAT__")||-1!=a.indexOf(/__LAT__/gi)||-1!=a.indexOf("__LONG__")||-1!=a.indexOf(/__LONG__/gi)||-1!=a.indexOf("__ADDRESS__")||-1!=a.indexOf(/__ADDRESS__/gi)||-1!=
a.indexOf("__ROUTETIME__")||-1!=a.indexOf(/__ROUTETIME__/gi)||-1!=a.indexOf("__ROUTEDISTANCE__")||-1!=a.indexOf(/__ROUTEDISTANCE__/gi)||-1!=a.indexOf("__ALT__")||-1!=a.indexOf(/__ALT__/gi)||-1!=a.indexOf("__GPSDATE__")||-1!=a.indexOf(/__GPSDATE__/gi)||-1!=a.indexOf("__COURSE__")||-1!=a.indexOf(/__COURSE__/gi)||-1!=a.indexOf("__MAPZOOM__")||-1!=a.indexOf(/__MAPZOOM__/gi)||-1!=a.indexOf("__NUMREC__")||-1!=a.indexOf(/__NUMREC__/gi)||-1!=a.indexOf("__OS__")||-1!=a.indexOf(/__OS__/gi)||-1!=a.indexOf("__OSVER__")||
-1!=a.indexOf(/__OSVER__/gi)||-1!=a.indexOf("__RANDOM__")||-1!=a.indexOf(/__RANDOM__/gi)||-1!=a.indexOf("__BLANK__")||-1!=a.indexOf(/__BLANK__/gi)||-1!=a.indexOf("__IMEI__")||-1!=a.indexOf(/__IMEI__/gi)||-1!=a.indexOf("__APPVER__")||-1!=a.indexOf(/__APPVER__/gi)||-1!=a.indexOf("__CLIENTID__")||-1!=a.indexOf(/__APPVER__/gi)?!0:!1},checkGlobalVariable:function(b){if(void 0===b||null==b)return b;b=b.toString();if(-1!=b.indexOf("__NOW__")||-1!=b.indexOf(/__NOW__/gi)){var c=new Date,d=9>c.getMonth()?"0"+
(c.getMonth()+1):c.getMonth()+1,f=9>c.getDate()?"0"+c.getDate():c.getDate(),g=9>c.getMinutes()?"0"+c.getMinutes():c.getMinutes(),h=9>c.getHours()?"0"+c.getHours():c.getHours();c=c.getFullYear()+"-"+d+"-"+f+" "+h+":"+g;a.mobileweb.__NOW__=c;0==a("body").find("#__NOW__").length&&(a("body").append("<input id='__NOW__' type='text' hidden='true'></input>"),a("#__NOW__").text(c),a("#__NOW__").val(c));b=b.replace(/\[__NOW__\]/gi,"__NOW__");b=b.replace(/__NOW__/gi,a.mobileweb.__NOW__)}if(-1!=b.indexOf("__ERR_CODE__")||
-1!=b.indexOf(/__ERR_CODE__/gi))void 0!=a.mobileweb.__ERR_CODE__?(b=b.replace(/\[__ERR_CODE__\]/gi,"__ERR_CODE__"),b=b.replace(/__ERR_CODE__/gi,a.mobileweb.__ERR_CODE__)):(b=b.replace(/__ERR_CODE__/gi,""),b=b.replace("__ERR_CODE__",""));if(-1!=b.indexOf("__ERR_MSG__")||-1!=b.indexOf(/__ERR_MSG__/gi))void 0!=a.mobileweb.__ERR_MSG__?(b=b.replace(/\[__ERR_MSG__\]/gi,"__ERR_MSG__"),b=b.replace(/__ERR_MSG__/gi,a.mobileweb.__ERR_MSG__)):(b=b.replace(/__ERR_MSG__/gi,""),b=b.replace("__ERR_MSG__",""));if(-1!=
b.indexOf("__BASEURL__")||-1!=b.indexOf("[__BASEURL__]"))a.mobileweb.__BASEURL__=a.mobileweb.fullBaseURL,b=b.replace(/\[__BASEURL__\]/gi,"__BASEURL__"),b=b.replace(/__BASEURL__/gi,a.mobileweb.__BASEURL__);if(-1!=b.indexOf("__INSTANCENAME__")||-1!=b.indexOf(/__INSTANCENAME__/gi))a.mobileweb.__INSTANCENAME__=a.mobileweb.baseurl.replace("http://","").replace("https://",""),b=b.replace(/\[__INSTANCENAME__\]/gi,"__INSTANCENAME__ "),b=b.replace(/__INSTANCENAME__/gi,a.mobileweb.__INSTANCENAME__);if(-1!=
b.indexOf("__PATH__")||-1!=b.indexOf(/__PATH__/gi))a.mobileweb.__PATH__=a.mobileweb.fullBaseURL.replace(a.mobileweb.baseurl+"/",""),a.mobileweb.__PATH__=a.mobileweb.__PATH__.replace(a.mobileweb.__PATH__.lastIndexOf("/"),""),b=b.replace(/\[__PATH__\]/gi,"__PATH__ "),b=b.replace(/__PATH__/gi,a.mobileweb.__PATH__);if(-1!=b.indexOf("__PROJECTID__")||-1!=b.indexOf(/__PROJECTID__/gi))b=b.replace(/\[__PROJECTID__\]/gi,"__PROJECTID__ "),b=b.replace(/__PROJECTID__/gi,a.mobileweb.pid);if(-1!=b.indexOf("__PROJECTSTATE__")||
-1!=b.indexOf(/__PROJECTSTATE__/gi))b=b.replace(/\[__PROJECTSTATE__\]/gi,"__PROJECTSTATE__ "),b=b.replace(/__PROJECTSTATE__/gi,a.mobileweb.applicationState);if(-1!=b.indexOf("__LAT__")||-1!=b.indexOf(/__LAT__/gi))b=b.replace(/\[__LAT__\]/gi,"__LAT__ "),b=b.replace(/__LAT__/gi,a.mobileweb.__LAT__);if(-1!=b.indexOf("__LONG__")||-1!=b.indexOf(/__LONG__/gi))b=b.replace(/\[__LONG__\]/gi,"__LONG__ "),b=b.replace(/__LONG__/gi,a.mobileweb.__LONG__);if(-1!=b.indexOf("__ADDRESS__")||-1!=b.indexOf(/__ADDRESS__/gi))b=
b.replace(/\[__ADDRESS__\]/gi,"__ADDRESS__ "),b=b.replace(/__ADDRESS__/gi,a.mobileweb.__ADDRESS__);if(-1!=b.indexOf("__ROUTETIME__")||-1!=b.indexOf(/__ROUTETIME__/gi))b=b.replace(/\[__ROUTETIME__\]/gi,"__ROUTETIME__ "),b=b.replace(/__ROUTETIME__/gi,a.mobileweb.__ROUTETIME__);if(-1!=b.indexOf("__ROUTEDISTANCE__")||-1!=b.indexOf(/__ROUTEDISTANCE__/gi))b=b.replace(/\[__ROUTEDISTANCE__\]/gi,"__ROUTEDISTANCE__ "),b=b.replace(/__ROUTEDISTANCE__/gi,a.mobileweb.__ROUTEDISTANCE__);if(-1!=b.indexOf("__ALT__")||
-1!=b.indexOf(/__ALT__/gi))b=b.replace(/\[__ALT__\]/gi,"__ALT__ "),b=b.replace(/__ALT__/gi,a.mobileweb.__ALT__);if(-1!=b.indexOf("__GPSDATE__")||-1!=b.indexOf(/__GPSDATE__/gi))b=b.replace(/\[__GPSDATE__\]/gi,"__GPSDATE__ "),b=b.replace(/__GPSDATE__/gi,a.mobileweb.__GPSDATE__);if(-1!=b.indexOf("__COURSE__")||-1!=b.indexOf(/__COURSE__/gi))b=b.replace(/\[__COURSE__\]/gi,"__COURSE__ "),b=b.replace(/__COURSE__/gi,a.mobileweb.__COURSE__);if(-1!=b.indexOf("__MAPZOOM__")||-1!=b.indexOf(/__MAPZOOM__/gi))b=
b.replace(/\[__MAPZOOM__\]/gi,"__MAPZOOM__ "),b=b.replace(/__MAPZOOM__/gi,a.mobileweb.__MAPZOOM__);if(-1!=b.indexOf("__CENTERLAT__")||-1!=b.indexOf(/__CENTERLAT__/gi))b=b.replace(/\[__CENTERLAT__\]/gi,"__CENTERLAT__ "),b=b.replace(/__CENTERLAT__/gi,a.mobileweb.__CENTERLAT__);if(-1!=b.indexOf("__CENTERLONG__")||-1!=b.indexOf(/__CENTERLONG__/gi))b=b.replace(/\[__CENTERLONG__\]/gi,"__CENTERLONG__ "),b=b.replace(/__CENTERLONG__/gi,a.mobileweb.__CENTERLONG__);if(-1!=b.indexOf("__NUMREC__")||-1!=b.indexOf(/__NUMREC__/gi))void 0!=
a.mobileweb.__NUMREC__?(b=b.replace(/\[__NUMREC__\]/gi,"__NUMREC__ "),b=b.replace(/__NUMREC__/gi,a.mobileweb.__NUMREC__)):(b=b.replace(/\[__NUMREC__\]/gi,"__NUMREC__ "),b=b.replace(/__NUMREC__/gi,""));if(-1!=b.indexOf("__OS__")||-1!=b.indexOf(/__OS__/gi))b=b.replace(/\[__OS__\]/gi,"__OS__ "),b=a.browser.chrome?b.replace(/__OS__/gi,"Google Chrome"):a.browser.mozilla?b.replace(/__OS__/gi,"Firefox Web Browser"):a.browser.opera?b.replace(/__OS__/gi,"Opera"):a.browser.safari?b.replace(/__OS__/gi,"Safari"):
a.browser.mise?b.replace(/__OS__/gi,"Mise"):b.replace(/__OS__/gi,"Browser not detected");if(-1!=b.indexOf("__OSVER__")||-1!=b.indexOf(/__OSVER__/gi))b=b.replace(/\[__OSVER__\]/gi,"__OSVER__ "),b=b.replace(/__OSVER__/gi,a.browser.version);if(-1!=b.indexOf("__APPVER__")||-1!=b.indexOf(/__APPVER__/gi))a.mobileweb.__APPVER__=a.mobileweb.version,b=b.replace(/\[__APPVER__\]/gi,"__APPVER__"),b=b.replace(/__APPVER__/gi,a.mobileweb.__APPVER__);if(-1!=b.indexOf("__RANDOM__")||-1!=b.indexOf(/__RANDOM__/gi))b=
b.replace(/\[__RANDOM__\]/gi,"__RANDOM__ "),c=Math.random().toString(36).substr(2),b=b.replace(/__RANDOM__/gi,c);if(-1!=b.indexOf("__BLANK__")||-1!=b.indexOf(/__BLANK__/gi))a.mobileweb.__BLANK__="",b=b.replace(/\[__BLANK__\]/gi,"__BLANK__"),b=b.replace(/__BLANK__/gi,a.mobileweb.__BLANK__);if(-1!=b.indexOf("__IMEI__")||-1!=b.indexOf(/__IMEI__/gi))a.mobileweb.__IMEI__="",b=b.replace(/\[__IMEI__\]/gi,"__IMEI__"),b=b.replace(/__IMEI__/gi,a.mobileweb.__IMEI__);if(-1!=b.indexOf("__CLIENTID__")||-1!=b.indexOf(/__CLIENTID__/gi))b=
b.replace(/\[__CLIENTID__\]/gi,"__CLIENTID__"),b=b.replace(/__CLIENTID__/gi,a.mobileweb.__CLIENTID__);if(void 0==b||"undefined"==b)b="";return b},replaceRecordWithPagedata:function(b,c,d){for(var f in b){d.data.contents.constructor==Array&&0<d.data.contents.length&&(c===d.data.contents[0]?console.log("we don't require data parameter here"):b[f]=a.utility("extractDataFromRecord",c,b[f]));var g=a.utility("checkGlobalVariable",b[f]);if(g===b[f]){if(isNaN(b[f])){g=a.utility("tokenizeString",b[f],d);try{b[f]=
g}catch(pa){b[f]=g}}}else b[f]=g}},GetCSVData:function(){return h},SetCSVData:function(b,c,d){for(var f in h)h[f].prefix===b&&h.splice(f,1);if(-1!=c.indexOf("[")&&-1!=c.indexOf("]")){c=c.replace("[","").replace("]","");c=a.utility("CheckAndGetUIElementValue",a("[name='"+c+"']"),c,d);if(void 0!=c){d=c.split(",");for(f=0;f<d.length;f++)(c=d[f])&&(-1<c.indexOf('"')?d[f]=c.replace('"',"").replace('"',""):-1<c.indexOf("'")&&(d[f]=c.replace("'","").replace("'","")));h.push({prefix:b,rowData:d});return!0}c=
a.utility("getCombinedCSV");if(0<c.length)a.each(c,function(a,c){a=c.value.split(",");h.push({prefix:b,rowData:a});return!0});else return!1}else return d=c.split(","),h.push({prefix:b,rowData:d}),!0},CheckAndGetUIElementValue:function(b,c,d){if(void 0!=d&&void 0!=d.notransferdata)return"";if(0!=b.length){var f=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),a(b).attr("id"));if("Gadget"===f.viewtype)return a.utility("CheckAndGetUIElementValue",a("[name='"+f.name+"'] > [name='"+
f.mainObjectName+"']"),f.mainObjectName,d);if(1<b.length)if(void 0!=d.data.contents.currentRow){var g=parseInt(d.data.contents.currentRow);isNaN(g)||(b="TextButton"==f.viewtype?b.slice(1):b.slice(g,g+1))}else for(g=0;g<b.length;g++){var h=a.utility("getUiID_Object_From_Page",d.name,a(b[g]).attr("id"));if(!a.isEmptyObject(h)){if("TextButton"==h.viewtype){b=b.slice(g+1);break}if("Radio"!=h.viewtype){b=b.slice(g,g+1);break}}}g=a(b).parents("div").map(function(){if("leftToolBar"==a(this).attr("id")){var b=
parseFloat(a(this).css("width").replace("px",""));return void 0!=b&&240<=b?!0:!1}});if(void 0!=g&&0<g.length&&!g[0])return"";if(a(b).is("input:checkbox"))return f=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),a(b).parent().attr("id")),f.valueFormat;if(a(b).is("input:radio")){var k="";a(b).each(function(a,b){if(b.checked)return k=b.value});return k}if(a(b).is("video")){f=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),a(b).attr("id"));void 0!=
d&&a.isEmptyObject(f)&&(f=a.utility("getUiID_Object_From_Page",d.name,a(b).attr("id")));if("Camera"===f.viewtype)return f.mainValue;if("VideoBox"===f.viewtype)return f.src}else{if(a(b).is("input")&&!a(b).is("input:image"))return f=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),a(b).attr("id")),a.isEmptyObject(f)||""==f.value?a(b).val():f.value;if(a(b).is("label"))return a(b[0]).text();if(a(b).is("img"))return a(b).attr("src").toString().substring(a(b).attr("src").toString().lastIndexOf("/")+
1,a(b).attr("src").toString().length);if(a(b).is("textArea"))return a(b).val();if(a(b).is("input:image"))return f=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),a(b).attr("id")),f.togglevalue;if(a(b).is("select")){f=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),a(b).attr("id"));if("SwitchBar"===f.viewtype)return f.switchValue;d=a(a(b).get(0)).attr("id");if(void 0!=a("#"+d+" option:selected").val())return a("#"+d+" option:selected").val();
f=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),a(b).attr("id").replace("_select",""));if(!a.isEmptyObject(f))return f.initialValue}else{if(a(b).is("datalist"))return d=a(a(b).get(0)).attr("id"),a("#"+a(b)[0].id+"_input").val();if(a(b).is("table")){f=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),a(b).attr("id"));if("Radio"===f.viewtype)return f.value;var l="";a(b).find("td").each(function(){"true"==a(this).attr("sel")&&(l=a(this).get(0).innerHTML)});
return l}if(a(b).find(".g-recaptcha"))return f.value;if(a(b).find(" .pickerTable tr")){f=a.utility("getUiID_Object_From_Page",a.mobileweb.getCurrentPage().getName(),a(b).attr("id"));if(void 0==f)return k="",b=a.utility("getCombinedCSV"),0!=b.length&&a.each(b,function(a,b){k=b.csvResultHeader===c?b.value:"["+c+"]"}),k;if("DatePicker"===f.viewtype)return f.value;if("ImageButton"===f.viewtype||"ImageButton"===f.viewtype)return a("#"+f.id+'>[name="foregroundimage"]').attr("src");if("Slider"===f.viewtype)return b=
a(b).attr("id"),a("#"+b+" .ui-slider-input").attr("value");if("GoogleMap"===f.viewtype||"ListBox"===f.viewtype)return f.value;if("SoundBox"===f.viewtype)return"bundle"===f.source?f.src.substr(f.src.lastIndexOf("/")+1,f.src.length):!0===f.recorder&&"local"===f.source?f.recordingName:f.src;var n="";a(b).find("table").each(function(b,c){a(c).find("tr").each(function(b,c){a(c).hasClass("activeRow")&&(0<n.length&&(n+=","),n+=a(c).attr("val"))})});return n}if(a(b).find(".ui-slider-input")){f=a.utility("getUiID_Object_From_Page",
a.mobileweb.getCurrentPage().getName(),a(b).attr("id"));if(void 0==f)return k="",b=a.utility("getCombinedCSV"),0!=b.length&&a.each(b,function(a,b){k=b.csvResultHeader===c?b.value:"["+c+"]"}),k;if("DatePicker"===f.viewtype)return f.value;if("SwitchBar"===f.viewtype)return f.switchValue;b=a(b).attr("id");return a("#"+b+" .ui-slider-input").attr("value")}}}}else{var m="",p=!1;return void 0!=d&&void 0!=d.data.contents?(g=d.data.contents.currentRow,void 0==g||isNaN(g)||void 0==d.data.contents[g]?(b=[],
b=void 0!=d.data.contents[0]?d.data.contents[0].constructor==Object?d.data.contents:d.data.contents[0]:d.data.contents,void 0!=b&&(0<b.length?a.each(b,function(a,b){p||void 0==b||void 0==b[c]||(m=b[c],p=!0)}):void 0!=b[c]&&(m=b[c],p=!0),p||void 0==d.parentType||"SplitView"!==d.parentType||void 0==d.pagedef||(void 0!=d.pagedef.data.contents&&(f=void 0!=d.pagedef.data.contents[0]?d.pagedef.data.contents[0]:d.pagedef.data.contents),void 0!=f&&a.each(f,function(a,b){a==c&&(m=b,p=!0)})))):a.each(d.data.contents[g],
function(a,b){a==c&&(m=b,p=!0)}),m):""}},updateDataContents:function(b,c,d,f){void 0!=d.data.contents&&a.each(d.data.contents,function(a,f){void 0!=d.data.contents[a]&&(d.data.contents[a][b]=c)})},getUiID_Object_From_Page:function(b,c){var d={},f=!1,g=!1,h="";-1<c.toString().indexOf("_ui")&&(g=!0,h=c.toString().split("_ui")[0]);g?(d=a.utility("getUiObject_fromGadgetUI",b,h,c),void 0!=d&&(f=!0)):a.each(a.utility("getObject",a.mobileweb.pages,"name",b).children,function(b,g){"Dialog"===g.viewtype&&
(g.id==c?(f=!0,d=g):a.each(g.dataArray[0].children,function(a,b){b.id==c&&(f=!0,d=b)}));g.id==c&&(f=!0,d=g)});void 0!=a.utility("getObject",a.mobileweb.pages,"name",b).toolbartop&&(f||a.each(a.utility("getObject",a.mobileweb.pages,"name",b).toolbartop.children,function(a,b){b.id==c&&(f=!0,d=b)}));void 0!=a.utility("getObject",a.mobileweb.pages,"name",b).toolbarbottom&&(f||a.each(a.utility("getObject",a.mobileweb.pages,"name",b).toolbarbottom.children,function(a,b){b.id==c&&(f=!0,d=b)}));void 0!=a.utility("getObject",
a.mobileweb.pages,"name",b).toolbarleft&&(f||a.each(a.utility("getObject",a.mobileweb.pages,"name",b).toolbarleft.children,function(a,b){b.id==c&&(f=!0,d=b)}));return d},getUiObject_fromGadgetUI:function(b,c,d){var f={};b=a.utility("getObject",a.mobileweb.pages,"name",b);a.each(b.children,function(b,g){g.id==c&&a.each(g.children,function(a,b){b.id==d&&(f=b)})});return f},getRadio_groupObjects_From_Page:function(b,c){var d=[];if(a(c).is("input:radio")){var f=a(c[1]).attr("name");b=a.utility("getObject",
a.mobileweb.pages,"name",b);a.each(b.children,function(a,b){b.groupName==f&&d.push(b)});a.each(b.toolbartop.children,function(a,b){b.groupName==f&&d.push(b)});a.each(b.toolbarbottom.children,function(a,b){b.groupName==f&&d.push(b)});void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,b){b.groupName==f&&d.push(b)})}return d},ApplyOnSucessAndOnErrorEvents:function(b,c,d,f){void 0!==d&&void 0!==d.Success&&f&&(new a.actions(b,c,d.Success)).execute();void 0===d||void 0===d.Error||f||(new a.actions(b,
c,d.Error)).execute()},splitAndReturnDate:function(a){a=a.split(/[-: ]/);return 3<a.length?new Date(a[0],a[1],a[2],a[3],a[4],0):new Date(a[0],a[1],a[2])},validateDate:function(a){var b=!0;try{for(i=0;28>i;i++)-1!=a.indexOf("<>@!#$%^&*()_+[]{}?;|'\"\\,~`="[i])&&(b=!1);return b?"Invalid Date"==new Date(a)?!1:!0:b}catch(X){return!1}},validateTime:function(a){for(var b=0;b<a.length;b++)if(0==b){if(1>=a[b].length>=2||isNaN(parseInt(a[b]))||0>parseInt(a[b])||23<parseInt(a[b]))return!1}else if(1==b){if(1>=
a[b].length>=2||isNaN(parseInt(a[b]))||0>parseInt(a[b])||59<parseInt(a[b]))return!1}else if(2==b){if(1>=a[b].length>=2||isNaN(parseInt(a[b]))||0>parseInt(a[b])||59<parseInt(a[b]))return!1}else return!1;return!0},validateOnlyDate:function(a){a=a.split("-");for(var b=0;b<a.length;b++)if(0==b){if(4!=a[b].length||isNaN(parseInt(a[b]))||1972>parseInt(a[b])||2050<parseInt(a[b]))return!1}else if(1==b){if(2!=a[b].length||isNaN(parseInt(a[b]))||1>parseInt(a[b])||12<parseInt(a[b]))return!1}else if(2==b){if(2!=
a[b].length||isNaN(parseInt(a[b]))||1>parseInt(a[b])||31<parseInt(a[b]))return!1}else return!1;return!0},validateOnlyTime:function(a){a=a.split(":");for(var b=0;b<a.length;b++){if(0==b){if(2!=a[b].length||isNaN(parseInt(a[b]))||0>parseInt(a[b])||23<parseInt(a[b]))return!1}else if(1==b){if(2!=a[b].length||isNaN(parseInt(a[b]))||0>parseInt(a[b])||59<parseInt(a[b]))return!1}else if(2==b){if(2!=a[b].length||isNaN(parseInt(a[b]))||0>parseInt(a[b])||59<parseInt(a[b]))return!1}else return!1;if(!Number.isInteger(parseInt(a[b]))||
!Number.isInteger(parseInt(a[b].split("").reverse().join(""))))return!1}return!0},validateBooleanFormat:function(a){switch(a.toLowerCase().trim()){case "true":case "yes":case "1":case "false":case "no":case "0":return!0;default:return!1}},reloadSplitViewPageSection:function(b,c){var d="page"+b.parent.substring(b.parent.lastIndexOf("_"),b.parent.length);if(b.name!=c){var f=a.utility("getObject",a.mobileweb.pages,"name",c).parent.split("_");f="page_"+f[f.length-1];f==b.name&&(d=b.name)}a.each(a.mobileweb.pages,
function(b,f){d===f.name&&a.each(f.children,function(b,d){d.name===c&&("BaseView"===d.type?(b=a.mobileweb.getPage(d.name),b.children=new a.uichildren(d,d.children,d.data.contents[0]),b.children.applyOverrides()):"DBTableViewList"===d.type?a.each(a.mobileweb.getCurrentPage().children,function(b,c){if("DBTableViewList"===c.getViewType()){z.showLoading=!0;a("#"+d.name+"_section").css({overflow:"hidden"});a("#"+d.name+"_section").find("ul").block({message:"",overlayCSS:{opacity:.5},css:{border:"none",
padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:1,color:"#fff"}});a(".ui-loader").css({display:"block",left:(parseFloat(d.sectionX)+parseFloat(d.sectionwidth/2))*a.mobileweb.device.aspectratio+parseFloat(a(".scroller").css("left").replace("px",""))+"px",top:(d.y+d.height/2)*a.mobileweb.device.aspectratio+"px"});var f=d.data.contents[0].length;c=a.utility("clone",d);var g=a("#"+d.children[0].id+" ul").attr("id");a.fetchLocalDBRecords(c,function(){a.createDBListViewPageRows(d,
function(){var c=[];c=void 0!=d.data.contents[0]&&d.data.contents[0].constructor==Object?d.data.contents:d.data.contents[0];f=0;a.mobileweb.getCurrentPage().children[b].children[0].group[0].row=[];a("#"+d.name+"_section").find("ul").empty();c=c.length-f;for(var h=0;h<c;h++){var k=f+h;a.createRemoteListPageRow(d,g,d.children[0].group[0].row[k],f+h,d.children[0].group[0].flexibleHeight,function(c){d.children[0].group[0].row[k]=c;a.mobileweb.getCurrentPage().children[b].children[0].group[0].row.push(d.children[0].group[0].row[k]);
a("#"+d.name+"_section").find("ul").append(a.mobileweb.getCurrentPage().children[b].children[0].group[0].row[k].getHTML());a.mobileweb.getCurrentPage().children[b].children[0].group[0].row[k].applyOverrides();a.mobileweb.getCurrentPage().children[b].children[0].group[0].row[k].applyEvents();z.showLoading=!1;a("#"+d.name+"_section").find("ul").unblock();a(".ui-loader").css({display:"none"});a("#"+d.name+"_section").removeClass("scrollSectionDB");a("#"+d.name+"_section").addClass("scrollSectionDB");
var f=a("#"+d.name+"_div .scrollSectionDB").get(0),g=setInterval(function(){clearInterval(g);a("#"+d.name+"_section> div:nth-child(2)").remove();myScroll=new iScroll(f,{onScrollEnd:function(){curScrollPos=a(this).get(0).y;var b={page_name:a.mobileweb.getCurrentPage().getName(),x:curScrollPos};a.utility("setSessionData",b,"offset1")},bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}});
if(null!=a.utility("getSessionData","offset1")){var b=a.utility("getSessionData","offset1");b=a.parseJSON(b);myScroll.scrollTo(0,b.x,1)}},100)})}})})}}):"RemoteTableViewList"===d.type&&a.each(a.mobileweb.getCurrentPage().children,function(b,c){if("RemoteTableViewList"===c.getViewType()&&d.name===c.getName()){void 0!=d.data.contentsReloaded&&(d.data.contentsReloaded=!1);z.showLoading=!0;a("#"+d.name+"_section").css({overflow:"hidden"});a("#"+d.name+"_section").find("ul").block({message:"",overlayCSS:{opacity:.5},
css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:1,color:"#fff"}});a(".ui-loader").css({display:"block",left:(parseFloat(d.x)+parseFloat(d.width/2))*a.mobileweb.device.aspectratio+parseFloat(a(".scroller").css("left").replace("px",""))+"px",top:(d.y+d.height/2)*a.mobileweb.device.aspectratio+"px"});var g=d.data.contents[0].length;1!=d.children[0].accordion&&a.fetchRemoteDBRecords(d,f.name,"reloadDBListViewPageRows");var h=
setInterval(function(){clearInterval(h);if(d.children[0].accordion){a(".ui-loader").css({display:"none"});a("#"+d.name+"_section").find("ul").unblock();var c=d.data.order&&""!==d.data.order?d.data.order:"";(new a.actions(d,null,[{method:"Select",category:"ComAction",reloadStatus:!0,reloadCallback:"reloadDBAccordionView",callingMethod:"reload",params:{servicename:d.data.servicename,table:d.data.tablename,where:a.utility("tokenizeString",d.data.wherecond,d),order:a.utility("tokenizeString",c,d),offset:0,
fields:""}}])).execute()}else a.createRemoteDBListViewPageRows(d,function(){if(g<d.data.contents[0].length)for(var c=d.data.contents[0].length-g,f=0;f<c;f++){var h=g+f;a.createRow(d,g+f,d.children[0].group[0].row[h],g+f+1,function(c){d.children[0].group[0].row[h]=c;a.mobileweb.getCurrentPage().children[b].children[0].group[0].row.push(d.children[0].group[0].row[h]);a("#"+d.name+"_section").find("ul").append(a.mobileweb.getCurrentPage().children[b].children[0].group[0].row[h].getHTML().join(""));a.mobileweb.getCurrentPage().children[b].children[0].group[0].row[h].applyOverrides();
a.mobileweb.getCurrentPage().children[b].children[0].group[0].row[h].applyEvents();z.showLoading=!1;a("#"+d.name+"_section").find("ul").unblock();a(".ui-loader").css({display:"none"});a("#"+d.name+"_section").removeClass("scrollSectionDB");a("#"+d.name+"_section").addClass("scrollSectionDB");var f=a("#"+d.name+"_div .scrollSectionDB").get(0),g=setInterval(function(){clearInterval(g);a("#"+d.name+"_section> div:nth-child(2)").remove();myScroll=new iScroll(f,{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=
a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}})},100)})}else a(".ui-loader").css({display:"none"})})},300)}}))})})},reloadDBAccordionView:function(b,c){a.utility("showLoadingIndicator",!0);a("#iscroll_"+b.name+"> div:nth-child(2)").remove();var d=a("#"+b.children[0].id+" ul").attr("id");d&&a("#"+d+" li").remove();if("DBTableViewList"===b.type||"RemoteTableViewList"===b.type)console.log(c,b.data.contents.length),a.createRemoteDBListViewPageRows(b,
function(b){if(0!=b.data.contents.length)if(void 0!=b.data.pagedata&&1==b.data.contents.length&&b.data.pagedata===b.data.contents[0])a.utility("showLoadingIndicator",!1);else{a("#"+b.children[0].id).empty();for(var c=a.accordiontable(b,b.children[0]),d=[],f=0;f<c.group.length;f++)a.createAccordionListGroup(b,c.group[f],f,d,function(c){a("#"+b.children[0].id).append(c.getHTML());c.applyOverrides();c.applyEvents()});a.mobileweb.getPage(b.name,b.reverse).refreshDisplay(!0);var g=setInterval(function(){clearInterval(g);
void 0!=a("#iscroll_"+b.name).get(0)&&(a("#iscroll_"+b.name).css({width:parseInt(a("#iscroll_"+b.name).css("width").replace("px",""))+20+"px"}),a("#iscroll_"+b.name).css({"overflow-x":"hidden","overflow-y":"overlay"}))},800)}});a.utility("showLoadingIndicator",!1)},reloadRemoteListViewPage:function(b,c){a.utility("showLoadingIndicator",!0);var d=a.mobileweb.__NUMREC__,f=a("#"+b.children[0].id+" ul").attr("id");0===a("#pagination-container").length&&a("#"+b.children[0].id).append("<div id='pagination-container'><p id='paginationMsg'></p></div>");
a("#"+f+" li").remove();"DBTableViewList"===b.type?void 0!=c&&c?a.createRemoteDBListViewPageRows(b,function(b){if(0!=b.data.contents.length){var c=function(c){a("#pagination-container").bootpag({total:void 0!=d?Math.ceil(d/c):1,maxVisible:4,page:1,firstLastUse:!0,leaps:!1}).off("page").on("page",function(g,h){var k=c*(h-1);(new a.actions(b,null,[{method:"Select",reloadStatus:!0,reloadCallback:"reloadRemoteListViewPage",category:"DBAction",params:{tablename:b.data.tablename,where:a.utility("tokenizeString",
b.data.wherecond,b),order:a.utility("tokenizeString",b.data.order,b),limit:c,offset:0,columns:""},events:[]}])).execute();var l=setInterval(function(){b.data.contents.offset==k&&(clearInterval(l),f(),d>=c*h?a("#paginationMsg").html("Showing "+(c*(h-1)+1)+"-"+c*h+" of "+d+" items"):a("#paginationMsg").html("Showing "+(c*(h-1)+1)+"-"+d+" of "+d+" items"))},300)})},f=function(){var c=a("#"+b.children[0].id+" ul").attr("id");a("#"+c+" li").remove();a("#pagination-container").css({visibility:"visible"});
a.each(b.data.contents,function(d,f){b.children[0].group[0].row[d].data.contents[0]=f;a.createRemoteListPageRow(b,c,b.children[0].group[0].row[d],d,b.children[0].group[0].flexibleHeight,function(b){a(".scroller").find("ul").first().append(b.getHTML());b.applyOverrides();b.applyEvents();a.utility("showLoadingIndicator",!1)});d===b.data.contents.length-1&&(d=0,void 0!=a("#iscroll_"+b.name)[0]&&(d=a("#iscroll_"+b.name)[0].clientHeight),0<d&&(d<parseFloat(a(".scroller").find("ul").css("height"))?(a(".bglayout").css({height:parseFloat(a(".scroller").find("ul").css("height"))+
100+"px"}),a(".scroller").css({height:parseFloat(a(".scroller").find("ul").css("height"))+100+"px"}),"Desktop"===a.mobileweb.device.type&&(a("#iscroll_"+b.name).css({"overflow-y":"scroll","overflow-x":"hidden"}),a("#iscroll_"+b.name).animate({scrollTop:0},"fast"))):(a("#iscroll_"+b.name).css({"overflow-y":"hidden","overflow-x":"hidden"}),a(".bglayout").css({height:d+100+"px"}),a(".scroller").css({height:d+100+"px"}))),a.unblockUI())})};if(void 0!=b.data.pagedata&&1==b.data.contents.length&&b.data.pagedata===
b.data.contents[0])a.utility("showLoadingIndicator",!1);else{a(".ui-table-position").css({visibility:"visible"});a("#empty_list").css({visibility:"hidden"});var g=0<a("#recordsLength").length?a("#recordsLength").val():25;c(g);f();d>=g?a("#paginationMsg").html("Showing 1-"+g+"  of "+d+" items"):a("#paginationMsg").html("Showing 1-"+d+" of "+d+" items");if(0===a("#recordsLength").length){a("#pagination-container").append("<select id='recordsLength'> <option value='10'>10/Page</option><option value='25' selected='selected'>25/Page</option> <option value='50'>50/Page</option></select>");
var h=parseFloat(a("#paginationMsg").css("width"));b.data.contents.length<g?a(".pagination").css({visibility:"hidden"}):(h=parseFloat(a("#paginationMsg").css("width"))+parseFloat(a(".pagination").css("width"))+5,a(".pagination").css({visibility:"visible"}));a("#recordsLength").css({left:h+5+"px"});a("#recordsLength").on("change",function(g){var k=parseInt(a("#recordsLength").val());b.data.contents.length<k?a(".pagination").css({visibility:"hidden"}):(h=parseFloat(a("#paginationMsg").css("width"))+
parseFloat(a(".pagination").css("width"))+5,a(".pagination").css({visibility:"visible"}));a("#recordsLength").css({left:h+"px"});(new a.actions(b,null,[{method:"Select",reloadStatus:!0,reloadCallback:"reloadRemoteListViewPage",category:"DBAction",params:{tablename:b.data.tablename,where:a.utility("tokenizeString",b.data.wherecond,b),order:a.utility("tokenizeString",b.data.order,b),limit:k,offset:0,columns:""},events:[]}])).execute();var l=setInterval(function(){0==b.data.contents.offset&&(clearInterval(l),
c(k),f(),d>=k?a("#paginationMsg").html("Showing 1-"+k+" of "+d+" items"):a("#paginationMsg").html("Showing 1-"+d+" of "+d+" items"))},300)})}else h=parseFloat(a("#paginationMsg").css("width")),b.data.contents.length<g?a(".pagination").css({visibility:"hidden"}):(h=parseFloat(a("#paginationMsg").css("width"))+parseFloat(a(".pagination").css("width"))+5,a(".pagination").css({visibility:"visible"})),a("#recordsLength").css({left:h+5+"px"});g=a.mobileweb.getPage(b.name);a.utility("setAppBootingForFirstTime",
!1);g.header.applyOverrides();g.footer.applyOverrides();g.toolbartop.applyOverrides(!0);g.toolbarbottom.applyOverrides(!0);void 0!=a.mobileweb.getCurrentPage().children&&0<a.mobileweb.getCurrentPage().children.length&&void 0!=a.mobileweb.getCurrentPage().children[0].group&&b.children[0].group[0].row.length!=a.mobileweb.getCurrentPage().children[0].group[0].row.length&&a.mobileweb.setCurrentPage(g);a.utility("setReverseTransition",!1)}}else a.unblockUI(),a("#empty_list").css({visibility:"visible"}),
a(".ui-table-position").css({visibility:"visible"}),a.utility("showLoadingIndicator",!1)}):b.children[0].accordion?(c=b.data.groupby&&""!==b.data.groupby?b.data.groupby:"",(new a.actions(b,null,[{method:"Select",reloadStatus:!0,reloadCallback:"reloadDBAccordionView",category:"DBAction",params:{tablename:b.data.tablename,where:a.utility("tokenizeString",b.data.wherecond,b),order:a.utility("tokenizeString",c,b),columns:""},events:[]}])).execute()):(new a.actions(b,null,[{method:"Select",reloadStatus:!0,
reloadCallback:"reloadRemoteListViewPage",category:"DBAction",params:{tablename:b.data.tablename,where:a.utility("tokenizeString",b.data.wherecond,b),order:a.utility("tokenizeString",b.data.order,b),limit:25,offset:0,columns:""},events:[]}])).execute():"RemoteTableViewList"===b.type&&(void 0!=c&&c?(a("#pagination-container").css({visibility:"hidden"}),setTimeout(function(){(new a.actions(b,null,[{method:"Select",category:"ComAction",callingMethod:"RemoteNumRecords",params:{servicename:b.data.servicename,
table:b.data.tablename,where:b.data.wherecond,order:b.data.order,fields:"",pageNumRecords:!0,reload:!1}}])).execute()},1E3),a.createRemoteDBListViewPageRows(b,function(b){if(0!=b.data.contents.length){var c=function(c){a("#pagination-container").bootpag({total:void 0!=d?Math.ceil(d/c):0,maxVisible:4,page:void 0!=b.selectedPage?b.selectedPage:1,firstLastUse:!0,leaps:!1}).off("page").on("page",function(g,h){var k=c*(h-1);b.selectedPage=h;(new a.actions(b,null,[{method:"Select",category:"ComAction",
params:{servicename:b.data.servicename,table:b.data.tablename,where:b.data.wherecond,order:b.data.order,offset:k,limit:c,fields:""}}])).execute();var l=setInterval(function(){b.data.contents.offset==k&&(clearInterval(l),f(),d>=c*h?a("#paginationMsg").html("Showing "+(c*(h-1)+1)+"-"+c*h+" of "+d+" items"):a("#paginationMsg").html("Showing "+(c*(h-1)+1)+"-"+d+" of "+d+" items"))},300)})},f=function(){var c=a("#"+b.children[0].id+" ul").attr("id");a("#"+c+" li").remove();a.each(b.data.contents,function(d,
f){void 0!=b.children[0].group[0].row[d]&&(b.children[0].group[0].row[d].data.contents[0]=f,a.createRemoteListPageRow(b,c,b.children[0].group[0].row[d],d,b.children[0].group[0].flexibleHeight,function(b){a(".scroller").find("ul").first().append(b.getHTML());b.applyOverrides();b.applyEvents();a.utility("showLoadingIndicator",!1)}));d===b.data.contents.length-1&&(d=0,void 0!=a("#iscroll_"+b.name)[0]&&(d=a("#iscroll_"+b.name)[0].clientHeight),0<d&&(d<parseFloat(a(".scroller").find("ul").css("height"))?
(a(".bglayout").css({height:parseFloat(a(".scroller").find("ul").css("height"))+100+"px"}),a(".scroller").css({height:parseFloat(a(".scroller").find("ul").css("height"))+100+"px"}),"Desktop"===a.mobileweb.device.type&&(a("#iscroll_"+b.name).css({"overflow-y":"scroll","overflow-x":"hidden"}),a("#iscroll_"+b.name).animate({scrollTop:0},"fast"))):("Desktop"===a.mobileweb.device.type?(a("#iscroll_"+b.name).css({"overflow-y":"scroll","overflow-x":"hidden"}),a("#iscroll_"+b.name).animate({scrollTop:0},
"fast")):a("#iscroll_"+b.name).css({"overflow-y":"hidden","overflow-x":"hidden"}),a(".bglayout").css({height:d+100+"px"}),a(".scroller").css({height:d+100+"px"}))),a.unblockUI())})};a("#empty_list").css({visibility:"hidden"});a(".ui-table-position").css({visibility:"visible"});b.selectedPage=1;var g=0<a("#recordsLength").length?a("#recordsLength").val():25;setTimeout(function(){d=O;if(0===d){a("#pagination-container").css({visibility:"hidden"});void 0!=b.iscroll&&(b.iscroll.destroy(),a("#iscroll_"+
b.name+"> div:nth-child(2)").remove());var f=a("#"+b.children[0].id+" ul").attr("id");a("#"+f+" li").remove();a.unblockUI();a("#empty_list").css({visibility:"visible"});a(".ui-table-position").css({visibility:"visible"});a.utility("showLoadingIndicator",!1)}else c(g),f=parseFloat(a("#paginationMsg").css("width")),g>d?a(".pagination").css({visibility:"hidden"}):(f=parseFloat(a("#paginationMsg").css("width"))+parseFloat(a(".pagination").css("width"))+15,a(".pagination").css({visibility:"visible"})),
a("#recordsLength").css({left:f+"px"}),d>=g?a("#paginationMsg").html("Showing 1-"+g+"  of "+d+" items"):a("#paginationMsg").html("Showing 1-"+d+" of "+d+" items"),a("#pagination-container").css({visibility:"visible"})},3E3);var h=setInterval(function(){b.data.contents.length===b.children[0].group[0].row.length&&(clearInterval(h),f())},300);if(0===a("#recordsLength").length)a("#pagination-container").append("<select id='recordsLength'> <option value='10'>10/Page</option><option value='25' selected='selected'>25/Page</option> <option value='50'>50/Page</option></select>"),
a("#recordsLength").on("change",function(g){var h=parseInt(a("#recordsLength").val());b.selectedPage=1;var k=parseFloat(a("#paginationMsg").css("width"));a("#pagination-container").css({visibility:"hidden"});(new a.actions(b,null,[{method:"Select",category:"ComAction",params:{servicename:b.data.servicename,table:b.data.tablename,where:b.data.wherecond,order:b.data.order,offset:0,limit:h,fields:""}}])).execute();var l=setInterval(function(){0==b.data.contents.offset&&(clearInterval(l),a("#pagination-container").css({visibility:"visible"}),
h>d?a(".pagination").css({visibility:"hidden"}):(k=parseFloat(a("#paginationMsg").css("width"))+parseFloat(a(".pagination").css("width"))+15,a(".pagination").css({visibility:"visible"})),a("#recordsLength").css({left:k+"px"}),d>h&&c(h),f(),d>=h?a("#paginationMsg").html("Showing 1-"+h+" of "+d+" items"):a("#paginationMsg").html("Showing 1-"+d+" of "+d+" items"))},500)});else{a("#pagination-container").css({visibility:"hidden"});var k=parseFloat(a("#paginationMsg").css("width"));g>d?a(".pagination").css({visibility:"hidden"}):
k=parseFloat(a("#paginationMsg").css("width"))+parseFloat(a(".pagination").css("width"))+15;a("#recordsLength").css({left:k+"px"});a("#recordsLength").off("change").on("change",function(g){var h=parseInt(a("#recordsLength").val());b.selectedPage=1;var k=parseFloat(a("#paginationMsg").css("width"));if(h>d)a("#paginationMsg").html("Showing 1-"+d+"  of "+d+" items");else{(new a.actions(b,null,[{method:"Select",category:"ComAction",params:{servicename:b.data.servicename,table:b.data.tablename,where:b.data.wherecond,
order:b.data.order,offset:0,limit:h,fields:""}}])).execute();var l=setInterval(function(){0==b.data.contents.offset&&(clearInterval(l),a("#pagination-container").css({visibility:"visible"}),h>d?a(".pagination").css({visibility:"hidden"}):(k=parseFloat(a("#paginationMsg").css("width"))+parseFloat(a(".pagination").css("width"))+15,a(".pagination").css({visibility:"visible"})),a("#recordsLength").css({left:k+"px"}),c(h),f(),d>=h?a("#paginationMsg").html("Showing 1-"+h+" of "+d+" items"):a("#paginationMsg").html("Showing 1-"+
d+" of "+d+" items"))},500)}})}k=a.mobileweb.getPage(b.name);a.utility("setAppBootingForFirstTime",!1);k.header.applyOverrides();k.footer.applyOverrides();k.toolbartop.applyOverrides(!0);k.toolbarbottom.applyOverrides(!0);void 0!=a.mobileweb.getCurrentPage().children&&0<a.mobileweb.getCurrentPage().children.length&&void 0!=a.mobileweb.getCurrentPage().children[0].group&&b.children[0].group[0].row.length!=a.mobileweb.getCurrentPage().children[0].group[0].row.length&&a.mobileweb.setCurrentPage(k);a.utility("setReverseTransition",
!1)}else a.unblockUI(),a("#empty_list").css({visibility:"visible"}),a(".ui-table-position").css({visibility:"visible"}),a.utility("showLoadingIndicator",!1)})):b.children[0].accordion?(c=b.data.order&&""!==b.data.order?b.data.order:"",(new a.actions(b,null,[{method:"Select",category:"ComAction",reloadStatus:!0,reloadCallback:"reloadDBAccordionView",callingMethod:"reload",params:{servicename:b.data.servicename,table:b.data.tablename,where:a.utility("tokenizeString",b.data.wherecond,b),order:a.utility("tokenizeString",
c,b),offset:0,fields:""}}])).execute()):(new a.actions(b,null,[{method:"Select",category:"ComAction",reloadStatus:!0,reloadCallback:"reloadRemoteListViewPage",callingMethod:"reload",params:{servicename:b.data.servicename,table:b.data.tablename,where:a.utility("tokenizeString",b.data.wherecond,b),order:a.utility("tokenizeString",b.data.order,b),limit:0<a("#recordsLength").length?a("#recordsLength").val():25,offset:0,fields:""}}])).execute())},reloadDBRecordViewPage:function(b,c){a.utility("showLoadingIndicator",
!0);a("#iscroll_"+b.name+"> div:nth-child(2)").remove();var d=a("#"+b.children[0].id+" ul").attr("id");a("#"+d+" li").remove();a("#showmore").remove();"DBTableView"===b.type?void 0!=c&&c?a.createLocalTableViewRows(b,function(b){0!=b.data.contents.length?a.each(b.children[0].group[0].row,function(c,f){b.children[0].group[0].row[c].data.contents[0]=b.data.contents[0];a.createRemoteListPageRow(b,d,b.children[0].group[0].row[c],c,b.children[0].group[0].flexibleHeight,function(b){a(".scroller").find("ul").append(b.getHTML());
b.applyOverrides();b.applyEvents();a.utility("showLoadingIndicator",!1)});c===b.data.contents.length-1&&(c=a.mobileweb.getPage(b.name),a.utility("setAppBootingForFirstTime",!1),c.header.applyOverrides(),c.footer.applyOverrides(),c.toolbartop.applyOverrides(!0),c.toolbarbottom.applyOverrides(!0))}):a.utility("showLoadingIndicator",!1)}):(new a.actions(b,null,[{method:"Select",reloadStatus:!0,reloadCallback:"reloadDBRecordViewPage",category:"DBAction",params:{tablename:b.data.tablename,where:a.utility("tokenizeString",
b.data.wherecond,b),order:a.utility("tokenizeString",b.data.order,b),columns:""},events:[]}])).execute():"RemoteTableView"===b.type&&(void 0!=c&&c?a.createRemoteTableViewRows(b,function(b){0!=b.data.contents.length?a.each(b.children[0].group[0].row,function(c,f){b.children[0].group[0].row[c].data.contents[0]=b.data.contents[0];a.createRemoteListPageRow(b,d,b.children[0].group[0].row[c],c,b.children[0].group[0].flexibleHeight,function(b){a(".scroller").find("ul").append(b.getHTML());b.applyOverrides();
b.applyEvents();a.utility("showLoadingIndicator",!1)});c===b.data.contents.length-1&&(c=a.mobileweb.getPage(b.name),a.utility("setAppBootingForFirstTime",!1),c.header.applyOverrides(),c.footer.applyOverrides(),c.toolbartop.applyOverrides(!0),c.toolbarbottom.applyOverrides(!0))}):a.utility("showLoadingIndicator",!1)}):(new a.actions(b,null,[{method:"Select",category:"ComAction",reloadStatus:!0,reloadCallback:"reloadDBRecordViewPage",callingMethod:"reload",params:{servicename:b.data.servicename,table:b.data.tablename,
where:a.utility("tokenizeString",b.data.wherecond,b),order:a.utility("tokenizeString",b.data.ordercond,b),limit:25,offset:0,fields:""}}])).execute());"RemoteTableViewList"==b.type&&25==b.data.contents.totalRecords&&(c="",c="ja"!=a.utility("detectBrowserLanguage")?"Show More":"\u7d9a\u304d\u3092\u898b\u308b",c='<fieldset id="showmore"> <div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="null" data-iconpos="null" data-theme="c" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c" aria-disabled="false"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">'+
c+'</span></span><input id="showmore" type="button" value="'+c+'" class="ui-btn-hidden" aria-disabled="false"></div> </fieldset>',a("#"+b.children[0].id).append(c));b.iscroll={};b.iscroll=new iScroll(a("#iscroll_"+b.name).get(0),{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}});a("#showmore").bind("click",function(){a.utility("showLoadingIndicator",!0);b.data.contents.loaded=
!1;var c=b.data.contents.length;(new a.actions(b,null,[{method:"Select",category:"ComAction",callback:"loadMoreRecords",params:{servicename:b.data.servicename,table:b.data.tablename,where:b.data.wherecond,order:b.data.order,offset:parseInt(b.data.contents.offset)+25,limit:25,fields:""}}])).execute();var f=setInterval(function(){void 0!=b.data.contents.loaded&&b.data.contents.loaded&&(clearInterval(f),a.createRemoteDBListViewPageRows(b,function(){var f=[];f=b.data.contents[0].constructor==Object?b.data.contents:
b.data.contents[0];if(c<f.length){f=f.length-c;for(var g=0,h=0;h<f;h++){var k=c+h;a.createRow(b,d,b.children[0].group[0].row[k],c+h,function(c){g+=c.getCellHeight();g+=2;b.children[0].group[0].row[k]=c;b.children[0].group[0].row.push(b.children[0].group[0].row[k]);a(".scroller").find("ul").append(b.children[0].group[0].row[k].getHTML().join(""));b.children[0].group[0].row[k].applyOverrides();b.children[0].group[0].row[k].applyEvents()})}a.utility("showLoadingIndicator",!1);a(".scroller").find("ul").unblock();
a(".ui-loader").css({display:"none"});a(".bglayout").css({height:parseFloat(a(".bglayout").css("height").replace("px",""))+g+"px"});a(".scroller").css({height:parseFloat(a(".scroller").css("height").replace("px",""))+g+"px"})}b.iscroll={};a("#iscroll_"+b.name+"> div:nth-child(2)").remove();b.iscroll=new iScroll(a("#iscroll_"+b.name).get(0),{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&
a.preventDefault()}})}),b.data.contents.allRecordsLoaded&&a("#showmore").remove())},300)})},parseCondition:function(b,c,d,f,g){var h=!1;a.each(g,function(g,k){if(!h){var l=!0;a.each(k,function(g,h){if(l)if(-1!=g.indexOf("groupcases"))l=a.utility("parseCondition",b,c,d,f,h);else{a.mobileweb.getCurrentPage().getName()===b.name?a.mobileweb.getCurrentPage():a.mobileweb.getPage(a.mobileweb.getCurrentPage().getName());g="";null==c||"RemoteTableViewList"!==b.type&&"DBTableViewList"!==b.type?g=a.utility("CheckAndGetUIElementValue",
a("[name='"+h.target+"']"),h.target,b):(void 0==c.rownum&&(g=c.getId(),void 0!=c.getId&&(g=g.substr(0,g.lastIndexOf("-")),rowNum=g.substr(g.lastIndexOf("-")+1,g.length),isNaN(parseInt(rowNum))||(c.rownum=rowNum))),void 0!=b.data.contents[c.rownum]&&void 0!=b.data.contents[c.rownum][h.target]?g=b.data.contents[c.rownum][h.target]:void 0!=c.rownum?(g=a.utility("CheckAndGetUIElementValue",a("[name='"+h.target+"-"+c.rownum+"']"),h.target+"-"+c.rownum,b),""==g&&(g=a.utility("CheckAndGetUIElementValue",
a("[name='"+h.target+"']"),h.target,b))):g=a.utility("CheckAndGetUIElementValue",a("[name='"+h.target+"']"),h.target,b));var k={" > ":function(a,b){return a>b}," < ":function(a,b){return a<b}," == ":function(a,b){return a==b}," != ":function(a,b){return a!=b}," <= ":function(a,b){return a<=b}," >= ":function(a,b){return a>=b}};if(void 0==h.targetPage){var n=a.utility("tokenizeString",h.value,b).trim();l=""==h.operator?!1:" == "==h.operator?isNaN(parseFloat(g))||isNaN(parseFloat(n))?k[h.operator](String(g).trim(),
String(n))?!0:!1:k[h.operator](parseFloat(g),parseFloat(n))?!0:!1:" != "==h.operator?k[h.operator](String(g).trim(),String(n))?!0:!1:k[h.operator](parseFloat(g),parseFloat(n))?!0:!1}else""!=h.operator?(g=h.targetValue,targetUI=getUI(h.targetOBJ,c),g=h.targetOBJ.getValue(),l=k[h.operator](parseInt(g),parseInt(n))?k[h.operator](parseFloat(g).toFixed(5),parseFloat(n).toFixed(5))?!0:!1:!1):l=!1}});h=l}});return h},convertSpecialCharacter:function(a){return a},resetMapGlobalVariable:function(){a.mobileweb.__LAT__=
"__LAT__";a.mobileweb.__LONG__="__LONG__";a.mobileweb.__ALT__="__ALT__";a.mobileweb.__ADDRESS__="__ADDRESS__";a.mobileweb.__MAPZOOM__="__MAPZOOM__";a.mobileweb.__GPSDATE__="__GPSDATE__";a.mobileweb.__CENTERLAT__="__CENTERLAT__";a.mobileweb.__CENTERLONG__="__CENTERLONG__"},detectBrowserLanguage:function(){return window.navigator.userLanguage||window.navigator.language},triggerInjectedAction:function(b,c,d,f){switch(b){case "goto":a.each(a.mobileweb.pages,function(b,g){g.pageTitle===c&&(new a.actions(d,
f,[{method:"View",category:"PageAction",params:{name:g.name,transferdata:!0},condition:{},events:{Error:[],Success:[]}}])).execute()})}},getComboBoxDataLoadingStatus:function(){return E},setComboBoxDataLoadingStatus:function(a,b){E[a]={};E[a]={data:[],loadingStatus:!1}},getChildAsJson:function(b,c,d,f){var g=null;switch(b.type){case "BaseView":case "ScrollView":a.each(b.children,function(a,b){if(b.name==d)return g=b,!1});break;case "RemoteTableViewList":case "DBTableViewList":void 0!=f.rownum?a.each(b.data.contents[f.rownum],
function(a,b){if(a==d)return g=child,!1}):(f=f.getName().substring(f.getName().lastIndexOf("-")+1,f.getName().length),a.each(b.data.contents[f],function(a,b){if(a==d)return g=child,!1}))}void 0!=b.toolbartop&&a.each(b.toolbartop.children,function(a,b){if(b[c]==d)return g=b,!1});void 0!=b.toolbarbottom&&a.each(b.toolbarbottom.children,function(a,b){if(b[c]==d)return g=b,!1});void 0!=b.toolbarleft&&a.each(b.toolbarleft.children,function(a,b){if(b[c]==d)return g=b,!1});return g},initSpeechAnalyser:function(b){function c(){R.fftSize=
64;var b=new Uint8Array(R.frequencyBinCount);R.getByteFrequencyData(b);B&&(210>=b[2]?(S+=1,200===S&&(S=0,B=!1,a.utility("stopSoundRecording"))):S=0);window.requestAnimationFrame(c)}window.AudioContext=window.AudioContext||window.webkitAudioContext;P=new AudioContext;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;navigator.cancelAnimationFrame||(navigator.cancelAnimationFrame=navigator.webkitCancelAnimationFrame||navigator.mozCancelAnimationFrame);
navigator.requestAnimationFrame||(navigator.requestAnimationFrame=navigator.webkitRequestAnimationFrame||navigator.mozRequestAnimationFrame);navigator.getUserMedia({audio:!0},function(a){var b=P.createGain();P.createMediaStreamSource(a).connect(b);R=P.createAnalyser();R.fftSize=2048;b.connect(R);zeroGain=P.createGain();zeroGain.gain.value=0;b.connect(zeroGain);zeroGain.connect(P.destination);c()},function(a){console.log(a);console.log("Browser not supported")})},startSoundRecording:function(a){null==
N&&(N=new AudioContext);"suspended"===N.state?N.resume().then(function(){navigator.getUserMedia({audio:!0},function(b){var c=N.createMediaStreamSource(b);V=new Recorder(c,{workerPath:"js/RecordWorker.js"},b,N);B=!0;V.record();H=a},function(a){console.log(a);console.log("Browser not supported")})}):navigator.getUserMedia({audio:!0},function(b){var c=N.createMediaStreamSource(b);V=new Recorder(c,{workerPath:"js/RecordWorker.js"},b,N);B=!0;V.record();H=a},function(a){console.log(a);console.log("Browser not supported")})},
stopSoundRecording:function(){z.showLoadingIndicator(!0);"running"===N.state&&N.suspend().then(function(){V.exportWAV(function(b){V.clear();var c=new FileReader;c.addEventListener("loadend",function(){var b={audio:c.result.toString().replace("data:audio/wav;base64,","")};a.ajax({url:a.mobileweb.baseurl+"/mobileweb/mobile/audio?projectid="+a.mobileweb.pid+"&userid="+a.mobileweb.user+"&seq=1&token=a2b4d4906c3ac6e7dafa1c459e64a310",type:"POST",data:b,success:function(b){z.showLoadingIndicator(!1);a("#"+
H).val(b);a("#"+H).blur();a("#"+H).trigger("VoiceRecognitionEnd")},error:function(a){console.log(a)}})});c.readAsDataURL(b)})})}},ba=function(b,c){var d=[];""!==b&&(b=z.getObject(c,"tablename",b),void 0!=b&&a.each(b.fields,function(a,b){b.pk&&d.push(b.name)}));return d},aa=function(a,b,c){b=b.split("[");for(var d in b)if(-1!==b[d].indexOf("]")){var f=b[d].substring(0,b[d].indexOf("]"));if(c){var g=!1,h;for(h in c)h===f&&(g=!0);g||a.push(f)}else a.push(f)}return a};a.createRow=function(b,c,d,f,g){var h=
{id:c+"-row-"+f,rownum:f,children:new a.uichildren(b,d.children,d.data.contents[0]),backgroundColor:d.backgroundColor,repeatImage:d.repeatImage,data:d.data};0===h.rownum%2?(h.cellBackgroundColor=d.evenRowBackgroundColor,h.cellBackgroundImage=d.evenRowBackgroundImage):(h.cellBackgroundColor=d.oddRowBackgroundColor,h.cellBackgroundImage=d.oddRowBackgroundImage);h.getHTML=function(){return["<li data-icon='",d.icon.style,"' data-corners='false' data-shadow='false' data-iconshadow='true' data-wrapperels='div' data-iconpos='right' data-theme='c' class='ui-btn ui-btn-up-c  ui-li-has-arrow ui-btn-icon-right  ui-li ui-li-last'><div class='ui-btn-inner ui-li'><div class='ui-btn-text'>",
"<a href='#' id='",h.id,"' class='ui-table-padding  ui-link-inherit'>","<div class='ui-table-row-size' style='height: 78px;'>",h.children.getHTML(),"</div>","</a>","<div id='",h.id,"-icon'>","</div>","</div>","false"==d.icon.style?"":"<span class='ui-icon ui-icon-arrow-r ui-icon-shadow' style='z-index: 99;'>&nbsp;</span></div>",,"</li>"]};h.getViewType=function(){return"Row"};h.applyOverrides=function(){h.setCellHeight(d.rowsize);h.children.applyOverrides();h.children.applyEvents();void 0!=h.backgroundColor&&
(a("#"+h.id).css({"background-color":a.attributes("color",h.backgroundColor).getColorCode()}),a(".ui-li>.ui-btn-inner").css({"background-color":a.attributes("color",h.backgroundColor).getColorCode()}));void 0!=h.cellBackgroundColor&&a("#"+h.id).css({"background-color":a.attributes("color",h.cellBackgroundColor).getColorCode()});void 0!=h.cellBackgroundImage&&""!=h.cellBackgroundImage&&(h.repeatImage?a("#"+h.id).css({"z-index":99,"background-image":"url("+a.utility("getImage",h.cellBackgroundImage)+
")","background-color":"white","background-position":"100% 100%","background-repeat":"repeat"}):a("#"+h.id).css({"z-index":99,"background-image":"url("+a.utility("getImage",h.cellBackgroundImage)+")","background-color":"white","background-position":"100% 100%","background-size":"cover"}));if("button"==d.icon.style)a("#"+h.id).parent().siblings().css({"z-index":99,"background-image":"url("+a.utility("getSystemImage","button.png",h.getViewType())+")","background-color":"white","background-position":" 50% 50%",
"background-repeat":"no-repeat no-repeat"});else if("false"!=d.icon.style&&(a("#"+h.id).parent().siblings().css({"z-index":199}),"arrow-r"==d.icon.style)){var c=a.utility("getSystemImage","icons-18-white.png","Image");a("#"+h.id).parent().siblings().css({"background-image":'url("'+c+'")',"background-repeat":"no-repeat no-repeat"})}d.icon.events&&a("#"+h.id+"-icon").css({position:"absolute",top:0,left:b.width*a.mobileweb.device.aspectratio-40,height:d.rowsize*a.mobileweb.device.aspectratio,width:40});
a(".ui-li").css({"border-top-width":"0px","border-bottom-width":"0px"})};h.setCellHeight=function(b){d.rowsize=b;a("#"+h.id+" .ui-table-row-size").css({height:b*a.mobileweb.device.aspectratio})};h.getCellHeight=function(){return d.rowsize*a.mobileweb.device.aspectratio};h.applyEvents=function(){d.icon.events&&d.icon.events.Tap&&(jQuery(a("#"+c+" .ui-icon").get(f)).click(function(){a("#"+h.id+"-icon").click()}),a("#"+h.id+"-icon").click(function(){a.each(d.icon.events.Tap,function(b,c){"PageAction"===
c.category&&a("#"+h.id).addClass("ui-btn-active")});(new a.actions(b,h,d.icon.events.Tap.slice())).execute()}));0==d.events.Tap.length&&a("#"+h.id).mouseup(function(){var b=setInterval(function(){clearInterval(b);a("#"+h.id).blur()},200)});d.events&&d.events.Tap&&a("#"+h.id).bind("tap",function(){void 0!=b.data&&(b.data.contents.currentRow=h.rownum);"INPUT"!==event.target.tagName&&("LABEL"===event.target.tagName?0<event.target.htmlFor.length||(a.each(d.events.Tap,function(b,c){"PageAction"===c.category&&
a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(b,h,d.events.Tap.slice())).execute()):(a.each(d.events.Tap,function(b,c){"PageAction"===c.category&&a("#"+h.id).addClass("ui-btn-active")}),(new a.actions(b,h,d.events.Tap.slice())).execute()))})};g(h);return h};a.reloadRemoteListViewPage=function(b){a.utility("showLoadingIndicator",!0);var c=a("#"+b.children[0].id+" ul").attr("id");a("#"+c+" li").remove();if(0!=b.data.contents.length)for(var d=0;d<b.data.contents.length;d++)b.children[0].group[0].row[d].data.contents[0]=
b.data.contents[d],a.createRemoteListPageRow(b,c,b.children[0].group[0].row[d],d,b.children[0].group[0].flexibleHeight,function(b){a("#"+c).append(b.getHTML());b.applyOverrides();b.applyEvents();a.utility("showLoadingIndicator",!1)});else a.utility("showLoadingIndicator",!1)};a.createShowMorebutton=function(b,c,d){if("RemoteTableViewList"==b.type&&25==b.data.contents.totalRecords||"DBTableViewList"==b.type&&25==b.data.contents.length){var f="";f="ja"!=a.utility("detectBrowserLanguage")?"Show More":
"\u7d9a\u304d\u3092\u898b\u308b";f='<fieldset id="showmore" style="visibility:hidden;max-width:400px;margin:auto"> <div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="null" data-iconpos="null" data-theme="c" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c" aria-disabled="false"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">'+f+'</span></span><input id="showmorebtn" type="button" value="'+f+'" class="ui-btn-hidden" aria-disabled="false"></div> </fieldset>';
a("#"+b.children[0].id).append(f);void 0!=d&&d&&a("#showmore").css({visibility:"visible"})}a(".scroller #showmore").click(function(){a.fn.center=function(){this.css("position","absolute");this.css("top",(a(window).height()-this.height())/2+a(window).scrollTop()+"px");this.css("left",(a(window).width()-this.width())/2+a(window).scrollLeft()+"px");return this};a.blockUI({css:{backgroundColor:"transparent",border:"none"},message:'<div class="spinner"></div>',baseZ:1500,overlayCSS:{backgroundColor:"#D3D3D3",
opacity:.5,cursor:"wait"}});a(".blockUI.blockMsg").center();a("#showmorebtn").prop("disabled",!0);if("RemoteTableViewList"==b.type){a.utility("showLoadingIndicator",!0);var d=a(".scroller").offset(),f=d.top,g=d.left;b.data.contents.loaded=!1;var h=b.data.contents.length;(new a.actions(b,null,[{method:"Select",category:"ComAction",callback:"loadMoreRecords",params:{servicename:b.data.servicename,table:b.data.tablename,where:b.data.wherecond,order:b.data.order,offset:parseInt(b.data.contents.offset)+
25,limit:25,fields:""}}])).execute();var k=setInterval(function(){void 0!=b.data.contents.loaded&&b.data.contents.loaded&&(clearInterval(k),a.createRemoteDBListViewPageRows(b,function(){var d=[];d=b.data.contents[0].constructor==Object?b.data.contents:b.data.contents[0];if(h<d.length){d=d.length-h;for(var f=0,g=0;g<d;g++){var k=h+g;a.createRow(b,c,b.children[0].group[0].row[k],h+g,function(c){f+=c.getCellHeight();f+=2;b.children[0].group[0].row[k]=c;a(".scroller").find("ul").append(c.getHTML().join(""));
c.applyOverrides();c.applyEvents()})}a.utility("showLoadingIndicator",!1);a(".scroller").find("ul").unblock();a(".ui-loader").css({display:"none"});a(".bglayout").css({height:parseFloat(a(".bglayout").css("height").replace("px",""))+f+"px"});a(".scroller").css({height:parseFloat(a(".scroller").css("height").replace("px",""))+f+"px"})}"Desktop"===a.mobileweb.device.type?(a("#iscroll_"+b.name).css({"overflow-y":"scroll","overflow-x":"hidden"}),d=a('<style>$("#iscroll_" '+b.name+")::-webkit-scrollbar-track{-webkit-box-shadow: inset 0 0 16px rgba(,1);border-radius: 10px;background-color: #F5F5F5;}</style>"),
a("html > head").append(d),d=a('<style>$("#iscroll_" '+b.name+")::-webkit-scrollbar{width: 7px;background-color: #F5F5F5;}</style>"),a("html > head").append(d),d=a('<style>$("#iscroll_" '+b.name+")::-webkit-scrollbar-thumb{border-radius: 10px;-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);background-color: #808080;}</style>"),a("html > head").append(d)):(b.iscroll={},a("#iscroll_"+b.name+"> div:nth-child(2)").remove(),b.iscroll=new iScroll(a("#iscroll_"+b.name).get(0),{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=
a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}}));null!=a.utility("getSessionData","offset")&&(d=a.utility("getSessionData","offset"),d=a.parseJSON(d),a.mobileweb.getCurrentPage().getName()==d.page_name&&b.iscroll.scrollTo(0,d.x,1));a.unblockUI();a("#showmorebtn").prop("disabled",!1)}),b.data.contents.allRecordsLoaded&&a("#showmore").remove())},500)}else"DBTableViewList"==b.type&&(a.utility("showLoadingIndicator",!0),d=a(".scroller").offset(),
f=d.top,g=d.left,b.data.contents.loaded=!1,h=b.data.contents.length,(new a.actions(b,null,[{method:"Select",category:"DBAction",callback:"loadMoreRecords",params:{tablename:b.data.tablename,where:b.data.wherecond,order:b.data.order,columns:""}}])).execute(),k=setInterval(function(){clearInterval(k);a.createRemoteDBListViewPageRows(b,function(){var d=[];d=b.data.contents[0].constructor==Object?b.data.contents:b.data.contents[0];var h=d.length-a(".scroller").find("ul").children("li").length;h=25<h?
25:h;0==h&&a("#showmore").remove();for(var k=0,l=0;l<h;l++){var m=a(".scroller").find("ul").children("li").length;if(m>=d.length){a("#showmore").remove();return}a.createRow(b,c,b.children[0].group[0].row[m],h+l,function(c){k+=c.getCellHeight();k+=2;b.children[0].group[0].row[m]=c;a(".scroller").find("ul").append(b.children[0].group[0].row[m].getHTML().join(""));b.children[0].group[0].row[m].applyOverrides();b.children[0].group[0].row[m].applyEvents()})}a.utility("showLoadingIndicator",!1);a(".scroller").find("ul").unblock();
a(".ui-loader").css({display:"none"});a(".bglayout").css({height:parseFloat(a(".bglayout").css("height").replace("px",""))+k+"px"});a(".scroller").css({height:parseFloat(a(".scroller").css("height").replace("px",""))+k+"px"});a(".scroller").offset();var n=setInterval(function(){clearInterval(n);a(".scroller").offset({top:f,left:g});a(".scroller").offset()},400);"Desktop"===a.mobileweb.device.type?a("#iscroll_"+pagedef.name).css({"overflow-y":"scroll","overflow-x":"hidden"}):(b.iscroll={},a("#iscroll_"+
b.name+"> div:nth-child(2)").remove(),b.iscroll=new iScroll(a("#iscroll_"+b.name).get(0),{bounceLock:!0,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}}))});a.unblockUI();a("#showmore").prop("disabled",!1)},300))})};a.createRemoteListPageRow=function(b,c,d,f,g,h){var k={id:c+"-row-"+f,rownum:f,children:new a.uichildren(b,d.children,d.data.contents[0]),backgroundColor:d.backgroundColor,
isFlexible:g,data:d.data};0===k.rownum%2?(k.cellBackgroundColor=d.oddRowBackgroundColor,k.cellBackgroundImage=d.oddRowBackgroundImage):(k.cellBackgroundColor=d.evenRowBackgroundColor,k.cellBackgroundImage=d.evenRowBackgroundImage);k.getHTML=function(){return void 0!=d.icon&&"false"!=d.icon.style?["<li data-icon='",d.icon.style,"' data-corners='false' data-shadow='false' data-iconshadow='true' data-wrapperels='div' data-iconpos='right' data-theme='c' class='ui-btn ui-btn-up-c ui-btn-icon-right ui-li-has-arrow ui-li ui-li-last'><div class='ui-btn-inner ui-li'><div class='ui-btn-text'><a href='#' id='",
k.id,"' class='ui-table-padding  ui-link-inherit'><div class='ui-table-row-size' style='visibility:hidden'>",k.children.getHTML(),"</div></a></div><span class='ui-icon ui-icon-arrow-r ui-icon-shadow' style='z-index: 99;'>&nbsp;</span></div><div id='",k.id,"-icon'></div></li>"].join(""):["<li data-icon='",d.icon.style,"' data-corners='false' data-shadow='false' data-iconshadow='true' data-wrapperels='div' data-iconpos='right' data-theme='c' class='ui-btn ui-btn-up-c ui-btn-icon-right ui-li-has-arrow ui-li ui-li-last'><div class='ui-btn-inner ui-li'><div class='ui-btn-text'><a href='#' id='",
k.id,"' class='ui-table-padding  ui-link-inherit'><div class='ui-table-row-size' style='visibility:hidden'>",k.children.getHTML(),"</div></a></div></div><div id='",k.id,"-icon'></div></li>"].join("")};k.getViewType=function(){return"Row"};k.applyOverrides=function(){k.setCellHeight(d.rowsize);k.children.applyOverrides();k.children.applyEvents();a("#"+k.id+" .ui-table-row-size").css({visibility:"visible"});void 0!=k.backgroundColor&&(a("#"+k.id).css({"background-color":a.attributes("color",k.backgroundColor).getColorCode()}),
a(".ui-li>.ui-btn-inner").css({"background-color":a.attributes("color",k.backgroundColor).getColorCode()}));void 0!=k.cellBackgroundColor&&a("#"+k.id).css({"background-color":a.attributes("color",k.cellBackgroundColor).getColorCode()});void 0!=k.cellBackgroundImage&&""!=k.cellBackgroundImage&&(k.repeatImage?a("#"+k.id).css({"z-index":99,"background-image":"url("+a.utility("getImage",k.cellBackgroundImage)+")","background-color":"white","background-position":"100% 100%","background-repeat":"repeat"}):
a("#"+k.id).css({"z-index":99,"background-image":"url("+a.utility("getImage",k.cellBackgroundImage)+")","background-color":"white","background-position":"100% 100%","background-size":"cover"}));if("button"==d.icon.style)a("#"+k.id).parent().siblings().css({"z-index":99,"background-image":"url("+a.utility("getSystemImage","button.png",k.getViewType())+")","background-color":"white","background-position":" 50% 50%","background-repeat":"no-repeat no-repeat"});else if("false"!=d.icon.style&&(a("#"+k.id).parent().siblings().css({"z-index":199}),
"arrow-r"==d.icon.style)){var c=a.utility("getSystemImage","icons-18-white.png","Image");a("#"+k.id).parent().siblings().css({"background-image":'url("'+c+'")',"background-repeat":"no-repeat no-repeat"})}d.icon.events&&a("#"+k.id+"-icon").css({position:"absolute",top:0,left:b.width*a.mobileweb.device.aspectratio-40,height:d.rowsize*a.mobileweb.device.aspectratio,width:40});a(".ui-li").css({"border-top-width":"0px","border-bottom-width":"0px"});var f=[];a.each(k.children,function(a,b){k.isFlexible&&
"TextArea"===b.getViewType()&&b.flexibleHeight&&k.setFlexibleHeight(b,f)})};k.setFlexibleHeight=function(b,c){a("#"+b.getId()).css({"padding-bottom":""});a("#"+b.getId()).addClass("ui-input-text");a("#"+b.getId()).addClass("autoExpand");a("#"+b.getId()).css({height:"initial","max-height":"",overflow:"hidden"});var d=k.getCellHeight()-(parseInt(b.frame.getFrame().y)+parseInt(b.frame.getFrame().height))*a.mobileweb.device.aspectratio;a("#"+b.getId()).css({bottom:d+"px"});d=document.getElementById(b.getId());
if(null!=d){var f=parseInt(window.getComputedStyle(d).height,10)-d.clientHeight;d.style.height=0;f=Math.max(d.scrollHeight,d.scrollHeight+f);d.style.height=f+"px";d=k.getCellHeight()-parseInt(b.frame.getFrame().height)*a.mobileweb.device.aspectratio+f;var g=parseInt(b.frame.getFrame().y);var h=parseInt(b.frame.getFrame().x);var l=parseInt(b.frame.getFrame().height);a.each(k.children,function(b,c){"TextArea"!=c.getViewType()&&(parseInt(c.frame.getFrame().y)>=g+l?(b=k.getCellHeight()-(parseInt(c.frame.getFrame().y)+
parseInt(c.frame.getFrame().height))*a.mobileweb.device.aspectratio,a("#"+c.getId()).css({top:""}),a("#"+c.getId()+"_p").css({top:""}),a("#"+c.getId()).css({bottom:b}),a("#"+c.getId()+"_p").css({bottom:b})):parseInt(c.frame.getFrame().y)>=g&&parseInt(c.frame.getFrame().x)>=h&&(b=k.getCellHeight()-(parseInt(c.frame.getFrame().y)+parseInt(c.frame.getFrame().height))*a.mobileweb.device.aspectratio,a("#"+c.getId()).css({top:""}),a("#"+c.getId()).css({bottom:b})))});c.push(d);d=Math.max.apply(Math,c);
a("#"+k.id).css({height:d+"px"})}};k.setCellHeight=function(b){d.rowsize=b;a("#"+k.id+" .ui-table-row-size").css({height:b*a.mobileweb.device.aspectratio})};k.getCellHeight=function(){return d.rowsize*a.mobileweb.device.aspectratio};k.applyEvents=function(){d.icon.events&&d.icon.events.Tap&&(jQuery(a("#"+c+" .ui-icon").get(f)).click(function(){a("#"+k.id+"-icon").click()}),a("#"+k.id+"-icon").click(function(){void 0!=b.data&&(b.data.contents.currentRow=k.rownum);a.each(d.icon.events.Tap,function(b,
c){"PageAction"===c.category&&a("#"+k.id).addClass("ui-btn-active")});void 0!=b.data&&(b.data.contents.currentRow=k.rownum);(new a.actions(b,k,d.icon.events.Tap.slice())).execute()}));0==d.events.Tap.length&&a("#"+k.id).mouseup(function(){var b=setInterval(function(){clearInterval(b);a("#"+k.id).blur()},200)});if(d.events){var g=!1;d.events.Tap&&a("#"+k.id).bind("tap",function(){void 0!=b.data&&(b.data.contents.currentRow=k.rownum);if(g)g=!1,clearTimeout(alreadyclickedTimeout);else if(g=!0,alreadyclickedTimeout=
setTimeout(function(){g=!1},300),"INPUT"!==event.target.tagName)if("LABEL"===event.target.tagName)0<event.target.htmlFor.length||(a.each(d.events.Tap,function(b,c){"PageAction"===c.category&&a("#"+k.id).addClass("ui-btn-active")}),(new a.actions(b,k,JSON.parse(JSON.stringify(d.events.Tap).slice()))).execute());else{a.each(d.events.Tap,function(b,c){"PageAction"===c.category&&a("#"+k.id).addClass("ui-btn-active")});var c=!0;"TEXTAREA"!==event.target.tagName||event.target.readOnly||(c=!1);"IMG"===event.target.tagName&&
"draggable"===event.target.className&&(c=!1);"ui-btn-text"===event.target.className&&(c=!1);c&&(new a.actions(b,k,JSON.parse(JSON.stringify(d.events.Tap).slice()))).execute()}});var h=!1;if(d.events.flickRL)a("#"+k.id).on("swipeleft",function(c){void 0!=b.data&&(b.data.contents.currentRow=k.rownum);if(h)h=!1,clearTimeout(alreadySwipedTimeout);else if(h=!0,alreadySwipedTimeout=setTimeout(function(){h=!1},300),"INPUT"!==c.target.tagName)if("LABEL"===c.target.tagName)0<c.target.htmlFor.length||(a.each(d.events.flickRL,
function(b,c){"PageAction"===c.category&&a("#"+k.id).addClass("ui-btn-active")}),(new a.actions(b,k,JSON.parse(JSON.stringify(d.events.flickRL).slice()))).execute());else{a.each(d.events.flickRL,function(b,c){"PageAction"===c.category&&a("#"+k.id).addClass("ui-btn-active")});var f=!0;"TEXTAREA"!==c.target.tagName||c.target.readOnly||(f=!1);"IMG"===c.target.tagName&&"draggable"===c.target.className&&(f=!1);f&&(new a.actions(b,k,JSON.parse(JSON.stringify(d.events.flickRL).slice()))).execute()}});if(d.events.flickLR)a("#"+
k.id).on("swiperight",function(c){void 0!=b.data&&(b.data.contents.currentRow=k.rownum);if(h)h=!1,clearTimeout(alreadySwipedTimeout);else if(h=!0,alreadySwipedTimeout=setTimeout(function(){h=!1},300),"INPUT"!==c.target.tagName)if("LABEL"===c.target.tagName)0<c.target.htmlFor.length||(a.each(d.events.flickLR,function(b,c){"PageAction"===c.category&&a("#"+k.id).addClass("ui-btn-active")}),(new a.actions(b,k,JSON.parse(JSON.stringify(d.events.flickLR).slice()))).execute());else{a.each(d.events.flickLR,
function(b,c){"PageAction"===c.category&&a("#"+k.id).addClass("ui-btn-active")});var f=!0;"TEXTAREA"!==c.target.tagName||c.target.readOnly||(f=!1);"IMG"===c.target.tagName&&"draggable"===c.target.className&&(f=!1);f&&(new a.actions(b,k,JSON.parse(JSON.stringify(d.events.flickLR).slice()))).execute()}})}};h(k)};a.createAccordionListGroup=function(b,c,d,f,g){var h={id:c.id,grpnum:d,state:"open",row:[]};a.each(c.row,function(a,b){h.row.push(b)});h.getHTML=function(){var f=[],g=[],k=b.data.groupby.replace("[",
"").replace("]","");for(j=0;j<b.data.contents.length;j++)f.push(b.data.contents[j][k]);a.each(f,function(a,b){-1===g.indexOf(b)&&g.push(b)});g.sort();c.header=0!=g.length?g[d]+" ("+h.row.length+") ":"";f="Grouped"==b.children[0].tablestyle?"style='padding:3px;'":"";k="Grouped"==b.children[0].tablestyle?"true":"false";var l="";l=["<div data-role='collapsible' data-collapsed='false' class='ui-collapsible ui-collapsible-inset' style='visibility:hidden' >"];""!=c.header&&(l=l.concat(["<h2 class='ui-collapsible-heading' id='",
h.id,"'>","<a href='#' class='ui-collapsible-heading-toggle ui-btn ui-fullsize ui-btn-icon-left ui-corner-top ui-corner-bottom ui-btn-up-c' data-corners='false' data-shadow='false' data-iconshadow='true' data-wrapperels='span' data-icon='plus' data-iconpos='left' data-theme='c' data-mini='false' >","<span class='ui-btn-inner ui-corner-top ui-corner-bottom'>","<span class='ui-btn-text'>",c.header,"<span class='ui-collapsible-heading-status'>click to collapse contents</span>","</span>","<span class='ui-icon'>&nbsp;</span>",
"</span>","</a>","</h2>"]),l=l.concat(["<div class='ui-collapsible-content' aria-hidden='false'>"]));l=l.concat(["<ul id='",h.id,"' class='ui-listview' data-role='listview' data-split-theme='d' data-inset='",k,"' "+f+">"]);a.each(h.row,function(a,b){l=l.concat(b.getHTML())});l=l.concat(["</ul>"]);l=c.footer&&0<c.footer.length?l.concat(["<div id='",h.id,"-footer'>","<p class='ui-table-footer-text'>",c.footer,"&nbsp</p>","</div>"]):l.concat(["<div id='",h.id,"-footer'>","</div>"]);l=l.concat(["</div>"]);
return l.join("")};h.applyOverrides=function(){"RemoteTableViewList"!==b.type&&"TableViewList"!==b.type&&"DBTableViewList"!==b.type||a.utility("showLoadingIndicator",!0);a("#"+h.id+"-header .ui-table-header-text").css({"font-size":16*a.mobileweb.device.aspectratio,"margin-left":10*a.mobileweb.device.aspectWratio});a("#"+h.id+"-footer .ui-table-footer-text").css({"font-size":16*a.mobileweb.device.aspectratio,"margin-left":10*a.mobileweb.device.aspectWratio,"margin-top":1*a.mobileweb.device.aspectHratio});
"TableViewList"!==b.type&&"DBTableViewList"!==b.type&&"RemoteTableViewList"!==b.type||a("#"+h.id+" .ui-icon").css({"z-index":99});var c="RemoteTableViewList"===b.type||"TableViewList"===b.type||"DBTableViewList"===b.type?1250:100;if("DBTableView"==b.type||"RemoteTableView"==b.type){var g=a.utility("getObject",a.mobileweb.pages,"name",b.parent);if(a.isEmptyObject(g)||void 0==g||"DBTableViewList"!=g.type&&"RemoteTableViewList"!=g.type)c=700}setTimeout(function(){a.each(h.row,function(a,b){b.applyOverrides()});
"RemoteTableViewList"!==b.type&&"TableViewList"!==b.type&&"DBTableViewList"!==b.type||a.utility("showLoadingIndicator",!1);"TableViewList"!==b.type&&"DBTableView"!==b.type&&"DBTableViewList"!==b.type&&"RemoteTableViewList"!==b.type||"Grouped"!=b.children[0].tablestyle||a("#"+h.id).css({width:(b.width-40)*a.mobileweb.device.aspectWratio,"margin-right":20*a.mobileweb.device.aspectWratio,"margin-left":20*a.mobileweb.device.aspectWratio});if("TableView"===b.type||"DBTableViewList"===b.type||"RemoteTableViewList"==
b.type){var c=0;a("#"+h.id).css("padding")&&(c=2*a("#"+h.id).css("padding").replace("px",""));if(b.children[0].accordion){a("div[data-role='collapsible']").css({width:b.width*a.mobileweb.device.aspectWratio,"margin-top":"0px","margin-bottom":4*a.mobileweb.device.aspectHratio});a(".ui-collapsible-content").css({padding:"0px 0px 0px",display:"block"});a(".ui-collapsible-content > .ui-listview").css({margin:"0px 0px 0px"});a(".ui-collapsible-heading-toggle").css({"border-radius":"1px"});var g=b.children[0].accordionheader;
g&&(a(".ui-collapsible-heading-toggle").css({background:a.attributes("color",g.bgcolor).getColorCode(),color:a.attributes("color",g.textcolor).getColorCode()}),a(".ui-collapsible-heading-toggle").css({height:g.height*a.mobileweb.device.aspectHratio,padding:"0px 0px 0px"}),a(".ui-collapsible-heading-toggle > span").css({height:g.height*a.mobileweb.device.aspectHratio,padding:"0px 0px 0px"}),a(".ui-collapsible-heading-toggle > span > span.ui-btn-text").css({"font-size":16*a.mobileweb.device.aspectratio,
top:(g.height-16)*a.mobileweb.device.aspectHratio/2}),"right"==g.iconposition?(a(".ui-collapsible-heading-toggle > span").css({"padding-left":"12px"}),a(".ui-collapsible-heading-toggle > span > span.ui-icon").css({right:"10px",left:"auto"})):a(".ui-collapsible-heading-toggle > span").css({"padding-left":"40px"}),g.openicon?(a(".ui-collapsible-heading > a > span > span.ui-icon").attr("class","ui-icon"),g=a.utility("getImage",a.utility("tokenizeString",g.openicon,b)),a(".ui-collapsible-heading > a > span > span.ui-icon").css({"background-image":"url("+
g+")"}),a(".ui-collapsible-heading > a > span > span.ui-icon").css({"background-size":"18px 18px"})):a(".ui-collapsible-heading > a > span > span.ui-icon").attr("class","ui-icon ui-icon-shadow ui-icon-minus"));"Grouped"!=b.children[0].tablestyle&&(c=0);a("#"+h.id).css({width:b.width*a.mobileweb.device.aspectWratio-c,margin:"0px"})}else"Grouped"!=b.children[0].tablestyle&&(c=0),a("#"+h.id).css({width:b.width*a.mobileweb.device.aspectWratio-c+"px","margin-left":"0px"})}void 0!=a("#iscroll_"+b.name)[0]&&
(c=a("#iscroll_"+b.name)[0].clientHeight,0<c&&c<a(".scroller")[0].scrollHeight&&a(".bglayout").css({height:a("#iscroll_"+b.name)[0].clientHeight+"px"}));a(".ui-collapsible").get(d)&&(f[0]=0==d?a(".ui-collapsible").get(d).clientHeight+4:f[0]+a(".ui-collapsible").get(d).clientHeight+4,parseInt(a(".scroller").css("height").replace("px",""))<f[0]&&a(".scroller").css({height:f[0]+"px"}));a(".ui-collapsible").css({visibility:"visible"});a(".ui-table-position").css({visibility:"visible"})},c)};h.applyEvents=
function(){a.each(h.row,function(a,b){b.applyEvents()});a(".ui-collapsible-heading").click(function(c){if(h.id==a(this).attr("id")){c=a(".ui-collapsible").get(d).clientHeight;h.state="open"==h.state?"close":"open";var f=b.children[0].accordionheader;if(f){var g=a.utility("getImage",a.utility("tokenizeString",f.closeicon,b));f=a.utility("getImage",a.utility("tokenizeString",f.openicon,b));"close"==h.state?(""!=g?(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class","ui-icon"),a("#"+
a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":"url("+g+")"}),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-size":"18px 18px"})):(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":""}),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class","ui-icon ui-icon-shadow ui-icon-plus")),a("ul[id='"+h.id+"']").parent().css({display:"none"})):(""!=f?(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class",
"ui-icon"),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":"url("+f+")"}),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-size":"18px 18px"})):(a("#"+a(this).attr("id")+" > a > span > span.ui-icon").css({"background-image":""}),a("#"+a(this).attr("id")+" > a > span > span.ui-icon").attr("class","ui-icon ui-icon-shadow ui-icon-minus")),a("ul[id='"+h.id+"']").parent().css({display:"block"}))}g=a(".ui-collapsible").get(d).clientHeight;c=parseInt(a(".scroller").css("height").replace("px",
""))-c+g;c>parseInt(a(".bglayout").css("height").replace("px",""))&&a(".scroller").css({height:c+"px"})}})};g(h)};a.utility=function(b){if(z[b])return void 0==z.data&&z.init(),z[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)a.error("Method "+b+" does not exist on jQuery.utility");else return z.init.apply(this,arguments)};(function(a){a.utility("clearSessionData");"console"in window||(window.console={},window.console.log=function(a){return a});"onorientationchange"in
window?a(window).bind("orientationchange",function(){a.mobileweb.setDeviceScreen();a.mobileweb.device.orientation=document.documentElement.clientWidth>document.documentElement.clientHeight?"landscape-right":"portrait-up"}):a(window).bind("hashchange",function(b,c){-1!=location.hash.search("orientation")&&(b=a.utility("getURLParameterValue","orientation"),a.mobileweb.device.orientation!=b&&(a.mobileweb.setDeviceScreen(),a.mobileweb.device.orientation=b,a.mobileweb.getCurrentPage().refreshDisplay()))});
a.utility("showlogs");a.utility("log","[INIT] Initializing the mobileweb...")})(jQuery)})(jQuery);(function(a){a.remotedblistpage=function(a){return listpage};a.getData=function(l){return(new a.actions(l,null,[{method:"Select",category:"ComAction",params:{servicename:l.data.servicename,table:l.data.tablename,where:l.data.wherecond,order:l.data.order,limit:25,offset:0,fields:""}}])).execute()};a.createPageTemplate=function(l){var g=l.children[0].group[0],k=[];0!=l.data.contents.rows&&a.each(l.data.contents,function(d,b){if(25>d){var h={rownum:d,rowsize:g.template.rowsize,backgroundColor:g.template.backgroundColor,
icon:g.template.icon,data:{contents:[b]},events:g.template.events,children:[]};switch(l.children[0].style){case "default":h.children.push({id:"ui-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}});""!==g.template.image&&(h.children[0].frame.x=50,h.children.push({id:"ui-group-0-img-"+d,value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));
break;case "subtitle":h.children.push({id:"ui-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:7,width:250,height:20},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:10,y:22,width:250,height:20},font:{size:12,align:"left",color:{name:"gray"}}});""!==g.template.image&&(h.children[0].frame.x=50,h.children[1].frame.x=50,h.children.push({id:"ui-group-0-img-"+d,
value:"",template:g.template.image,name:"",viewtype:"Image",frame:{x:10,y:7,width:30,height:30}}));break;case "rightaligned":h.children.push({id:"ui-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:13,width:150,height:20},font:{size:16,align:"left",color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:l.width-185,y:16,width:150,height:20},font:{size:12,align:"right",color:{name:"SteelBlue"}}});
break;case "contactform":h.children.push({id:"ui-group-0-main-"+d,name:"",value:"",template:g.template.maintext,viewtype:"Label",frame:{x:10,y:17,width:70,height:20},font:{size:16,align:"right",color:{name:"black"}}},{id:"ui-group-0-sub-"+d,name:"",value:"",template:g.template.subtext,viewtype:"Label",frame:{x:90,y:17,width:200,height:20},font:{size:12,align:"left",color:{name:"SteelBlue"}}});break;case "custom":a.each(g.template.children,function(b,g){h.children.push(a.utility("clone",g));h.children[b].id=
["ui-group-0-",d,"-",b].join("")})}k.push(h)}});g.row=k;page.children=new a.uichildren(l,l.children,null)};a.showRemoteDBListPage=function(a){}})(jQuery);
